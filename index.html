<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    
    <!-- Mobile Optimization Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Menopause Toolkit">
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#FF6B9D">
    
    <title>Menopause Wellness Toolkit™ - Interactive Guide</title>
    <style>
        :root {
            --primary-green: #FF6B9D;
            --secondary-green: #E6D5E8;
            --light-green: #FFD8CC;
            --bg-cream: #FFF9F3;
            --text-dark: #6B5B6B;
            --text-medium: #8D7A8D;
            --white: #FFFFFF;
            --shadow: rgba(233, 30, 99, 0.15);
            --nervous: #9B7EBD;
            --metabolic: #FF9F7F;
            --urogenital: #FF69B4;
            --musculoskeletal: #8EBFB5;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #FAF8F3 0%, #E8F3E8 100%);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* ===== WELCOME SCREEN ===== */
        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem;
            text-align: center;
            background: linear-gradient(135deg, var(--bg-cream) 0%, #E8F0E4 50%, var(--light-green) 100%);
            position: relative;
            overflow: hidden;
        }

        .welcome-screen::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(156, 175, 136, 0.15) 0%, transparent 70%);
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(-20px, -20px) scale(1.1); }
        }

        .welcome-content {
            max-width: 700px;
            position: relative;
            z-index: 1;
            animation: fadeInUp 1s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes sparkle {
            0%, 100% {
                opacity: 0.3;
                transform: scale(1) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: scale(1.3) rotate(180deg);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) translateX(0);
            }
            33% {
                transform: translateY(-20px) translateX(10px);
            }
            66% {
                transform: translateY(10px) translateX(-10px);
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                transform: scale(1);
            }
        }

        .welcome-logo {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .welcome-title {
            font-size: 2.8rem;
            font-weight: 700;
            color: #E91E63;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-medium);
            margin-bottom: 2.5rem;
            font-weight: 300;
        }

        .welcome-card-count {
            background: linear-gradient(135deg, #FF69B4, #FF85C1);
            color: #2C3E50;
            padding: 1.5rem 3rem;
            border-radius: 20px;
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 1rem;
            box-shadow: 0 8px 20px rgba(255, 192, 217, 0.4);
            animation: slideIn 1s ease-out 0.3s both;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .welcome-description {
            font-size: 1.1rem;
            color: var(--text-medium);
            margin-bottom: 2.5rem;
            line-height: 1.8;
            animation: slideIn 1s ease-out 0.5s both;
        }

        /* WELCOME MENU */
        .welcome-menu {
            margin-bottom: 2.5rem;
            animation: slideIn 1s ease-out 0.7s both;
        }

        .welcome-menu-title {
            font-size: 1.4rem;
            color: #E91E63;
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .welcome-menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
            justify-content: center;
        }
        
        /* Center single items in grid */
        .welcome-menu-grid:has(.welcome-menu-item:only-child) {
            grid-template-columns: minmax(160px, 300px);
            justify-content: center;
        }

        .welcome-menu-item {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid transparent;
            border-radius: 16px;
            padding: 1.5rem 1rem;
            text-align: center;
            text-decoration: none;
            color: var(--text-dark);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            cursor: pointer;
        }

        .welcome-menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(116, 139, 117, 0.25);
            border-color: var(--secondary-green);
            background: rgba(255, 255, 255, 1);
        }

        .welcome-menu-item:active {
            transform: translateY(-3px);
        }
        
        /* SOS CARDS - FORCE UNIFORM SIZE ON ALL DEVICES */
        div.sos-card[data-relief] {
            min-height: 220px !important;
            max-height: 220px !important;
            height: 220px !important;
            display: flex !important;
            flex-direction: column !important;
            justify-content: space-between !important;
            align-items: center !important;
            padding: 1.5rem 1rem !important;
            box-sizing: border-box !important;
            overflow: hidden !important;
        }
        
        div.sos-card[data-relief] > div:first-child {
            flex-shrink: 0 !important;
            margin-bottom: 0.8rem !important;
            font-size: 2.5rem !important;
            line-height: 1 !important;
        }
        
        div.sos-card[data-relief] h3 {
            margin: 0 0 0.5rem 0 !important;
            flex-shrink: 0 !important;
            font-size: 1.2rem !important;
            line-height: 1.2 !important;
        }
        
        div.sos-card[data-relief] p {
            margin: 0 !important;
            font-size: 0.85rem !important;
            line-height: 1.3 !important;
            flex-grow: 1 !important;
            display: flex !important;
            align-items: center !important;
            text-align: center !important;
        }

        .menu-icon {
            font-size: 2.5rem;
            margin-bottom: 0.3rem;
        }

        .menu-label {
            font-size: 1.05rem;
            font-weight: 600;
            color: #E91E63;
        }

        .menu-description {
            font-size: 0.85rem;
            color: var(--text-medium);
            opacity: 0.8;
        }

        .welcome-or-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2rem 0;
            color: var(--text-medium);
            opacity: 0.6;
            animation: fadeIn 1s ease-out 0.9s both;
        }

        .welcome-or-divider::before,
        .welcome-or-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: linear-gradient(to right, transparent, var(--text-medium), transparent);
            margin: 0 1rem;
        }

        .welcome-or-divider span {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .welcome-features {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 3rem;
            animation: slideIn 1s ease-out 0.7s both;
        }

        .welcome-feature {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 1rem 1.5rem;
            border-radius: 50px;
            font-size: 1rem;
            color: var(--text-dark);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .welcome-feature:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .welcome-feature-icon {
            font-size: 1.3rem;
        }

        .welcome-start-btn {
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-green));
            color: #2C3E50;
            border: none;
            padding: 1.2rem 3.5rem;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(116, 139, 117, 0.4);
            transition: all 0.3s ease;
            animation: slideIn 1s ease-out 0.9s both;
            position: relative;
            overflow: hidden;
        }

        .welcome-start-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .welcome-start-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .welcome-start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(116, 139, 117, 0.5);
        }

        .welcome-start-btn:active {
            transform: translateY(-1px);
        }

        .welcome-disclaimer {
            margin-top: 2rem;
            font-size: 0.9rem;
            color: var(--text-medium);
            opacity: 0.8;
            animation: fadeIn 1s ease-out 1.1s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 0.8; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        /* Hide toolkit initially */
        .toolkit-container {
            display: none;
        }

        .toolkit-container.active {
            display: block;
            animation: fadeInUp 0.6s ease-out;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        h1 {
            color: #E91E63;
            margin-bottom: 0.5rem;
            text-align: center;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(116, 139, 117, 0.1);
        }

        .subtitle {
            text-align: center;
            color: var(--text-medium);
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        /* SEARCH BAR */
        .search-bar-container {
            max-width: 600px;
            margin: 0 auto 2rem;
            animation: fadeInUp 0.6s ease-out 0.3s both;
            position: relative;
            z-index: 100;
        }

        .search-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            background: white;
            border: 2px solid var(--light-green);
            border-radius: 50px;
            padding: 0.5rem 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            z-index: 101;
        }

        .search-input-wrapper:focus-within {
            border-color: var(--secondary-green);
            box-shadow: 0 6px 20px rgba(116, 139, 117, 0.2);
            transform: translateY(-2px);
        }

        .search-dropdown {
            position: absolute;
            top: calc(100% + 0.5rem);
            left: 0;
            right: 0;
            background: white;
            border: 3px solid var(--secondary-green);
            border-radius: 16px;
            max-height: 350px;
            overflow-y: auto;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);
            z-index: 10000;
            display: none;
            pointer-events: auto;
        }

        .search-dropdown.show {
            display: block;
            animation: dropdownSlide 0.3s ease-out;
        }

        @keyframes dropdownSlide {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dropdown-item {
            padding: 1.2rem 1.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border-bottom: 2px solid rgba(156, 175, 136, 0.2);
            display: flex;
            align-items: center;
            gap: 1rem;
            user-select: none;
            background: white;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover,
        .dropdown-item:focus {
            background: linear-gradient(135deg, rgba(156, 175, 136, 0.2), rgba(200, 213, 185, 0.25));
            padding-left: 2rem;
            outline: none;
        }

        .dropdown-item-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .dropdown-item-text {
            flex: 1;
        }

        .dropdown-item-title {
            font-weight: 600;
            color: #E91E63;
            margin-bottom: 0.2rem;
        }

        .dropdown-item-system {
            font-size: 0.85rem;
            color: var(--text-medium);
            opacity: 0.8;
        }

        .dropdown-no-results {
            padding: 1.5rem;
            text-align: center;
            color: var(--text-medium);
        }

        .search-icon {
            font-size: 1.3rem;
            margin-right: 0.8rem;
        }

        .search-input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 1rem;
            color: var(--text-dark);
            background: transparent;
            padding: 0.75rem 0;
        }

        .search-input::placeholder {
            color: var(--text-medium);
            opacity: 0.6;
        }

        .search-hint {
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-medium);
            margin-top: 0.5rem;
            opacity: 0.7;
        }

        .flashcard-container {
            perspective: 1000px;
            margin-bottom: 2rem;
            position: relative; /* Ensure proper positioning context */
        }

        .flashcard {
            position: relative;
            width: 100%;
            height: 550px;
            cursor: pointer;
            filter: drop-shadow(0 8px 24px rgba(116, 139, 117, 0.2));
            margin: 0; /* Remove any default margins */
        }

        /* Taller cards for supplements section with more content */
        #supplementFlashcard {
            height: 600px;
            min-height: 600px;
        }

        .flashcard:hover {
            transform: translateY(-5px) scale(1.01);
            transition: all 0.3s ease;
        }

        .flashcard-face {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            border-radius: 24px;
            padding: 2.5rem;
            padding-top: 2.5rem !important; /* Force top padding */
            overflow-y: auto;
            overflow-x: hidden;
            transition: opacity 0.3s ease, transform 0.6s ease;
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
            box-sizing: border-box; /* Include padding in height calculation */
            display: block; /* Force block display for Firefox */
        }
        
        /* Firefox-specific fix */
        @-moz-document url-prefix() {
            .flashcard-face {
                display: block !important;
            }
        }

        .flashcard-front {
            background: linear-gradient(135deg, #FFFFFF 0%, #F5F9F5 100%);
            border: 4px solid #E91E63;
            box-shadow: inset 0 2px 8px rgba(255, 255, 255, 0.5);
            opacity: 1;
            pointer-events: auto;
            z-index: 2;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        .flashcard-back {
            background: linear-gradient(135deg, #F5F0F8 0%, #FFF5F9 100%);
            color: #2C3E50;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.1);
            opacity: 0;
            pointer-events: none;
            z-index: 1;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            vertical-align: top; /* Firefox fix */
        }

        /* CRITICAL: Ensure back content starts at top with no extra spacing */
        .flashcard-back > * {
            position: static !important; /* Reset any positioning */
            vertical-align: top; /* Firefox fix */
        }
        
        .flashcard-back > *:first-child {
            margin-top: 0 !important;
            padding-top: 0 !important;
        }

        .flashcard-back .legend-icon:first-child,
        .flashcard-back .card-title:first-of-type,
        .flashcard-back .system-badge:first-child {
            margin-top: 0 !important;
        }
        
        /* Ensure all child elements use static positioning */
        .flashcard-back div,
        .flashcard-back p,
        .flashcard-back ul {
            position: static !important;
            vertical-align: top; /* Firefox fix */
        }

        .flashcard.flipped .flashcard-front {
            opacity: 0;
            pointer-events: none;
            z-index: 1;
        }

        .flashcard.flipped .flashcard-back {
            opacity: 1;
            pointer-events: auto;
            z-index: 2;
        }

        /* System badges with colors */
        .system-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .system-nervous { background: linear-gradient(135deg, #D4C5E8 0%, #B8A5D6 100%); color: #5A3A7A; }
        .system-metabolic { background: linear-gradient(135deg, #FFD4BF 0%, #FFAF8F 100%); color: #8B3A00; }
        .system-urogenital { background: linear-gradient(135deg, #FFB3D9 0%, #FF69B4 100%); color: #8B004B; }
        .system-musculoskeletal { background: linear-gradient(135deg, #C8E8E2 0%, #A3D4CA 100%); color: #2C5F54; }
        .system-cardio { background: linear-gradient(135deg, #FFCCCC 0%, #FFB3B3 100%); color: #8B0000; }
        .system-headaches { background: linear-gradient(135deg, #FFE4CC 0%, #FFD4B3 100%); color: #8B5A00; }
        .system-skin { background: linear-gradient(135deg, #E8D4F0 0%, #D4B8E8 100%); color: #6A3A8B; }
        .system-digestive { background: linear-gradient(135deg, #D4E8D4 0%, #B8D6B8 100%); color: #2C5F2C; }
        .system-selfcare { background: linear-gradient(135deg, #B8E8C8 0%, #9CD6B8 100%); color: #2C6B3F; }
        .system-immune { background: linear-gradient(135deg, #E3E8F0 0%, #C8D4E8 100%); color: #2C3F6B; }

        .card-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: #E91E63;
            line-height: 1.2;
        }

        .flashcard-back .card-title {
            color: #2C3E50;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
        }

        .card-section {
            margin-bottom: 1.5rem;
            padding: 1.25rem;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 16px;
            border-left: 4px solid #E91E63;
        }

        .flashcard-back .card-section {
            background: rgba(255, 255, 255, 0.15);
            border-left-color: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
        }

        .card-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 0.75rem;
            font-weight: 700;
            color: #E91E63;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .flashcard-back .card-label {
            color: #C2185B;
        }

        .card-label::before {
            content: '';
            width: 6px;
            height: 6px;
            background: currentColor;
            border-radius: 50%;
        }

        .card-text {
            font-size: 1.05rem;
            line-height: 1.7;
            color: var(--text-dark);
        }

        .flashcard-back .card-text {
            color: #2C3E50;
        }

        .card-list {
            list-style: none;
            padding-left: 0;
        }

        .card-list li {
            padding: 0.75rem 0;
            padding-left: 2rem;
            position: relative;
            font-size: 1rem;
            line-height: 1.6;
        }

        .card-list li:before {
            content: '✓';
            position: absolute;
            left: 0.5rem;
            font-weight: 700;
            color: var(--secondary-green);
            font-size: 1.2rem;
        }

        .flashcard-back .card-list li:before {
            color: #E91E63;
        }

        .flashcard-back .card-list li {
            color: #2C3E50;
        }

        .mindset-box {
            background: linear-gradient(135deg, #FFF9E6 0%, #FFF3D4 100%);
            padding: 1.5rem;
            border-radius: 16px;
            border-left: 4px solid #FFC107;
            font-style: italic;
            color: #8B6914;
            font-size: 1.05rem;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.2);
        }

        .flashcard-back .mindset-box {
            background: rgba(255, 255, 255, 0.9);
            border-left-color: #FFC107;
            color: #8B6914;
            backdrop-filter: blur(10px);
        }

        .flashcard-back .mindset-box p {
            color: #8B6914;
        }

        .closing-note {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 2px dashed rgba(116, 139, 117, 0.3);
            font-style: italic;
            font-size: 0.9rem;
            color: var(--text-medium);
            text-align: center;
        }

        .flashcard-back .closing-note {
            border-top-color: rgba(233, 30, 99, 0.3);
            color: #5A6C7D;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            gap: 1rem;
        }

        button {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            color: #2C3E50;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(116, 139, 117, 0.3);
            transition: all 0.3s ease;
        }

        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(116, 139, 117, 0.4);
        }

        button:active:not(:disabled) {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .card-counter {
            font-weight: 700;
            color: #E91E63;
            font-size: 1.1rem;
            padding: 0.75rem 1.5rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(116, 139, 117, 0.2);
        }

        .flip-hint {
            text-align: center;
            color: var(--text-medium);
            margin-top: 1.5rem;
            font-size: 1.1rem;
            animation: pulse 2s infinite;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }

        /* BOTTOM NAVIGATION */
        .bottom-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 2px solid var(--light-green);
        }

        .bottom-nav-btn {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 2rem;
            font-size: 1.05rem;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .bottom-nav-btn.secondary {
            background: linear-gradient(135deg, #FF6B9D, #E91E63);
            color: white;
            border: none;
        }

        .bottom-nav-btn.secondary:hover {
            background: linear-gradient(135deg, #E91E63, #C2185B);
            color: white;
            transform: translateX(-5px);
            box-shadow: 0 8px 25px rgba(233, 30, 99, 0.4);
        }

        .bottom-nav-btn.primary {
            background: linear-gradient(135deg, #FF6B9D, #E91E63);
            color: white;
        }

        .bottom-nav-btn.primary:hover {
            background: linear-gradient(135deg, #E91E63, #C2185B);
            transform: translateX(5px);
            box-shadow: 0 8px 25px rgba(233, 30, 99, 0.4);
        }

        .bottom-nav-btn:active {
            transform: scale(0.98);
        }

        /* Scrollbar styling */
        .flashcard-face::-webkit-scrollbar {
            width: 8px;
        }

        .flashcard-face::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 10px;
        }

        .flashcard-face::-webkit-scrollbar-thumb {
            background: var(--secondary-green);
            border-radius: 10px;
        }

        .flashcard-back::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.4);
        }

        /* Legend card special styling */
        .legend-card {
            text-align: center;
        }

        .legend-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }

        .legend-item {
            padding: 1.25rem;
            margin-bottom: 1.25rem;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            text-align: left;
        }

        .legend-item strong {
            color: #E91E63;
            font-size: 1.1rem;
            display: block;
            margin-bottom: 0.5rem;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }

            .welcome-subtitle {
                font-size: 1rem;
            }

            .welcome-card-count {
                font-size: 1.3rem;
                padding: 1.2rem 2rem;
            }

            .welcome-description {
                font-size: 1rem;
            }

            .welcome-menu-title {
                font-size: 1.2rem;
            }

            .welcome-menu-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.8rem;
            }
            
            /* Override desktop single-item styling on mobile */
            .welcome-menu-grid:has(.welcome-menu-item:only-child) {
                grid-template-columns: repeat(2, 1fr);
            }
            
            /* Center single items when there's an odd number */
            .welcome-menu-grid .welcome-menu-item:only-child {
                grid-column: 1 / -1;
                justify-self: center;
                width: calc(50% - 0.4rem);
                max-width: none !important;
            }
            
            /* Center last item if it's odd in a row */
            .welcome-menu-grid .welcome-menu-item:nth-child(odd):last-child {
                grid-column: 1 / -1;
                justify-self: center;
                width: calc(50% - 0.4rem);
            }

            .welcome-menu-item {
                padding: 1.2rem 0.8rem;
                min-height: 140px;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }

            .menu-icon {
                font-size: 2rem;
            }

            .menu-label {
                font-size: 0.95rem;
            }

            .menu-description {
                font-size: 0.75rem;
            }

            .welcome-feature {
                font-size: 0.9rem;
                padding: 0.8rem 1.2rem;
            }

            .welcome-start-btn {
                font-size: 1.1rem;
                padding: 1rem 2.5rem;
            }

            .welcome-logo {
                font-size: 3rem;
            }

            .search-bar-container {
                padding: 0 0.5rem;
            }

            .search-input-wrapper {
                padding: 0.4rem 1rem;
            }

            .search-input {
                font-size: 0.9rem;
                padding: 0.6rem 0;
            }

            .search-hint {
                font-size: 0.75rem;
            }

            .search-dropdown {
                max-height: 250px;
            }

            .dropdown-item {
                padding: 0.85rem 1rem;
            }

            .dropdown-item-icon {
                font-size: 1.3rem;
            }

            .dropdown-item-title {
                font-size: 0.95rem;
            }

            .dropdown-item-system {
                font-size: 0.75rem;
            }

            .bottom-navigation {
                flex-direction: column;
                gap: 0.75rem;
            }

            .bottom-nav-btn {
                width: 100%;
                justify-content: center;
                padding: 0.9rem 1.5rem;
                font-size: 0.95rem;
            }

            .bottom-nav-btn.secondary:hover {
                transform: translateY(-3px) translateX(0);
            }

            .bottom-nav-btn.primary:hover {
                transform: translateY(-3px) translateX(0);
            }

            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 1.8rem;
            }

            .flashcard {
                height: 500px;
            }

            #supplementFlashcard {
                height: 550px;
                min-height: 550px;
            }

            .flashcard-face {
                padding: 1.5rem;
            }

            .card-title {
                font-size: 1.5rem;
            }

            button {
                padding: 0.75rem 1.25rem;
                font-size: 0.9rem;
            }

            .card-counter {
                font-size: 0.95rem;
                padding: 0.5rem 1rem;
            }

            /* Protein Calculator Mobile Styles */
            #proteinContainer h1 {
                font-size: 1.8rem;
            }

            #proteinContainer .subtitle {
                font-size: 0.95rem;
            }

            #proteinAmount {
                font-size: 2.2rem !important;
            }

            #breakfastProtein,
            #lunchProtein,
            #dinnerProtein {
                font-size: 1.3rem !important;
            }

            #proteinResults > div:first-child {
                padding: 1.5rem 1rem !important;
            }

            #proteinResults h4 {
                font-size: 1.1rem;
            }

            #proteinResults ul {
                font-size: 0.9rem;
                margin-left: 1rem !important;
            }

            #weightInput {
                font-size: 1rem !important;
                padding: 0.75rem 1rem !important;
            }

            #weightUnit {
                font-size: 0.95rem !important;
                padding: 0.75rem 0.8rem !important;
            }

            #calculateProteinBtn {
                font-size: 1.1rem !important;
                padding: 1rem !important;
            }

            label:has(input[type="radio"]) {
                padding: 0.9rem 1rem !important;
            }

            label:has(input[type="radio"]) > div > div:first-child {
                font-size: 0.95rem;
            }

            label:has(input[type="radio"]) > div > div:last-child {
                font-size: 0.8rem;
            }

            /* Food Converter Mobile Styles */
            #foodSearchInput {
                font-size: 0.95rem !important;
                padding: 0.8rem 1rem !important;
            }

            #totalProteinAmount {
                font-size: 2rem !important;
            }

            #proteinProgress {
                font-size: 0.85rem !important;
            }

            /* Progress Tracker Mobile Styles */
            #symptomCheckboxes {
                grid-template-columns: 1fr !important;
                max-height: 400px !important;
                font-size: 0.9rem !important;
            }

            .mood-btn {
                padding: 1rem 0.5rem !important;
                font-size: 0.8rem !important;
            }

            .mood-btn div:first-child {
                font-size: 2rem !important;
            }

            #weekOverview {
                grid-template-columns: repeat(7, minmax(60px, 1fr)) !important;
                gap: 0.3rem !important;
                overflow-x: auto !important;
            }
            
            #weekOverview > div {
                min-width: 60px !important;
                padding: 0.5rem 0.3rem !important;
            }
            
            #weekOverview > div > div:first-child {
                font-size: 0.65rem !important;
            }
            
            #weekOverview > div > div:nth-child(2) {
                font-size: 0.9rem !important;
            }
            
            #weekOverview > div > div:nth-child(3) {
                font-size: 1.5rem !important;
            }
            
            /* Moon circle on mobile */
            #weekOverview > div > div:nth-child(4) {
                width: 32px !important;
                height: 32px !important;
                font-size: 1rem !important;
            }
            
            /* Quick action buttons on mobile */
            #viewFavoritesBtn, #randomBtn, #selfCareFilterBtn {
                padding: 0.6rem 1rem !important;
                font-size: 0.85rem !important;
            }
        }

        /* Symptom list scrollbar */
        #symptomCheckboxes::-webkit-scrollbar {
            width: 10px;
        }

        #symptomCheckboxes::-webkit-scrollbar-track {
            background: var(--bg-cream);
            border-radius: 10px;
        }

        #symptomCheckboxes::-webkit-scrollbar-thumb {
            background: var(--secondary-green);
            border-radius: 10px;
        }

        #symptomCheckboxes::-webkit-scrollbar-thumb:hover {
            background: var(--primary-green);
        }
        
        /* ===== FEMININE COLOUR SCHEME FOR BUTTONS AND BOXES ===== */
        
        /* Symptom Selection Buttons - Different Pastel Colours */
        .protocol-nav-btn:nth-child(1) { 
            border-color: #FFB5C5 !important; 
            background: linear-gradient(135deg, #FFF0F3, white) !important; 
        }
        .protocol-nav-btn:nth-child(1):hover { 
            background: linear-gradient(135deg, #FFE5EA, #FFF0F3) !important; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(255, 181, 197, 0.3); 
        }
        
        .protocol-nav-btn:nth-child(2) { 
            border-color: #FF9F7F !important; 
            background: linear-gradient(135deg, #FFF4ED, white) !important; 
        }
        .protocol-nav-btn:nth-child(2):hover { 
            background: linear-gradient(135deg, #FFE9DB, #FFF4ED) !important; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(255, 159, 127, 0.3); 
        }
        
        .protocol-nav-btn:nth-child(3) { 
            border-color: #E8D5F2 !important; 
            background: linear-gradient(135deg, #FAF5FD, white) !important; 
        }
        .protocol-nav-btn:nth-child(3):hover { 
            background: linear-gradient(135deg, #F3EAFA, #FAF5FD) !important; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(232, 213, 242, 0.3); 
        }
        
        .protocol-nav-btn:nth-child(4) { 
            border-color: #8EBFB5 !important; 
            background: linear-gradient(135deg, #EDF7F5, white) !important; 
        }
        .protocol-nav-btn:nth-child(4):hover { 
            background: linear-gradient(135deg, #E0F2EE, #EDF7F5) !important; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(142, 191, 181, 0.3); 
        }
        
        .protocol-nav-btn:nth-child(5) { 
            border-color: #FFD4A3 !important; 
            background: linear-gradient(135deg, #FFF8EF, white) !important; 
        }
        .protocol-nav-btn:nth-child(5):hover { 
            background: linear-gradient(135deg, #FFF1DD, #FFF8EF) !important; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(255, 212, 163, 0.3); 
        }
        
        .protocol-nav-btn:nth-child(6) { 
            border-color: #C4A5E1 !important; 
            background: linear-gradient(135deg, #F7F3FB, white) !important; 
        }
        .protocol-nav-btn:nth-child(6):hover { 
            background: linear-gradient(135deg, #EEE7F7, #F7F3FB) !important; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(196, 165, 225, 0.3); 
        }
        
        .protocol-nav-btn:nth-child(7) { 
            border-color: #FFB5E8 !important; 
            background: linear-gradient(135deg, #FFF5FC, white) !important; 
        }
        .protocol-nav-btn:nth-child(7):hover { 
            background: linear-gradient(135deg, #FFEAF9, #FFF5FC) !important; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(255, 181, 232, 0.3); 
        }
        
        .protocol-nav-btn:nth-child(8) { 
            border-color: #B5D4FF !important; 
            background: linear-gradient(135deg, #F0F7FF, white) !important; 
        }
        .protocol-nav-btn:nth-child(8):hover { 
            background: linear-gradient(135deg, #E0EFFF, #F0F7FF) !important; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(181, 212, 255, 0.3); 
        }
        
        .protocol-nav-btn:nth-child(9) { 
            border-color: #FFB6D9 !important; 
            background: linear-gradient(135deg, #FFF0F8, white) !important; 
        }
        .protocol-nav-btn:nth-child(9):hover { 
            background: linear-gradient(135deg, #FFE5F2, #FFF0F8) !important; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(255, 182, 217, 0.3); 
        }
        
        /* Mood/Feeling Buttons - Gradient Feminine Colours */
        .mood-btn[data-mood="5"] { 
            border-color: #A8E6CF !important; 
            background: linear-gradient(135deg, #EDFDF4, white) !important; 
        }
        .mood-btn[data-mood="5"]:hover, .mood-btn[data-mood="5"].selected { 
            background: linear-gradient(135deg, #DFFBEB, #EDFDF4) !important; 
            border-color: #76D7A8 !important;
            box-shadow: 0 4px 15px rgba(168, 230, 207, 0.4);
            transform: scale(1.05);
        }
        
        .mood-btn[data-mood="4"] { 
            border-color: #B5E7FF !important; 
            background: linear-gradient(135deg, #F0FAFF, white) !important; 
        }
        .mood-btn[data-mood="4"]:hover, .mood-btn[data-mood="4"].selected { 
            background: linear-gradient(135deg, #DFF3FF, #F0FAFF) !important; 
            border-color: #8DDBFF !important;
            box-shadow: 0 4px 15px rgba(181, 231, 255, 0.4);
            transform: scale(1.05);
        }
        
        .mood-btn[data-mood="3"] { 
            border-color: #FFE4B5 !important; 
            background: linear-gradient(135deg, #FFFAF0, white) !important; 
        }
        .mood-btn[data-mood="3"]:hover, .mood-btn[data-mood="3"].selected { 
            background: linear-gradient(135deg, #FFF5E0, #FFFAF0) !important; 
            border-color: #FFD68A !important;
            box-shadow: 0 4px 15px rgba(255, 228, 181, 0.4);
            transform: scale(1.05);
        }
        
        .mood-btn[data-mood="2"] { 
            border-color: #FFD4A3 !important; 
            background: linear-gradient(135deg, #FFF8EF, white) !important; 
        }
        .mood-btn[data-mood="2"]:hover, .mood-btn[data-mood="2"].selected { 
            background: linear-gradient(135deg, #FFF1DD, #FFF8EF) !important; 
            border-color: #FFBD6B !important;
            box-shadow: 0 4px 15px rgba(255, 212, 163, 0.4);
            transform: scale(1.05);
        }
        
        .mood-btn[data-mood="1"] { 
            border-color: #FFB5C5 !important; 
            background: linear-gradient(135deg, #FFF0F3, white) !important; 
        }
        .mood-btn[data-mood="1"]:hover, .mood-btn[data-mood="1"].selected { 
            background: linear-gradient(135deg, #FFE5EA, #FFF0F3) !important; 
            border-color: #FF8DA1 !important;
            box-shadow: 0 4px 15px rgba(255, 181, 197, 0.4);
            transform: scale(1.05);
        }
        
        /* Print Styles for Shopping Lists, Meal Plans, and Favorites */
        @media print {
            /* Reset background */
            body {
                background: white !important;
            }
            
            /* Hide navigation and interactive elements */
            button {
                display: none !important;
            }
            
            nav {
                display: none !important;
            }
            
            /* Hide star favorite buttons when printing */
            .star-btn,
            button[onclick*="toggleCardFavorite"],
            button[onclick*="toggleSupplementFavorite"],
            button[onclick*="toggleRecipeFavorite"] {
                display: none !important;
            }
            
            /* Hide "Back" buttons and navigation */
            button[onclick*="back"],
            button[onclick*="Back"],
            button[onclick*="displayWeek"],
            button[onclick*="showSection"] {
                display: none !important;
            }
            
            /* SHOPPING LIST OPTIMIZATION */
            input[type="checkbox"] {
                -webkit-appearance: checkbox !important;
                appearance: checkbox !important;
                width: 16px !important;
                height: 16px !important;
                border: 2px solid #666 !important;
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
            
            /* Prevent ingredient items from breaking across pages */
            label {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            /* Shopping category sections */
            div[style*="margin-bottom: 2rem"] {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            /* MEAL PLAN OPTIMIZATION */
            
            /* Keep recipe cards together */
            .recipe-card,
            div[style*="border-radius: 20px"][style*="padding: 2rem"],
            div[style*="border-radius: 24px"][style*="padding: 2rem"] {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
                margin-bottom: 1.5rem !important;
            }
            
            /* Keep day headers with their content */
            h2, h3, h4 {
                page-break-after: avoid !important;
                page-break-inside: avoid !important;
            }
            
            /* Optimize meal sections */
            div[style*="Breakfast"],
            div[style*="Lunch"],
            div[style*="Dinner"] {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            /* Make sure ingredients lists stay together */
            ul, ol {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            /* Keep nutrition info with recipe */
            div[style*="nutrition"],
            div[style*="Protein"],
            div[style*="Calories"] {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            /* FAVORITES OPTIMIZATION */
            
            /* Hide modal overlay backgrounds */
            .modal-overlay,
            div[style*="position: fixed"][style*="background: rgba"] {
                display: none !important;
            }
            
            /* Make favorite cards print nicely */
            .favorite-card,
            div[onclick*="goToFavoriteCard"],
            div[onclick*="goToSupplementFavoriteCard"],
            div[onclick*="goToRecipeFavorite"] {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
                margin-bottom: 1rem !important;
                border: 1px solid #ddd !important;
                padding: 1rem !important;
            }
            
            /* Hide remove buttons (×) in favorites */
            button[onclick*="removeFavorite"],
            button[onclick*="removeSupplementFavorite"],
            button[onclick*="removeRecipeFavorite"] {
                display: none !important;
            }
            
            /* SYMPTOM/SUPPLEMENT CARDS OPTIMIZATION */
            
            /* Make flashcards print as simple cards */
            .card-container,
            .card,
            div[style*="perspective"] {
                perspective: none !important;
                transform: none !important;
            }
            
            /* Show both front and back of cards when printing */
            .card-front,
            .card-back {
                position: relative !important;
                transform: none !important;
                backface-visibility: visible !important;
                page-break-inside: avoid !important;
            }
            
            .card-back {
                margin-top: 1rem !important;
                border-top: 2px dashed #ccc !important;
                padding-top: 1rem !important;
            }
            
            /* GENERAL PRINT OPTIMIZATION */
            
            /* Preserve colors for categories and highlights */
            * {
                print-color-adjust: exact !important;
                -webkit-print-color-adjust: exact !important;
            }
            
            /* Optimize font sizes for print */
            body {
                font-size: 11pt !important;
                line-height: 1.4 !important;
            }
            
            h1 {
                font-size: 20pt !important;
                margin-bottom: 0.5rem !important;
            }
            
            h2 {
                font-size: 16pt !important;
                margin-bottom: 0.4rem !important;
            }
            
            h3 {
                font-size: 14pt !important;
                margin-bottom: 0.3rem !important;
            }
            
            h4 {
                font-size: 12pt !important;
                margin-bottom: 0.3rem !important;
            }
            
            /* Remove box shadows for cleaner print */
            * {
                box-shadow: none !important;
                text-shadow: none !important;
            }
            
            /* Simplify borders for print */
            div[style*="border-radius"] {
                border-radius: 8px !important;
            }
            
            /* Optimize padding for print density */
            div[style*="padding: 2.5rem"],
            div[style*="padding: 3rem"] {
                padding: 1rem !important;
            }
            
            /* Hide decorative elements */
            div[style*="position: absolute"],
            div[style*="animation:"],
            .sparkle,
            .float {
                display: none !important;
            }
            
            /* Page breaks - strategic placement */
            .week-section,
            .day-section {
                page-break-before: auto !important;
                page-break-after: auto !important;
            }
            
            /* Ensure main content areas stay together */
            .content-section {
                page-break-inside: avoid !important;
            }
            
            /* Print page header on each page */
            @page {
                margin: 2cm;
            }
            
            /* Avoid widows and orphans */
            p, li {
                orphans: 3;
                widows: 3;
            }
            
            /* Links - show URL after link text */
            a[href]:after {
                content: " (" attr(href) ")";
                font-size: 9pt;
                color: #666;
            }
            
            /* But don't show URLs for navigation links */
            a[href^="#"]:after,
            a[href^="javascript:"]:after {
                content: "";
            }
            
            /* Table optimization if any */
            table {
                border-collapse: collapse !important;
                width: 100% !important;
            }
            
            table, th, td {
                border: 1px solid #ddd !important;
            }
            
            th, td {
                padding: 0.5rem !important;
            }
        }
        

        /* ===== MOBILE FIXES FOR DIARY, MEDICATION, TRACKING ===== */
        @media (max-width: 768px) {
            /* Make section headers stack on mobile */
            h1 {
                font-size: 1.5rem !important;
                padding: 1rem 1.5rem !important;
                width: 100%;
                justify-content: center;
            }
            
            /* Button sizing for mobile */
            button {
                font-size: 0.9rem !important;
                padding: 0.8rem 1.5rem !important;
            }
            
            /* Center all grid containers */
            [style*="display: grid"] {
                justify-items: center !important;
            }
            
            /* Force single column for form grids EXCEPT mood/energy row */
            [style*="grid-template-columns: 1fr 1fr"]:not([style*="margin-bottom: 2rem"]):not(.diary-mood-energy-display),
            [style*="grid-template-columns: repeat(2, 1fr)"]:not(.keep-two-columns):not(.diary-mood-energy-display) {
                grid-template-columns: 1fr !important;
            }
            
            /* CRITICAL: Keep mood/energy side by side on mobile - must override everything */
            .diary-mood-energy-display,
            div[style*="grid-template-columns: 1fr 1fr"][style*="gap: 1.5rem"][style*="margin-bottom: 2rem"],
            #diaryFormOverlay div[style*="grid-template-columns: 1fr 1fr"][style*="margin-bottom: 2rem"] {
                grid-template-columns: 1fr 1fr !important;
                gap: 1rem !important;
                display: grid !important;
            }
            
            /* 3-column grids become 1 column on mobile */
            [style*="grid-template-columns: repeat(3, 1fr)"] {
                grid-template-columns: 1fr !important;
            }
            
            /* Auto-fit grids - make full width cards */
            [style*="grid-template-columns: repeat(auto-fit"] {
                grid-template-columns: 1fr !important;
            }
            
            /* SOS cards container - keep 2 columns on mobile */
            #sosContainer [style*="grid-template-columns: repeat(2, 1fr)"] {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 1rem !important;
            }
            
            /* Mood/energy button grids - 2 columns on mobile (was 3) */
            .mood-btn-container,
            [style*="grid-template-columns: repeat(5, 1fr)"] {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.4rem !important;
            }
            
            /* Last emoji (5th) spans both columns */
            .mood-btn:nth-child(5) {
                grid-column: 1 / -1 !important;
                max-width: 50% !important;
                margin: 0 auto !important;
            }
            
            /* Diary form: Mood emoji buttons - optimized for side-by-side layout */
            .mood-btn {
                padding: 0.6rem 0.2rem !important;
                min-height: 65px !important;
            }
            
            .mood-btn > div:first-child {
                font-size: 1.3rem !important;
            }
            
            .mood-btn > div:last-child {
                font-size: 0.6rem !important;
            }
            
            /* Energy box optimization for side-by-side mobile layout */
            #diaryFormOverlay #energySlider {
                width: 100% !important;
            }
            
            #diaryFormOverlay #energyValue {
                font-size: 1.8rem !important;
            }
            
            #diaryFormOverlay div[style*="padding: 1.5rem"][style*="border: 2px solid #FF69B4"] {
                padding: 1rem !important;
            }
            
            /* Diary entry display: Keep mood/energy side by side - ABSOLUTE PRIORITY */
            .diary-mood-energy-display,
            div.diary-mood-energy-display,
            #diaryEntriesList .diary-mood-energy-display,
            #diaryEntriesList div[style*="grid-template-columns: 1fr 1fr"] {
                grid-template-columns: 1fr 1fr !important;
                gap: 1rem !important;
                display: grid !important;
            }
            
            .diary-mood-energy-display > div {
                padding: 0.8rem !important;
                min-width: 0 !important;
            }
            
            .diary-mood-energy-display div[style*="font-size: 2.5rem"] {
                font-size: 1.8rem !important;
            }
            
            .diary-mood-energy-display div[style*="font-size: 1.8rem"] {
                font-size: 1.4rem !important;
            }
            
            .diary-mood-energy-display div[style*="font-size: 1.1rem"] {
                font-size: 0.9rem !important;
            }
            
            /* Diary form buttons - wrap on mobile */
            #diaryFormOverlay [style*="justify-content: space-between"] {
                flex-direction: column !important;
                gap: 1rem !important;
            }
            
            #diaryFormOverlay [style*="justify-content: space-between"] > div {
                width: 100% !important;
                display: flex !important;
                gap: 0.5rem !important;
            }
            
            #diaryFormOverlay button {
                flex: 1 !important;
                min-width: 0 !important;
            }
            
            #resetFormBtn {
                width: 100% !important;
            }
            
            /* Make medication form inputs full width */
            input[type="text"],
            input[type="date"],
            input[type="number"],
            select,
            textarea {
                font-size: 16px !important; /* Prevents zoom on iOS */
            }
            
            /* Adjust modal padding on mobile */
            [style*="max-width: 800px"] {
                margin: 0.5rem !important;
                max-width: 95% !important;
            }
            
            /* Reduce padding in modal content */
            [style*="padding: 2rem"] {
                padding: 1rem !important;
            }
            
            /* SOS cards - ensure consistent sizing on mobile */
            .sos-card {
                min-height: 220px !important;
                max-height: 220px !important;
                height: 220px !important;
                display: flex !important;
                flex-direction: column !important;
                justify-content: space-between !important;
                align-items: center !important;
                padding: 1.5rem 1rem !important;
                box-sizing: border-box !important;
            }
            
            .sos-card > div:first-child {
                flex-shrink: 0 !important;
                margin-bottom: 0.8rem !important;
                font-size: 2.5rem !important;
            }
            
            .sos-card h3 {
                margin-bottom: 0.5rem !important;
                flex-shrink: 0 !important;
                font-size: 1.2rem !important;
            }
            
            .sos-card p {
                font-size: 0.85rem !important;
                line-height: 1.3 !important;
                flex-grow: 1 !important;
                display: flex !important;
                align-items: center !important;
            }
        }

        /* ===== WEEK BUTTON COLOR STATES ===== */
        .week-nav-btn div {
            transition: color 0.3s ease;
            visibility: visible !important;
            opacity: 1 !important;
            display: block !important;
        }
        
        /* Week 1 - Purple - Override inline styles when active */
        .week-nav-btn[data-week="1"].week-active div {
            color: white !important;
        }
        .week-nav-btn[data-week="1"]:not(.week-active) div {
            color: #9B7EBD !important;
        }
        
        /* Week 2 - Orange - Override inline styles when active */
        .week-nav-btn[data-week="2"].week-active div {
            color: white !important;
        }
        .week-nav-btn[data-week="2"]:not(.week-active) div {
            color: #FF9F7F !important;
        }
        
        /* Week 3 - Teal - Override inline styles when active */
        .week-nav-btn[data-week="3"].week-active div {
            color: white !important;
        }
        .week-nav-btn[data-week="3"]:not(.week-active) div {
            color: #8EBFB5 !important;
        }
        
        /* Week 4 - Pink - Override inline styles when active */
        .week-nav-btn[data-week="4"].week-active div {
            color: white !important;
        }
        .week-nav-btn[data-week="4"]:not(.week-active) div {
            color: #FFB5C5 !important;
        }

        /* ========================================
           MOBILE TOUCH & ACCESSIBILITY FIXES
           ======================================== */

        /* Remove hover effects on touch devices */
        @media (hover: none) and (pointer: coarse) {
            *[onmouseover]:hover {
                transform: none !important;
            }
        }

        /* Add touch feedback for interactive elements */
        .card:active,
        button:active,
        [onclick]:active,
        [role="button"]:active {
            transform: scale(0.98) !important;
            opacity: 0.9;
            transition: all 0.1s ease;
        }

        /* Ensure minimum tap target sizes (Apple/Android guidelines) */
        button,
        [onclick],
        input[type="checkbox"],
        input[type="radio"],
        select {
            min-height: 44px;
            min-width: 44px;
        }

        /* Prevent iOS zoom on input focus */
        input,
        select,
        textarea {
            font-size: 16px !important;
        }

        /* Better touch highlight color */
        * {
            -webkit-tap-highlight-color: rgba(255, 107, 157, 0.3);
            -webkit-touch-callout: none;
        }

        /* Smooth scrolling on iOS */
        * {
            -webkit-overflow-scrolling: touch;
        }

        /* Prevent double-tap zoom */
        button,
        [role="button"],
        [onclick],
        a {
            touch-action: manipulation;
        }

        /* Fix for sticky hover states on mobile */
        @media (hover: none) {
            button:hover,
            [onclick]:hover {
                transform: none;
            }
        }

        /* Improve button visibility on mobile */
        @media (max-width: 768px) {
            button,
            .btn {
                padding: 0.75rem 1.25rem;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Indicator for Mobile -->
    <div id="appLoading" style="position: fixed; inset: 0; background: linear-gradient(135deg, #FFF9F3 0%, #FFE4E4 100%); display: flex; align-items: center; justify-content: center; z-index: 9999999; transition: opacity 0.5s;">
        <div style="text-align: center; padding: 2rem;">
            <div style="width: 60px; height: 60px; border: 5px solid #FFE4E4; border-top-color: #FF6B9D; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>
            <p style="margin-top: 1.5rem; color: #6B5B6B; font-size: 1.1rem; font-weight: 500;">Loading your toolkit...</p>
            <p style="margin-top: 0.5rem; color: #8D7A8D; font-size: 0.9rem;">Initializing storage & features</p>
        </div>
    </div>
    <style>
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
    <script>
        // Hide loading screen when page is fully loaded
        window.addEventListener('load', function() {
            const loader = document.getElementById('appLoading');
            if (loader) {
                loader.style.opacity = '0';
                setTimeout(function() {
                    loader.style.display = 'none';
                }, 500);
            }
        });
        
        // Fallback: hide after 3 seconds even if load event doesn't fire
        setTimeout(function() {
            const loader = document.getElementById('appLoading');
            if (loader && loader.style.display !== 'none') {
                loader.style.opacity = '0';
                setTimeout(function() {
                    loader.style.display = 'none';
                }, 500);
            }
        }, 3000);
    </script>
    
    <!-- WELCOME SCREEN -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-content">
            <div class="welcome-logo">🌸</div>
            <h1 class="welcome-title">Menopause Wellness Toolkit™</h1>
            <p class="welcome-subtitle">Interactive Flashcards, Recipes & Daily Support Tools</p>
            
            <div class="welcome-card-count">
                180 Flashcards: Symptoms • Self-Care • Supplements
            </div>
            <p style="font-size: 0.95rem; color: var(--text-medium); margin-bottom: 1.5rem; opacity: 0.9;">
                133 symptoms + 17 self-care + 30 supplements | Plus: Movement Protocols • Protein Target • Tracking
            </p>
            
            <p class="welcome-description">
                Your comprehensive menopause companion with symptom insights, Mediterranean recipes, meal planning, protein tracking, and personalised daily support.
            </p>

            <!-- Manual Orientation Button -->
            <button id="showOrientationBtn" onclick="showOrientationManually()" style="padding: 0.8rem 1.5rem; background: white; border: 2px solid #E91E63; color: #E91E63; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 0.95rem; transition: all 0.3s; display: inline-flex; align-items: center; gap: 0.5rem; margin: 1.5rem 0;" onmouseover="this.style.background='#E91E63'; this.style.color='white'" onmouseout="this.style.background='white'; this.style.color='#E91E63'">
                ❓ Need help getting started?
            </button>

            <!-- NAVIGATION MENU -->
            <div class="welcome-menu">
                <h3 class="welcome-menu-title">Explore the Toolkit</h3>
                
                <!-- LEARN Section -->
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #8D7A8D; font-size: 1rem; margin-bottom: 1rem; text-align: center; font-weight: 600;">📚 LEARN</h4>
                    <div class="welcome-menu-grid">
                        <a href="javascript:void(0)" class="welcome-menu-item" data-section="symptoms">
                            <span class="menu-icon">🔍</span>
                            <span class="menu-label">Symptoms</span>
                            <span class="menu-description">What's happening & what helps</span>
                        </a>
                        
                        <a href="javascript:void(0)" class="welcome-menu-item" data-section="supplements">
                            <span class="menu-icon">💊</span>
                            <span class="menu-label">Supplements</span>
                            <span class="menu-description">Natural support options</span>
                        </a>
                    </div>
                </div>

                <!-- NUTRITION Section -->
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #8D7A8D; font-size: 1rem; margin-bottom: 1rem; text-align: center; font-weight: 600;">🥗 NUTRITION</h4>
                    <div class="welcome-menu-grid">
                        <a href="javascript:void(0)" class="welcome-menu-item" data-section="recipes">
                            <span class="menu-icon">👩‍🍳</span>
                            <span class="menu-label">Recipes</span>
                            <span class="menu-description">30-day meal plans</span>
                        </a>
                        
                        <a href="javascript:void(0)" class="welcome-menu-item" data-section="protein">
                            <span class="menu-icon">🥄</span>
                            <span class="menu-label">Protein Target</span>
                            <span class="menu-description">Calculate your needs</span>
                        </a>
                    </div>
                </div>

                <!-- MOVEMENT Section -->
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #8D7A8D; font-size: 1rem; margin-bottom: 1rem; text-align: center; font-weight: 600;">💪 MOVEMENT</h4>
                    <div class="welcome-menu-grid">
                        <a href="javascript:void(0)" class="welcome-menu-item" data-section="movement">
                            <span class="menu-icon">💪</span>
                            <span class="menu-label">Exercise</span>
                            <span class="menu-description">Movement protocols</span>
                        </a>
                    </div>
                </div>

                <!-- DAILY TOOLS Section -->
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #8D7A8D; font-size: 1rem; margin-bottom: 1rem; text-align: center; font-weight: 600;">📅 DAILY TOOLS</h4>
                    <div class="welcome-menu-grid">
                        <a href="javascript:void(0)" class="welcome-menu-item" data-section="dailyplan">
                            <span class="menu-icon">📅</span>
                            <span class="menu-label">Daily Plan</span>
                            <span class="menu-description">Plan your day</span>
                        </a>
                        
                        <a href="javascript:void(0)" class="welcome-menu-item" data-section="diary">
                            <span class="menu-icon">📔</span>
                            <span class="menu-label">Diary</span>
                            <span class="menu-description">Journal your journey</span>
                        </a>
                        
                        <a href="javascript:void(0)" class="welcome-menu-item" data-section="habits">
                            <span class="menu-icon">🎯</span>
                            <span class="menu-label">Habits</span>
                            <span class="menu-description">Build routines</span>
                        </a>
                    </div>
                </div>

                <!-- TRACKING Section -->
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #8D7A8D; font-size: 1rem; margin-bottom: 1rem; text-align: center; font-weight: 600;">📊 TRACKING</h4>
                    <div class="welcome-menu-grid">
                        <a href="javascript:void(0)" class="welcome-menu-item" data-section="medication">
                            <span class="menu-icon">💊</span>
                            <span class="menu-label">Medications</span>
                            <span class="menu-description">Track HRT & supplements</span>
                        </a>
                        
                        <a href="javascript:void(0)" class="welcome-menu-item" data-section="tracking">
                            <span class="menu-icon">📊</span>
                            <span class="menu-label">Symptoms</span>
                            <span class="menu-description">Monitor daily symptoms</span>
                        </a>
                    </div>
                </div>

                <!-- PROGRESS Section -->
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #8D7A8D; font-size: 1rem; margin-bottom: 1rem; text-align: center; font-weight: 600;">⭐ PROGRESS</h4>
                    <div class="welcome-menu-grid">
                        <a href="javascript:void(0)" class="welcome-menu-item" data-section="progress">
                            <span class="menu-icon">⭐</span>
                            <span class="menu-label">Progress</span>
                            <span class="menu-description">View all milestones</span>
                        </a>
                        
                        <a href="javascript:void(0)" class="welcome-menu-item" data-section="sos" style="border: 3px solid #FFB5C5; background: linear-gradient(135deg, #FFE5F0, #FFFFFF);">
                            <span class="menu-icon" style="font-size: 2.5rem;">🆘</span>
                            <span class="menu-label" style="color: #E74C3C; font-weight: 700; font-size: 1.1rem;">Quick Relief</span>
                            <span class="menu-description" style="color: #E74C3C;">Emergency help when you need it now</span>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="welcome-or-divider">
                <span>or</span>
            </div>
            
            <button class="welcome-start-btn" id="startBtn">
                Start with Flashcards
            </button>
            
            <p class="welcome-disclaimer">
                Educational support only. Not medical advice.
            </p>
        </div>
    </div>

    <!-- TOOLKIT CONTAINER (hidden initially) -->
    <div class="toolkit-container" id="toolkitContainer">
    <div class="container">
        <h1>Your Symptom Pocket Guide</h1>
        <p class="subtitle">✨ 140 cards: What's happening + What helps ✨</p>

        <!-- SEARCH BAR -->
        <div class="search-bar-container">
            <div class="search-input-wrapper">
                <span class="search-icon">🔍</span>
                <input 
                    type="text" 
                    id="symptomSearch" 
                    class="search-input" 
                    placeholder="Start typing a symptom (e.g., hot flushes, anxiety)..."
                    aria-label="Search symptoms"
                    autocomplete="off"
                />
                <!-- Autocomplete dropdown -->
                <div id="searchDropdown" class="search-dropdown"></div>
            </div>
            <p class="search-hint">💡 Tip: Start typing and select from suggestions</p>
        </div>

        <div class="nav-buttons">
            <button id="prevBtn">← Previous</button>
            <div class="card-counter" id="counter">Card 1 of 139</div>
            <button id="nextBtn">Next →</button>
        </div>

        <!-- Quick Actions Row -->
        <div style="display: flex; gap: 0.8rem; justify-content: center; margin: 1rem 0; flex-wrap: wrap;">
            <button id="viewFavoritesBtn" style="padding: 0.8rem 1.5rem; background: white; border: 2px solid #FFB5C5; color: #FF8DA1; border-radius: 20px; cursor: pointer; font-weight: 600; transition: all 0.3s; display: flex; align-items: center; gap: 0.5rem;">
                <span>💝</span>
                <span id="favCount">Saved Favorites (0)</span>
            </button>
            <button id="randomBtn" style="padding: 0.8rem 1.5rem; background: linear-gradient(135deg, var(--primary-green), var(--secondary-green)); color: #2C3E50; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; transition: all 0.3s; box-shadow: 0 4px 15px rgba(116, 139, 117, 0.3); display: flex; align-items: center; gap: 0.5rem;">
                <span>🔀</span>
                <span>Random Card</span>
            </button>
            <button id="selfCareFilterBtn" style="padding: 0.8rem 1.5rem; background: white; border: 2px solid #C4A5E1; color: #A67FCF; border-radius: 20px; cursor: pointer; font-weight: 600; transition: all 0.3s; display: flex; align-items: center; gap: 0.5rem;">
                <span>💚</span>
                <span>Self-Care Cards</span>
            </button>
        </div>

        <div class="flashcard-container">
            <div class="flashcard" id="flashcard">
                <div class="flashcard-face flashcard-front" id="cardFront"></div>
                <div class="flashcard-face flashcard-back" id="cardBack"></div>
            </div>
        </div>

        <div class="flip-hint">👆 Tap card to flip • 👈👉 Swipe to navigate</div>
        
        <div style="text-align: center; margin: 1rem 0; padding: 0.8rem; background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05)); border-radius: 12px; border: 2px solid rgba(255, 215, 0, 0.3);">
            <span style="font-size: 0.95rem; color: var(--text-dark);">
                Click the 
                <span style="background: rgba(255, 215, 0, 0.15); border: 2px solid #FFD700; color: #FFD700; padding: 0.2rem 0.4rem; border-radius: 6px; font-size: 1rem; font-weight: bold; margin: 0 0.3rem;">★</span>
                star to save your favourite cards
            </span>
        </div>

        <!-- FAVORITES MODAL -->
        <div id="favoritesModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center; padding: 1rem;">
            <div style="background: white; border-radius: 20px; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto; padding: 2rem; position: relative; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
                <button id="closeFavoritesModal" style="position: absolute; top: 1rem; left: 1rem; background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--text-medium); line-height: 1; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.2s;" onmouseover="this.style.background='#f0f0f0'" onmouseout="this.style.background='none'" title="Close">×</button>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; padding: 0 3rem;">
                    <h2 style="color: #E91E63; margin: 0; display: flex; align-items: center; gap: 0.5rem;">
                        <span>💝</span>
                        <span>Your Saved Favorites</span>
                    </h2>
                    <div style="display: flex; gap: 0.8rem;">
                        <button onclick="window.print()" style="padding: 0.6rem 1.2rem; background: var(--primary-green); color: #2C3E50; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s; display: flex; align-items: center; gap: 0.5rem;" onmouseover="this.style.background='var(--secondary-green)';" onmouseout="this.style.background='var(--primary-green)';" title="Print favorites">
                            <span style="font-size: 1.1rem;">🖨️</span>
                            <span>Print</span>
                        </button>
                        <button id="clearAllFavoritesBtn" style="padding: 0.6rem 1.2rem; background: white; border: 2px solid #FF6B6B; color: #FF6B6B; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#FF6B6B'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='#FF6B6B';">
                            Clear All
                        </button>
                    </div>
                </div>
                <div id="favoritesGrid" style="display: grid; gap: 0.8rem;">
                    <!-- Favorites will be populated here -->
                </div>
            </div>
        </div>

        <!-- BOTTOM NAVIGATION -->
        <div class="bottom-navigation">
            <button class="bottom-nav-btn secondary" id="backToWelcomeBtn">
                <span>←</span>
                <span>Back to Home</span>
            </button>
            <button class="bottom-nav-btn primary" id="nextSectionBtn">
                <span>Next: Supplements</span>
                <span>→</span>
            </button>
        </div>
    </div>

    <!-- SUPPLEMENTS SECTION (hidden initially) -->
    <div class="container" id="supplementsContainer" style="display: none;">
        <h1>Your Supplement Guide</h1>
        <p class="subtitle">✨ 31 cards: Legend + 30 evidence-based supplements ✨</p>

        <!-- SUPPLEMENTS SEARCH BAR -->
        <div class="search-bar-container">
            <div class="search-input-wrapper">
                <span class="search-icon">🔍</span>
                <input 
                    type="text" 
                    id="supplementSearch" 
                    class="search-input" 
                    placeholder="Search by symptom (e.g., hot flushes, joint pain, anxiety)..."
                    aria-label="Search supplements by symptom"
                    autocomplete="off"
                />
                <!-- Autocomplete dropdown -->
                <div id="supplementSearchDropdown" class="search-dropdown"></div>
            </div>
            <p class="search-hint">💡 Tip: Search by symptom to find related supplements</p>
        </div>

        <div class="nav-buttons">
            <button id="suppPrevBtn">← Previous</button>
            <div class="card-counter" id="suppCounter">Card 1 of 31</div>
            <button id="suppNextBtn">Next →</button>
        </div>

        <!-- Supplement Quick Actions Row -->
        <div style="display: flex; gap: 0.8rem; justify-content: center; margin: 1rem 0; flex-wrap: wrap;">
            <button id="viewSupplementFavoritesBtn" style="padding: 0.8rem 1.5rem; background: white; border: 2px solid #FFB5C5; color: #FF8DA1; border-radius: 20px; cursor: pointer; font-weight: 600; transition: all 0.3s; display: flex; align-items: center; gap: 0.5rem;">
                <span>💝</span>
                <span id="suppFavCount">Saved Favorites (0)</span>
            </button>
            <button id="randomSupplementBtn" style="padding: 0.8rem 1.5rem; background: linear-gradient(135deg, var(--primary-green), var(--secondary-green)); color: #2C3E50; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; transition: all 0.3s; box-shadow: 0 4px 15px rgba(116, 139, 117, 0.3); display: flex; align-items: center; gap: 0.5rem;">
                <span>🔀</span>
                <span>Random Supplement</span>
            </button>
        </div>

        <div class="flashcard-container">
            <div class="flashcard" id="supplementFlashcard">
                <div class="flashcard-face flashcard-front" id="suppCardFront"></div>
                <div class="flashcard-face flashcard-back" id="suppCardBack"></div>
            </div>
        </div>

        <div class="flip-hint">👆 Tap card to flip • 👈👉 Swipe to navigate</div>
        
        <div style="text-align: center; margin: 1rem 0; padding: 0.8rem; background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05)); border-radius: 12px; border: 2px solid rgba(255, 215, 0, 0.3);">
            <span style="font-size: 0.95rem; color: var(--text-dark);">
                Click the 
                <span style="background: rgba(255, 215, 0, 0.15); border: 2px solid #FFD700; color: #FFD700; padding: 0.2rem 0.4rem; border-radius: 6px; font-size: 1rem; font-weight: bold; margin: 0 0.3rem;">★</span>
                star to save your favourite supplements
            </span>
        </div>

        <!-- SUPPLEMENT FAVORITES MODAL -->
        <div id="supplementFavoritesModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center; padding: 1rem;">
            <div style="background: white; border-radius: 20px; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto; padding: 2rem; position: relative; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
                <button id="closeSupplementFavoritesModal" style="position: absolute; top: 1rem; left: 1rem; background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--text-medium); line-height: 1; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.2s;" onmouseover="this.style.background='#f0f0f0'" onmouseout="this.style.background='none'" title="Close">×</button>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; padding: 0 3rem;">
                    <h2 style="color: #E91E63; margin: 0; display: flex; align-items: center; gap: 0.5rem;">
                        <span>💝</span>
                        <span>Your Saved Supplements</span>
                    </h2>
                    <div style="display: flex; gap: 0.8rem;">
                        <button onclick="window.print()" style="padding: 0.6rem 1.2rem; background: var(--primary-green); color: #2C3E50; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s; display: flex; align-items: center; gap: 0.5rem;" onmouseover="this.style.background='var(--secondary-green)';" onmouseout="this.style.background='var(--primary-green)';" title="Print favorites">
                            <span style="font-size: 1.1rem;">🖨️</span>
                            <span>Print</span>
                        </button>
                        <button id="clearAllSupplementFavoritesBtn" style="padding: 0.6rem 1.2rem; background: white; border: 2px solid #FF6B6B; color: #FF6B6B; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#FF6B6B'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='#FF6B6B';">
                            Clear All
                        </button>
                    </div>
                </div>
                <div id="supplementFavoritesGrid" style="display: grid; gap: 0.8rem;">
                    <!-- Supplement favorites will be populated here -->
                </div>
            </div>
        </div>

        <!-- SUPPLEMENTS BOTTOM NAVIGATION -->
        <div class="bottom-navigation">
            <button class="bottom-nav-btn secondary" id="backToSymptomsBtn">
                <span>←</span>
                <span>Back to Symptoms</span>
            </button>
            <button class="bottom-nav-btn primary" id="backToWelcomeFromSupp">
                <span>Back to Home</span>
                <span>🏠</span>
            </button>
        </div>
    </div>
    </div>

    <!-- PROTEIN TARGET CALCULATOR SECTION (hidden initially) -->
    <div class="container" id="proteinContainer" style="display: none;">
        <h1>🎯 Your Protein Target Calculator</h1>
        <p class="subtitle">✨ Calculate your daily protein needs + Learn why it matters ✨</p>

        <!-- Calculator Card -->
        <div style="max-width: 600px; margin: 2rem auto;">
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.15);">
                
                <!-- Why Protein Matters -->
                <div style="background: linear-gradient(135deg, var(--light-green), #E8F3E8); border-radius: 16px; padding: 1.5rem; margin-bottom: 2rem;">
                    <h3 style="color: #E91E63; margin-bottom: 1rem; font-size: 1.3rem;">💪 Why Protein Matters in Menopause</h3>
                    <p style="color: var(--text-dark); line-height: 1.7; margin-bottom: 0.8rem;">
                        During menopause, your body needs <strong>more protein</strong> to maintain muscle mass, support bone health, stabilise blood sugar, and help you feel fuller for longer.
                    </p>
                    <p style="color: var(--text-medium); font-size: 0.95rem; line-height: 1.6;">
                        Lower oestrogen levels accelerate muscle loss, so adequate protein (spread throughout the day) becomes essential for strength, metabolism, and overall wellbeing.
                    </p>
                </div>

                <!-- Calculator Form -->
                <h3 style="color: #E91E63; margin-bottom: 1.5rem; font-size: 1.2rem; text-align: center;">Calculate Your Daily Protein Target</h3>
                
                <!-- Weight Input -->
                <div style="margin-bottom: 1.5rem;">
                    <label for="weightInput" style="display: block; color: var(--text-dark); font-weight: 600; margin-bottom: 0.5rem; font-size: 1.05rem;">
                        Your Weight
                    </label>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input 
                            type="number" 
                            id="weightInput" 
                            placeholder="Enter weight"
                            min="30"
                            max="200"
                            step="0.1"
                            style="flex: 1; padding: 0.9rem 1.2rem; border: 2px solid var(--light-green); border-radius: 12px; font-size: 1.1rem; color: var(--text-dark); outline: none; transition: border-color 0.3s;"
                        />
                        <select 
                            id="weightUnit" 
                            style="padding: 0.9rem 1rem; border: 2px solid var(--light-green); border-radius: 12px; font-size: 1.05rem; color: var(--text-dark); background: white; cursor: pointer; outline: none;"
                        >
                            <option value="kg">kg</option>
                            <option value="stone">stone</option>
                            <option value="lbs">lbs</option>
                        </select>
                    </div>
                </div>

                <!-- Activity Level -->
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; color: var(--text-dark); font-weight: 600; margin-bottom: 0.8rem; font-size: 1.05rem;">
                        Activity Level
                    </label>
                    <div style="display: flex; flex-direction: column; gap: 0.8rem;">
                        <label style="display: flex; align-items: center; padding: 1rem 1.2rem; border: 2px solid var(--light-green); border-radius: 12px; cursor: pointer; transition: all 0.3s; background: white;">
                            <input type="radio" name="activity" value="1.2" checked style="margin-right: 1rem; width: 20px; height: 20px; cursor: pointer;">
                            <div>
                                <div style="font-weight: 600; color: var(--text-dark); margin-bottom: 0.2rem;">Sedentary</div>
                                <div style="font-size: 0.9rem; color: var(--text-medium);">Little to no exercise</div>
                            </div>
                        </label>
                        <label style="display: flex; align-items: center; padding: 1rem 1.2rem; border: 2px solid var(--light-green); border-radius: 12px; cursor: pointer; transition: all 0.3s; background: white;">
                            <input type="radio" name="activity" value="1.4" style="margin-right: 1rem; width: 20px; height: 20px; cursor: pointer;">
                            <div>
                                <div style="font-weight: 600; color: var(--text-dark); margin-bottom: 0.2rem;">Lightly Active</div>
                                <div style="font-size: 0.9rem; color: var(--text-medium);">Light exercise 1-3 days/week</div>
                            </div>
                        </label>
                        <label style="display: flex; align-items: center; padding: 1rem 1.2rem; border: 2px solid var(--light-green); border-radius: 12px; cursor: pointer; transition: all 0.3s; background: white;">
                            <input type="radio" name="activity" value="1.6" style="margin-right: 1rem; width: 20px; height: 20px; cursor: pointer;">
                            <div>
                                <div style="font-weight: 600; color: var(--text-dark); margin-bottom: 0.2rem;">Moderately Active</div>
                                <div style="font-size: 0.9rem; color: var(--text-medium);">Moderate exercise 3-5 days/week</div>
                            </div>
                        </label>
                        <label style="display: flex; align-items: center; padding: 1rem 1.2rem; border: 2px solid var(--light-green); border-radius: 12px; cursor: pointer; transition: all 0.3s; background: white;">
                            <input type="radio" name="activity" value="1.8" style="margin-right: 1rem; width: 20px; height: 20px; cursor: pointer;">
                            <div>
                                <div style="font-weight: 600; color: var(--text-dark); margin-bottom: 0.2rem;">Very Active</div>
                                <div style="font-size: 0.9rem; color: var(--text-medium);">Hard exercise 6-7 days/week</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Calculate and Reset Buttons -->
                <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem;">
                    <button 
                        id="calculateProteinBtn"
                        style="flex: 1; padding: 1.2rem; background: linear-gradient(135deg, var(--primary-green), var(--secondary-green)); color: #2C3E50; border: none; border-radius: 20px; font-size: 1.2rem; font-weight: 600; cursor: pointer; box-shadow: 0 6px 20px rgba(244, 194, 194, 0.3); transition: all 0.3s;"
                    >
                        Calculate My Target 🎯
                    </button>
                    <button 
                        id="resetProteinBtn"
                        style="padding: 1.2rem 1.5rem; background: white; color: #E91E63; border: 2px solid #E91E63; border-radius: 20px; font-size: 1.2rem; font-weight: 600; cursor: pointer; transition: all 0.3s;"
                        onclick="resetProteinCalculator()"
                    >
                        🔄 Reset
                    </button>
                </div>

                <!-- Results Area -->
                <div id="proteinResults" style="display: none;">
                    <div style="background: linear-gradient(135deg, var(--primary-green), var(--secondary-green)); border-radius: 16px; padding: 2rem; text-align: center; margin-bottom: 1.5rem; box-shadow: 0 6px 20px rgba(116, 139, 117, 0.3);">
                        <div style="color: rgba(255, 255, 255, 0.9); font-size: 1rem; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.1em;">Your Daily Protein Target</div>
                        <div id="proteinAmount" style="color: #2C3E50; font-size: 3rem; font-weight: 700; margin-bottom: 0.5rem;">---</div>
                        <div style="color: rgba(255, 255, 255, 0.9); font-size: 1.1rem;">grams per day</div>
                    </div>

                    <!-- Per Meal Breakdown -->
                    <div style="background: var(--bg-cream); border-radius: 16px; padding: 1.5rem; margin-bottom: 1.5rem;">
                        <h4 style="color: #E91E63; margin-bottom: 1rem; text-align: center;">Suggested Per Meal</h4>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; text-align: center;">
                            <div>
                                <div style="color: var(--text-medium); font-size: 0.9rem; margin-bottom: 0.3rem;">Breakfast</div>
                                <div id="breakfastProtein" style="color: #E91E63; font-size: 1.6rem; font-weight: 700;">---</div>
                                <div style="color: var(--text-medium); font-size: 0.85rem;">grams</div>
                            </div>
                            <div>
                                <div style="color: var(--text-medium); font-size: 0.9rem; margin-bottom: 0.3rem;">Lunch</div>
                                <div id="lunchProtein" style="color: #E91E63; font-size: 1.6rem; font-weight: 700;">---</div>
                                <div style="color: var(--text-medium); font-size: 0.85rem;">grams</div>
                            </div>
                            <div>
                                <div style="color: var(--text-medium); font-size: 0.9rem; margin-bottom: 0.3rem;">Dinner</div>
                                <div id="dinnerProtein" style="color: #E91E63; font-size: 1.6rem; font-weight: 700;">---</div>
                                <div style="color: var(--text-medium); font-size: 0.85rem;">grams</div>
                            </div>
                        </div>
                    </div>

                    <!-- Protein Tips -->
                    <div style="background: white; border: 2px solid var(--light-green); border-radius: 16px; padding: 1.5rem;">
                        <h4 style="color: #E91E63; margin-bottom: 1rem;">💡 Tips for Meeting Your Target</h4>
                        <ul style="color: var(--text-dark); line-height: 1.8; margin-left: 1.2rem;">
                            <li style="margin-bottom: 0.5rem;"><strong>Start strong:</strong> Aim for at least 30g protein at breakfast</li>
                            <li style="margin-bottom: 0.5rem;"><strong>Spread it out:</strong> Distribute protein across all meals and snacks</li>
                            <li style="margin-bottom: 0.5rem;"><strong>Choose quality:</strong> Prioritise fish, eggs, Greek yoghurt, legumes, nuts</li>
                            <li style="margin-bottom: 0.5rem;"><strong>Pair with fibre:</strong> Combine protein with vegetables for better satiety</li>
                            <li><strong>Time it right:</strong> Include protein within 2 hours of resistance training</li>
                        </ul>
                    </div>
                </div>

                <!-- Example Foods Reference -->
                <div style="background: #F0F7F0; border-radius: 16px; padding: 1.5rem; margin-top: 1.5rem;">
                    <h4 style="color: #E91E63; margin-bottom: 1rem; text-align: center;">📋 Quick Protein Reference</h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.8rem; font-size: 0.95rem; color: var(--text-dark);">
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem;">
                            <span>Salmon (100g)</span>
                            <strong style="color: #E91E63;">25g</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem;">
                            <span>Greek yoghurt (150g)</span>
                            <strong style="color: #E91E63;">15g</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem;">
                            <span>Chicken breast (100g)</span>
                            <strong style="color: #E91E63;">31g</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem;">
                            <span>Lentils (cooked, 100g)</span>
                            <strong style="color: #E91E63;">9g</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem;">
                            <span>Eggs (2 large)</span>
                            <strong style="color: #E91E63;">13g</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem;">
                            <span>Almonds (30g)</span>
                            <strong style="color: #E91E63;">6g</strong>
                        </div>
                    </div>
                </div>

                <!-- FOOD CONVERTER/TRACKER -->
                <div style="background: white; border-radius: 20px; padding: 2rem; margin-top: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.15);">
                    <h3 style="color: #E91E63; margin-bottom: 1rem; font-size: 1.3rem; text-align: center;">🍽️ Food Protein Converter</h3>
                    <p style="text-align: center; color: var(--text-medium); margin-bottom: 1.5rem; font-size: 0.95rem;">Search foods to see protein content and build your daily meal plan</p>

                    <!-- Search Food Database -->
                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; color: var(--text-dark); font-weight: 600; margin-bottom: 0.5rem;">Search Food Database</label>
                        <input 
                            type="text" 
                            id="foodSearchInput" 
                            placeholder="Start typing... (e.g., chicken, yoghurt, salmon)"
                            style="width: 100%; padding: 0.9rem 1.2rem; border: 2px solid var(--light-green); border-radius: 12px; font-size: 1rem; color: var(--text-dark); outline: none;"
                        />
                        <div id="foodSearchResults" style="margin-top: 1rem; max-height: 300px; overflow-y: auto;"></div>
                    </div>

                    <!-- My Meals Section -->
                    <div id="myMealsSection" style="display: none; margin-top: 2rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h4 style="color: #E91E63; margin: 0;">My Daily Meals</h4>
                            <button onclick="myMeals.length=0; document.getElementById('mealsList').innerHTML=''; document.getElementById('totalProteinAmount').textContent='0'; document.getElementById('proteinProgress').innerHTML=''; document.getElementById('myMealsSection').style.display='none';" style="padding: 0.5rem 1rem; background: white; border: 2px solid #E91E63; color: #E91E63; border-radius: 8px; cursor: pointer; font-size: 0.9rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='var(--primary-green)'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='var(--primary-green)';">Clear All</button>
                        </div>
                        
                        <div id="mealsList" style="margin-bottom: 1rem;"></div>

                        <!-- Daily Total -->
                        <div style="background: linear-gradient(135deg, var(--primary-green), var(--secondary-green)); border-radius: 12px; padding: 1.5rem; text-align: center; margin-top: 1rem;">
                            <div style="color: rgba(255, 255, 255, 0.9); font-size: 0.95rem; margin-bottom: 0.3rem;">Total Protein Today</div>
                            <div style="display: flex; align-items: baseline; justify-content: center; gap: 0.5rem;">
                                <span id="totalProteinAmount" style="color: #2C3E50; font-size: 2.5rem; font-weight: 700;">0</span>
                                <span style="color: rgba(255, 255, 255, 0.9); font-size: 1.1rem;">grams</span>
                            </div>
                            <div id="proteinProgress" style="color: rgba(255, 255, 255, 0.85); margin-top: 0.5rem; font-size: 0.9rem;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PROTEIN BOTTOM NAVIGATION -->
        <div class="bottom-navigation" style="margin-top: 3rem;">
            <button class="bottom-nav-btn secondary" id="backToWelcomeFromProtein">
                <span>←</span>
                <span>Back to Home</span>
            </button>
            <button class="bottom-nav-btn primary" id="nextFromProteinBtn">
                <span>Next: Recipes</span>
                <span>→</span>
            </button>
        </div>
    </div>

    <!-- PROGRESS TRACKER SECTION (hidden initially) -->
    <div class="container" id="trackingContainer" style="display: none;">
        <h1>📊 Your Progress Tracker</h1>
        <p class="subtitle">✨ Track symptoms, mood, and wellbeing day by day ✨</p>

        <div style="max-width: 900px; margin: 2rem auto;">
            
            <!-- Date Selector -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.15); margin-bottom: 2rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <button id="prevDayBtn" style="background: var(--primary-green); color: #2C3E50; border: none; padding: 0.75rem 1.5rem; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem;">← Previous Day</button>
                    <div style="text-align: center;">
                        <div id="currentDate" style="font-size: 1.5rem; font-weight: 700; color: #E91E63; margin-bottom: 0.3rem;">Today</div>
                        <div id="currentDateFull" style="font-size: 0.95rem; color: var(--text-medium);">Wednesday, 24 December 2025</div>
                    </div>
                    <button id="nextDayBtn" style="background: var(--primary-green); color: #2C3E50; border: none; padding: 0.75rem 1.5rem; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem;">Next Day →</button>
                </div>
                <button id="todayBtn" style="width: 100%; background: var(--light-green); color: var(--text-dark); border: none; padding: 0.75rem; border-radius: 12px; cursor: pointer; font-weight: 600;">Jump to Today</button>
            </div>

            <!-- Quick Mood Selector -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.15); margin-bottom: 2rem;">
                <h3 style="color: #E91E63; margin-bottom: 1rem;">How are you feeling today?</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 0.8rem; max-width: 600px; margin: 0 auto;">
                    <button class="mood-btn" data-mood="5" style="padding: 1.5rem 1rem; border: 3px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center;">
                        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">😊</div>
                        <div style="font-size: 0.85rem; color: var(--text-dark); font-weight: 600;">Great</div>
                    </button>
                    <button class="mood-btn" data-mood="4" style="padding: 1.5rem 1rem; border: 3px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center;">
                        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">🙂</div>
                        <div style="font-size: 0.85rem; color: var(--text-dark); font-weight: 600;">Good</div>
                    </button>
                    <button class="mood-btn" data-mood="3" style="padding: 1.5rem 1rem; border: 3px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center;">
                        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">😐</div>
                        <div style="font-size: 0.85rem; color: var(--text-dark); font-weight: 600;">Okay</div>
                    </button>
                    <button class="mood-btn" data-mood="2" style="padding: 1.5rem 1rem; border: 3px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center;">
                        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">😟</div>
                        <div style="font-size: 0.85rem; color: var(--text-dark); font-weight: 600;">Difficult</div>
                    </button>
                    <button class="mood-btn" data-mood="1" style="padding: 1.5rem 1rem; border: 3px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center;">
                        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">😢</div>
                        <div style="font-size: 0.85rem; color: var(--text-dark); font-weight: 600;">Very Hard</div>
                    </button>
                </div>
            </div>

            <!-- Symptom Tracker -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.15); margin-bottom: 2rem;">
                <h3 style="color: #E91E63; margin-bottom: 0.5rem;">Which symptoms did you experience?</h3>
                <p style="color: var(--text-medium); font-size: 0.9rem; margin-bottom: 1.5rem;">Select all that apply - organised by body system (116 symptoms)</p>
                
                <div id="symptomCheckboxes" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 0.6rem; max-height: 600px; overflow-y: auto; padding: 0.5rem;">
                    <!-- Checkboxes will be generated by JavaScript -->
                </div>
            </div>

            <!-- Notes Section -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.15); margin-bottom: 2rem;">
                <h3 style="color: #E91E63; margin-bottom: 1rem;">Notes for today</h3>
                <textarea id="dailyNotes" placeholder="How are you feeling? What helped? What didn't? Any patterns you notice..." style="width: 100%; min-height: 120px; padding: 1rem; border: 2px solid var(--light-green); border-radius: 12px; font-family: inherit; font-size: 1rem; color: var(--text-dark); resize: vertical;"></textarea>
            </div>

            <!-- Save Button -->
            <div style="text-align: center; margin-bottom: 2rem;">
                <button id="saveProgressBtn" style="padding: 1.2rem 3rem; background: linear-gradient(135deg, var(--primary-green), var(--secondary-green)); color: #2C3E50; border: none; border-radius: 50px; font-size: 1.2rem; font-weight: 600; cursor: pointer; box-shadow: 0 6px 20px rgba(116, 139, 117, 0.3); transition: all 0.3s;">
                    Save Today's Progress
                </button>
                <div id="saveMessage" style="margin-top: 1rem; color: #E91E63; font-weight: 600; display: none;"></div>
            </div>

            <!-- 7-Day Overview -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.15); margin-bottom: 2rem;">
                <h3 style="color: #E91E63; margin-bottom: 0.5rem;">Your Week at a Glance</h3>
                <p style="color: var(--text-medium); font-size: 0.9rem; margin-bottom: 1.5rem;">Mood, symptoms & moon phases 🌙</p>
                <div id="weekOverview" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.75rem;">
                    <!-- Week overview will be generated by JavaScript -->
                </div>
            </div>

            <!-- Data Management -->
            <div style="background: var(--bg-cream); border-radius: 16px; padding: 1.5rem; margin-bottom: 2rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                    <div>
                        <h4 style="color: #E91E63; margin-bottom: 0.3rem;">Manage Your Data</h4>
                        <p style="color: var(--text-medium); font-size: 0.9rem;">Export your progress or start fresh</p>
                    </div>
                    <div style="display: flex; gap: 1rem;">
                        <button id="exportDataBtn" style="padding: 0.75rem 1.5rem; background: white; border: 2px solid #E91E63; color: #E91E63; border-radius: 12px; cursor: pointer; font-weight: 600;">📥 Export Data</button>
                        <button id="clearDataBtn" style="padding: 0.75rem 1.5rem; background: white; border: 2px solid #FFB5C5; color: #FFB5C5; border-radius: 12px; cursor: pointer; font-weight: 600;">🗑️ Clear All Data</button>
                    </div>
                </div>
            </div>

        </div>

        <!-- PROGRESS BOTTOM NAVIGATION -->
        <div class="bottom-navigation" style="margin-top: 3rem;">
            <button class="bottom-nav-btn secondary" id="backToWelcomeFromProgress">
                <span>←</span>
                <span>Back to Home</span>
            </button>
            <button class="bottom-nav-btn primary" id="nextFromProgressBtn">
                <span>Back to Home</span>
                <span>🏠</span>
            </button>
        </div>
    </div>

    <!-- RECIPES MAIN PAGE (hidden initially) -->
    <div class="container" id="recipesMainPage" style="display: none;">
        <h1>👩‍🍳 30-Day Mediterranean Meal Plan</h1>
        <p class="subtitle">✨ Simple, quick recipes linked to your symptoms • Eating out guides • Batch cooking tips ✨</p>

        <div style="max-width: 900px; margin: 2rem auto;">
            
            <!-- Week Navigation (MAIN PAGE) - MOVED TO TOP -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.15); margin-bottom: 2rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem;">
                    <h3 style="color: #E91E63; margin: 0;">Choose Your Week</h3>
                    <button id="viewRecipeFavoritesBtn" style="padding: 0.8rem 1.5rem; background: white; border: 2px solid #FFB5C5; color: #FF8DA1; border-radius: 20px; cursor: pointer; font-weight: 600; transition: all 0.3s; display: flex; align-items: center; gap: 0.5rem;">
                        <span>💝</span>
                        <span id="recipeFavCount">Saved Recipes (0)</span>
                    </button>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <button class="week-nav-btn week-active" data-week="1" style="padding: 1.5rem; border: 3px solid #9B7EBD; background: linear-gradient(135deg, #9B7EBD, #B89FD1); border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
                        <div style="font-size: 1.2rem; margin-bottom: 0.5rem; color: #9B7EBD !important;">Week 1</div>
                        <div style="font-size: 0.9rem; opacity: 0.9; color: #9B7EBD !important;">🧠 Nervous System</div>
                        <div style="font-size: 0.8rem; margin-top: 0.3rem; color: #9B7EBD !important;">Hot Flushes • Mood • Sleep</div>
                    </button>
                    <button class="week-nav-btn" data-week="2" style="padding: 1.5rem; border: 3px solid #FF9F7F; background: white; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
                        <div style="font-size: 1.2rem; margin-bottom: 0.5rem; color: #FF9F7F !important;">Week 2</div>
                        <div style="font-size: 0.9rem; color: #FF9F7F !important;">⚖️ Metabolic</div>
                        <div style="font-size: 0.8rem; margin-top: 0.3rem; color: #FF9F7F !important;">Weight • Energy • Digestion</div>
                    </button>
                    <button class="week-nav-btn" data-week="3" style="padding: 1.5rem; border: 3px solid #8EBFB5; background: white; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
                        <div style="font-size: 1.2rem; margin-bottom: 0.5rem; color: #8EBFB5 !important;">Week 3</div>
                        <div style="font-size: 0.9rem; color: #8EBFB5 !important;">🦴 Musculoskeletal</div>
                        <div style="font-size: 0.8rem; margin-top: 0.3rem; color: #8EBFB5 !important;">Joints • Bones • Skin</div>
                    </button>
                    <button class="week-nav-btn" data-week="4" style="padding: 1.5rem; border: 3px solid #FFB5C5; background: white; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
                        <div style="font-size: 1.2rem; margin-bottom: 0.5rem; color: #FFB5C5 !important;">Week 4</div>
                        <div style="font-size: 0.9rem; color: #FFB5C5 !important;">🌸 Urogenital & Immune</div>
                        <div style="font-size: 0.8rem; margin-top: 0.3rem; color: #FFB5C5 !important;">Urinary Health • Immunity</div>
                    </button>
                </div>
            </div>
            
            <!-- ESSENTIAL NUTRITION EDUCATION (MOVED BELOW WEEK SELECTION) -->
            <div style="background: linear-gradient(135deg, rgba(253,180,75,0.15), rgba(253,180,75,0.08)); border-radius: 28px; padding: 3rem 2.5rem; margin-bottom: 3rem; box-shadow: 0 4px 20px rgba(253,180,75,0.12); border: 2px solid rgba(253,180,75,0.25);">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <h3 style="color: #D97706; font-size: 1.8rem; font-weight: 500; margin-bottom: 0.5rem; letter-spacing: 0.5px;">🌟 Essential Nutrition Guidelines</h3>
                    <p style="color: #5A6C7D; font-size: 1rem; font-weight: 300; margin: 0;">Foundation principles for hormonal balance and metabolic health</p>
                </div>
                
                <div style="display: grid; gap: 2rem;">
                    <!-- Meal Timing & Fasting -->
                    <div style="background: linear-gradient(135deg, #FFFFFF, #FEFEFE); padding: 2rem; border-radius: 20px; border-left: 4px solid #D97706;">
                        <h4 style="color: #D97706; font-size: 1.2rem; font-weight: 500; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.6rem;">
                            <span style="font-size: 1.5rem;">⏰</span>
                            <span>Meal Timing & Overnight Fasting</span>
                        </h4>
                        <ul style="margin: 0; padding-left: 1.5rem; color: #4A5568; font-weight: 300; line-height: 1.8;">
                            <li style="margin-bottom: 0.8rem;"><strong>Eat 3 balanced meals per day</strong> - no snacking between meals</li>
                            <li style="margin-bottom: 0.8rem;"><strong>Last meal at least 1 hour before bed</strong> - ideally 2-3 hours for optimal digestion</li>
                            <li style="margin-bottom: 0.8rem;"><strong>12-14 hour overnight fast</strong> - e.g., finish dinner by 7pm, breakfast at 7-9am</li>
                            <li><strong>Why?</strong> Constant eating triggers glucose spikes and insulin resistance. Fasting periods allow insulin levels to drop and support metabolic health.</li>
                        </ul>
                    </div>
                    
                    <!-- No Snacking -->
                    <div style="background: linear-gradient(135deg, #FFFFFF, #FEFEFE); padding: 2rem; border-radius: 20px; border-left: 4px solid #DC2626;">
                        <h4 style="color: #DC2626; font-size: 1.2rem; font-weight: 500; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.6rem;">
                            <span style="font-size: 1.5rem;">🚫</span>
                            <span>Avoid Snacking - Here's Why</span>
                        </h4>
                        <ul style="margin: 0; padding-left: 1.5rem; color: #4A5568; font-weight: 300; line-height: 1.8;">
                            <li style="margin-bottom: 0.8rem;"><strong>Snacking causes glucose roller coaster</strong> - constant blood sugar spikes and crashes</li>
                            <li style="margin-bottom: 0.8rem;"><strong>Increases insulin resistance risk</strong> - your body never gets a break from processing food</li>
                            <li style="margin-bottom: 0.8rem;"><strong>Disrupts fat burning</strong> - insulin blocks fat metabolism</li>
                            <li><strong>If genuinely hungry between meals:</strong> Have a small protein-based snack (boiled egg, handful of nuts, Greek yoghurt) - NOT carbs</li>
                        </ul>
                    </div>
                    
                    <!-- Balanced Plate -->
                    <div style="background: linear-gradient(135deg, #FFFFFF, #FEFEFE); padding: 2rem; border-radius: 20px; border-left: 4px solid #E91E63;">
                        <h4 style="color: #E91E63; font-size: 1.2rem; font-weight: 500; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.6rem;">
                            <span style="font-size: 1.5rem;">🍽️</span>
                            <span>Build Your Balanced Plate</span>
                        </h4>
                        
                        <!-- Visual Plate Diagram -->
                        <div style="max-width: 500px; margin: 0 auto 2rem;">
                            <svg viewBox="0 0 400 400" style="width: 100%; height: auto;">
                                <!-- Plate circle -->
                                <circle cx="200" cy="200" r="180" fill="#F8F9FA" stroke="#FFD8CC" stroke-width="4"/>
                                
                                <!-- Half plate - Vegetables (left half) -->
                                <path d="M 200 200 L 200 20 A 180 180 0 0 1 200 380 Z" fill="rgba(139, 195, 74, 0.3)" stroke="#8BC34A" stroke-width="2"/>
                                <text x="120" y="200" text-anchor="middle" fill="#558B2F" font-size="18" font-weight="600">½ Vegetables</text>
                                <text x="120" y="220" text-anchor="middle" fill="#558B2F" font-size="14">🥬 🥕 🥦 🍅</text>
                                
                                <!-- Quarter plate - Protein (top right) -->
                                <path d="M 200 200 L 380 200 A 180 180 0 0 0 200 20 Z" fill="rgba(244, 67, 54, 0.3)" stroke="#F44336" stroke-width="2"/>
                                <text x="280" y="130" text-anchor="middle" fill="#C62828" font-size="18" font-weight="600">¼ Protein</text>
                                <text x="280" y="150" text-anchor="middle" fill="#C62828" font-size="14">🐟 🍗 🥩 🥚</text>
                                
                                <!-- Quarter plate - Complex Carbs (bottom right) -->
                                <path d="M 200 200 L 200 380 A 180 180 0 0 0 380 200 Z" fill="rgba(255, 193, 7, 0.3)" stroke="#FFC107" stroke-width="2"/>
                                <text x="280" y="270" text-anchor="middle" fill="#F57C00" font-size="18" font-weight="600">¼ Carbs</text>
                                <text x="280" y="290" text-anchor="middle" fill="#F57C00" font-size="14">🌾 🍠 🍚</text>
                                
                                <!-- Healthy fats indicator (small circle on side) -->
                                <circle cx="360" cy="80" r="30" fill="rgba(200, 213, 185, 0.4)" stroke="#F4C2C2" stroke-width="2"/>
                                <text x="360" y="85" text-anchor="middle" fill="#4A5D4B" font-size="20">🫒</text>
                            </svg>
                            <div style="text-align: center; margin-top: 1rem; color: #5A6C7D; font-size: 0.9rem; font-weight: 500;">
                                + 1 Tablespoon Healthy Fats (olive oil, avocado, nuts, seeds)<br>
                                + 30ml Water per 1kg of Body Weight Every Day
                            </div>
                        </div>
                        
                        <!-- Details List -->
                        <div style="background: linear-gradient(135deg, rgba(200,213,185,0.15), rgba(200,213,185,0.08)); padding: 1.5rem; border-radius: 16px;">
                            <div style="display: grid; gap: 0.8rem; font-size: 0.95rem; color: #4A5568; font-weight: 300; line-height: 1.6;">
                                <div><strong style="color: #8BC34A;">🥬 ½ Vegetables:</strong> Rainbow colours - red peppers, carrots, broccoli, spinach, purple cabbage</div>
                                <div><strong style="color: #F44336;">🐟 ¼ Protein:</strong> SMASH fish (salmon, mackerel, sardines), chicken, turkey, lamb, beef, eggs, legumes</div>
                                <div><strong style="color: #FFC107;">🌾 ¼ Complex Carbs:</strong> Quinoa, brown rice, sweet potato, wholegrain bread, oats</div>
                                <div><strong style="color: #E91E63;">🫒 Healthy Fats:</strong> Olive oil, avocado, nuts, seeds (thumb-sized portion each meal)</div>
                            </div>
                        </div>
                        
                        <p style="margin: 1rem 0 0; color: #5A6C7D; font-size: 0.9rem; font-weight: 300; line-height: 1.6;">
                            💡 <strong>Tip:</strong> This ratio keeps blood sugar stable, provides sustained energy, and supports hormone balance throughout menopause.
                        </p>
                    </div>
                </div>
            </div>

        </div>

        <!-- Back to Home Button -->
        <div style="text-align: center; margin: 3rem 0 2rem;">
            <button id="backToWelcomeFromRecipes" style="padding: 1rem 3rem; background: linear-gradient(135deg, #FF6B9D, #E91E63); color: white; border: none; border-radius: 20px; font-size: 1.1rem; font-weight: 600; cursor: pointer; box-shadow: 0 4px 15px rgba(116, 139, 117, 0.3); transition: all 0.3s; display: inline-flex; align-items: center; gap: 1rem;">
                <span>Back to Home</span>
                <span>🏠</span>
            </button>
        </div>
        
        <!-- RECIPE FAVORITES MODAL -->
        <div id="recipeFavoritesModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center; padding: 1rem;">
            <div style="background: white; border-radius: 20px; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto; padding: 2rem; position: relative; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
                <button id="closeRecipeFavoritesModal" style="position: absolute; top: 1rem; left: 1rem; background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--text-medium); line-height: 1; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.2s;" onmouseover="this.style.background='#f0f0f0'" onmouseout="this.style.background='none'" title="Close">×</button>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; padding: 0 3rem;">
                    <h2 style="color: #E91E63; margin: 0; display: flex; align-items: center; gap: 0.5rem;">
                        <span>💝</span>
                        <span>Your Saved Recipes</span>
                    </h2>
                    <div style="display: flex; gap: 0.8rem;">
                        <button onclick="window.print()" style="padding: 0.6rem 1.2rem; background: var(--primary-green); color: #2C3E50; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s; display: flex; align-items: center; gap: 0.5rem;" onmouseover="this.style.background='var(--secondary-green)';" onmouseout="this.style.background='var(--primary-green)';" title="Print favorites">
                            <span style="font-size: 1.1rem;">🖨️</span>
                            <span>Print</span>
                        </button>
                        <button id="clearAllRecipeFavoritesBtn" style="padding: 0.6rem 1.2rem; background: white; border: 2px solid #FF6B6B; color: #FF6B6B; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#FF6B6B'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='#FF6B6B';">
                            Clear All
                        </button>
                    </div>
                </div>
                <div id="recipeFavoritesGrid" style="display: grid; gap: 0.8rem;">
                    <!-- Recipe favorites will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- WEEK VIEW CONTAINER (hidden initially) -->
    <div class="container" id="weekViewContainer" style="display: none;">
        <div id="weekContent"></div>
        
        <!-- Back to Home Button -->
        <div style="text-align: center; margin: 3rem 0 2rem;">
            <button onclick="backToWelcomeFromWeek()" style="padding: 1rem 3rem; background: linear-gradient(135deg, #FF6B9D, #E91E63); color: white; border: none; border-radius: 20px; font-size: 1.1rem; font-weight: 600; cursor: pointer; box-shadow: 0 4px 15px rgba(116, 139, 117, 0.3); transition: all 0.3s; display: inline-flex; align-items: center; gap: 1rem;">
                <span>Back to Home</span>
                <span>🏠</span>
            </button>
        </div>
    </div>

    <!-- MOVEMENT & ACTIVITY SECTION (hidden initially) -->
    <div class="container" id="movementContainer" style="display: none;">
        <h1>💪 Movement & Activity Protocols</h1>
        <p class="subtitle">✨ Evidence-based exercise guidance for common menopause symptoms ✨</p>

        <div style="max-width: 900px; margin: 2rem auto;">
            
            <!-- Introduction Card -->
            <div style="background: linear-gradient(135deg, #F4C2C2, #E6D5E8); color: #2C3E50; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.2); margin-bottom: 2rem;">
                <h2 style="color: #2C3E50; margin-bottom: 1rem;">🏃 Why Movement Matters in Menopause</h2>
                <p style="margin-bottom: 0.8rem; line-height: 1.7;">Regular physical activity is one of the most effective ways to manage menopause symptoms. Exercise helps regulate hormones, improves mood, supports bone density, aids weight management, and reduces the severity of hot flushes.</p>
                <p style="margin-bottom: 0.8rem; line-height: 1.7;"><strong>The key:</strong> Different symptoms respond to different types of movement. This section provides evidence-based protocols for the most common menopause symptoms.</p>
                <div style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 12px; margin-top: 1rem;">
                    <p style="margin: 0; font-size: 0.95rem;"><strong>⚠️ Important:</strong> Always consult your GP before starting a new exercise programme, especially if you have existing health conditions. Consider working with a qualified physiotherapist, personal trainer, or exercise professional who can assess your individual needs and ensure proper form. Start gradually and listen to your body.</p>
                </div>
            </div>

            <!-- Protocol Navigation -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.15); margin-bottom: 2rem;">
                <h3 style="color: #E91E63; margin-bottom: 1.5rem; text-align: center;">Choose Your Symptom</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <button class="protocol-nav-btn" data-protocol="hot-flushes" style="padding: 1.5rem 1rem; border: 2px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center; font-weight: 600; color: var(--text-dark);">
                        🔥 Hot Flushes
                    </button>
                    <button class="protocol-nav-btn" data-protocol="weight-gain" style="padding: 1.5rem 1rem; border: 2px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center; font-weight: 600; color: var(--text-dark);">
                        ⚖️ Weight Gain
                    </button>
                    <button class="protocol-nav-btn" data-protocol="anxiety-mood" style="padding: 1.5rem 1rem; border: 2px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center; font-weight: 600; color: var(--text-dark);">
                        😰 Anxiety & Mood
                    </button>
                    <button class="protocol-nav-btn" data-protocol="joint-pain" style="padding: 1.5rem 1rem; border: 2px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center; font-weight: 600; color: var(--text-dark);">
                        🦴 Joint Pain
                    </button>
                    <button class="protocol-nav-btn" data-protocol="fatigue" style="padding: 1.5rem 1rem; border: 2px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center; font-weight: 600; color: var(--text-dark);">
                        😴 Low Energy
                    </button>
                    <button class="protocol-nav-btn" data-protocol="sleep" style="padding: 1.5rem 1rem; border: 2px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center; font-weight: 600; color: var(--text-dark);">
                        🌙 Sleep Problems
                    </button>
                    <button class="protocol-nav-btn" data-protocol="brain-fog" style="padding: 1.5rem 1rem; border: 2px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center; font-weight: 600; color: var(--text-dark);">
                        🧠 Brain Fog
                    </button>
                    <button class="protocol-nav-btn" data-protocol="bone-health" style="padding: 1.5rem 1rem; border: 2px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center; font-weight: 600; color: var(--text-dark);">
                        🦴 Bone Health
                    </button>
                    <button class="protocol-nav-btn" data-protocol="pelvic-floor" style="padding: 1.5rem 1rem; border: 2px solid var(--light-green); background: white; border-radius: 12px; cursor: pointer; transition: all 0.3s; text-align: center; font-weight: 600; color: var(--text-dark);">
                        🌸 Pelvic Floor
                    </button>
                </div>
            </div>

            <!-- Protocol Content Area -->
            <div id="protocolContent"></div>

        </div>

        <!-- Back to Home Button -->
        <div style="text-align: center; margin: 3rem 0 2rem;">
            <button id="backToWelcomeFromMovement" style="padding: 1rem 3rem; background: linear-gradient(135deg, #FF6B9D, #E91E63); color: white; border: none; border-radius: 20px; font-size: 1.1rem; font-weight: 600; cursor: pointer; box-shadow: 0 4px 15px rgba(116, 139, 117, 0.3); transition: all 0.3s; display: inline-flex; align-items: center; gap: 1rem;">
                <span>Back to Home</span>
                <span>🏠</span>
            </button>
        </div>
    </div>

    <!-- DAILY PLAN SECTION -->
    <div class="container" id="dailyPlanContainer" style="display: none;">
        <h1>📅 Your Daily Wellness Plan</h1>
        <p class="subtitle">✨ Structure your day for optimal menopause support ✨</p>

        <div style="max-width: 1000px; margin: 2rem auto;">
            
            <!-- Date Selector -->
            <div style="background: linear-gradient(135deg, #F4C2C2, #E6D5E8); color: #2C3E50; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.2); margin-bottom: 2rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                    <div>
                        <h2 style="color: #2C3E50; margin: 0 0 0.5rem 0; font-size: 1.8rem;">Today's Plan</h2>
                        <p id="dailyPlanDate" style="margin: 0; font-size: 1.1rem; opacity: 0.95;"></p>
                    </div>
                    <button onclick="window.print()" style="padding: 0.9rem 1.8rem; background: white; color: #E91E63; border: none; border-radius: 14px; cursor: pointer; font-weight: 600; transition: all 0.3s; display: flex; align-items: center; gap: 0.6rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0,0,0,0.1)';">
                        <span style="font-size: 1.2rem;">🖨️</span>
                        <span>Print Plan</span>
                    </button>
                </div>
            </div>

            <!-- Quick Stats Dashboard -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                <!-- Water Intake -->
                <div style="background: linear-gradient(135deg, #D4F1F4, #FFFFFF); border-radius: 16px; padding: 1.5rem; box-shadow: 0 4px 15px rgba(117, 230, 218, 0.2); border: 2px solid #75E6DA;">
                    <div style="display: flex; align-items: center; gap: 0.8rem; margin-bottom: 1rem;">
                        <span style="font-size: 2rem;">💧</span>
                        <h3 style="margin: 0; color: #189AB4; font-size: 1.1rem;">Water Tracker</h3>
                    </div>
                    <div id="waterGlassesContainer" style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem;">
                        <!-- 8 glasses will be generated here -->
                    </div>
                    <p style="margin: 0; font-size: 0.9rem; color: #5A6C7D; text-align: center;" id="waterCount">0 of 8 glasses</p>
                </div>

                <!-- Movement Check -->
                <div style="background: linear-gradient(135deg, #FFE5D9, #FFFFFF); border-radius: 16px; padding: 1.5rem; box-shadow: 0 4px 15px rgba(255, 182, 157, 0.2); border: 2px solid #FFB69D;">
                    <div style="display: flex; align-items: center; gap: 0.8rem; margin-bottom: 1rem;">
                        <span style="font-size: 2rem;">💪</span>
                        <h3 style="margin: 0; color: #D35400; font-size: 1.1rem;">Movement</h3>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label style="display: flex; align-items: center; gap: 0.8rem; cursor: pointer; padding: 0.8rem; background: white; border-radius: 10px; transition: all 0.3s;" onmouseover="this.style.background='#FFF5F0'" onmouseout="this.style.background='white'">
                            <input type="checkbox" id="movementDone" style="width: 20px; height: 20px; cursor: pointer;">
                            <span style="font-size: 0.95rem; color: #4A5568;">30+ mins today</span>
                        </label>
                    </div>
                    <p style="margin: 0; font-size: 0.85rem; color: #7D8A99; text-align: center;">Goal: 150 mins/week</p>
                </div>

                <!-- Supplements -->
                <div style="background: linear-gradient(135deg, #E8DAEF, #FFFFFF); border-radius: 16px; padding: 1.5rem; box-shadow: 0 4px 15px rgba(187, 143, 206, 0.2); border: 2px solid #BB8FCE;">
                    <div style="display: flex; align-items: center; gap: 0.8rem; margin-bottom: 1rem;">
                        <span style="font-size: 2rem;">💊</span>
                        <h3 style="margin: 0; color: #6C3483; font-size: 1.1rem;">Supplements</h3>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label style="display: flex; align-items: center; gap: 0.8rem; cursor: pointer; padding: 0.8rem; background: white; border-radius: 10px; transition: all 0.3s;" onmouseover="this.style.background='#F9F5FC'" onmouseout="this.style.background='white'">
                            <input type="checkbox" id="supplementsTaken" style="width: 20px; height: 20px; cursor: pointer;">
                            <span style="font-size: 0.95rem; color: #4A5568;">Taken today</span>
                        </label>
                    </div>
                    <p style="margin: 0; font-size: 0.85rem; color: #7D8A99; text-align: center;">Track consistency</p>
                </div>

                <!-- Protein Target -->
                <div style="background: linear-gradient(135deg, #E8F8F5, #FFFFFF); border-radius: 16px; padding: 1.5rem; box-shadow: 0 4px 15px rgba(118, 215, 196, 0.2); border: 2px solid #76D7C4;">
                    <div style="display: flex; align-items: center; gap: 0.8rem; margin-bottom: 1rem;">
                        <span style="font-size: 2rem;">🍗</span>
                        <h3 style="margin: 0; color: #117A65; font-size: 1.1rem;">Protein Today</h3>
                    </div>
                    <div style="margin-bottom: 0.8rem;">
                        <div style="background: rgba(118, 215, 196, 0.2); border-radius: 10px; height: 12px; overflow: hidden;">
                            <div id="dailyProteinBar" style="background: linear-gradient(90deg, #76D7C4, #48C9B0); height: 100%; width: 0%; transition: width 0.5s ease;"></div>
                        </div>
                    </div>
                    <p style="margin: 0; font-size: 0.9rem; color: #5A6C7D; text-align: center;" id="dailyProteinText">0g of 100g</p>
                </div>
            </div>

            <!-- Advanced Protein Tracker - MOVED HERE (right after dashboard) -->
            <div style="background: linear-gradient(135deg, #E8F8F5, #F5FFFD); border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(118, 215, 196, 0.15); margin-bottom: 2rem; border: 2px solid #76D7C4;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem;">
                    <h4 style="margin: 0; color: #117A65; font-size: 1.2rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1.5rem;">🎯</span> Protein Tracker
                    </h4>
                    <div style="display: flex; gap: 0.8rem;">
                        <button id="resetProteinTracker" style="padding: 0.6rem 1.2rem; background: white; border: 2px solid #FF6B6B; color: #FF6B6B; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 0.9rem; transition: all 0.3s; display: flex; align-items: center; gap: 0.5rem;" onmouseover="this.style.background='#FF6B6B'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='#FF6B6B';">
                            <span>🔄</span> Reset Today
                        </button>
                        <button id="toggleProteinCalculator" style="padding: 0.6rem 1.2rem; background: white; border: 2px solid #76D7C4; color: #117A65; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 0.9rem; transition: all 0.3s;" onmouseover="this.style.background='#76D7C4'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='#117A65';">
                            ⚙️ Set Your Target
                        </button>
                    </div>
                </div>
                
                <!-- Target Calculator (collapsible) -->
                <div id="proteinCalculatorSection" style="display: none; margin-bottom: 2rem; padding: 1.5rem; background: rgba(118, 215, 196, 0.1); border-radius: 12px; border: 1px dashed #76D7C4;">
                    <h5 style="margin: 0 0 1rem 0; color: #117A65; font-size: 1rem;">Calculate Your Protein Target</h5>
                    <p style="margin: 0 0 1rem 0; font-size: 0.85rem; color: #5A6C7D;">For menopause support: aim for 1.2-1.6g protein per kg body weight</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem; color: #4A5568; font-weight: 500;">Your Weight</label>
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="number" id="dailyWeightInput" min="30" max="200" placeholder="e.g., 70" style="flex: 1; padding: 0.8rem; border: 1px solid #E0E0E0; border-radius: 10px; font-size: 0.95rem;">
                                <select id="dailyWeightUnit" style="padding: 0.8rem; border: 1px solid #E0E0E0; border-radius: 10px; font-size: 0.95rem; background: white; cursor: pointer;">
                                    <option value="kg">kg</option>
                                    <option value="lbs">lbs</option>
                                    <option value="st">stone</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem; color: #4A5568; font-weight: 500;">Activity Level</label>
                            <select id="dailyActivityLevel" style="width: 100%; padding: 0.8rem; border: 1px solid #E0E0E0; border-radius: 10px; font-size: 0.95rem; background: white; cursor: pointer;">
                                <option value="1.2">Sedentary (little exercise)</option>
                                <option value="1.4" selected>Lightly active (1-3 days/week)</option>
                                <option value="1.6">Moderately active (3-5 days/week)</option>
                                <option value="1.8">Very active (6-7 days/week)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button id="calculateDailyProteinTarget" style="padding: 0.8rem 2rem; background: linear-gradient(135deg, #76D7C4, #48C9B0); color: #2C3E50; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 0.95rem; transition: all 0.3s; box-shadow: 0 4px 12px rgba(118, 215, 196, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 18px rgba(118, 215, 196, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(118, 215, 196, 0.3)';">
                            Calculate Target
                        </button>
                        <div id="calculatedTargetDisplay" style="display: none; padding: 0.8rem 1.5rem; background: white; border-radius: 12px; font-weight: 600; color: #117A65;">
                            Your target: <span id="calculatedTargetValue">100</span>g per day
                        </div>
                    </div>
                </div>
                
                <!-- Current Target Display -->
                <div style="margin-bottom: 1.5rem; padding: 1rem; background: white; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                    <div>
                        <span style="font-size: 0.85rem; color: #7D8A99; text-transform: uppercase; letter-spacing: 0.5px;">Your Daily Protein Goal</span>
                        <div style="display: flex; align-items: baseline; gap: 0.5rem; margin-top: 0.3rem;">
                            <span id="currentProteinTarget" style="font-size: 2rem; font-weight: 700; color: #117A65;">100</span>
                            <span style="font-size: 1rem; color: #7D8A99;">grams</span>
                        </div>
                    </div>
                    <button onclick="document.getElementById('currentProteinTarget').contentEditable='true'; document.getElementById('currentProteinTarget').focus();" style="padding: 0.5rem 1rem; background: transparent; border: 1px solid #76D7C4; color: #117A65; border-radius: 8px; cursor: pointer; font-size: 0.85rem; font-weight: 500; transition: all 0.3s;" onmouseover="this.style.background='#F0FAF8'" onmouseout="this.style.background='transparent'">
                        ✏️ Edit
                    </button>
                </div>
                
                <!-- Visual Protein Bar with Target and Current -->
                <div style="margin-bottom: 1.5rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.8rem;">
                        <span style="font-size: 0.9rem; color: #4A5568; font-weight: 500;">Today's Progress</span>
                        <span style="font-size: 0.9rem; color: #7D8A99;">
                            <span id="currentProteinAmount" style="font-weight: 700; color: #117A65; font-size: 1.1rem;">0g</span>
                            <span> / </span>
                            <span id="targetProteinDisplay" style="font-weight: 600;">100g</span>
                        </span>
                    </div>
                    
                    <!-- Dual-layer Progress Bar -->
                    <div style="position: relative; background: #E8F8F5; border-radius: 12px; height: 40px; overflow: hidden; border: 2px solid #D4F1F4;">
                        <!-- Target indicator (lighter background) -->
                        <div style="position: absolute; top: 0; left: 0; height: 100%; background: linear-gradient(90deg, rgba(118, 215, 196, 0.2), rgba(118, 215, 196, 0.3)); width: 100%; display: flex; align-items: center; justify-content: flex-end; padding-right: 1rem;">
                            <span style="font-size: 0.75rem; color: #117A65; font-weight: 600; opacity: 0.6;">TARGET</span>
                        </div>
                        <!-- Actual progress (solid bar) -->
                        <div id="dailyProteinProgressBar" style="position: absolute; top: 0; left: 0; height: 100%; background: linear-gradient(90deg, #76D7C4, #48C9B0); width: 0%; transition: width 0.5s ease; display: flex; align-items: center; justify-content: center; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);">
                            <span id="dailyProteinProgressText" style="font-size: 0.85rem; color: #2C3E50; font-weight: 700; text-shadow: 0 1px 2px rgba(0,0,0,0.2);"></span>
                        </div>
                        <!-- Over-target indicator (if exceeds 100%) -->
                        <div id="dailyProteinOverBar" style="position: absolute; top: 0; left: 100%; height: 100%; background: linear-gradient(90deg, #FFD700, #FFA500); width: 0%; transition: width 0.5s ease, left 0.5s ease; display: none;">
                        </div>
                    </div>
                    
                    <!-- Status Message -->
                    <div style="margin-top: 0.8rem; text-align: center;">
                        <span id="proteinStatusMessage" style="font-size: 0.9rem; color: #7D8A99; font-style: italic;">
                            Enter your meals below to track progress
                        </span>
                    </div>
                </div>
                
                <!-- Meal Protein Inputs -->
                <div style="background: white; border-radius: 12px; padding: 1.5rem;">
                    <h5 style="margin: 0 0 1rem 0; color: #117A65; font-size: 1rem;">Log Protein by Meal</h5>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 1rem;">
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-size: 0.85rem; color: #4A5568; font-weight: 500;">
                                <span style="font-size: 1rem; margin-right: 0.3rem;">🍳</span>Breakfast (g)
                            </label>
                            <input type="number" id="dailyBreakfastProtein" min="0" max="150" placeholder="e.g., 25" style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem; font-weight: 600; transition: all 0.3s;" onfocus="this.style.borderColor='#76D7C4'" onblur="this.style.borderColor='#E0E0E0'">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-size: 0.85rem; color: #4A5568; font-weight: 500;">
                                <span style="font-size: 1rem; margin-right: 0.3rem;">🥗</span>Lunch (g)
                            </label>
                            <input type="number" id="dailyLunchProtein" min="0" max="150" placeholder="e.g., 30" style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem; font-weight: 600; transition: all 0.3s;" onfocus="this.style.borderColor='#76D7C4'" onblur="this.style.borderColor='#E0E0E0'">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-size: 0.85rem; color: #4A5568; font-weight: 500;">
                                <span style="font-size: 1rem; margin-right: 0.3rem;">🍽️</span>Dinner (g)
                            </label>
                            <input type="number" id="dailyDinnerProtein" min="0" max="150" placeholder="e.g., 35" style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem; font-weight: 600; transition: all 0.3s;" onfocus="this.style.borderColor='#76D7C4'" onblur="this.style.borderColor='#E0E0E0'">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-size: 0.85rem; color: #4A5568; font-weight: 500;">
                                <span style="font-size: 1rem; margin-right: 0.3rem;">🍎</span>Snacks (g)
                            </label>
                            <input type="number" id="dailySnacksProtein" min="0" max="100" placeholder="e.g., 10" style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem; font-weight: 600; transition: all 0.3s;" onfocus="this.style.borderColor='#76D7C4'" onblur="this.style.borderColor='#E0E0E0'">
                        </div>
                    </div>
                    
                    <!-- Quick Add Suggestions -->
                    <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #E0E0E0;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.8rem; flex-wrap: wrap; gap: 0.5rem;">
                            <div style="font-size: 0.85rem; color: #7D8A99;">💡 Quick reference:</div>
                            <button id="toggleFoodConverter" style="padding: 0.6rem 1.2rem; background: linear-gradient(135deg, #76D7C4, #48C9B0); color: #2C3E50; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 0.85rem; transition: all 0.3s; box-shadow: 0 2px 8px rgba(118, 215, 196, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(118, 215, 196, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(118, 215, 196, 0.3)';">
                                🔍 Full Food Lookup
                            </button>
                        </div>
                        <div style="display: flex; gap: 0.8rem; flex-wrap: wrap; font-size: 0.8rem; color: #5A6C7D;">
                            <span style="background: #F0FAF8; padding: 0.3rem 0.8rem; border-radius: 6px;">Chicken breast (100g) = 31g</span>
                            <span style="background: #F0FAF8; padding: 0.3rem 0.8rem; border-radius: 6px;">Salmon (100g) = 25g</span>
                            <span style="background: #F0FAF8; padding: 0.3rem 0.8rem; border-radius: 6px;">Greek yoghurt (150g) = 15g</span>
                            <span style="background: #F0FAF8; padding: 0.3rem 0.8rem; border-radius: 6px;">2 eggs = 13g</span>
                            <span style="background: #F0FAF8; padding: 0.3rem 0.8rem; border-radius: 6px;">Lentils (200g) = 18g</span>
                        </div>
                    </div>
                    
                    <!-- Food Converter Tool (Collapsible) -->
                    <div id="foodConverterSection" style="display: none; margin-top: 1.5rem; padding: 1.5rem; background: linear-gradient(135deg, #FFF9F5, #FFFFFF); border-radius: 12px; border: 2px solid #FFE5D9;">
                        <h5 style="margin: 0 0 1rem 0; color: #D35400; font-size: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <span>🔍</span> Protein Food Lookup (100+ Foods)
                        </h5>
                        
                        <!-- Search Box -->
                        <div style="margin-bottom: 1rem;">
                            <input type="text" id="foodSearchInput" placeholder="Search food (e.g., chicken, eggs, tofu)..." style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 0.95rem;" oninput="filterFoodList()">
                        </div>
                        
                        <!-- Food Categories -->
                        <div style="display: grid; gap: 1rem; max-height: 500px; overflow-y: auto; padding-right: 0.5rem;">
                            
                            <!-- Meat & Poultry -->
                            <div class="food-category" data-category="meat">
                                <div style="background: linear-gradient(135deg, #FFE5D9, #FFF5F0); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #D35400; font-size: 0.9rem; font-weight: 700;">🍗 MEAT & POULTRY (16 items)</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="chicken breast" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Chicken breast, grilled (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">31g</span>
                                    </div>
                                    <div class="food-item" data-name="chicken thigh" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Chicken thigh, skinless (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">26g</span>
                                    </div>
                                    <div class="food-item" data-name="turkey breast" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Turkey breast, roasted (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">29g</span>
                                    </div>
                                    <div class="food-item" data-name="turkey mince ground" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Turkey mince, cooked (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">27g</span>
                                    </div>
                                    <div class="food-item" data-name="lean beef steak" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Lean beef steak (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">26g</span>
                                    </div>
                                    <div class="food-item" data-name="beef mince ground lean" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Lean beef mince, cooked (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">25g</span>
                                    </div>
                                    <div class="food-item" data-name="pork loin chop" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Pork loin chop (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">27g</span>
                                    </div>
                                    <div class="food-item" data-name="pork tenderloin" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Pork tenderloin (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">26g</span>
                                    </div>
                                    <div class="food-item" data-name="lamb leg" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Lamb leg, roasted (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">25g</span>
                                    </div>
                                    <div class="food-item" data-name="duck breast" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Duck breast, skinless (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">23g</span>
                                    </div>
                                    <div class="food-item" data-name="venison deer" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Venison (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">30g</span>
                                    </div>
                                    <div class="food-item" data-name="bacon back rasher" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Back bacon, grilled (2 rashers)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">11g</span>
                                    </div>
                                    <div class="food-item" data-name="ham turkey sliced" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Sliced turkey ham (50g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">10g</span>
                                    </div>
                                    <div class="food-item" data-name="chorizo sausage" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Chorizo (50g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">12g</span>
                                    </div>
                                    <div class="food-item" data-name="chicken sausage" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Chicken sausage (1 link, 75g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">14g</span>
                                    </div>
                                    <div class="food-item" data-name="salami pepperoni" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Salami (30g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">6g</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Fish & Seafood -->
                            <div class="food-category" data-category="fish">
                                <div style="background: linear-gradient(135deg, #D4F1F4, #F0FAFB); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #189AB4; font-size: 0.9rem; font-weight: 700;">🐟 FISH & SEAFOOD (20 items)</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="salmon" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Salmon, fresh (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">25g</span>
                                    </div>
                                    <div class="food-item" data-name="salmon smoked" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Smoked salmon (50g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">12g</span>
                                    </div>
                                    <div class="food-item" data-name="tuna fresh steak" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Tuna steak, fresh (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">30g</span>
                                    </div>
                                    <div class="food-item" data-name="tuna tinned canned" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Tuna, tinned in water (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">25g</span>
                                    </div>
                                    <div class="food-item" data-name="cod haddock white fish" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Cod/Haddock (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">23g</span>
                                    </div>
                                    <div class="food-item" data-name="mackerel" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Mackerel, grilled (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">24g</span>
                                    </div>
                                    <div class="food-item" data-name="sardines pilchards" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Sardines, tinned (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">25g</span>
                                    </div>
                                    <div class="food-item" data-name="trout" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Trout (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">24g</span>
                                    </div>
                                    <div class="food-item" data-name="sea bass bream" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Sea bass (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">23g</span>
                                    </div>
                                    <div class="food-item" data-name="halibut" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Halibut (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">23g</span>
                                    </div>
                                    <div class="food-item" data-name="prawns shrimp" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Prawns/Shrimp, cooked (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">24g</span>
                                    </div>
                                    <div class="food-item" data-name="crab" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Crab meat (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">20g</span>
                                    </div>
                                    <div class="food-item" data-name="lobster" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Lobster (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">19g</span>
                                    </div>
                                    <div class="food-item" data-name="scallops" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Scallops (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">20g</span>
                                    </div>
                                    <div class="food-item" data-name="mussels" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Mussels (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">24g</span>
                                    </div>
                                    <div class="food-item" data-name="squid calamari" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Squid/Calamari (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">18g</span>
                                    </div>
                                    <div class="food-item" data-name="octopus" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Octopus (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">30g</span>
                                    </div>
                                    <div class="food-item" data-name="anchovies" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Anchovies (5 fillets, 20g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">6g</span>
                                    </div>
                                    <div class="food-item" data-name="fish fingers" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Fish fingers, grilled (4 pieces)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">13g</span>
                                    </div>
                                    <div class="food-item" data-name="smoked haddock kipper" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Smoked haddock/kipper (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">23g</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Dairy & Eggs -->
                            <div class="food-category" data-category="dairy">
                                <div style="background: linear-gradient(135deg, #FFF4E6, #FFFBF5); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #E67E22; font-size: 0.9rem; font-weight: 700;">🥛 DAIRY & EGGS (18 items)</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="greek yoghurt yoghurt" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Greek yoghurt, full-fat (150g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">15g</span>
                                    </div>
                                    <div class="food-item" data-name="greek yoghurt low fat" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Greek yoghurt, 0% fat (150g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">17g</span>
                                    </div>
                                    <div class="food-item" data-name="skyr yoghurt" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Skyr yoghurt (150g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">16g</span>
                                    </div>
                                    <div class="food-item" data-name="cottage cheese" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Cottage cheese (100g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">11g</span>
                                    </div>
                                    <div class="food-item" data-name="cheddar cheese" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Cheddar cheese (30g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">7g</span>
                                    </div>
                                    <div class="food-item" data-name="parmesan cheese" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Parmesan, grated (2 tbsp, 20g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">7g</span>
                                    </div>
                                    <div class="food-item" data-name="mozzarella cheese" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Mozzarella (30g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">6g</span>
                                    </div>
                                    <div class="food-item" data-name="feta cheese" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Feta cheese (50g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">7g</span>
                                    </div>
                                    <div class="food-item" data-name="halloumi cheese" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Halloumi, grilled (80g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">17g</span>
                                    </div>
                                    <div class="food-item" data-name="eggs" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Eggs, large (2 whole)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">13g</span>
                                    </div>
                                    <div class="food-item" data-name="egg whites" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Egg whites (4 whites)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">14g</span>
                                    </div>
                                    <div class="food-item" data-name="milk whole" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Milk, whole (250ml)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">8g</span>
                                    </div>
                                    <div class="food-item" data-name="milk skimmed semi" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Milk, skimmed (250ml)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">9g</span>
                                    </div>
                                    <div class="food-item" data-name="protein yoghurt" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">High-protein yoghurt (150g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">20g</span>
                                    </div>
                                    <div class="food-item" data-name="quark" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Quark (100g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">12g</span>
                                    </div>
                                    <div class="food-item" data-name="kefir" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Kefir (250ml)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">8g</span>
                                    </div>
                                    <div class="food-item" data-name="ricotta cheese" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Ricotta cheese (100g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">11g</span>
                                    </div>
                                    <div class="food-item" data-name="paneer cheese indian" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Paneer (100g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">18g</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Legumes & Pulses -->
                            <div class="food-category" data-category="legumes">
                                <div style="background: linear-gradient(135deg, #E8F8F5, #F5FFFD); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #117A65; font-size: 0.9rem; font-weight: 700;">🌱 LEGUMES & PULSES (12 items)</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="lentils red green brown" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Lentils, cooked (200g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">18g</span>
                                    </div>
                                    <div class="food-item" data-name="chickpeas garbanzo" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Chickpeas, cooked (200g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">15g</span>
                                    </div>
                                    <div class="food-item" data-name="black beans" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Black beans, cooked (200g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">15g</span>
                                    </div>
                                    <div class="food-item" data-name="kidney beans" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Kidney beans, cooked (200g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">16g</span>
                                    </div>
                                    <div class="food-item" data-name="pinto beans" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Pinto beans, cooked (200g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">16g</span>
                                    </div>
                                    <div class="food-item" data-name="butter beans lima" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Butter beans, cooked (200g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">15g</span>
                                    </div>
                                    <div class="food-item" data-name="cannellini beans white" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Cannellini beans, cooked (200g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">17g</span>
                                    </div>
                                    <div class="food-item" data-name="edamame soya" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Edamame beans (100g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">11g</span>
                                    </div>
                                    <div class="food-item" data-name="split peas" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Split peas, cooked (200g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">16g</span>
                                    </div>
                                    <div class="food-item" data-name="hummus" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Hummus (100g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">8g</span>
                                    </div>
                                    <div class="food-item" data-name="baked beans" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Baked beans, tinned (200g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">10g</span>
                                    </div>
                                    <div class="food-item" data-name="refried beans" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Refried beans (150g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">9g</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Nuts & Seeds -->
                            <div class="food-category" data-category="nuts">
                                <div style="background: linear-gradient(135deg, #F5EEE6, #FAF8F5); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #8B6F47; font-size: 0.9rem; font-weight: 700;">🥜 NUTS & SEEDS (16 items)</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="almonds" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Almonds (30g, ~23 nuts)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">6g</span>
                                    </div>
                                    <div class="food-item" data-name="almond butter" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Almond butter (2 tbsp)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">7g</span>
                                    </div>
                                    <div class="food-item" data-name="peanuts" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Peanuts (30g)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">8g</span>
                                    </div>
                                    <div class="food-item" data-name="peanut butter" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Peanut butter (2 tbsp)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">8g</span>
                                    </div>
                                    <div class="food-item" data-name="cashews" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Cashews (30g, ~16 nuts)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">5g</span>
                                    </div>
                                    <div class="food-item" data-name="walnuts" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Walnuts (30g, ~14 halves)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">4g</span>
                                    </div>
                                    <div class="food-item" data-name="pecans" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Pecans (30g, ~19 halves)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">3g</span>
                                    </div>
                                    <div class="food-item" data-name="brazil nuts" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Brazil nuts (30g, ~6 nuts)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">4g</span>
                                    </div>
                                    <div class="food-item" data-name="pistachios" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Pistachios (30g, ~49 nuts)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">6g</span>
                                    </div>
                                    <div class="food-item" data-name="hazelnuts filberts" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Hazelnuts (30g, ~21 nuts)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">4g</span>
                                    </div>
                                    <div class="food-item" data-name="macadamia nuts" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Macadamia nuts (30g, ~12 nuts)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">2g</span>
                                    </div>
                                    <div class="food-item" data-name="chia seeds" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Chia seeds (2 tbsp, 28g)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">4g</span>
                                    </div>
                                    <div class="food-item" data-name="flax seeds linseed" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Flax seeds (2 tbsp, 20g)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">4g</span>
                                    </div>
                                    <div class="food-item" data-name="hemp seeds hearts" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Hemp seeds (3 tbsp, 30g)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">10g</span>
                                    </div>
                                    <div class="food-item" data-name="pumpkin seeds pepitas" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Pumpkin seeds (30g)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">9g</span>
                                    </div>
                                    <div class="food-item" data-name="sunflower seeds" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Sunflower seeds (30g)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">6g</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Plant-Based Proteins -->
                            <div class="food-category" data-category="plant">
                                <div style="background: linear-gradient(135deg, #E8DAEF, #F5F0F7); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #6C3483; font-size: 0.9rem; font-weight: 700;">🌿 PLANT-BASED PROTEINS (14 items)</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="tofu firm" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Tofu, firm (100g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">17g</span>
                                    </div>
                                    <div class="food-item" data-name="tofu silken soft" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Tofu, silken (100g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">5g</span>
                                    </div>
                                    <div class="food-item" data-name="tempeh" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Tempeh (100g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">19g</span>
                                    </div>
                                    <div class="food-item" data-name="seitan wheat meat gluten" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Seitan (100g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">25g</span>
                                    </div>
                                    <div class="food-item" data-name="quorn mycoprotein" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Quorn pieces (100g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">14g</span>
                                    </div>
                                    <div class="food-item" data-name="soya mince tvp" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Soya mince, cooked (100g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">16g</span>
                                    </div>
                                    <div class="food-item" data-name="beyond meat burger impossible" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Plant-based burger (1 patty, 113g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">20g</span>
                                    </div>
                                    <div class="food-item" data-name="quinoa" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Quinoa, cooked (200g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">8g</span>
                                    </div>
                                    <div class="food-item" data-name="nutritional yeast" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Nutritional yeast (2 tbsp, 16g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">8g</span>
                                    </div>
                                    <div class="food-item" data-name="spirulina algae" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Spirulina powder (1 tbsp, 7g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">4g</span>
                                    </div>
                                    <div class="food-item" data-name="soya milk" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Soya milk (250ml)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">8g</span>
                                    </div>
                                    <div class="food-item" data-name="pea milk protein" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Pea milk (250ml)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">8g</span>
                                    </div>
                                    <div class="food-item" data-name="vegan protein powder" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Vegan protein powder (1 scoop, 30g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">20g</span>
                                    </div>
                                    <div class="food-item" data-name="green peas" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Green peas, cooked (160g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">9g</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Grains & Bread -->
                            <div class="food-category" data-category="grains">
                                <div style="background: linear-gradient(135deg, #FFF9E6, #FFFEFC); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #C17817; font-size: 0.9rem; font-weight: 700;">🌾 GRAINS & BREAD (10 items)</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="oats porridge" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E59400; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Oats, dry (50g)</span>
                                        <span style="font-weight: 700; color: #C17817; font-size: 0.9rem;">6g</span>
                                    </div>
                                    <div class="food-item" data-name="wholemeal bread" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E59400; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Wholemeal bread (2 slices)</span>
                                        <span style="font-weight: 700; color: #C17817; font-size: 0.9rem;">8g</span>
                                    </div>
                                    <div class="food-item" data-name="protein bread" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E59400; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Protein bread (2 slices)</span>
                                        <span style="font-weight: 700; color: #C17817; font-size: 0.9rem;">12g</span>
                                    </div>
                                    <div class="food-item" data-name="brown rice" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E59400; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Brown rice, cooked (200g)</span>
                                        <span style="font-weight: 700; color: #C17817; font-size: 0.9rem;">5g</span>
                                    </div>
                                    <div class="food-item" data-name="pasta wholegrain" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E59400; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Wholegrain pasta, cooked (150g)</span>
                                        <span style="font-weight: 700; color: #C17817; font-size: 0.9rem;">9g</span>
                                    </div>
                                    <div class="food-item" data-name="couscous" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E59400; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Couscous, cooked (150g)</span>
                                        <span style="font-weight: 700; color: #C17817; font-size: 0.9rem;">6g</span>
                                    </div>
                                    <div class="food-item" data-name="bulgur wheat" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E59400; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Bulgur wheat, cooked (150g)</span>
                                        <span style="font-weight: 700; color: #C17817; font-size: 0.9rem;">5g</span>
                                    </div>
                                    <div class="food-item" data-name="buckwheat" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E59400; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Buckwheat, cooked (150g)</span>
                                        <span style="font-weight: 700; color: #C17817; font-size: 0.9rem;">6g</span>
                                    </div>
                                    <div class="food-item" data-name="ezekiel bread sprouted" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E59400; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Ezekiel bread (2 slices)</span>
                                        <span style="font-weight: 700; color: #C17817; font-size: 0.9rem;">10g</span>
                                    </div>
                                    <div class="food-item" data-name="rye bread" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E59400; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Rye bread (2 slices)</span>
                                        <span style="font-weight: 700; color: #C17817; font-size: 0.9rem;">9g</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Protein Supplements -->
                            <div class="food-category" data-category="supplements">
                                <div style="background: linear-gradient(135deg, #FFE5F0, #FFF5F9); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #C0392B; font-size: 0.9rem; font-weight: 700;">💪 PROTEIN SUPPLEMENTS (8 items)</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="whey protein powder isolate" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E74C3C; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Whey protein isolate (1 scoop, 30g)</span>
                                        <span style="font-weight: 700; color: #C0392B; font-size: 0.9rem;">25g</span>
                                    </div>
                                    <div class="food-item" data-name="whey protein concentrate" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E74C3C; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Whey protein concentrate (1 scoop, 30g)</span>
                                        <span style="font-weight: 700; color: #C0392B; font-size: 0.9rem;">22g</span>
                                    </div>
                                    <div class="food-item" data-name="casein protein" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E74C3C; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Casein protein (1 scoop, 30g)</span>
                                        <span style="font-weight: 700; color: #C0392B; font-size: 0.9rem;">24g</span>
                                    </div>
                                    <div class="food-item" data-name="collagen peptides" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E74C3C; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Collagen peptides (1 scoop, 20g)</span>
                                        <span style="font-weight: 700; color: #C0392B; font-size: 0.9rem;">18g</span>
                                    </div>
                                    <div class="food-item" data-name="pea protein powder" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E74C3C; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Pea protein powder (1 scoop, 33g)</span>
                                        <span style="font-weight: 700; color: #C0392B; font-size: 0.9rem;">24g</span>
                                    </div>
                                    <div class="food-item" data-name="soya protein isolate" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E74C3C; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Soya protein isolate (1 scoop, 30g)</span>
                                        <span style="font-weight: 700; color: #C0392B; font-size: 0.9rem;">27g</span>
                                    </div>
                                    <div class="food-item" data-name="protein bar" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E74C3C; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Protein bar (1 bar, average)</span>
                                        <span style="font-weight: 700; color: #C0392B; font-size: 0.9rem;">20g</span>
                                    </div>
                                    <div class="food-item" data-name="protein shake ready made" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #E74C3C; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Ready-made protein shake (330ml)</span>
                                        <span style="font-weight: 700; color: #C0392B; font-size: 0.9rem;">25g</span>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        
                        <div style="margin-top: 1rem; padding: 1rem; background: rgba(118, 215, 196, 0.1); border-radius: 10px; font-size: 0.85rem; color: #5A6C7D;">
                            💡 <strong>Tip:</strong> Use the search box to quickly find foods. All values are approximate and may vary by brand. This database contains <strong>114 protein-rich foods</strong>.
                        </div>
                    </div>
                    <div id="foodConverterSection" style="display: none; margin-top: 1.5rem; padding: 1.5rem; background: linear-gradient(135deg, #FFF9F5, #FFFFFF); border-radius: 12px; border: 2px solid #FFE5D9;">
                        <h5 style="margin: 0 0 1rem 0; color: #D35400; font-size: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <span>🔍</span> Protein Food Lookup
                        </h5>
                        
                        <!-- Search Box -->
                        <div style="margin-bottom: 1rem;">
                            <input type="text" id="foodSearchInput" placeholder="Search food (e.g., chicken, eggs, tofu)..." style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 0.95rem;" oninput="filterFoodList()">
                        </div>
                        
                        <!-- Food Categories -->
                        <div style="display: grid; gap: 1rem; max-height: 400px; overflow-y: auto; padding-right: 0.5rem;">
                            
                            <!-- Meat & Poultry -->
                            <div class="food-category" data-category="meat">
                                <div style="background: linear-gradient(135deg, #FFE5D9, #FFF5F0); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #D35400; font-size: 0.9rem; font-weight: 700;">🍗 MEAT & POULTRY</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="chicken breast" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Chicken breast (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">31g</span>
                                    </div>
                                    <div class="food-item" data-name="turkey breast" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Turkey breast (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">29g</span>
                                    </div>
                                    <div class="food-item" data-name="lean beef" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Lean beef (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">26g</span>
                                    </div>
                                    <div class="food-item" data-name="pork loin" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #FFB69D; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Pork loin (100g)</span>
                                        <span style="font-weight: 700; color: #D35400; font-size: 0.9rem;">27g</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Fish & Seafood -->
                            <div class="food-category" data-category="fish">
                                <div style="background: linear-gradient(135deg, #D4F1F4, #F0FAFB); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #189AB4; font-size: 0.9rem; font-weight: 700;">🐟 FISH & SEAFOOD</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="salmon" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Salmon (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">25g</span>
                                    </div>
                                    <div class="food-item" data-name="tuna" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Tuna (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">30g</span>
                                    </div>
                                    <div class="food-item" data-name="cod" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Cod (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">23g</span>
                                    </div>
                                    <div class="food-item" data-name="prawns shrimp" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #75E6DA; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Prawns/Shrimp (100g)</span>
                                        <span style="font-weight: 700; color: #189AB4; font-size: 0.9rem;">24g</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Dairy & Eggs -->
                            <div class="food-category" data-category="dairy">
                                <div style="background: linear-gradient(135deg, #FFF4E6, #FFFBF5); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #E67E22; font-size: 0.9rem; font-weight: 700;">🥛 DAIRY & EGGS</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="greek yoghurt yoghurt" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Greek yoghurt (150g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">15g</span>
                                    </div>
                                    <div class="food-item" data-name="cottage cheese" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Cottage cheese (100g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">11g</span>
                                    </div>
                                    <div class="food-item" data-name="cheddar cheese" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Cheddar cheese (30g)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">7g</span>
                                    </div>
                                    <div class="food-item" data-name="eggs" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Eggs (2 large)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">13g</span>
                                    </div>
                                    <div class="food-item" data-name="milk" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #F39C12; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Milk (250ml)</span>
                                        <span style="font-weight: 700; color: #E67E22; font-size: 0.9rem;">8g</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Legumes & Pulses -->
                            <div class="food-category" data-category="legumes">
                                <div style="background: linear-gradient(135deg, #E8F8F5, #F5FFFD); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #117A65; font-size: 0.9rem; font-weight: 700;">🌱 LEGUMES & PULSES</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="lentils" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Lentils cooked (200g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">18g</span>
                                    </div>
                                    <div class="food-item" data-name="chickpeas garbanzo" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Chickpeas cooked (200g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">15g</span>
                                    </div>
                                    <div class="food-item" data-name="black beans" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Black beans cooked (200g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">15g</span>
                                    </div>
                                    <div class="food-item" data-name="edamame" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #76D7C4; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Edamame (100g)</span>
                                        <span style="font-weight: 700; color: #117A65; font-size: 0.9rem;">11g</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Nuts & Seeds -->
                            <div class="food-category" data-category="nuts">
                                <div style="background: linear-gradient(135deg, #F5EEE6, #FAF8F5); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #8B6F47; font-size: 0.9rem; font-weight: 700;">🥜 NUTS & SEEDS</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="almonds" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Almonds (30g)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">6g</span>
                                    </div>
                                    <div class="food-item" data-name="peanut butter" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Peanut butter (2 tbsp)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">8g</span>
                                    </div>
                                    <div class="food-item" data-name="chia seeds" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Chia seeds (2 tbsp)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">4g</span>
                                    </div>
                                    <div class="food-item" data-name="hemp seeds" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #C19A6B; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Hemp seeds (3 tbsp)</span>
                                        <span style="font-weight: 700; color: #8B6F47; font-size: 0.9rem;">10g</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Plant-Based Proteins -->
                            <div class="food-category" data-category="plant">
                                <div style="background: linear-gradient(135deg, #E8DAEF, #F5F0F7); padding: 0.8rem; border-radius: 10px; margin-bottom: 0.5rem;">
                                    <h6 style="margin: 0; color: #6C3483; font-size: 0.9rem; font-weight: 700;">🌿 PLANT-BASED</h6>
                                </div>
                                <div style="display: grid; gap: 0.5rem; padding-left: 1rem;">
                                    <div class="food-item" data-name="tofu" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Tofu firm (100g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">17g</span>
                                    </div>
                                    <div class="food-item" data-name="tempeh" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Tempeh (100g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">19g</span>
                                    </div>
                                    <div class="food-item" data-name="seitan wheat meat" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Seitan (100g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">25g</span>
                                    </div>
                                    <div class="food-item" data-name="quinoa" style="padding: 0.6rem; background: white; border-radius: 8px; border-left: 3px solid #BB8FCE; display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; color: #4A5568;">Quinoa cooked (200g)</span>
                                        <span style="font-weight: 700; color: #6C3483; font-size: 0.9rem;">8g</span>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        
                        <div style="margin-top: 1rem; padding: 1rem; background: rgba(118, 215, 196, 0.1); border-radius: 10px; font-size: 0.85rem; color: #5A6C7D;">
                            💡 <strong>Tip:</strong> Use the search box to quickly find foods. All values are approximate and may vary by brand.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Meal Planner -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.15); margin-bottom: 2rem;">
                <h3 style="color: #E91E63; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                    <span style="font-size: 1.8rem;">🍽️</span>
                    <span>Today's Meals</span>
                </h3>
                
                <div style="display: grid; gap: 1.5rem;">
                    <!-- Breakfast -->
                    <div style="border: 2px solid #FFE5D9; border-radius: 16px; padding: 1.5rem; background: linear-gradient(135deg, #FFFAF8, white);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h4 style="margin: 0; color: #D35400; font-size: 1.2rem; display: flex; align-items: center; gap: 0.5rem;">
                                <span>🍳</span> Breakfast
                            </h4>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="breakfastEaten" style="width: 18px; height: 18px; cursor: pointer;">
                                <span style="font-size: 0.9rem; color: #7D8A99;">Done</span>
                            </label>
                        </div>
                        <textarea id="breakfastPlan" placeholder="Plan your breakfast... (e.g., Greek yoghurt bowl with berries and walnuts)" style="width: 100%; min-height: 80px; border: 1px solid #E0E0E0; border-radius: 10px; padding: 1rem; font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
                    </div>

                    <!-- Lunch -->
                    <div style="border: 2px solid #FFF4E6; border-radius: 16px; padding: 1.5rem; background: linear-gradient(135deg, #FFFEF9, white);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h4 style="margin: 0; color: #E67E22; font-size: 1.2rem; display: flex; align-items: center; gap: 0.5rem;">
                                <span>🥗</span> Lunch
                            </h4>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="lunchEaten" style="width: 18px; height: 18px; cursor: pointer;">
                                <span style="font-size: 0.9rem; color: #7D8A99;">Done</span>
                            </label>
                        </div>
                        <textarea id="lunchPlan" placeholder="Plan your lunch... (e.g., Mediterranean chickpea salad with feta)" style="width: 100%; min-height: 80px; border: 1px solid #E0E0E0; border-radius: 10px; padding: 1rem; font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
                    </div>

                    <!-- Dinner -->
                    <div style="border: 2px solid #E8F8F5; border-radius: 16px; padding: 1.5rem; background: linear-gradient(135deg, #FAFFFD, white);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h4 style="margin: 0; color: #117A65; font-size: 1.2rem; display: flex; align-items: center; gap: 0.5rem;">
                                <span>🍽️</span> Dinner
                            </h4>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="dinnerEaten" style="width: 18px; height: 18px; cursor: pointer;">
                                <span style="font-size: 0.9rem; color: #7D8A99;">Done</span>
                            </label>
                        </div>
                        <textarea id="dinnerPlan" placeholder="Plan your dinner... (e.g., Baked salmon with roasted vegetables)" style="width: 100%; min-height: 80px; border: 1px solid #E0E0E0; border-radius: 10px; padding: 1rem; font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
                    </div>

                    <!-- Snacks -->
                    <div style="border: 2px solid #FFF1DD; border-radius: 16px; padding: 1.5rem; background: linear-gradient(135deg, #FFFDF8, white);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h4 style="margin: 0; color: #C17817; font-size: 1.1rem; display: flex; align-items: center; gap: 0.5rem;">
                                <span>🍎</span> Snacks
                            </h4>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="snacksEaten" style="width: 18px; height: 18px; cursor: pointer;">
                                <span style="font-size: 0.9rem; color: #7D8A99;">Done</span>
                            </label>
                        </div>
                        <textarea id="snacksPlan" placeholder="Plan your snacks... (e.g., Apple with almond butter, mixed nuts)" style="width: 100%; min-height: 60px; border: 1px solid #E0E0E0; border-radius: 10px; padding: 1rem; font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
                    </div>
                </div>
            </div>

            <!-- Symptom Check-in -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.15); margin-bottom: 2rem;">
                <h3 style="color: #E91E63; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                    <span style="font-size: 1.8rem;">📝</span>
                    <span>Symptom Check-in</span>
                </h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                    <label style="display: flex; align-items: center; gap: 0.6rem; padding: 0.8rem; background: #FAF8F3; border-radius: 10px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='#F5F3ED'" onmouseout="this.style.background='#FAF8F3'">
                        <input type="checkbox" class="symptom-check" data-symptom="hot-flushes" style="width: 18px; height: 18px; cursor: pointer;">
                        <span style="font-size: 0.9rem;">🔥 Hot flushes</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.6rem; padding: 0.8rem; background: #FAF8F3; border-radius: 10px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='#F5F3ED'" onmouseout="this.style.background='#FAF8F3'">
                        <input type="checkbox" class="symptom-check" data-symptom="anxiety" style="width: 18px; height: 18px; cursor: pointer;">
                        <span style="font-size: 0.9rem;">😰 Anxiety</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.6rem; padding: 0.8rem; background: #FAF8F3; border-radius: 10px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='#F5F3ED'" onmouseout="this.style.background='#FAF8F3'">
                        <input type="checkbox" class="symptom-check" data-symptom="sleep-issues" style="width: 18px; height: 18px; cursor: pointer;">
                        <span style="font-size: 0.9rem;">😴 Sleep issues</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.6rem; padding: 0.8rem; background: #FAF8F3; border-radius: 10px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='#F5F3ED'" onmouseout="this.style.background='#FAF8F3'">
                        <input type="checkbox" class="symptom-check" data-symptom="joint-pain" style="width: 18px; height: 18px; cursor: pointer;">
                        <span style="font-size: 0.9rem;">🦴 Joint pain</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.6rem; padding: 0.8rem; background: #FAF8F3; border-radius: 10px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='#F5F3ED'" onmouseout="this.style.background='#FAF8F3'">
                        <input type="checkbox" class="symptom-check" data-symptom="brain-fog" style="width: 18px; height: 18px; cursor: pointer;">
                        <span style="font-size: 0.9rem;">🧠 Brain fog</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.6rem; padding: 0.8rem; background: #FAF8F3; border-radius: 10px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='#F5F3ED'" onmouseout="this.style.background='#FAF8F3'">
                        <input type="checkbox" class="symptom-check" data-symptom="low-energy" style="width: 18px; height: 18px; cursor: pointer;">
                        <span style="font-size: 0.9rem;">💪 Low energy</span>
                    </label>
                </div>

                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #4A5568;">Notes about today:</label>
                    <textarea id="dailyNotes" placeholder="How are you feeling today? Any patterns you notice?" style="width: 100%; min-height: 100px; border: 1px solid #E0E0E0; border-radius: 10px; padding: 1rem; font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
                </div>
            </div>

            <!-- Self-Care Checklist -->
            <div style="background: linear-gradient(135deg, #E8D5F2, #F8F4FC); border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(155, 126, 189, 0.2); margin-bottom: 2rem;">
                <h3 style="color: #7B3F9F; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                    <span style="font-size: 1.8rem;">💝</span>
                    <span>Self-Care Today</span>
                </h3>
                
                <div style="display: grid; gap: 1rem;">
                    <label style="display: flex; align-items: center; gap: 0.8rem; padding: 1rem; background: rgba(255,255,255,0.7); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.95)'" onmouseout="this.style.background='rgba(255,255,255,0.7)'">
                        <input type="checkbox" id="selfCare1" style="width: 20px; height: 20px; cursor: pointer;">
                        <span style="font-size: 1rem; color: #4A5568;">☀️ Spent time outdoors or by a window</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.8rem; padding: 1rem; background: rgba(255,255,255,0.7); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.95)'" onmouseout="this.style.background='rgba(255,255,255,0.7)'">
                        <input type="checkbox" id="selfCare2" style="width: 20px; height: 20px; cursor: pointer;">
                        <span style="font-size: 1rem; color: #4A5568;">🧘 Practiced mindfulness, meditation, or deep breathing</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.8rem; padding: 1rem; background: rgba(255,255,255,0.7); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.95)'" onmouseout="this.style.background='rgba(255,255,255,0.7)'">
                        <input type="checkbox" id="selfCare3" style="width: 20px; height: 20px; cursor: pointer;">
                        <span style="font-size: 1rem; color: #4A5568;">👥 Connected with a friend or loved one</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.8rem; padding: 1rem; background: rgba(255,255,255,0.7); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.95)'" onmouseout="this.style.background='rgba(255,255,255,0.7)'">
                        <input type="checkbox" id="selfCare4" style="width: 20px; height: 20px; cursor: pointer;">
                        <span style="font-size: 1rem; color: #4A5568;">😴 Prioritised rest when needed</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.8rem; padding: 1rem; background: rgba(255,255,255,0.7); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.95)'" onmouseout="this.style.background='rgba(255,255,255,0.7)'">
                        <input type="checkbox" id="selfCare5" style="width: 20px; height: 20px; cursor: pointer;">
                        <span style="font-size: 1rem; color: #4A5568;">🎨 Did something I enjoy</span>
                    </label>
                </div>
            </div>

            <!-- Sleep Tracker -->
            <div style="background: linear-gradient(135deg, #D4E6F1, #EBF5FB); border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(52, 152, 219, 0.2); margin-bottom: 2rem;">
                <h3 style="color: #2874A6; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                    <span style="font-size: 1.8rem;">😴</span>
                    <span>Last Night's Sleep</span>
                </h3>
                
                <!-- Sleep Quality Rating -->
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; margin-bottom: 0.8rem; font-weight: 600; color: #2874A6; font-size: 1rem;">How was your sleep quality?</label>
                    <div style="display: flex; gap: 0.8rem; flex-wrap: wrap; justify-content: center;">
                        <button class="sleep-quality-btn" data-quality="1" style="width: 70px; height: 70px; border-radius: 12px; border: 3px solid #E0E0E0; background: white; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.85rem; color: #5A6C7D;" onclick="selectSleepQuality(1)">
                            <span style="font-size: 2rem; margin-bottom: 0.3rem;">😫</span>
                            <span>Awful</span>
                        </button>
                        <button class="sleep-quality-btn" data-quality="2" style="width: 70px; height: 70px; border-radius: 12px; border: 3px solid #E0E0E0; background: white; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.85rem; color: #5A6C7D;" onclick="selectSleepQuality(2)">
                            <span style="font-size: 2rem; margin-bottom: 0.3rem;">😴</span>
                            <span>Poor</span>
                        </button>
                        <button class="sleep-quality-btn" data-quality="3" style="width: 70px; height: 70px; border-radius: 12px; border: 3px solid #E0E0E0; background: white; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.85rem; color: #5A6C7D;" onclick="selectSleepQuality(3)">
                            <span style="font-size: 2rem; margin-bottom: 0.3rem;">😐</span>
                            <span>OK</span>
                        </button>
                        <button class="sleep-quality-btn" data-quality="4" style="width: 70px; height: 70px; border-radius: 12px; border: 3px solid #E0E0E0; background: white; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.85rem; color: #5A6C7D;" onclick="selectSleepQuality(4)">
                            <span style="font-size: 2rem; margin-bottom: 0.3rem;">🙂</span>
                            <span>Good</span>
                        </button>
                        <button class="sleep-quality-btn" data-quality="5" style="width: 70px; height: 70px; border-radius: 12px; border: 3px solid #E0E0E0; background: white; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.85rem; color: #5A6C7D;" onclick="selectSleepQuality(5)">
                            <span style="font-size: 2rem; margin-bottom: 0.3rem;">😊</span>
                            <span>Great</span>
                        </button>
                    </div>
                </div>

                <!-- Sleep Duration -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem;">
                    <div>
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #2874A6;">Hours Slept</label>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="number" id="sleepHours" min="0" max="14" step="0.5" placeholder="7.5" style="width: 100%; padding: 0.8rem; border: 2px solid #D6EAF8; border-radius: 10px; font-size: 1rem; text-align: center;">
                            <span style="font-size: 1rem; color: #5A6C7D; white-space: nowrap;">hours</span>
                        </div>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #2874A6;">Times Woken Up</label>
                        <input type="number" id="sleepWakeups" min="0" max="20" placeholder="2" style="width: 100%; padding: 0.8rem; border: 2px solid #D6EAF8; border-radius: 10px; font-size: 1rem; text-align: center;">
                    </div>
                </div>

                <!-- Bedtime and Wake Time -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem;">
                    <div>
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #2874A6;">Bedtime</label>
                        <input type="time" id="bedtime" style="width: 100%; padding: 0.8rem; border: 2px solid #D6EAF8; border-radius: 10px; font-size: 1rem;">
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #2874A6;">Wake Time</label>
                        <input type="time" id="waketime" style="width: 100%; padding: 0.8rem; border: 2px solid #D6EAF8; border-radius: 10px; font-size: 1rem;">
                    </div>
                </div>

                <!-- Sleep Issues (Optional) -->
                <div>
                    <label style="display: block; margin-bottom: 0.8rem; font-weight: 500; color: #2874A6;">What affected your sleep? (optional)</label>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.8rem;">
                        <label style="display: flex; align-items: center; gap: 0.6rem; padding: 0.8rem; background: rgba(255,255,255,0.7); border-radius: 10px; cursor: pointer; transition: all 0.3s; font-size: 0.9rem;" onmouseover="this.style.background='rgba(255,255,255,0.95)'" onmouseout="this.style.background='rgba(255,255,255,0.7)'">
                            <input type="checkbox" class="sleep-issue" data-issue="hot-flushes" style="width: 18px; height: 18px; cursor: pointer;">
                            <span>🔥 Hot flushes</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.6rem; padding: 0.8rem; background: rgba(255,255,255,0.7); border-radius: 10px; cursor: pointer; transition: all 0.3s; font-size: 0.9rem;" onmouseover="this.style.background='rgba(255,255,255,0.95)'" onmouseout="this.style.background='rgba(255,255,255,0.7)'">
                            <input type="checkbox" class="sleep-issue" data-issue="anxiety" style="width: 18px; height: 18px; cursor: pointer;">
                            <span>😰 Anxiety</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.6rem; padding: 0.8rem; background: rgba(255,255,255,0.7); border-radius: 10px; cursor: pointer; transition: all 0.3s; font-size: 0.9rem;" onmouseover="this.style.background='rgba(255,255,255,0.95)'" onmouseout="this.style.background='rgba(255,255,255,0.7)'">
                            <input type="checkbox" class="sleep-issue" data-issue="pain" style="width: 18px; height: 18px; cursor: pointer;">
                            <span>🦴 Pain/Discomfort</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.6rem; padding: 0.8rem; background: rgba(255,255,255,0.7); border-radius: 10px; cursor: pointer; transition: all 0.3s; font-size: 0.9rem;" onmouseover="this.style.background='rgba(255,255,255,0.95)'" onmouseout="this.style.background='rgba(255,255,255,0.7)'">
                            <input type="checkbox" class="sleep-issue" data-issue="bathroom" style="width: 18px; height: 18px; cursor: pointer;">
                            <span>🚽 Bathroom trips</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.6rem; padding: 0.8rem; background: rgba(255,255,255,0.7); border-radius: 10px; cursor: pointer; transition: all 0.3s; font-size: 0.9rem;" onmouseover="this.style.background='rgba(255,255,255,0.95)'" onmouseout="this.style.background='rgba(255,255,255,0.7)'">
                            <input type="checkbox" class="sleep-issue" data-issue="racing-mind" style="width: 18px; height: 18px; cursor: pointer;">
                            <span>🧠 Racing mind</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.6rem; padding: 0.8rem; background: rgba(255,255,255,0.7); border-radius: 10px; cursor: pointer; transition: all 0.3s; font-size: 0.9rem;" onmouseover="this.style.background='rgba(255,255,255,0.95)'" onmouseout="this.style.background='rgba(255,255,255,0.7)'">
                            <input type="checkbox" class="sleep-issue" data-issue="partner-snoring" style="width: 18px; height: 18px; cursor: pointer;">
                            <span>😴 Partner snoring</span>
                        </label>
                    </div>
                </div>

                <!-- Sleep Notes -->
                <div style="margin-top: 1.5rem;">
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #2874A6;">Sleep notes (optional):</label>
                    <textarea id="sleepNotes" placeholder="E.g., 'Went to bed too late', 'Had coffee after 3pm', 'Felt restless'..." style="width: 100%; min-height: 80px; border: 2px solid #D6EAF8; border-radius: 10px; padding: 1rem; font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
                </div>
            </div>

            <!-- Save Button -->
            <div style="text-align: center; margin-bottom: 2rem;">
                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <button id="saveDailyPlan" style="padding: 1.2rem 3rem; background: linear-gradient(135deg, var(--primary-green), var(--secondary-green)); color: #2C3E50; border: none; border-radius: 18px; font-size: 1.1rem; font-weight: 600; cursor: pointer; box-shadow: 0 6px 20px rgba(116, 139, 117, 0.3); transition: all 0.3s; display: inline-flex; align-items: center; gap: 1rem;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 30px rgba(116, 139, 117, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 6px 20px rgba(116, 139, 117, 0.3)';">
                        <span style="font-size: 1.3rem;">💾</span>
                        <span>Save Today's Plan</span>
                    </button>
                    <button id="resetEntireDay" style="padding: 1.2rem 3rem; background: white; color: #FF6B6B; border: 2px solid #FF6B6B; border-radius: 18px; font-size: 1.1rem; font-weight: 600; cursor: pointer; box-shadow: 0 6px 20px rgba(255, 107, 107, 0.2); transition: all 0.3s; display: inline-flex; align-items: center; gap: 1rem;" onmouseover="this.style.background='#FF6B6B'; this.style.color='white'; this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 30px rgba(255, 107, 107, 0.3)';" onmouseout="this.style.background='white'; this.style.color='#FF6B6B'; this.style.transform='translateY(0)'; this.style.boxShadow='0 6px 20px rgba(255, 107, 107, 0.2)';">
                        <span style="font-size: 1.3rem;">🔄</span>
                        <span>Reset Entire Day</span>
                    </button>
                </div>
                <p style="margin-top: 1rem; color: #7D8A99; font-size: 0.9rem;">Your plan is saved automatically to your device</p>
            </div>

        </div>

        <!-- Back to Home Button -->
        <div style="text-align: center; margin: 3rem 0 2rem;">
            <button id="backToWelcomeFromDaily" style="padding: 1rem 3rem; background: linear-gradient(135deg, #FF6B9D, #E91E63); color: white; border: none; border-radius: 20px; font-size: 1.1rem; font-weight: 600; cursor: pointer; box-shadow: 0 4px 15px rgba(116, 139, 117, 0.3); transition: all 0.3s; display: inline-flex; align-items: center; gap: 1rem;">
                <span>Back to Home</span>
                <span>🏠</span>
            </button>
        </div>
    </div>

    <!-- DIARY SECTION -->
    <div class="container" id="diaryContainer" style="display: none;">
        <!-- Header -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
            <h1 style="background: linear-gradient(135deg, #F4C2C2, #E6D5E8); color: #2C3E50; padding: 1.5rem 2.5rem; border-radius: 20px; margin: 0; box-shadow: 0 8px 30px rgba(244, 194, 194, 0.3); display: inline-flex; align-items: center; gap: 1rem;">
                <span style="font-size: 2rem;">📔</span>
                <span>Diary</span>
            </h1>
            <button id="backToHomeFromDiary" style="padding: 0.8rem 1.5rem; background: white; border: 2px solid #E91E63; color: #E91E63; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s;" onmouseover="this.style.background='var(--primary-green)'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='var(--primary-green)';">
                🏠 Back to Home
            </button>
        </div>

        <div style="max-width: 1200px; margin: 0 auto;">
            
            <!-- Today's Entry Button -->
            <div style="text-align: center; margin-bottom: 2rem;">
                <button id="addDiaryEntry" style="padding: 1.2rem 3rem; background: linear-gradient(135deg, #F4C2C2, #E6D5E8); color: #2C3E50; border: none; border-radius: 18px; font-size: 1.1rem; font-weight: 600; cursor: pointer; box-shadow: 0 6px 20px rgba(244, 194, 194, 0.3); transition: all 0.3s; display: inline-flex; align-items: center; gap: 1rem;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 30px rgba(244, 194, 194, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 6px 20px rgba(244, 194, 194, 0.3)';">
                    <span style="font-size: 1.5rem;">➕</span>
                    <span>Add Today's Entry</span>
                </button>
            </div>

            <!-- Diary Entries List -->
            <div id="diaryEntriesList" style="margin-bottom: 2rem;">
                <!-- Entries will be displayed here -->
            </div>

        </div>
    </div>

    <!-- HABITS & STREAKS SECTION -->
    <div class="container" id="habitsContainer" style="display: none;">
        <!-- Header -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
            <h1 style="background: linear-gradient(135deg, #FFD8CC, #FFE5D9); color: #2C3E50; padding: 1.5rem 2.5rem; border-radius: 20px; margin: 0; box-shadow: 0 8px 30px rgba(255, 216, 204, 0.3); display: inline-flex; align-items: center; gap: 1rem;">
                <span style="font-size: 2rem;">🎯</span>
                <span>Habits & Streaks</span>
            </h1>
            <button id="backToHomeFromHabits" style="padding: 0.8rem 1.5rem; background: white; border: 2px solid #E91E63; color: #E91E63; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s;" onmouseover="this.style.background='var(--primary-green)'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='var(--primary-green)';">
                🏠 Back to Home
            </button>
        </div>

        <div style="max-width: 1200px; margin: 0 auto;">
            
            <!-- Add Habit Button -->
            <div style="text-align: center; margin-bottom: 2rem;">
                <button id="addHabitBtn" style="padding: 1.2rem 3rem; background: linear-gradient(135deg, #FFD8CC, #FFE5D9); color: #2C3E50; border: none; border-radius: 18px; font-size: 1.1rem; font-weight: 600; cursor: pointer; box-shadow: 0 6px 20px rgba(255, 216, 204, 0.3); transition: all 0.3s; display: inline-flex; align-items: center; gap: 1rem;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 30px rgba(255, 216, 204, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 6px 20px rgba(255, 216, 204, 0.3)';">
                    <span style="font-size: 1.5rem;">➕</span>
                    <span>Create New Habit</span>
                </button>
            </div>

            <!-- Active Habits List -->
            <div id="habitsList" style="margin-bottom: 2rem;">
                <!-- Habits will be displayed here -->
            </div>

        </div>
    </div>

    <!-- MEDICATION/HRT TRACKER SECTION -->
    <div class="container" id="medicationContainer" style="display: none;">
        <!-- Header -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
            <h1 style="background: linear-gradient(135deg, #E6D5E8, #D4BFD7); color: #2C3E50; padding: 1.5rem 2.5rem; border-radius: 20px; margin: 0; box-shadow: 0 8px 30px rgba(230, 213, 232, 0.3); display: inline-flex; align-items: center; gap: 1rem;">
                <span style="font-size: 2rem;">💊</span>
                <span>Medication & HRT Tracker</span>
            </h1>
            <button id="backToHomeFromMedication" style="padding: 0.8rem 1.5rem; background: white; border: 2px solid #E91E63; color: #E91E63; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s;" onmouseover="this.style.background='var(--primary-green)'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='var(--primary-green)';">
                🏠 Back to Home
            </button>
        </div>

        <div style="max-width: 1200px; margin: 0 auto;">
            
            <!-- Important Notice -->
            <div style="background: linear-gradient(135deg, #FFF9E6, #FFFFFF); border: 3px solid #FFD8CC; border-radius: 20px; padding: 1.5rem; margin-bottom: 2rem; box-shadow: 0 8px 30px rgba(255, 216, 204, 0.2);">
                <div style="display: flex; align-items: flex-start; gap: 1rem;">
                    <div style="font-size: 2rem;">⚠️</div>
                    <div>
                        <h3 style="color: #E67E22; margin-bottom: 0.8rem; font-size: 1.1rem;">Important Safety Information</h3>
                        <p style="color: #6B5B6B; line-height: 1.6; margin-bottom: 0.5rem; font-size: 0.95rem;">This tracker is for <strong>record-keeping only</strong>. Always consult your GP before starting, stopping, or changing medications.</p>
                    </div>
                </div>
            </div>

            <!-- Add New Medication Button -->
            <div style="text-align: center; margin-bottom: 2rem;">
                <button id="addMedicationBtn" onclick="if(typeof showMedicationForm === 'function') showMedicationForm(); else alert('Please wait, form is loading...');" style="padding: 1.2rem 3rem; background: linear-gradient(135deg, #E6D5E8, #D4BFD7); color: #2C3E50; border: none; border-radius: 18px; font-size: 1.1rem; font-weight: 600; cursor: pointer; box-shadow: 0 6px 20px rgba(230, 213, 232, 0.3); transition: all 0.3s; display: inline-flex; align-items: center; gap: 1rem;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 30px rgba(230, 213, 232, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 6px 20px rgba(230, 213, 232, 0.3)';">
                    <span style="font-size: 1.5rem;">➕</span>
                    <span>Add Medication / Supplement</span>
                </button>
            </div>

            <!-- Current Medications List -->
            <div id="medicationsList" style="margin-bottom: 2rem;">
                <!-- Medications will be displayed here -->
            </div>

            <!-- Export/Print Buttons -->
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-bottom: 2rem;">
                <button id="exportMedicationHistory" style="padding: 1rem 2rem; background: white; border: 2px solid #3498DB; color: #3498DB; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s; display: inline-flex; align-items: center; gap: 0.8rem;" onmouseover="this.style.background='#3498DB'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='#3498DB';">
                    <span>📄</span>
                    <span>Generate GP Report</span>
                </button>
                <button id="printMedicationList" style="padding: 1rem 2rem; background: white; border: 2px solid #27AE60; color: #27AE60; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s; display: inline-flex; align-items: center; gap: 0.8rem;" onmouseover="this.style.background='#27AE60'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='#27AE60';">
                    <span>🖨️</span>
                    <span>Print Medication List</span>
                </button>
            </div>

        </div>
    </div>

    <!-- SOS PANIC BUTTON SECTION -->
    <div class="container" id="sosContainer" style="display: none;">
        <!-- Header -->
        <div style="text-align: center; margin-bottom: 2rem;">
            <h1 style="background: linear-gradient(135deg, #FF6B9D, #FF85C1); color: #2C3E50; padding: 1.5rem 2.5rem; border-radius: 20px; margin: 0 auto 1rem; box-shadow: 0 8px 30px rgba(255, 179, 186, 0.3); display: inline-flex; align-items: center; gap: 1rem; font-size: 2rem;">
                <span style="font-size: 2.5rem;">🆘</span>
                <span>Quick Relief</span>
            </h1>
            <p style="color: #5A6C7D; font-size: 1.1rem; max-width: 600px; margin: 0 auto;">You're going to be okay. Choose what you need right now:</p>
        </div>

        <!-- Quick Action Cards -->
        <div id="sosCardsGrid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; max-width: 800px; margin: 0 auto 3rem;">
            
            <!-- Hot Flush Relief -->
            <div class="sos-card" data-relief="hotflush" style="background: linear-gradient(135deg, #FFE5D9, #FFFFFF); border: 3px solid #FF6B6B; border-radius: 20px; padding: 2rem; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 15px rgba(255, 107, 107, 0.2);" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 25px rgba(255, 107, 107, 0.3)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(255, 107, 107, 0.2)';">
                <div style="font-size: 3rem; text-align: center; margin-bottom: 1rem;">🔥</div>
                <h3 style="color: #E74C3C; text-align: center; margin-bottom: 0.5rem; font-size: 1.3rem;">Hot Flush Help</h3>
                <p style="color: #5A6C7D; text-align: center; font-size: 0.95rem;">Cool down fast with breathing & quick actions</p>
            </div>

            <!-- Anxiety Relief -->
            <div class="sos-card" data-relief="anxiety" style="background: linear-gradient(135deg, #E8DAEF, #FFFFFF); border: 3px solid #9B59B6; border-radius: 20px; padding: 2rem; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 15px rgba(155, 89, 182, 0.2);" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 25px rgba(155, 89, 182, 0.3)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(155, 89, 182, 0.2)';">
                <div style="font-size: 3rem; text-align: center; margin-bottom: 1rem;">😰</div>
                <h3 style="color: #8E44AD; text-align: center; margin-bottom: 0.5rem; font-size: 1.3rem;">Calm Anxiety</h3>
                <p style="color: #5A6C7D; text-align: center; font-size: 0.95rem;">Grounding exercises & breathing to settle your mind</p>
            </div>

            <!-- Panic Attack -->
            <div class="sos-card" data-relief="panic" style="background: linear-gradient(135deg, #D5F4E6, #FFFFFF); border: 3px solid #27AE60; border-radius: 20px; padding: 2rem; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 15px rgba(39, 174, 96, 0.2);" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 25px rgba(39, 174, 96, 0.3)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(39, 174, 96, 0.2)';">
                <div style="font-size: 3rem; text-align: center; margin-bottom: 1rem;">💚</div>
                <h3 style="color: #27AE60; text-align: center; margin-bottom: 0.5rem; font-size: 1.3rem;">Stop Panic</h3>
                <p style="color: #5A6C7D; text-align: center; font-size: 0.95rem;">Emergency grounding for panic attacks</p>
            </div>

            <!-- Sleep/Insomnia -->
            <div class="sos-card" data-relief="sleep" style="background: linear-gradient(135deg, #D4F1F4, #FFFFFF); border: 3px solid #3498DB; border-radius: 20px; padding: 2rem; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.2);" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 25px rgba(52, 152, 219, 0.3)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(52, 152, 219, 0.2)';">
                <div style="font-size: 3rem; text-align: center; margin-bottom: 1rem;">😴</div>
                <h3 style="color: #2980B9; text-align: center; margin-bottom: 0.5rem; font-size: 1.3rem;">Can't Sleep</h3>
                <p style="color: #5A6C7D; text-align: center; font-size: 0.95rem;">Wind down techniques to ease into sleep</p>
            </div>

        </div>

        <!-- Relief Protocol Display (Hidden initially) -->
        <div id="reliefProtocol" style="display: none; max-width: 800px; margin: 0 auto;">
            <!-- Content will be dynamically inserted -->
        </div>

        <!-- Back Button -->
        <div style="text-align: center; margin-top: 3rem;">
            <button id="backToHomeFromSOS" style="padding: 1rem 2rem; background: white; border: 2px solid #E91E63; color: #E91E63; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s;" onmouseover="this.style.background='var(--primary-green)'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='var(--primary-green)';">
                🏠 Back to Home
            </button>
        </div>
    </div>

    <!-- Progress Tracker Section -->
    <div class="container" id="progressContainer" style="display: none;">
        <!-- Header with Back Button -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
            <h1 style="background: linear-gradient(135deg, #F4C2C2, #E6D5E8); color: #2C3E50; padding: 1.5rem 2.5rem; border-radius: 20px; margin: 0; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.3); display: inline-flex; align-items: center; gap: 1rem;">
                <span style="font-size: 2rem;">📊</span>
                <span>Your Progress</span>
            </h1>
            <button id="backToHomeFromProgress" style="padding: 0.8rem 1.5rem; background: white; border: 2px solid #E91E63; color: #E91E63; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s;" onmouseover="this.style.background='var(--primary-green)'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='var(--primary-green)';">
                🏠 Back to Home
            </button>
        </div>

        <!-- Time Period Selector -->
        <div style="background: white; border-radius: 16px; padding: 1.5rem; margin-bottom: 2rem; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
            <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center;">
                <button class="period-btn" data-period="7" style="padding: 0.8rem 1.5rem; background: linear-gradient(135deg, #76D7C4, #48C9B0); color: #2C3E50; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 0.95rem; transition: all 0.3s; box-shadow: 0 4px 12px rgba(118, 215, 196, 0.3);">
                    Last 7 Days
                </button>
                <button class="period-btn" data-period="14" style="padding: 0.8rem 1.5rem; background: white; color: #4A5568; border: 2px solid #E0E0E0; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 0.95rem; transition: all 0.3s;">
                    Last 14 Days
                </button>
                <button class="period-btn" data-period="30" style="padding: 0.8rem 1.5rem; background: white; color: #4A5568; border: 2px solid #E0E0E0; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 0.95rem; transition: all 0.3s;">
                    Last 30 Days
                </button>
            </div>
        </div>

        <!-- Streak Cards -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
            <!-- Water Streak -->
            <div style="background: linear-gradient(135deg, #D4F1F4, #FFFFFF); border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(117, 230, 218, 0.2); border: 2px solid #75E6DA; text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 0.5rem;">💧</div>
                <div style="font-size: 2.5rem; font-weight: 700; color: #189AB4; margin-bottom: 0.3rem;" id="waterStreak">0</div>
                <div style="font-size: 0.9rem; color: #7D8A99;">Day Streak</div>
                <div style="margin-top: 1rem; font-size: 0.85rem; color: #5A6C7D; font-weight: 500;">8 Glasses Daily</div>
            </div>

            <!-- Movement Streak -->
            <div style="background: linear-gradient(135deg, #FFE5D9, #FFFFFF); border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(255, 182, 157, 0.2); border: 2px solid #FFB69D; text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 0.5rem;">💪</div>
                <div style="font-size: 2.5rem; font-weight: 700; color: #D35400; margin-bottom: 0.3rem;" id="movementStreak">0</div>
                <div style="font-size: 0.9rem; color: #7D8A99;">Day Streak</div>
                <div style="margin-top: 1rem; font-size: 0.85rem; color: #5A6C7D; font-weight: 500;">30+ Minutes Daily</div>
            </div>

            <!-- Protein Goal Streak -->
            <div style="background: linear-gradient(135deg, #E8F8F5, #FFFFFF); border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(118, 215, 196, 0.2); border: 2px solid #76D7C4; text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 0.5rem;">🎯</div>
                <div style="font-size: 2.5rem; font-weight: 700; color: #117A65; margin-bottom: 0.3rem;" id="proteinStreak">0</div>
                <div style="font-size: 0.9rem; color: #7D8A99;">Day Streak</div>
                <div style="margin-top: 1rem; font-size: 0.85rem; color: #5A6C7D; font-weight: 500;">Met Protein Target</div>
            </div>

            <!-- Self-Care Streak -->
            <div style="background: linear-gradient(135deg, #E8DAEF, #FFFFFF); border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(187, 143, 206, 0.2); border: 2px solid #BB8FCE; text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 0.5rem;">💝</div>
                <div style="font-size: 2.5rem; font-weight: 700; color: #6C3483; margin-bottom: 0.3rem;" id="selfCareStreak">0</div>
                <div style="font-size: 0.9rem; color: #7D8A99;">Day Streak</div>
                <div style="margin-top: 1rem; font-size: 0.85rem; color: #5A6C7D; font-weight: 500;">3+ Activities Daily</div>
            </div>
        </div>

        <!-- Charts Grid -->
        <div style="display: grid; gap: 2rem; margin-bottom: 2rem;">
            
            <!-- Water Intake Chart -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(0,0,0,0.08);">
                <h3 style="color: #189AB4; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                    <span style="font-size: 1.5rem;">💧</span>
                    <span>Water Intake Trend</span>
                </h3>
                <div style="position: relative; height: 250px; margin-bottom: 1rem;">
                    <canvas id="waterChart"></canvas>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 1rem; background: #F8FCFF; border-radius: 12px;">
                    <div style="text-align: center;">
                        <div style="font-size: 0.85rem; color: #7D8A99; margin-bottom: 0.3rem;">Average</div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: #189AB4;" id="avgWater">0</div>
                        <div style="font-size: 0.8rem; color: #7D8A99;">glasses/day</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.85rem; color: #7D8A99; margin-bottom: 0.3rem;">Best Day</div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: #189AB4;" id="bestWater">0</div>
                        <div style="font-size: 0.8rem; color: #7D8A99;">glasses</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.85rem; color: #7D8A99; margin-bottom: 0.3rem;">Success Rate</div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: #189AB4;" id="successWater">0%</div>
                        <div style="font-size: 0.8rem; color: #7D8A99;">days met goal</div>
                    </div>
                </div>
            </div>

            <!-- Protein Tracking Chart -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(0,0,0,0.08);">
                <h3 style="color: #117A65; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                    <span style="font-size: 1.5rem;">🎯</span>
                    <span>Protein Intake Trend</span>
                </h3>
                <div style="position: relative; height: 250px; margin-bottom: 1rem;">
                    <canvas id="proteinChart"></canvas>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 1rem; background: #F5FFFD; border-radius: 12px;">
                    <div style="text-align: center;">
                        <div style="font-size: 0.85rem; color: #7D8A99; margin-bottom: 0.3rem;">Average</div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: #117A65;" id="avgProtein">0g</div>
                        <div style="font-size: 0.8rem; color: #7D8A99;">per day</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.85rem; color: #7D8A99; margin-bottom: 0.3rem;">Best Day</div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: #117A65;" id="bestProtein">0g</div>
                        <div style="font-size: 0.8rem; color: #7D8A99;">protein</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.85rem; color: #7D8A99; margin-bottom: 0.3rem;">Success Rate</div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: #117A65;" id="successProtein">0%</div>
                        <div style="font-size: 0.8rem; color: #7D8A99;">days met goal</div>
                    </div>
                </div>
            </div>

            <!-- Sleep Quality Trend Chart -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(0,0,0,0.08);">
                <h3 style="color: #2874A6; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                    <span style="font-size: 1.5rem;">😴</span>
                    <span>Sleep Quality Trend</span>
                </h3>
                <div style="position: relative; height: 250px; margin-bottom: 1rem;">
                    <canvas id="sleepChart"></canvas>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 1rem; background: #EBF5FB; border-radius: 12px;">
                    <div style="text-align: center;">
                        <div style="font-size: 0.85rem; color: #7D8A99; margin-bottom: 0.3rem;">Average Quality</div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: #2874A6;" id="avgSleep">0/5</div>
                        <div style="font-size: 0.8rem; color: #7D8A99;">rating</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.85rem; color: #7D8A99; margin-bottom: 0.3rem;">Best Night</div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: #2874A6;" id="bestSleep">0/5</div>
                        <div style="font-size: 0.8rem; color: #7D8A99;">quality</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.85rem; color: #7D8A99; margin-bottom: 0.3rem;">Good Nights</div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: #2874A6;" id="goodSleepRate">0%</div>
                        <div style="font-size: 0.8rem; color: #7D8A99;">4+ rating</div>
                    </div>
                </div>
            </div>

            <!-- Symptom Frequency Heatmap -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(0,0,0,0.08);">
                <h3 style="color: #D35400; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                    <span style="font-size: 1.5rem;">📝</span>
                    <span>Symptom Tracking</span>
                </h3>
                <div id="symptomHeatmap" style="margin-bottom: 1rem;">
                    <!-- Symptom bars will be generated here -->
                </div>
                <div style="padding: 1rem; background: #FFF9F5; border-radius: 12px; margin-top: 1.5rem;">
                    <div style="font-size: 0.9rem; color: #7D8A99; margin-bottom: 0.8rem; font-weight: 600;">Most Common Symptoms:</div>
                    <div id="topSymptoms" style="display: flex; flex-wrap: wrap; gap: 0.8rem;">
                        <!-- Top symptoms will appear here -->
                    </div>
                </div>
            </div>

            <!-- Weekly Overview -->
            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(0,0,0,0.08);">
                <h3 style="color: #6C3483; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                    <span style="font-size: 1.5rem;">📅</span>
                    <span>Weekly Overview</span>
                </h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 1rem;">
                    <div style="background: linear-gradient(135deg, #D4F1F4, #F0FAFB); padding: 1.5rem; border-radius: 16px; text-align: center;">
                        <div style="font-size: 1.8rem; margin-bottom: 0.5rem;">📊</div>
                        <div style="font-size: 1.8rem; font-weight: 700; color: #189AB4;" id="weeklyDays">0</div>
                        <div style="font-size: 0.85rem; color: #5A6C7D; margin-top: 0.3rem;">Days Tracked</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #E8F8F5, #F5FFFD); padding: 1.5rem; border-radius: 16px; text-align: center;">
                        <div style="font-size: 1.8rem; margin-bottom: 0.5rem;">✅</div>
                        <div style="font-size: 1.8rem; font-weight: 700; color: #117A65;" id="weeklyGoals">0</div>
                        <div style="font-size: 0.85rem; color: #5A6C7D; margin-top: 0.3rem;">Goals Met</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #FFE5D9, #FFF5F0); padding: 1.5rem; border-radius: 16px; text-align: center;">
                        <div style="font-size: 1.8rem; margin-bottom: 0.5rem;">🔥</div>
                        <div style="font-size: 1.8rem; font-weight: 700; color: #D35400;" id="weeklyStreak">0</div>
                        <div style="font-size: 0.85rem; color: #5A6C7D; margin-top: 0.3rem;">Current Streak</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #E8DAEF, #F5F0F7); padding: 1.5rem; border-radius: 16px; text-align: center;">
                        <div style="font-size: 1.8rem; margin-bottom: 0.5rem;">💝</div>
                        <div style="font-size: 1.8rem; font-weight: 700; color: #6C3483;" id="weeklySelfCare">0%</div>
                        <div style="font-size: 0.85rem; color: #5A6C7D; margin-top: 0.3rem;">Self-Care Rate</div>
                    </div>
                </div>
            </div>

            <!-- Insights & Patterns -->
            <div style="background: linear-gradient(135deg, #FFF9E6, #FFFEF8); border-radius: 20px; padding: 2rem; box-shadow: 0 8px 30px rgba(193, 120, 23, 0.15); border: 2px solid #FFE5B4;">
                <h3 style="color: #C17817; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                    <span style="font-size: 1.5rem;">💡</span>
                    <span>Insights & Patterns</span>
                </h3>
                <div id="insightsContainer" style="display: grid; gap: 1rem;">
                    <!-- Insights will be generated here -->
                </div>
            </div>

        </div>

    </div>

    <script>
        // ========================================
        // CRITICAL FIX: Mobile/Private Browsing Storage Abstraction
        // This MUST be at the top before any other code
        // ========================================
        
        const SafeStorage = (function() {
            let storageType = 'unknown';
            let memoryStore = {};
            let warningShown = false;
            
            function init() {
                // Test localStorage
                try {
                    localStorage.setItem('__storage_test__', '1');
                    localStorage.removeItem('__storage_test__');
                    storageType = 'localStorage';
                    console.log('✅ localStorage available - full persistence enabled');
                    return;
                } catch(e) {
                    console.warn('❌ localStorage blocked:', e.message);
                }
                
                // Test sessionStorage
                try {
                    sessionStorage.setItem('__storage_test__', '1');
                    sessionStorage.removeItem('__storage_test__');
                    storageType = 'sessionStorage';
                    console.log('⚠️ sessionStorage available - data will be lost when tab closes');
                    showStorageWarning('session');
                    return;
                } catch(e) {
                    console.warn('❌ sessionStorage blocked:', e.message);
                }
                
                // Fallback to memory
                storageType = 'memory';
                console.log('⚠️ Using memory storage - data will be lost on page refresh');
                showStorageWarning('memory');
            }
            
            function showStorageWarning(type) {
                if (warningShown) return;
                warningShown = true;
                
                const messages = {
                    session: '⚠️ <strong>Temporary Storage Active</strong><br>Your data will be lost when you close this tab. This is normal in some browsing modes.',
                    memory: '⚠️ <strong>Private Browsing Detected</strong><br>Your data will be lost when you refresh this page. This usually happens in private/incognito mode.'
                };
                
                // Wait for DOM to be ready
                setTimeout(function() {
                    const notification = document.createElement('div');
                    notification.id = 'storageWarning';
                    notification.style.cssText = `
                        position: fixed;
                        top: 20px;
                        left: 50%;
                        transform: translateX(-50%);
                        background: linear-gradient(135deg, #FFF3CD 0%, #FFE69C 100%);
                        color: #856404;
                        padding: 1rem 1.5rem;
                        border-radius: 12px;
                        box-shadow: 0 8px 24px rgba(0,0,0,0.2);
                        z-index: 999999;
                        max-width: 90%;
                        width: auto;
                        text-align: center;
                        font-size: 0.9rem;
                        border: 2px solid #FFD700;
                        animation: slideDown 0.4s ease-out;
                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    `;
                    notification.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 200px;">${messages[type]}</div>
                            <button onclick="document.getElementById('storageWarning').remove()" 
                                    style="background: #856404; color: white; border: none; padding: 0.5rem 1rem; 
                                           border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.85rem;
                                           transition: all 0.2s; white-space: nowrap;"
                                    onmouseover="this.style.background='#664903'"
                                    onmouseout="this.style.background='#856404'">
                                Got it
                            </button>
                        </div>
                    `;
                    
                    // Add animation
                    const style = document.createElement('style');
                    style.textContent = `
                        @keyframes slideDown {
                            from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                            to { opacity: 1; transform: translateX(-50%) translateY(0); }
                        }
                    `;
                    document.head.appendChild(style);
                    
                    document.body.appendChild(notification);
                    
                    // Auto-remove after 15 seconds
                    setTimeout(function() {
                        if (notification && notification.parentElement) {
                            notification.style.animation = 'slideDown 0.4s ease-out reverse';
                            setTimeout(function() {
                                if (notification.parentElement) notification.remove();
                            }, 400);
                        }
                    }, 15000);
                }, 1000);
            }
            
            // Public API
            return {
                init: init,
                
                getItem: function(key) {
                    if (storageType === 'memory') {
                        return memoryStore[key] || null;
                    }
                    
                    try {
                        const storage = storageType === 'localStorage' ? localStorage : sessionStorage;
                        return storage.getItem(key);
                    } catch(e) {
                        console.warn('Storage getItem failed, using memory:', e);
                        return memoryStore[key] || null;
                    }
                },
                
                setItem: function(key, value) {
                    if (storageType === 'memory') {
                        memoryStore[key] = value;
                        return true;
                    }
                    
                    try {
                        const storage = storageType === 'localStorage' ? localStorage : sessionStorage;
                        storage.setItem(key, value);
                        return true;
                    } catch(e) {
                        console.warn('Storage setItem failed, using memory fallback:', e);
                        memoryStore[key] = value;
                        return false;
                    }
                },
                
                removeItem: function(key) {
                    if (storageType === 'memory') {
                        delete memoryStore[key];
                        return;
                    }
                    
                    try {
                        const storage = storageType === 'localStorage' ? localStorage : sessionStorage;
                        storage.removeItem(key);
                    } catch(e) {
                        console.warn('Storage removeItem failed:', e);
                        delete memoryStore[key];
                    }
                },
                
                clear: function() {
                    if (storageType === 'memory') {
                        memoryStore = {};
                        return;
                    }
                    
                    try {
                        const storage = storageType === 'localStorage' ? localStorage : sessionStorage;
                        storage.clear();
                    } catch(e) {
                        console.warn('Storage clear failed:', e);
                        memoryStore = {};
                    }
                },
                
                getType: function() {
                    return storageType;
                },
                
                isPersistent: function() {
                    return storageType === 'localStorage';
                }
            };
        })();
        
        // Initialize storage immediately
        SafeStorage.init();
        
        // Override localStorage to use SafeStorage if not available
        // This allows existing code to work without modification
        if (SafeStorage.getType() !== 'localStorage') {
            console.log('🔄 Creating localStorage shim using', SafeStorage.getType());
            window.localStorage = {
                getItem: function(key) { return SafeStorage.getItem(key); },
                setItem: function(key, val) { return SafeStorage.setItem(key, val); },
                removeItem: function(key) { return SafeStorage.removeItem(key); },
                clear: function() { return SafeStorage.clear(); },
                key: function(index) { return null; },
                length: 0
            };
        }
        
        // ========================================
        // END STORAGE FIX - Original code follows
        // ========================================
        
        const cards = [
            {
                id: 1,
                front: { title: "How to Use These Cards", content: "Tap to flip • Search • Filter • Save favourites" },
                back: { title: "Getting Started", content: "Tap any card to flip and see solutions. Use the search bar to find symptoms quickly. Filter by body system. Save your most relevant cards to favourites!" }
            },
            {
                id: 2,
                front: { title: "Hot flushes", why: "Oestrogen drop makes your hypothalamus (the brain's temperature control centre) more sensitive, so it triggers cooling responses even when you are not really overheating", system: "Nervous" },
                back: { actions: ["Deep breathing", "Cool cloth on neck", "Layer clothing"], foods: ["Salmon", "Yoghurt", "Edamame"], mindset: "This will pass in a few minutes. Your body is recalibrating, and you are learning what helps you through them." }
            },
            {
                id: 3,
                front: { title: "Night sweats", why: "Your body's temperature regulation system is disrupted at night due to hormone changes, causing you to overheat whilst you sleep", system: "Nervous" },
                back: { actions: ["Cotton sheets", "Fan on low", "Spare clothes ready"], foods: ["Oats", "Turkey", "Cherries"], mindset: "Night sweats are frustrating but very common. They will ease with time, and small changes to your bedroom can help." }
            },
            {
                id: 4,
                front: { title: "Sleep problems", why: "Hormone changes disrupt melatonin (sleep hormone) and increase cortisol (stress hormone), making it harder to wind down and stay asleep", system: "Nervous" },
                back: { actions: ["Bedtime routine", "Dark cool room", "No screens"], foods: ["Turkey", "Almonds", "Oats"], mindset: "Lying awake is frustrating, but stressing about it makes it worse. Trust that your body will sleep when it is ready." }
            },
            {
                id: 5,
                front: { title: "Anxiety", why: "Oestrogen and progesterone affect brain chemicals (serotonin and GABA) that help regulate mood and feelings of calm", system: "Nervous" },
                back: { actions: ["Grounding exercise", "Walk outside", "Limit caffeine"], foods: ["Salmon", "Eggs", "Seeds"], mindset: "This is a real, hormone-driven response - not a personal weakness." }
            },
            {
                id: 6,
                front: { title: "Mood swings", why: "Hormones affect brain chemicals (neurotransmitters) that control your mood, making emotions shift rapidly without warning", system: "Nervous" },
                back: { actions: ["Pause and breathe", "Name the emotion", "Move body"], foods: ["Fish", "Eggs", "Lentils"], mindset: "These mood swings are not you being dramatic. Your hormones are fluctuating, and your emotions are responding." }
            },
            {
                id: 7,
                front: { title: "Fatigue", why: "Hormone changes affect how your cells produce energy, and disrupted sleep means you are not getting proper rest, leaving you exhausted", system: "Metabolic" },
                back: { actions: ["Protein breakfast", "Short walk", "Rest without guilt"], foods: ["Eggs", "Yoghurt", "Chicken"], mindset: "Fatigue is real and valid. Rest is not laziness - it is what your body needs right now." }
            },
            {
                id: 8,
                front: { title: "Weight gain", why: "Lower oestrogen shifts where your body stores fat (from hips and thighs to the abdomen) and slows your metabolism", system: "Metabolic" },
                back: { actions: ["Focus on protein", "Resistance training", "Prioritise sleep"], foods: ["Lean meats", "Yoghurt", "Beans"], mindset: "Your body is changing, not failing. Focus on health and strength, not just the number on the scales." }
            },
            {
                id: 9,
                front: { title: "Vaginal dryness", why: "Lower oestrogen reduces natural vaginal moisture and tissue elasticity, causing dryness, discomfort, and sometimes pain", system: "Urogenital" },
                back: { actions: ["Vaginal moisturiser", "Water-based lubricant", "See GP"], foods: ["Oily fish", "Flaxseeds", "Avocado"], mindset: "This is very common and treatable. You do not have to accept discomfort - help is available." }
            },
            {
                id: 10,
                front: { title: "Joint pain", why: "Oestrogen helps protect joints and reduce inflammation. When levels drop, joints can become stiff, achy, and more prone to pain", system: "Musculoskeletal" },
                back: { actions: ["Gentle movement", "Anti-inflammatory foods", "Warm compress"], foods: ["Oily fish", "Berries", "Nuts"], mindset: "Movement helps, even when it feels hard to start. Gentle is enough - you do not need to push through pain." }
            },
            {
                id: 11,
                front: { title: "Irritability", why: "Lower oestrogen reduces serotonin (the brain chemical that helps you stay patient and calm), making small annoyances feel much bigger", system: "Nervous" },
                back: { actions: ["Notice when irritability builds and take a break", "Use the STOP technique: Stop, Take a breath, Observe, Proceed", "Eat regularly - hunger worsens irritability"], foods: ["Turkey (29g protein)", "Oats (13g protein)", "Pumpkin seeds (19g protein)"], mindset: "Irritability is uncomfortable for you and others. Recognising it is the first step to managing it more gently." }
            },
            {
                id: 12,
                front: { title: "Irritability", why: "Hormone fluctuations can make you feel on edge and less able to cope with stress, so things that normally wouldn't bother you become triggering", system: "Nervous" },
                back: { actions: ["Identify your triggers: hunger, tiredness, feeling overwhelmed", "Take yourself out of the situation briefly if you need space", "Apologise if you snap, and explain you are managing hormone changes"], foods: ["Greek yoghurt (10g protein)", "Chicken breast (31g protein)", "Almonds (21g protein)"], mindset: "You are not a bad person. Your body is dealing with big hormonal shifts, and patience is harder to access right now." }
            },
            {
                id: 13,
                front: { title: "Irritability", why: "Poor sleep and constant low-level discomfort from other menopause symptoms lower your tolerance threshold, making everything feel more annoying", system: "Nervous" },
                back: { actions: ["Prioritise sleep and rest where possible", "Address other symptoms that are draining your energy", "Set boundaries to protect your energy"], foods: ["Salmon (25g protein)", "Lentils (9g protein)", "Cottage cheese (11g protein)"], mindset: "When you are exhausted and uncomfortable, irritability is a natural response. Be compassionate with yourself whilst working on it." }
            },
            {
                id: 14,
                front: { title: "Low mood", why: "Oestrogen helps produce serotonin (the brain chemical that supports mood and happiness). When oestrogen drops, serotonin falls too, leading to low mood", system: "Nervous" },
                back: { actions: ["Get outside in daylight for at least 10 minutes daily", "Move your body, even just a short walk", "Connect with someone you trust"], foods: ["Oily fish (25g protein)", "Eggs (13g protein)", "Walnuts (15g protein)"], mindset: "Low mood is a real symptom of hormone changes, not a personal failing. Small steps add up, even when motivation is low." }
            },
            {
                id: 15,
                front: { title: "Low mood", why: "Disrupted sleep, fatigue, and other uncomfortable symptoms create a constant drain on your emotional resources, making it harder to feel positive", system: "Nervous" },
                back: { actions: ["Be gentle with yourself on bad days", "Do one small thing you normally enjoy", "Talk to your GP if low mood persists for more than 2 weeks"], foods: ["Turkey (29g protein)", "Chickpeas (9g protein)", "Greek yoghurt (10g protein)"], mindset: "Low mood when you are exhausted and uncomfortable makes sense. You are coping with a lot, and that takes emotional energy." }
            },
            {
                id: 16,
                front: { title: "Low mood", why: "Hormone changes can amplify negative thoughts and reduce your ability to see positives, making everything feel harder and more overwhelming", system: "Nervous" },
                back: { actions: ["Challenge negative thoughts: are they definitely true?", "Write down 3 things that went okay today, however small", "Limit time with negative news or social media"], foods: ["Porridge with nuts (13g + 21g protein)", "Cottage cheese (11g protein)", "Lean beef (26g protein)"], mindset: "Your thoughts feel very real right now, but they are being amplified by hormones. They will soften as your body adjusts." }
            },
            {
                id: 17,
                front: { title: "Low mood", why: "Changes in body shape, symptoms, and how you feel can affect your self-esteem and sense of identity, contributing to feeling low", system: "Nervous" },
                back: { actions: ["Focus on what your body can do, not just how it looks", "Wear clothes that make you feel comfortable and confident", "Remind yourself this is a transition phase, not forever"], foods: ["Salmon (25g protein)", "Quinoa (4g protein)", "Tofu (8g protein)"], mindset: "Grieving the body and life you had before is valid. You are adjusting to big changes, and that takes time." }
            },
            {
                id: 18,
                front: { title: "Low mood", why: "Feeling isolated or like nobody understands what you are going through can intensify low mood and make you feel alone with your struggles", system: "Nervous" },
                back: { actions: ["Talk to friends or family about what you are experiencing", "Join a menopause support group online or locally", "Remember: millions of women go through this"], foods: ["Eggs (13g protein)", "Lentil soup (9g protein)", "Cheese (25g protein)"], mindset: "You are not alone in this. So many women feel the same way, and connection helps more than you might think." }
            },
            {
                id: 19,
                front: { title: "Brain fog", why: "Oestrogen helps with memory, concentration, and mental clarity. When levels fluctuate, your brain processes information more slowly and feels fuzzy", system: "Nervous" },
                back: { actions: ["Write things down rather than relying on memory", "Do complex tasks when you feel most alert", "Break tasks into smaller, manageable steps"], foods: ["Oily fish (25g protein)", "Blueberries with yoghurt (10g protein)", "Walnuts (15g protein)"], mindset: "Brain fog is frustrating and real. You are not losing your mind - your brain is adjusting to hormonal changes." }
            },
            {
                id: 20,
                front: { title: "Brain fog", why: "Poor sleep quality and fatigue make it harder for your brain to function clearly, adding to the mental fuzziness caused by hormone changes", system: "Nervous" },
                back: { actions: ["Prioritise sleep and rest where you can", "Reduce multitasking - focus on one thing at a time", "Be patient with yourself when your brain feels slow"], foods: ["Eggs (13g protein)", "Avocado with protein", "Dark chocolate with nuts (small amount)"], mindset: "When you are exhausted, your brain cannot work at full capacity. Rest helps more than pushing through." }
            },
            {
                id: 21,
                front: { title: "Brain fog", why: "Stress and anxiety create mental overload, using up brain resources and making it even harder to think clearly through the hormone fog", system: "Nervous" },
                back: { actions: ["Practise stress-reduction techniques like deep breathing", "Write to-do lists to clear mental clutter", "Say no to non-essential demands on your time"], foods: ["Salmon (25g protein)", "Pumpkin seeds (19g protein)", "Greek yoghurt (10g protein)"], mindset: "Your brain is doing its best under difficult circumstances. Reducing stress gives it space to function better." }
            },
            {
                id: 22,
                front: { title: "Brain fog", why: "Dehydration and blood sugar crashes from irregular eating make brain fog worse, as your brain needs steady fuel and hydration to work properly", system: "Nervous" },
                back: { actions: ["Drink water regularly throughout the day", "Eat protein and complex carbs every 3-4 hours", "Avoid skipping meals, especially breakfast"], foods: ["Porridge with nuts (13g + 21g protein)", "Hummus with veg (protein-rich)", "Turkey sandwich (29g protein)"], mindset: "Basic self-care - eating and drinking regularly - makes a real difference to how your brain functions." }
            },
            {
                id: 23,
                front: { title: "Brain fog", why: "Information overload from screens, notifications, and constant demands fragments your attention and worsens the mental fog caused by hormones", system: "Nervous" },
                back: { actions: ["Limit screen time, especially before bed", "Turn off non-essential notifications", "Build in screen-free time during your day"], foods: ["Walnuts (15g protein)", "Boiled eggs (13g protein)", "Cottage cheese (11g protein)"], mindset: "Your brain is already working harder than usual. Reducing digital noise helps it cope better." }
            },
            {
                id: 24,
                front: { title: "Memory problems", why: "Oestrogen plays a key role in forming and retrieving memories. When levels drop, your brain struggles to file away and find information as efficiently", system: "Nervous" },
                back: { actions: ["Use your phone calendar and reminders liberally", "Put items in the same place every time (keys, phone, glasses)", "Repeat information out loud to help it stick"], foods: ["Oily fish (25g protein)", "Blueberries with yoghurt (10g protein)", "Walnuts (15g protein)"], mindset: "You are not losing your memory permanently. Your brain is adjusting, and using memory aids is smart, not failing." }
            },
            {
                id: 25,
                front: { title: "Memory problems", why: "Stress and sleep disruption interfere with how memories are processed and stored, making it harder to remember things even without hormone changes", system: "Nervous" },
                back: { actions: ["Prioritise sleep - this is when memories consolidate", "Reduce stress where possible", "Write things down rather than trying to hold everything in your head"], foods: ["Eggs (13g protein)", "Chicken breast (31g protein)", "Quinoa (4g protein)"], mindset: "When you are stressed and exhausted, memory suffers. This is normal, not permanent damage." }
            },
            {
                id: 26,
                front: { title: "Memory problems", why: "Trying to remember too many things at once overloads your already-stretched brain capacity, making you forget simple things", system: "Nervous" },
                back: { actions: ["Keep one master to-do list rather than mental notes", "Use sticky notes for immediate reminders", "Do important tasks when you feel most alert"], foods: ["Turkey (29g protein)", "Lentils (9g protein)", "Almonds (21g protein)"], mindset: "Your brain has limited capacity right now. Externalising memory with lists and notes is efficient, not weak." }
            },
            {
                id: 27,
                front: { title: "Memory problems", why: "Anxiety about memory problems creates a vicious cycle - worrying about forgetting makes you more likely to forget", system: "Nervous" },
                back: { actions: ["Laugh about memory lapses rather than panicking", "Remind yourself this is temporary and common", "Focus on the memories that matter, not every detail"], foods: ["Salmon (25g protein)", "Avocado with protein", "Dark leafy greens with eggs (13g protein)"], mindset: "Worrying about memory makes it worse. Most of what you forget does not matter, and the important stuff can be written down." }
            },
            {
                id: 28,
                front: { title: "Fatigue", why: "Hormone changes disrupt how your cells produce energy (ATP), meaning your body literally has less fuel to run on", system: "Metabolic" },
                back: { actions: ["Eat regular meals with protein to stabilise energy", "Move gently - even 5 minutes helps circulation", "Accept your energy is lower and adjust expectations"], foods: ["Eggs (13g protein)", "Greek yoghurt (10g protein)", "Chicken (31g protein)"], mindset: "Fatigue is real and valid. Rest is not laziness - it is what your body needs right now." }
            },
            {
                id: 29,
                front: { title: "Fatigue", why: "Poor sleep quality means you are not getting the deep, restorative sleep your body needs to repair and recharge", system: "Metabolic" },
                back: { actions: ["Prioritise sleep over other tasks where possible", "Create a calming bedtime routine", "Nap for 20 minutes if needed, but not after 3pm"], foods: ["Turkey (29g protein)", "Oats (13g protein)", "Salmon (25g protein)"], mindset: "When sleep is disrupted, exhaustion follows. This is not your fault, and it will improve." }
            },
            {
                id: 30,
                front: { title: "Fatigue", why: "Constantly managing uncomfortable symptoms (hot flushes, anxiety, pain) drains your physical and emotional energy reserves", system: "Metabolic" },
                back: { actions: ["Address the symptoms contributing most to fatigue", "Ask for help with tasks that can wait", "Rest before you hit empty, not after"], foods: ["Cottage cheese (11g protein)", "Lentil soup (9g protein)", "Nuts and seeds (15-21g protein)"], mindset: "Coping with multiple symptoms is exhausting work. Your tiredness is proportional to what your body is managing." }
            },
            {
                id: 31,
                front: { title: "Fatigue", why: "Iron levels can drop during perimenopause due to heavy periods, leaving you anaemic and exhausted even after rest", system: "Metabolic" },
                back: { actions: ["Ask your GP to check iron and B12 levels", "Eat iron-rich foods with vitamin C to boost absorption", "Consider an iron supplement if levels are low"], foods: ["Red meat (26g protein)", "Spinach with lemon (vitamin C)", "Lentils (9g protein)"], mindset: "If fatigue persists despite rest, it is worth investigating physical causes. Low iron is common and fixable." }
            },
            {
                id: 32,
                front: { title: "Fatigue", why: "Thyroid problems become more common during menopause and can cause overwhelming fatigue that does not improve with rest", system: "Metabolic" },
                back: { actions: ["Ask your GP to check thyroid function (TSH, T3, T4)", "Track other symptoms: weight changes, feeling cold, dry skin", "Do not assume all fatigue is just menopause"], foods: ["Fish (25g protein)", "Brazil nuts (selenium for thyroid)", "Eggs (13g protein)"], mindset: "Persistent, overwhelming fatigue deserves investigation. Thyroid issues are treatable, and catching them early helps." }
            },
            {
                id: 33,
                front: { title: "Fatigue", why: "Depression and low mood create a heavy, exhausting feeling that makes everything feel like wading through treacle", system: "Metabolic" },
                back: { actions: ["Talk to your GP if fatigue comes with persistent low mood", "Do not dismiss emotional exhaustion as less real than physical", "Small steps matter: a 5-minute walk, one task completed"], foods: ["Oily fish (25g protein)", "Eggs (13g protein)", "Walnuts (15g protein)"], mindset: "Emotional exhaustion is real exhaustion. If low mood and fatigue persist together, speak to your GP." }
            },
            {
                id: 34,
                front: { title: "Fatigue", why: "Caffeine and sugar give quick energy boosts followed by crashes, leaving you more tired than before and creating a dependency cycle", system: "Metabolic" },
                back: { actions: ["Reduce caffeine gradually to avoid withdrawal", "Replace sugary snacks with protein and complex carbs", "Stay hydrated - dehydration mimics tiredness"], foods: ["Greek yoghurt (10g protein)", "Oats with nuts (13g + 21g protein)", "Turkey sandwich (29g protein)"], mindset: "Breaking the caffeine-sugar cycle is hard at first, but your energy will stabilise and become more reliable." }
            },
            {
                id: 35,
                front: { title: "Fatigue", why: "Pushing through exhaustion without rest depletes your reserves further, making recovery take even longer", system: "Metabolic" },
                back: { actions: ["Rest is productive - it is what allows your body to recover", "Say no to non-essential demands", "Schedule rest time like you would any other important task"], foods: ["Chicken (31g protein)", "Quinoa (4g protein)", "Cottage cheese (11g protein)"], mindset: "Resting is not giving up. It is the smart thing to do when your body is telling you it needs to recharge." }
            },
            {
                id: 36,
                front: { title: "Fatigue", why: "Lack of movement paradoxically makes fatigue worse, as gentle exercise boosts circulation and energy production", system: "Metabolic" },
                back: { actions: ["Start with just 5-10 minutes of gentle movement daily", "Walk, stretch, or swim - whatever feels manageable", "Movement before 2pm helps energy without disrupting sleep"], foods: ["Banana with nut butter", "Salmon (25g protein)", "Porridge (13g protein)"], mindset: "It feels counterintuitive, but gentle movement creates energy. Start tiny and build slowly." }
            },
            {
                id: 37,
                front: { title: "Fatigue", why: "Chronic stress keeps cortisol (stress hormone) high, which disrupts energy production and leaves you wired but exhausted", system: "Metabolic" },
                back: { actions: ["Practise daily stress reduction: breathing, meditation, or quiet time", "Identify and reduce stressors where possible", "Prioritise activities that genuinely relax you"], foods: ["Porridge (13g protein)", "Turkey (29g protein)", "Pumpkin seeds (19g protein)"], mindset: "Stress and fatigue feed each other. Reducing stress is not a luxury - it is essential for energy recovery." }
            },
            {
                id: 38,
                front: { title: "Weight gain", why: "Lower oestrogen slows your metabolism by about 200-300 calories per day, meaning your body burns less energy at rest", system: "Metabolic" },
                back: { actions: ["Focus on protein at every meal to support metabolism", "Build muscle through resistance training 2-3 times per week", "Accept that your energy needs have changed"], foods: ["Lean meats (25-31g protein)", "Greek yoghurt (10g protein)", "Lentils (9g protein)"], mindset: "Your body is not broken. It is adapting to new hormone levels, and you can work with these changes." }
            },
            {
                id: 39,
                front: { title: "Weight gain", why: "Muscle mass naturally decreases with age and lower oestrogen, and muscle burns more calories than fat even at rest", system: "Metabolic" },
                back: { actions: ["Prioritise strength training over cardio", "Aim for 1.2-2g protein per kg of body weight daily", "Progressive resistance matters more than hours of exercise"], foods: ["Chicken breast (31g protein)", "Fish (25g protein)", "Eggs (13g protein)"], mindset: "Building muscle is the most effective way to counteract metabolic slowing. Strength is more valuable than thinness." }
            },
            {
                id: 40,
                front: { title: "Weight gain", why: "Fat storage shifts from hips and thighs to the abdomen due to lower oestrogen, creating a different body shape even without gaining weight", system: "Metabolic" },
                back: { actions: ["Measure progress by how you feel and move, not just weight", "Focus on body composition (muscle vs fat) not just scales", "Choose clothes that fit your current body comfortably"], foods: ["Tofu (8g protein)", "Quinoa (4g protein)", "Cottage cheese (11g protein)"], mindset: "Your body shape changing does not mean you are failing. This is a normal part of hormonal transition." }
            },
            {
                id: 41,
                front: { title: "Weight gain", why: "Poor sleep raises ghrelin (hunger hormone) and lowers leptin (fullness hormone), making you hungrier and less satisfied after eating", system: "Metabolic" },
                back: { actions: ["Prioritise sleep as a weight management strategy", "Avoid eating within 2 hours of bedtime", "Notice if tiredness drives you to eat when not truly hungry"], foods: ["Turkey (29g protein)", "Oats (13g protein)", "Almonds (21g protein)"], mindset: "Sleep and weight are deeply connected. Better sleep makes managing eating much easier." }
            },
            {
                id: 42,
                front: { title: "Weight gain", why: "Stress increases cortisol, which promotes fat storage around the abdomen and increases cravings for sugary, high-calorie comfort foods", system: "Metabolic" },
                back: { actions: ["Practise stress-reduction daily (breathing, meditation, walking)", "Identify emotional eating triggers", "Find non-food ways to comfort yourself"], foods: ["Salmon (25g protein)", "Greek yoghurt (10g protein)", "Eggs (13g protein)"], mindset: "Stress eating is a coping mechanism, not a character flaw. Addressing stress helps more than willpower." }
            },
            {
                id: 43,
                front: { title: "Weight gain", why: "Restricting calories too much slows metabolism further and triggers your body to hold onto fat as protection against perceived starvation", system: "Metabolic" },
                back: { actions: ["Focus on eating enough protein, not eating less overall", "Avoid crash diets or extreme calorie restriction", "Fuel your body adequately for activity and muscle building"], foods: ["Chicken (31g protein)", "Lentils (9g protein)", "Cottage cheese (11g protein)"], mindset: "Eating too little backfires. Your body needs adequate nutrition to function well and maintain healthy weight." }
            },
            {
                id: 44,
                front: { title: "Weight gain", why: "Insulin resistance increases with lower oestrogen, making your body less efficient at processing carbohydrates and more likely to store them as fat", system: "Metabolic" },
                back: { actions: ["Pair carbs with protein to stabilise blood sugar", "Choose whole grains over refined carbs", "Stay active - movement improves insulin sensitivity"], foods: ["Fish with quinoa (25g + 4g protein)", "Eggs with wholegrain toast (13g protein)", "Greek yoghurt with berries (10g protein)"], mindset: "Your body processes food differently now. Adjusting what and when you eat makes a real difference." }
            },
            {
                id: 45,
                front: { title: "Weight gain", why: "Emotional eating increases during menopause as food becomes a way to cope with uncomfortable symptoms, stress, and emotional upheaval", system: "Metabolic" },
                back: { actions: ["Notice what emotions trigger eating when not hungry", "Keep a feelings journal to identify patterns", "Build a toolkit of non-food comfort strategies"], foods: ["Protein-rich snacks ready (nuts, cheese, yoghurt)", "Herbal tea as a comfort ritual", "Protein smoothie (satisfying and nourishing)"], mindset: "Using food for comfort is human and understandable. Awareness is the first step to finding additional coping tools." }
            },
            {
                id: 46,
                front: { title: "Weight gain", why: "Reduced activity due to fatigue, pain, or low mood means you burn fewer calories through movement, contributing to weight gain", system: "Metabolic" },
                back: { actions: ["Start with tiny movements: 5 minutes counts", "Focus on consistency over intensity", "Find activities you genuinely enjoy"], foods: ["Banana with nut butter (pre-exercise)", "Salmon (25g protein post-exercise)", "Protein shake if appetite is low"], mindset: "Some movement is always better than none. Meet yourself where you are today, not where you used to be." }
            },
            {
                id: 47,
                front: { title: "Weight gain", why: "Social pressure and diet culture create shame and stress around normal body changes, making it harder to approach weight with self-compassion", system: "Metabolic" },
                back: { actions: ["Unfollow social media that makes you feel bad about your body", "Focus on health and strength, not appearance", "Surround yourself with supportive people"], foods: ["Choose foods that nourish, not punish", "Greek yoghurt (10g protein)", "Whole foods over diet products"], mindset: "Your worth is not determined by your weight. Health is about how you feel and function, not a number." }
            },
            {
                id: 48,
                front: { title: "Vaginal dryness", why: "Lower oestrogen thins the vaginal walls and reduces natural lubrication, causing dryness, itching, and discomfort during intimacy", system: "Urogenital" },
                back: { actions: ["Use vaginal moisturiser 2-3 times per week regularly", "Use water-based lubricant during intimacy", "Speak to your GP about vaginal oestrogen"], foods: ["Oily fish (25g protein)", "Flaxseeds (18g protein)", "Avocado with protein"], mindset: "This is very common and treatable. You do not have to accept discomfort - help is available." }
            },
            {
                id: 49,
                front: { title: "Vaginal dryness", why: "Blood flow to vaginal tissues decreases with lower oestrogen, reducing natural moisture and making tissues more fragile", system: "Urogenital" },
                back: { actions: ["Regular sexual activity or self-stimulation maintains blood flow", "Pelvic floor exercises improve circulation", "Stay hydrated - general hydration helps all tissues"], foods: ["Water (8 glasses daily)", "Oily fish (25g protein)", "Walnuts (15g protein)"], mindset: "Use it or lose it applies to vaginal health. Regular stimulation helps maintain tissue health." }
            },
            {
                id: 50,
                front: { title: "Vaginal dryness", why: "Vaginal pH changes with lower oestrogen, making tissues more prone to irritation, infection, and discomfort", system: "Urogenital" },
                back: { actions: ["Avoid scented products, douches, or harsh soaps", "Wear cotton underwear and avoid tight clothing", "See your GP if you have itching, burning, or unusual discharge"], foods: ["Natural yoghurt with live cultures", "Fermented foods (support overall health)", "Adequate protein daily (tissue repair)"], mindset: "Your vaginal health has changed but there are effective solutions. Do not suffer in silence." }
            },
            {
                id: 51,
                front: { title: "Vaginal dryness", why: "Certain medications (antihistamines, antidepressants) and lifestyle factors (smoking, dehydration) can worsen vaginal dryness", system: "Urogenital" },
                back: { actions: ["Review medications with your GP if dryness is severe", "Stop smoking - it reduces blood flow to tissues", "Drink adequate water throughout the day"], foods: ["Water (8+ glasses daily)", "Oily fish (25g protein)", "Flaxseeds (18g protein)"], mindset: "Some contributing factors are within your control. Small changes to habits can make a measurable difference." }
            },
            {
                id: 52,
                front: { title: "Vaginal dryness", why: "Embarrassment and shame prevent many women from seeking help, leading to years of unnecessary discomfort and avoiding intimacy", system: "Urogenital" },
                back: { actions: ["Remember: GPs see this every day and want to help", "Bring a written list if speaking out loud feels hard", "You deserve comfort and pleasure, not suffering"], foods: ["Avocado (healthy fats)", "Walnuts (15g protein)", "Salmon (25g protein)"], mindset: "This is a medical symptom, not a personal failing. Seeking help is strength, not weakness." }
            },
            {
                id: 53,
                front: { title: "Painful sex", why: "Vaginal dryness and tissue thinning make penetration uncomfortable or painful, causing you to tense up which makes pain worse", system: "Urogenital" },
                back: { actions: ["Use plenty of water-based lubricant every time", "Take time for arousal - natural lubrication helps", "Speak to your GP about vaginal oestrogen"], foods: ["Oily fish (25g protein)", "Flaxseeds (18g protein)", "Avocado with protein"], mindset: "Pain during sex is not something you have to endure. Effective treatments exist, and pleasure is still possible." }
            },
            {
                id: 54,
                front: { title: "Painful sex", why: "Anxiety about pain creates tension in pelvic floor muscles, which makes penetration more difficult and painful, creating a vicious cycle", system: "Urogenital" },
                back: { actions: ["Practise pelvic floor relaxation, not just strengthening", "Communicate openly with your partner about what feels good", "Consider seeing a pelvic floor physiotherapist"], foods: ["Magnesium-rich foods (nuts, seeds, dark leafy greens)", "Adequate protein for muscle health", "Anti-inflammatory foods (oily fish, berries)"], mindset: "Fear of pain is understandable. Breaking the cycle takes time, patience, and the right support." }
            },
            {
                id: 55,
                front: { title: "Painful sex", why: "Loss of vaginal elasticity means tissues are less able to stretch comfortably during penetration, causing tearing or discomfort", system: "Urogenital" },
                back: { actions: ["Use vaginal dilators gradually if needed", "Regular sexual activity helps maintain elasticity", "Vaginal oestrogen can restore tissue health"], foods: ["Collagen-supporting foods (vitamin C, protein)", "Oily fish (25g protein)", "Bone broth with vegetables"], mindset: "Tissues can improve with treatment and regular use. This is treatable, not permanent damage." }
            },
            {
                id: 56,
                front: { title: "Painful sex", why: "Reduced arousal and longer time to natural lubrication mean you may need more foreplay than before to be physically ready", system: "Urogenital" },
                back: { actions: ["Communicate needs clearly to your partner", "Extend foreplay and use hands or toys", "Remember: arousal takes time at any age"], foods: ["Foods that support circulation (oily fish, nuts)", "Adequate hydration", "Dark chocolate (small amount) for mood"], mindset: "Your body needs more time now, and that is completely normal. Rushing leads to discomfort." }
            },
            {
                id: 57,
                front: { title: "Painful sex", why: "Avoiding sex due to pain can strain relationships and affect your sense of intimacy, desire, and connection with your partner", system: "Urogenital" },
                back: { actions: ["Talk openly with your partner about what is happening", "Explore non-penetrative intimacy options", "Consider couples therapy if communication is difficult"], foods: ["Mood-supporting foods (oily fish, eggs)", "Magnesium for relaxation (nuts, seeds)", "Adequate protein for overall health"], mindset: "Intimacy is more than penetration. Rebuilding connection takes honesty, patience, and creativity." }
            },
            {
                id: 58,
                front: { title: "Urinary urgency", why: "Lower oestrogen weakens pelvic floor muscles and bladder control, making you feel like you need to urinate urgently or frequently", system: "Urogenital" },
                back: { actions: ["Practise pelvic floor exercises (Kegels) daily", "Avoid bladder irritants (caffeine, alcohol, fizzy drinks)", "Do not reduce fluid intake - this makes urine more concentrated and irritating"], foods: ["Water (adequate throughout the day)", "Protein to support muscle strength", "Cranberry (may help bladder health)"], mindset: "Bladder control issues are common and treatable. Pelvic floor exercises genuinely help when done consistently." }
            },
            {
                id: 59,
                front: { title: "Urinary urgency", why: "Bladder capacity and elasticity decrease with lower oestrogen, meaning your bladder holds less comfortably and signals fullness sooner", system: "Urogenital" },
                back: { actions: ["Practise bladder training: gradually extend time between toilet visits", "Empty your bladder fully each time", "See your GP if urgency disrupts daily life"], foods: ["Adequate water (dehydration worsens urgency)", "Protein-rich foods (muscle support)", "Avoid excessive caffeine"], mindset: "Bladder retraining takes weeks, not days. Consistency matters more than perfection." }
            },
            {
                id: 60,
                front: { title: "Urinary urgency", why: "Anxiety about finding a toilet quickly can make urgency feel more intense, creating a psychological component to the physical symptom", system: "Urogenital" },
                back: { actions: ["Plan routes with toilet access when anxious", "Practise distraction techniques when urgency hits", "Challenge thoughts: urgency does not always mean immediate need"], foods: ["Balanced meals to stabilise energy and mood", "Magnesium (calming mineral)", "Herbal teas (calming ritual)"], mindset: "The fear of urgency can amplify the sensation. Breaking the anxiety cycle helps reduce the physical intensity." }
            },
            {
                id: 61,
                front: { title: "Urinary urgency", why: "Urinary tract infections (UTIs) become more common with lower oestrogen, causing urgent, frequent, or painful urination", system: "Urogenital" },
                back: { actions: ["See your GP if you have burning, pain, or blood when urinating", "Wipe front to back and urinate after sex", "Stay hydrated to flush bacteria"], foods: ["Water (adequate throughout the day)", "Cranberry juice (may help prevent UTIs)", "Vitamin C foods (citrus, peppers)"], mindset: "Recurring UTIs are not your fault. They are more common in menopause and treatable." }
            },
            {
                id: 62,
                front: { title: "Urinary urgency", why: "Overactive bladder develops when bladder muscles contract involuntarily, creating sudden strong urges even when the bladder is not full", system: "Urogenital" },
                back: { actions: ["Bladder training: resist the urge and gradually extend time", "Avoid going to the toilet 'just in case'", "See your GP if symptoms are severe - medication can help"], foods: ["Adequate protein (muscle health)", "Magnesium (muscle relaxation)", "Avoid bladder irritants (caffeine, alcohol, spicy foods)"], mindset: "Overactive bladder is a medical condition, not a personal failing. With treatment, it improves significantly." }
            },
            {
                id: 63,
                front: { title: "Pelvic organ prolapse", why: "Lower oestrogen weakens pelvic floor muscles and connective tissues, allowing pelvic organs (bladder, uterus, rectum) to drop down, causing a feeling of heaviness or bulging", system: "Urogenital" },
                back: { actions: ["See your GP or request referral to pelvic floor physiotherapist for assessment and targeted exercises", "Practise daily pelvic floor exercises (Kegels) - these are first-line treatment", "Avoid heavy lifting and straining; manage constipation", "Consider a support pessary fitted by your GP or specialist if exercises alone are not enough"], foods: ["High-fibre foods (prevent constipation and straining): oats, vegetables, fruits, pulses", "Adequate water (soft, easy stools)", "Protein-rich foods (support muscle and tissue repair)", "Vitamin D-rich foods if levels are low (may support pelvic floor muscle strength)"], mindset: "Prolapse is common (affects up to 50% of women who have given birth) and is not your fault. Pelvic floor physiotherapy is highly effective, and many women see improvement with targeted exercises. Prolapse does not always need surgery - conservative management works well for many women." }
            },
            {
                id: 65,
                front: { title: "Breast tenderness", why: "Fluctuating hormone levels (especially during perimenopause) cause breast tissue to swell, becoming tender, sore, or painful to touch", system: "Urogenital" },
                back: { actions: ["Wear a supportive, well-fitted bra (get professionally measured)", "Apply a warm or cold compress for relief", "Reduce caffeine, which can worsen breast pain"], foods: ["Anti-inflammatory foods (oily fish, berries)", "Evening primrose oil (some women find helpful)", "Adequate water (hydration)"], mindset: "Breast tenderness is common and usually cyclical. If pain is severe or persists, see your GP." }
            },
            {
                id: 64,
                front: { title: "Breast tenderness", why: "Lumpy, bumpy breast tissue (fibrocystic changes) increases with hormone fluctuations, making breasts feel tender and uneven", system: "Urogenital" },
                back: { actions: ["Learn what is normal for your breasts through self-examination", "See your GP if you notice new lumps or changes", "Track when tenderness occurs to identify patterns"], foods: ["Reduce caffeine and alcohol (may worsen symptoms)", "Vitamin E (some evidence for breast pain)", "Anti-inflammatory foods"], mindset: "Lumpy breasts are common, but always check new changes with your GP. Most lumps are benign, especially if tender." }
            },
            {
                id: 66,
                front: { title: "Breast tenderness", why: "Weight gain or loss changes breast size and can strain breast tissue and ligaments, causing discomfort", system: "Urogenital" },
                back: { actions: ["Wear a properly fitted, supportive bra", "Get re-measured if your weight has changed", "Choose bras with wide straps and good support"], foods: ["Stable protein intake (muscle and tissue support)", "Anti-inflammatory foods (oily fish)", "Collagen-supporting foods (vitamin C, protein)"], mindset: "Your body is changing, and that includes your breasts. Proper support makes a real difference to comfort." }
            },
            {
                id: 67,
                front: { title: "Breast tenderness", why: "Anxiety about breast pain and lumps can create worry about breast cancer, adding emotional stress to physical discomfort", system: "Urogenital" },
                back: { actions: ["Attend regular breast screening appointments", "Check your breasts monthly and report new changes", "Remember: most breast pain is hormonal, not cancer"], foods: ["Mood-supporting foods (oily fish, eggs)", "Calming herbal teas", "Adequate nutrition for overall health"], mindset: "Breast tenderness is usually benign, but checking changes promptly gives peace of mind. Trust your instincts." }
            },
            {
                id: 68,
                front: { title: "Breast tenderness", why: "Sleeping on your front or vigorous exercise without proper support can worsen breast tenderness and discomfort", system: "Urogenital" },
                back: { actions: ["Sleep on your back or side with pillow support", "Wear a supportive sports bra during exercise", "Gentle exercise is fine - just ensure proper support"], foods: ["Protein for tissue repair (25-31g per serving)", "Anti-inflammatory foods (oily fish, berries)", "Magnesium for muscle relaxation"], mindset: "Small adjustments to how you sleep and move can reduce discomfort without limiting your activities." }
            },
            {
                id: 69,
                front: { title: "Joint pain", why: "Oestrogen has anti-inflammatory properties that protect joints. When levels drop, inflammation increases, causing stiffness and pain", system: "Musculoskeletal" },
                back: { actions: ["Gentle movement daily - even 10 minutes helps", "Apply heat or cold to painful joints", "Anti-inflammatory diet (oily fish, berries, leafy greens)"], foods: ["Oily fish (25g protein)", "Walnuts (15g protein)", "Berries with Greek yoghurt (10g protein)"], mindset: "Movement helps, even when it feels hard to start. Gentle is enough - you do not need to push through pain." }
            },
            {
                id: 70,
                front: { title: "Joint pain", why: "Morning stiffness worsens because joints stiffen overnight when you are not moving, and inflammation builds up during sleep", system: "Musculoskeletal" },
                back: { actions: ["Gentle stretching before getting out of bed", "Warm shower in the morning to ease stiffness", "Move throughout the day - avoid staying still too long"], foods: ["Anti-inflammatory breakfast (oats with berries and nuts)", "Turmeric (natural anti-inflammatory)", "Adequate protein (tissue repair)"], mindset: "Morning stiffness is frustrating but temporary. Movement throughout the day prevents it building up again." }
            },
            {
                id: 71,
                front: { title: "Joint pain", why: "Weight gain increases pressure on joints (especially knees and hips), worsening pain and limiting mobility", system: "Musculoskeletal" },
                back: { actions: ["Focus on low-impact exercise (swimming, cycling, walking)", "Strengthen muscles around joints for support", "Even small weight loss reduces joint pressure significantly"], foods: ["Protein at every meal (muscle support)", "Anti-inflammatory foods (oily fish, leafy greens)", "Collagen-supporting foods (vitamin C, bone broth)"], mindset: "Your joints are carrying extra load. Strengthening surrounding muscles takes pressure off and genuinely helps." }
            },
            {
                id: 72,
                front: { title: "Joint pain", why: "Dehydration reduces synovial fluid (joint lubrication), making joints feel stiff and painful with movement", system: "Musculoskeletal" },
                back: { actions: ["Drink adequate water throughout the day (8+ glasses)", "Reduce alcohol and caffeine (both dehydrate)", "Notice if joint pain worsens when you are dehydrated"], foods: ["Water-rich foods (cucumber, watermelon)", "Adequate protein (tissue health)", "Oily fish (25g protein)"], mindset: "Basic hydration makes a measurable difference to how your joints feel. It is simple but genuinely effective." }
            },
            {
                id: 73,
                front: { title: "Joint pain", why: "Cold weather causes joints to stiffen and blood vessels to constrict, reducing circulation and increasing pain", system: "Musculoskeletal" },
                back: { actions: ["Keep joints warm with layers or heat packs", "Move more in cold weather to maintain circulation", "Warm bath or shower to ease stiffness"], foods: ["Warming foods (soups, stews with protein)", "Ginger and turmeric (anti-inflammatory)", "Hot herbal teas"], mindset: "Cold weather makes joint pain worse for most people. Extra warmth and movement counteract this." }
            },
            {
                id: 74,
                front: { title: "Joint pain", why: "Stress and poor sleep increase pain sensitivity and reduce your ability to cope with discomfort", system: "Musculoskeletal" },
                back: { actions: ["Prioritise sleep - pain feels worse when tired", "Practice stress reduction (breathing, meditation)", "Pace activities to avoid pain flare-ups"], foods: ["Magnesium-rich foods (nuts, seeds, leafy greens)", "Protein for tissue repair", "Tryptophan foods for sleep (turkey, oats)"], mindset: "Pain and stress feed each other. Managing stress and sleep genuinely reduces how much pain you feel." }
            },
            {
                id: 75,
                front: { title: "Muscle aches", why: "Lower oestrogen affects muscle repair and recovery, making muscles feel sore, weak, and achy after activity", system: "Musculoskeletal" },
                back: { actions: ["Gentle stretching daily to maintain flexibility", "Adequate rest between exercise sessions", "Warm bath with Epsom salts for muscle relief"], foods: ["Protein within 30 mins after exercise (muscle repair)", "Magnesium-rich foods (muscle relaxation)", "Anti-inflammatory foods (oily fish, berries)"], mindset: "Your muscles need more recovery time now. Gentler, more frequent movement works better than intense bursts." }
            },
            {
                id: 76,
                front: { title: "Muscle aches", why: "Magnesium deficiency (common in menopause) causes muscle cramps, spasms, and general achiness", system: "Musculoskeletal" },
                back: { actions: ["Eat magnesium-rich foods daily", "Consider magnesium supplement if diet is insufficient", "Apply magnesium oil topically to sore muscles"], foods: ["Dark leafy greens (spinach, kale)", "Nuts and seeds (19-21g protein)", "Dark chocolate (small amount)", "Whole grains"], mindset: "Magnesium deficiency is fixable. Addressing it can dramatically reduce muscle aches and cramps." }
            },
            {
                id: 77,
                front: { title: "Muscle aches", why: "Dehydration and electrolyte imbalance (from sweating, poor diet) cause muscle cramps and pain", system: "Musculoskeletal" },
                back: { actions: ["Drink water consistently throughout the day", "Replace electrolytes after sweating heavily", "Avoid excessive caffeine and alcohol"], foods: ["Water (8+ glasses daily)", "Bananas (potassium)", "Coconut water (natural electrolytes)", "Protein with meals"], mindset: "Hydration and electrolytes are basic but crucial. Many muscle aches improve with better hydration alone." }
            },
            {
                id: 78,
                front: { title: "Muscle aches", why: "Poor posture (from fatigue, desk work, stress) creates chronic muscle tension in neck, shoulders, and back", system: "Musculoskeletal" },
                back: { actions: ["Check and adjust desk setup (screen height, chair support)", "Set hourly reminders to move and stretch", "Gentle yoga or Pilates for posture strengthening"], foods: ["Protein for muscle strength", "Magnesium for relaxation", "Anti-inflammatory foods"], mindset: "Posture problems build gradually. Small, consistent adjustments make a big difference over time." }
            },
            {
                id: 79,
                front: { title: "Muscle aches", why: "Overexercising without adequate recovery depletes already-limited resources, leaving muscles chronically sore", system: "Musculoskeletal" },
                back: { actions: ["Rest days are productive - they allow muscles to repair", "Reduce exercise intensity if constantly sore", "Listen to your body: pain is a signal, not weakness"], foods: ["Adequate protein daily (1.2-2g per kg body weight)", "Complex carbs for energy recovery", "Anti-inflammatory foods post-exercise"], mindset: "More is not always better. Your body needs recovery to get stronger. Rest is training too." }
            },
            {
                id: 80,
                front: { title: "Muscle aches", why: "Tension from stress, anxiety, or poor sleep causes muscles (especially shoulders and jaw) to stay clenched, creating pain", system: "Musculoskeletal" },
                back: { actions: ["Notice where you hold tension and consciously relax", "Practice progressive muscle relaxation before bed", "Gentle massage or foam rolling for tight areas"], foods: ["Magnesium for muscle relaxation", "Protein for tissue health", "Calming herbal teas"], mindset: "Emotional stress manifests physically. Releasing mental tension helps release muscle tension too." }
            },
            {
                id: 81,
                front: { title: "Irritability", why: "Chronic discomfort, pain, and fatigue wear down your patience and tolerance, making you irritable even when you do not want to be", system: "Nervous" },
                back: { actions: ["Address underlying symptoms contributing to discomfort", "Communicate to others: I am managing a lot right now", "Take breaks before irritability peaks"], foods: ["Regular protein meals (stabilises mood)", "Magnesium-rich foods", "Avoid excessive sugar (causes mood crashes)"], mindset: "When your body is in constant discomfort, irritability is a normal response. Addressing physical symptoms helps emotional ones." }
            },
            {
                id: 82,
                front: { title: "Heart palpitations", why: "Fluctuating oestrogen and progesterone affect the electrical signals in your heart, causing it to beat irregularly, too fast, or with skipped beats", system: "Cardio" },
                back: { actions: ["Sit down and breathe slowly and deeply", "Place your hand on your chest and focus on calming", "Track when palpitations occur to identify triggers"], foods: ["Magnesium-rich foods (nuts, seeds, dark leafy greens)", "Potassium foods (bananas, avocado)", "Adequate hydration"], mindset: "Palpitations are frightening but usually harmless. If frequent or severe, see your GP to rule out other causes." }
            },
            {
                id: 83,
                front: { title: "Heart palpitations", why: "Anxiety and stress trigger adrenaline release, which speeds up your heart rate and can cause palpitations", system: "Cardio" },
                back: { actions: ["Practice breathing exercises when palpitations start", "Reduce caffeine and alcohol (both trigger palpitations)", "Address underlying anxiety with GP or therapist"], foods: ["Calming foods (oats, turkey, chamomile tea)", "Magnesium for heart rhythm", "Avoid stimulants (caffeine, energy drinks)"], mindset: "Anxiety and palpitations feed each other. Breaking the cycle takes time, but breathing exercises genuinely help." }
            },
            {
                id: 84,
                front: { title: "Heart palpitations", why: "Caffeine, alcohol, nicotine, and certain medications can trigger or worsen heart palpitations", system: "Cardio" },
                back: { actions: ["Gradually reduce caffeine if consuming more than 2 cups daily", "Limit alcohol to see if palpitations improve", "Review medications with your GP"], foods: ["Herbal teas instead of coffee", "Magnesium-rich foods", "Adequate water (dehydration worsens palpitations)"], mindset: "Identifying and reducing triggers gives you some control. Small changes can make a measurable difference." }
            },
            {
                id: 85,
                front: { title: "Heart palpitations", why: "Dehydration and electrolyte imbalances (low potassium, magnesium) affect heart rhythm and can cause palpitations", system: "Cardio" },
                back: { actions: ["Drink water consistently throughout the day", "Eat potassium and magnesium-rich foods daily", "Replace electrolytes if sweating heavily"], foods: ["Bananas (potassium)", "Avocado (potassium and magnesium)", "Nuts and seeds (magnesium)", "Coconut water"], mindset: "Basic hydration and electrolyte balance affect heart rhythm. These simple fixes often reduce palpitations significantly." }
            },
            {
                id: 86,
                front: { title: "Heart palpitations", why: "Blood sugar crashes from skipping meals or eating too much sugar cause adrenaline spikes that trigger palpitations", system: "Cardio" },
                back: { actions: ["Eat regular meals with protein to stabilise blood sugar", "Avoid sugary foods on an empty stomach", "Keep protein snacks available"], foods: ["Protein at every meal (eggs, fish, chicken)", "Complex carbs with protein (oats with nuts)", "Avoid refined sugar"], mindset: "Blood sugar and heart rhythm are connected. Stable eating patterns create more stable heart rhythms." }
            },
            {
                id: 87,
                front: { title: "Heart palpitations", why: "Night-time palpitations can wake you from sleep, often caused by hot flushes, anxiety, or lying flat after eating", system: "Cardio" },
                back: { actions: ["Avoid large meals or alcohol within 3 hours of bed", "Sleep slightly propped up if palpitations occur lying flat", "Address hot flushes (they often trigger night palpitations)"], foods: ["Light evening meal with protein", "Avoid caffeine after 2pm", "Magnesium-rich evening snack"], mindset: "Night palpitations are alarming but rarely dangerous. If persistent, see your GP for reassurance and investigation." }
            },
            {
                id: 88,
                front: { title: "Headaches", why: "Fluctuating oestrogen levels trigger changes in brain chemicals and blood vessel dilation, causing tension headaches or migraines", system: "Headaches" },
                back: { actions: ["Track headaches to identify hormone-related patterns", "Stay hydrated and eat regularly", "Apply cold or warm compress to head or neck"], foods: ["Adequate water throughout the day", "Magnesium-rich foods (preventative)", "Avoid known trigger foods"], mindset: "Hormone headaches follow patterns. Tracking helps you anticipate and manage them more effectively." }
            },
            {
                id: 89,
                front: { title: "Headaches", why: "Tension in neck and shoulder muscles (from stress, poor posture, anxiety) refers pain to the head, causing tension-type headaches", system: "Headaches" },
                back: { actions: ["Gentle neck stretches and shoulder rolls", "Check and adjust desk setup", "Massage tight muscles at base of skull"], foods: ["Magnesium for muscle relaxation", "Adequate protein", "Anti-inflammatory foods"], mindset: "Tension headaches respond well to addressing the underlying muscle tightness. Small postural changes make a difference." }
            },
            {
                id: 90,
                front: { title: "Headaches", why: "Dehydration reduces blood volume and oxygen to the brain, triggering headaches, especially in hot weather or after sweating", system: "Headaches" },
                back: { actions: ["Drink water consistently, not just when thirsty", "Increase water intake in hot weather or during exercise", "Set hourly reminders to drink if you forget"], foods: ["Water (8+ glasses daily)", "Water-rich foods (cucumber, watermelon)", "Herbal teas count towards hydration"], mindset: "Dehydration headaches are completely preventable. Consistent hydration is simple but genuinely effective." }
            },
            {
                id: 91,
                front: { title: "Headaches", why: "Blood sugar drops from skipping meals or eating too much sugar cause headaches as your brain is starved of steady energy", system: "Headaches" },
                back: { actions: ["Eat regular meals and snacks with protein", "Avoid going more than 4 hours without eating", "Choose complex carbs over simple sugars"], foods: ["Protein at every meal (eggs, fish, chicken)", "Complex carbs (oats, whole grains)", "Nuts as emergency snack"], mindset: "Blood sugar headaches are a signal your brain needs fuel. Regular eating prevents them effectively." }
            },
            {
                id: 92,
                front: { title: "Headaches", why: "Poor sleep quality and fatigue make you more sensitive to pain and lower your threshold for developing headaches", system: "Headaches" },
                back: { actions: ["Prioritise sleep hygiene and consistent sleep schedule", "Avoid bright screens before bed", "Address other symptoms disrupting sleep"], foods: ["Magnesium before bed (muscle relaxation)", "Protein at dinner (stable overnight blood sugar)", "Herbal teas (calming)"], mindset: "Sleep deprivation makes everything hurt more, including your head. Better sleep is headache prevention." }
            },
            {
                id: 93,
                front: { title: "Headaches", why: "Certain foods (aged cheese, processed meats, artificial sweeteners, alcohol) can trigger migraines in susceptible people", system: "Headaches" },
                back: { actions: ["Keep a headache diary to identify food triggers", "Avoid known trigger foods when possible", "See your GP if migraines are frequent or severe"], foods: ["Avoid common triggers (aged cheese, red wine, processed meats)", "Magnesium-rich foods (preventative)", "Adequate water"], mindset: "Food triggers are individual. Identifying yours takes time but gives you control over reducing migraine frequency." }
            },
            {
                id: 94,
                front: { title: "Dry skin", why: "Lower oestrogen reduces oil production and collagen, making skin drier, thinner, and more prone to irritation and itching", system: "Skin" },
                back: { actions: ["Use rich moisturiser immediately after bathing", "Avoid hot showers which strip natural oils", "Use gentle, fragrance-free products"], foods: ["Oily fish (25g protein, omega-3)", "Avocado (healthy fats)", "Nuts and seeds (vitamin E)", "Adequate water"], mindset: "Dry skin is uncomfortable but manageable. Consistent moisturising and hydration make a real difference." }
            },
            {
                id: 95,
                front: { title: "Hair thinning", why: "Lower oestrogen shortens the hair growth phase and increases shedding, causing hair to thin overall or recede at the temples", system: "Skin" },
                back: { actions: ["Be gentle when brushing and styling", "Avoid tight hairstyles that pull on roots", "See your GP to check iron and thyroid levels"], foods: ["Protein at every meal (hair is made of protein)", "Iron-rich foods (red meat, spinach)", "Biotin foods (eggs, nuts)"], mindset: "Hair changes are distressing but some thinning is normal. Ruling out deficiencies and being gentle helps." }
            },
            {
                id: 96,
                front: { title: "Brittle nails", why: "Lower oestrogen reduces keratin production, making nails dry, brittle, and prone to splitting or peeling", system: "Skin" },
                back: { actions: ["Keep nails short to reduce breakage", "Moisturise nails and cuticles daily", "Wear gloves when cleaning or washing up"], foods: ["Protein-rich foods (keratin is protein)", "Biotin foods (eggs, nuts, seeds)", "Collagen-supporting foods (vitamin C, bone broth)"], mindset: "Brittle nails are frustrating but often improve with protein, hydration, and gentle care." }
            },
            {
                id: 97,
                front: { title: "Skin changes", why: "Collagen loss (about 30% in the first 5 years of menopause) causes skin to lose firmness, elasticity, and develop more wrinkles", system: "Skin" },
                back: { actions: ["Use SPF daily (sun damage accelerates ageing)", "Retinol or vitamin C serum may help (consult GP or dermatologist)", "Stay hydrated and moisturise consistently"], foods: ["Protein for collagen building", "Vitamin C foods (citrus, peppers, berries)", "Oily fish (25g protein)", "Bone broth"], mindset: "Skin ageing is natural. Focus on skin health and protection rather than fighting inevitable changes." }
            },
            {
                id: 98,
                front: { title: "Hot flushes", why: "Hot flushes triggered by spicy food, hot drinks, or alcohol happen because these dilate blood vessels, adding to hormone-driven temperature sensitivity", system: "Nervous" },
                back: { actions: ["Identify and moderate your personal food triggers", "Let hot drinks cool slightly before drinking", "Sip alcohol slowly with food if you choose to drink"], foods: ["Cooling foods (cucumber, melon)", "Protein-rich snacks", "Herbal teas at warm (not hot) temperature"], mindset: "Knowing your triggers helps you make informed choices. You can still enjoy foods, just with awareness." }
            },
            {
                id: 99,
                front: { title: "Hot flushes", why: "Stress and anxiety activate your sympathetic nervous system (fight or flight), which can trigger hot flushes by raising body temperature", system: "Nervous" },
                back: { actions: ["Practice stress reduction daily (breathing, meditation)", "Identify and address sources of chronic stress", "Notice the stress-flush connection in your body"], foods: ["Magnesium-rich foods (calming)", "Protein for stable blood sugar", "Herbal teas (calming ritual)"], mindset: "Stress and flushes feed each other. Managing stress reduces flush frequency and intensity." }
            },
            {
                id: 100,
                front: { title: "Hot flushes", why: "Lack of physical fitness means your body works harder and heats up more easily during activity, increasing flush frequency", system: "Nervous" },
                back: { actions: ["Build fitness gradually with regular gentle movement", "Exercise in cool environments when possible", "Stay hydrated before, during, and after exercise"], foods: ["Protein after exercise (muscle recovery)", "Electrolyte balance (coconut water)", "Cooling snacks post-workout"], mindset: "Fitter bodies regulate temperature better. Start gently and build slowly - even small improvements help." }
            },
            {
                id: 101,
                front: { title: "Hot flushes", why: "Being overweight increases body heat production and insulation, making temperature regulation harder and hot flushes more frequent or intense", system: "Nervous" },
                back: { actions: ["Focus on health and comfort, not just weight loss", "Wear breathable fabrics and layer clothing", "Even modest weight loss can reduce flush frequency"], foods: ["Protein-focused eating (supports healthy weight)", "Anti-inflammatory foods", "Adequate hydration"], mindset: "Weight and flushes are connected, but your worth is not defined by your weight. Focus on feeling better." }
            },
            {
                id: 102,
                front: { title: "Hot flushes", why: "Embarrassment and shame about visible flushing can create anxiety that triggers more flushes, creating a self-perpetuating cycle", system: "Nervous" },
                back: { actions: ["Remind yourself: most people do not notice or care as much as you think", "Have a prepared simple explanation: it is just a hot flush", "Focus on managing the flush, not hiding it"], foods: ["Calming foods (magnesium-rich)", "Regular protein (stable blood sugar)", "Adequate hydration"], mindset: "Hot flushes are visible evidence of what your body is managing. There is no shame in something so common and natural." }
            },
            {
                id: 103,
                front: { title: "Night sweats", why: "Bedroom temperature too warm or heavy bedding traps heat, making night sweats worse and harder to recover from", system: "Nervous" },
                back: { actions: ["Keep bedroom temperature 16-18°C if possible", "Use lightweight, breathable bedding (cotton or bamboo)", "Layer bedding so you can adjust easily"], foods: ["Light evening meal (heavy meals generate heat)", "Adequate daytime protein", "Avoid alcohol before bed (triggers sweating)"], mindset: "Small environmental changes make night sweats more manageable. Cooler is almost always better." }
            },
            {
                id: 104,
                front: { title: "Night sweats", why: "Anxiety about night sweats and lost sleep can make you hyper-aware of body temperature, worsening the problem", system: "Nervous" },
                back: { actions: ["Accept night sweats as temporary, not permanent", "Focus on what you can control (bedroom setup, routine)", "Practice relaxation techniques if lying awake worrying"], foods: ["Calming evening routine (herbal tea)", "Magnesium-rich foods (muscle relaxation)", "Protein at dinner (stable blood sugar)"], mindset: "Worrying about night sweats makes them feel worse. Acceptance and practical preparation help more than anxiety." }
            },
            {
                id: 105,
                front: { title: "Night sweats", why: "Certain medications (antidepressants, hormone treatments) can worsen night sweats as a side effect", system: "Nervous" },
                back: { actions: ["Review medications with your GP if sweats are severe", "Do not stop medications without medical advice", "Ask about alternative medications with fewer side effects"], foods: ["Adequate hydration throughout the day", "Cooling foods", "Protein for overall health"], mindset: "If medication is worsening night sweats, your GP can help find alternatives. You do not have to suffer unnecessarily." }
            },
            {
                id: 106,
                front: { title: "Night sweats", why: "Infections, thyroid problems, or other medical conditions can cause night sweats that are not hormone-related", system: "Nervous" },
                back: { actions: ["See your GP if night sweats are sudden, severe, or accompanied by other symptoms", "Track patterns to report to GP", "Do not assume all night sweats are just menopause"], foods: ["Nutritious, balanced diet (supports immune system)", "Adequate protein", "Stay hydrated"], mindset: "Most night sweats in menopause are hormonal, but severe or unusual patterns deserve medical investigation." }
            },
            {
                id: 107,
                front: { title: "Sleep problems", why: "Worrying about not sleeping creates anxiety that keeps you awake, creating a vicious cycle of sleeplessness", system: "Nervous" },
                back: { actions: ["Get out of bed if not asleep after 20 minutes", "Do something calming in dim light until you feel sleepy", "Avoid clock-watching (it increases anxiety)"], foods: ["Protein at dinner (stable overnight blood sugar)", "Avoid caffeine after 2pm", "Chamomile tea before bed"], mindset: "Lying awake worrying about sleep makes it worse. Even quiet rest benefits your body, even if you are not asleep." }
            },
            {
                id: 108,
                front: { title: "Sleep problems", why: "Pain, discomfort, or frequent urination wake you repeatedly, preventing deep restorative sleep cycles", system: "Nervous" },
                back: { actions: ["Address the symptoms disrupting sleep (pain, urinary urgency)", "Limit fluids 2 hours before bed", "Use pain relief if needed (consult GP)"], foods: ["Anti-inflammatory foods (reduce pain)", "Protein for tissue repair", "Magnesium (muscle relaxation)"], mindset: "Sleep disruption from symptoms is exhausting. Treating the underlying symptoms often improves sleep more than sleep aids." }
            },
            {
                id: 109,
                front: { title: "Sleep problems", why: "Blue light from screens suppresses melatonin (sleep hormone), making it harder to fall asleep even when tired", system: "Nervous" },
                back: { actions: ["No screens 1 hour before bed", "Use blue light filters or glasses if you must use screens", "Read a physical book or listen to calming audio instead"], foods: ["Melatonin-supporting foods (tart cherries, oats)", "Magnesium-rich evening snack", "Warm milk (traditional and calming)"], mindset: "Screen habits are hard to change but make a real difference to sleep quality. Start with 30 minutes screen-free." }
            },
            {
                id: 110,
                front: { title: "Sleep problems", why: "Irregular sleep schedule confuses your body clock, making it harder to fall asleep and wake naturally at consistent times", system: "Nervous" },
                back: { actions: ["Go to bed and wake at the same time every day (even weekends)", "Get morning daylight within 1 hour of waking", "Avoid naps after 3pm"], foods: ["Regular meal times support circadian rhythm", "Protein breakfast (wakes metabolism)", "Light evening meal"], mindset: "Your body clock craves consistency. It takes 2-3 weeks to establish a new rhythm, but it is worth the effort." }
            },
            {
                id: 111,
                front: { title: "Sleep problems", why: "Alcohol helps you fall asleep initially but disrupts sleep quality later in the night, causing early waking and poor rest", system: "Nervous" },
                back: { actions: ["Avoid alcohol within 3 hours of bedtime", "If you drink, drink earlier in the evening", "Notice how alcohol affects your sleep quality"], foods: ["Hydrate well if you have consumed alcohol", "Protein-rich dinner", "Herbal tea before bed instead of nightcap"], mindset: "Alcohol is not a sleep aid. It trades falling asleep quickly for poor quality sleep later. Choose what matters more." }
            },
            {
                id: 112,
                front: { title: "Anxiety", why: "Hot flushes, palpitations, and other physical symptoms mimic panic attacks, making you anxious about your body and creating fear of symptoms", system: "Nervous" },
                back: { actions: ["Learn to distinguish menopause symptoms from panic attacks", "Remind yourself: these symptoms are uncomfortable but not dangerous", "Track symptoms to identify patterns and triggers"], foods: ["Stable blood sugar (reduces physical anxiety symptoms)", "Magnesium-rich foods", "Avoid excessive caffeine"], mindset: "Physical symptoms trigger anxiety, and anxiety worsens symptoms. Breaking this cycle takes time and self-compassion." }
            },
            {
                id: 113,
                front: { title: "Anxiety", why: "Changes to your body, identity, fertility, and life stage can trigger existential anxiety about ageing, purpose, and mortality", system: "Nervous" },
                back: { actions: ["Talk to friends, therapist, or support group about these feelings", "Reframe menopause as a life transition, not an ending", "Focus on what you are gaining, not just what you are losing"], foods: ["Nourishing, balanced meals (physical self-care)", "Omega-3 rich foods (brain health)", "Adequate protein"], mindset: "Grieving the past whilst adjusting to the present is valid. This transition is hard, and talking about it helps." }
            },
            {
                id: 114,
                front: { title: "Anxiety", why: "Perfectionism and high expectations of yourself increase anxiety when symptoms prevent you performing at your usual level", system: "Nervous" },
                back: { actions: ["Lower your standards temporarily - good enough is genuinely good enough", "Delegate or say no to non-essential tasks", "Practice self-compassion: you are coping with a lot right now"], foods: ["Regular protein meals (stable energy)", "Magnesium for nervous system support", "Avoid skipping meals when busy"], mindset: "You cannot perform at your previous level whilst managing major hormone changes. Adjusting expectations is not failure." }
            },
            {
                id: 115,
                front: { title: "Anxiety", why: "Isolation and lack of understanding from others intensifies anxiety and makes you feel alone with your struggles", system: "Nervous" },
                back: { actions: ["Talk openly with trusted friends or family about what you are experiencing", "Join menopause support groups online or locally", "Educate people close to you about what you need"], foods: ["Social meals (connection and nutrition)", "Comforting foods when needed", "Balanced nutrition for overall wellbeing"], mindset: "You are not alone. Millions of women experience this, and connection reduces the burden of anxiety significantly." }
            },
            {
                id: 116,
                front: { title: "Anxiety", why: "Catastrophic thinking (imagining worst-case scenarios) becomes more common when anxiety is high, making everything feel threatening", system: "Nervous" },
                back: { actions: ["Challenge catastrophic thoughts: what evidence do I have this will happen?", "Practice grounding in the present moment", "Write down fears to get them out of your head"], foods: ["Protein for stable mood", "Complex carbs (serotonin support)", "Magnesium-rich foods"], mindset: "Your anxious brain is trying to protect you by imagining threats. Most of what you fear will not happen." }
            },
            {
                id: 117,
                front: { title: "Mood swings", why: "Progesterone (the calming hormone) drops more sharply than oestrogen in perimenopause, removing a buffer against mood shifts", system: "Nervous" },
                back: { actions: ["Track mood swings to identify patterns (hormonal, situational, or both)", "Warm others: I might be more emotional today", "Allow yourself to feel emotions without judging them"], foods: ["Protein at every meal (stable mood)", "Magnesium (calming)", "Omega-3 rich foods (oily fish, walnuts)"], mindset: "Progesterone loss is real and affects mood regulation. This is not you being difficult - it is your brain chemistry." }
            },
            {
                id: 118,
                front: { title: "Mood swings", why: "Life stressors (work, relationships, caring responsibilities) feel harder to manage when your emotional resilience is already depleted by hormones", system: "Nervous" },
                back: { actions: ["Reduce non-essential stressors where possible", "Ask for help rather than trying to cope alone", "Acknowledge: I have less emotional bandwidth right now"], foods: ["Nourishing meals (not restriction)", "Comfort foods in moderation", "Adequate protein for neurotransmitter production"], mindset: "You are not weak for struggling. Your capacity is genuinely reduced right now, and that is okay." }
            },
            {
                id: 119,
                front: { title: "Mood swings", why: "Blood sugar crashes from irregular eating cause mood drops, irritability, and emotional instability", system: "Nervous" },
                back: { actions: ["Eat every 3-4 hours with protein at each meal or snack", "Avoid skipping meals when busy or stressed", "Carry protein snacks for emergencies"], foods: ["Protein-rich snacks (nuts, cheese, eggs)", "Complex carbs with protein (oats with nuts)", "Avoid sugary foods alone"], mindset: "Hanger is real, and menopause makes it worse. Regular eating is mood management, not indulgence." }
            },
            {
                id: 120,
                front: { title: "Mood swings", why: "Medication side effects (some antidepressants, blood pressure medications) can worsen mood instability", system: "Nervous" },
                back: { actions: ["Review all medications with your GP", "Ask about alternatives if mood swings started after new medication", "Never stop medications without medical advice"], foods: ["Nutritious diet supports overall health", "Omega-3 rich foods", "Adequate hydration"], mindset: "If medication is affecting mood, your GP can help find alternatives. You deserve to feel emotionally stable." }
            },
            {
                id: 121,
                front: { title: "Loss of libido", why: "Lower oestrogen and testosterone reduce sexual desire, whilst fatigue, pain, and emotional symptoms make intimacy feel like another demand", system: "Urogenital" },
                back: { actions: ["Communicate openly with your partner about changes in desire", "Address physical barriers (dryness, pain) with GP", "Redefine intimacy beyond penetrative sex"], foods: ["Zinc-rich foods (oysters, pumpkin seeds)", "Protein for overall health", "Adequate nutrition for energy"], mindset: "Loss of libido is common and distressing. Your sexuality can evolve rather than disappear - it just looks different now." }
            },
            {
                id: 122,
                front: { title: "Bloating and wind", why: "Hormone changes, stress, and less movement can slow or speed up how food moves through your gut, leading to trapped gas and a swollen tummy", system: "Digestive" },
                back: { actions: ["Eat slowly and chew food well to reduce swallowed air", "Go for gentle walks after meals to help food move through your system", "Notice which foods trigger bloating for you (fizzy drinks, fatty meals, large grain portions)"], foods: ["Chicken breast (32g protein per 100g)", "Cooked vegetables (easier to digest)", "Live yoghurt (10g protein per 100g, supports gut bacteria)"], mindset: "Bloating is frustrating and uncomfortable, but it is a common hormone-related change. Small adjustments can help." }
            },
            {
                id: 123,
                front: { title: "Constipation", why: "Less movement, less fluid intake, stress, and diet changes can all slow the bowel, making stools dry and hard to pass", system: "Digestive" },
                back: { actions: ["Drink enough water across the day to soften stools", "Gentle daily movement (walking) helps the bowel contract", "Keep a regular 'toilet time' after breakfast to create a routine"], foods: ["Oats (13g protein, high fibre)", "Beans and lentils (8-9g protein per 100g, high fibre)", "Vegetables and fruits with plenty of water"], mindset: "Constipation is common during menopause. Your body needs gentle support, not harsh laxatives." }
            },
            {
                id: 124,
                front: { title: "Loose stools and urgency", why: "Stress, blood sugar changes, or very spicy or fatty meals can lead to loose stools and sudden urgency", system: "Digestive" },
                back: { actions: ["Eat smaller, more frequent meals instead of large ones", "Notice whether caffeine or alcohol makes urgency worse", "Seek medical advice for sudden, severe, or persistent symptoms"], foods: ["Rice or potatoes (easy to digest)", "Well-cooked vegetables", "Lean protein (chicken, white fish)"], mindset: "Digestive urgency is distressing. If it persists or worsens, speak to your GP to rule out other causes." }
            },
            {
                id: 125,
                front: { title: "Tingling and numbness", why: "Fluctuating hormones can affect nerve signals and blood flow, causing pins and needles, tingling, or numbness in hands, feet, arms or legs", system: "Nervous" },
                back: { actions: ["Gentle stretching and movement to improve circulation", "Check with GP if symptoms are persistent or worsen", "Ensure good posture to avoid nerve compression"], foods: ["B-vitamin rich foods (eggs 13g protein, salmon 25g protein)", "Magnesium sources (spinach, almonds)", "Whole grains for nerve health"], mindset: "Tingling sensations are unsettling but usually temporary. If they persist or affect your daily life, seek medical advice." }
            },
            {
                id: 126,
                front: { title: "Dizziness and lightheadedness", why: "Blood pressure changes, blood sugar fluctuations, and inner ear sensitivity can all be affected by hormone shifts, causing dizziness", system: "Nervous" },
                back: { actions: ["Stand up slowly from sitting or lying down", "Stay well hydrated throughout the day", "Eat regular meals to keep blood sugar steady"], foods: ["Regular protein meals (chicken 32g, Greek yoghurt 10g)", "Complex carbs (oats, brown rice)", "Plenty of water and electrolytes"], mindset: "Dizziness can be frightening. Move slowly, breathe deeply, and speak to your GP if episodes are frequent or severe." }
            },
            {
                id: 127,
                front: { title: "Electric shock sensations", why: "Hormone fluctuations can cause brief, sharp sensations like electric shocks, often in the head or moving through the body into a hot flush", system: "Nervous" },
                back: { actions: ["These are usually brief and harmless, though unsettling", "Keep a diary to track if they relate to hot flushes", "Speak to GP if they become frequent or distressing"], foods: ["Magnesium-rich foods (pumpkin seeds 19g protein, dark chocolate)", "Omega-3 fatty acids (salmon, walnuts)", "B-vitamins (eggs, beans)"], mindset: "Electric shock sensations are odd and alarming, but they are a recognised menopause symptom. You are not imagining them." }
            },
            {
                id: 128,
                front: { title: "Burning mouth or tongue", why: "Lower oestrogen can affect the mucous membranes in your mouth, causing burning, tingling, or altered taste sensations", system: "Digestive" },
                back: { actions: ["Sip cool water throughout the day", "Avoid very hot, spicy, or acidic foods if they worsen symptoms", "Check with GP or dentist to rule out other causes"], foods: ["Cooling foods (cucumber, yoghurt 10g protein)", "Gentle proteins (fish, tofu 8g protein)", "Avoid irritants (alcohol, spicy foods)"], mindset: "Burning mouth is uncomfortable and can affect eating enjoyment. It is a real symptom, and your GP or dentist can help." }
            },
            {
                id: 129,
                front: { title: "Body odour changes", why: "Hormone changes affect sweat composition and skin bacteria balance, which can change your natural body odour", system: "Skin" },
                back: { actions: ["Shower regularly and wear breathable, natural fabrics", "Use gentle, fragrance-free products", "Change clothes and bedding more frequently if needed"], foods: ["Stay well hydrated with water", "Reduce strong-smelling foods if they worsen odour (garlic, onions)", "Eat plenty of vegetables and lean protein"], mindset: "Body odour changes can feel embarrassing, but they are a normal hormone response. Good hygiene and breathable clothes help." }
            },
            {
                id: 130,
                front: { title: "Itchy skin", why: "Lower oestrogen reduces skin moisture and can trigger histamine release, causing itching all over or in specific areas", system: "Skin" },
                back: { actions: ["Moisturise skin while still damp after bathing", "Avoid very hot showers and harsh soaps", "Wear soft, natural fabrics against skin"], foods: ["Omega-3 rich foods (salmon 25g protein, flaxseeds)", "Healthy fats (avocado, olive oil, nuts)", "Stay hydrated with water and herbal teas"], mindset: "Itchy skin is maddening, especially at night. This is hormone-related, not poor hygiene. Gentle care helps." }
            },
            {
                id: 131,
                front: { title: "Ringing in ears (tinnitus)", why: "Hormone fluctuations can affect inner ear fluid balance and blood flow, causing ringing, buzzing, or humming sounds", system: "Nervous" },
                back: { actions: ["Reduce caffeine and alcohol which can worsen tinnitus", "Manage stress with breathing exercises or gentle activity", "See GP if tinnitus is persistent, worsening, or affects hearing"], foods: ["Magnesium-rich foods (almonds, spinach)", "Avoid excessive salt which can worsen symptoms", "Stay well hydrated"], mindset: "Tinnitus is frustrating and can affect sleep and concentration. It is a recognised menopause symptom, and help is available." }
            },
            {
                id: 132,
                front: { title: "Worsening allergies", why: "Hormone changes can make your immune system more reactive, causing existing allergies to worsen or new sensitivities to develop", system: "Immune" },
                back: { actions: ["Track symptoms to identify triggers (foods, pollen, dust)", "Keep antihistamines on hand if recommended by GP", "Reduce other inflammatory triggers (stress, poor sleep, processed foods)"], foods: ["Anti-inflammatory foods (oily fish 25g protein, turmeric)", "Quercetin-rich foods (apples, onions, berries)", "Avoid known trigger foods"], mindset: "Worsening allergies are bewildering when you have managed them for years. Your immune system is genuinely more sensitive now." }
            },
            {
                id: 133,
                front: { title: "Digestive bloating & discomfort", why: "Falling oestrogen slows digestion and can increase gas, bloating, and sensitivity to certain foods. Your gut microbiome also changes during menopause", system: "Digestive" },
                back: { actions: ["Eat slowly and chew thoroughly - rushing meals worsens bloating", "Keep a food diary to identify trigger foods (common ones: wheat, dairy, onions, beans)", "Try smaller, more frequent meals rather than large portions"], foods: ["Probiotic foods (live yoghurt, kefir, sauerkraut)", "Ginger tea or peppermint tea for digestive comfort", "Prebiotic fibre (oats, bananas, asparagus) to feed good gut bacteria"], mindset: "Digestive changes can be frustrating and uncomfortable. Your gut is adjusting to new hormone levels." }
            },
            {
                id: 134,
                type: "selfcare",
                front: { title: "Self-Care: Rest & Recovery", why: "Menopause demands more from your body and mind. Rest isn't laziness - it's how your body repairs, balances hormones, and builds resilience", system: "Self-Care" },
                back: { actions: ["Schedule 10-15 minutes of complete rest each day (lie down, close eyes, no phone)", "Say 'no' to one non-essential commitment this week", "Go to bed 30 minutes earlier than usual"], when: "Daily: Morning rest or afternoon pause • Weekly: One full rest day • As needed: When overwhelmed", mindset: "Rest is not earned. You don't have to be 'productive enough' to deserve it. Your body needs rest to function.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 135,
                type: "selfcare",
                front: { title: "Self-Care: Stress Management", why: "Chronic stress worsens menopause symptoms by raising cortisol, disrupting sleep, and depleting your emotional reserves", system: "Self-Care" },
                back: { actions: ["Practise 5 minutes of slow breathing daily (4 seconds in, 6 seconds out)", "Set one boundary this week (say no, delegate, or ask for help)", "Identify and reduce one regular stressor"], when: "Daily: Morning or before bed breathing • Weekly: Boundary review • Ongoing: Stress audit", mindset: "You cannot 'stress yourself better'. Reducing stress is not optional - it's protective.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 136,
                type: "selfcare",
                front: { title: "Self-Care: Movement & Gentle Exercise", why: "Regular movement supports bone health, muscle strength, mood, sleep, and metabolic health, but overexercising can worsen fatigue and stress", system: "Self-Care" },
                back: { actions: ["Aim for 20-30 minutes of gentle daily movement (walking, stretching, swimming)", "Include 2-3 sessions of strength work weekly (resistance bands, weights)", "Rest when tired - movement is helpful, but rest is essential"], when: "Daily: Gentle movement • 2-3x weekly: Strength work • Listen to your body always", mindset: "Movement is medicine, but rest is too. You don't need to earn rest through exercise.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 137,
                type: "selfcare",
                front: { title: "Self-Care: Social Connection", why: "Isolation worsens mood, anxiety, and stress. Connection - even brief, simple contact - supports nervous system regulation and emotional resilience", system: "Self-Care" },
                back: { actions: ["Reach out to one person this week (text, call, or meet)", "Join one group or activity where you feel safe and accepted", "Share how you're feeling with someone you trust"], when: "Weekly: One meaningful connection • Monthly: Group activity • As needed: Reach out when struggling", mindset: "You are not a burden. People who care about you want to know how you are.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 138,
                type: "selfcare",
                front: { title: "Self-Care: Mindful Eating", why: "Food restriction, guilt, and diet culture worsen stress and hormone imbalance. Gentle, nourishing eating supports your body without punishment", system: "Self-Care" },
                back: { actions: ["Eat regular meals with protein, fibre, and healthy fats - no skipping", "Notice when you're eating from hunger vs. stress (without judgment)", "Allow foods you enjoy - restriction often leads to overeating later"], when: "Every meal: Balanced plate • Daily: Hunger check-in • Ongoing: Food kindness", mindset: "Food is not the enemy. Your body needs nourishment, not punishment.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 139,
                type: "selfcare",
                front: { title: "Self-Care: Sleep Hygiene", why: "Good sleep hygiene supports your natural sleep hormones and helps your body repair overnight, even when menopause disrupts sleep", system: "Self-Care" },
                back: { actions: ["Keep bedroom cool, dark, and quiet (fan, blackout curtains, earplugs)", "Screen-free wind-down for 30-60 minutes before bed", "Keep a regular wake time, even if sleep was poor"], when: "Nightly: Wind-down routine • Daily: Consistent wake time • Ongoing: Optimise sleep environment", mindset: "You may not control when sleep comes, but you can create the best conditions for it.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 140,
                type: "selfcare",
                front: { title: "Self-Care: Emotional Support", why: "Menopause can bring up difficult emotions, past trauma, or relationship challenges. You don't have to cope alone", system: "Self-Care" },
                back: { actions: ["Consider talking therapy (GP referral, online therapy, or menopause specialist)", "Journal or write about difficult feelings - getting them out helps", "Allow yourself to feel without fixing - not every emotion needs a solution"], when: "As needed: Seek therapy • Daily: Journaling or check-in • Ongoing: Permission to feel", mindset: "Asking for help is strength, not weakness. You deserve support.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 141,
                type: "selfcare",
                front: { title: "Self-Care: Body Kindness", why: "Your body is changing, and that can feel like loss. Self-criticism adds suffering. Kindness doesn't mean loving everything - it means treating yourself with respect", system: "Self-Care" },
                back: { actions: ["Notice critical thoughts about your body and pause - would you speak this way to a friend?", "Focus on what your body can do, not just how it looks", "Wear clothes that feel comfortable and fit your current body"], when: "Daily: Gentle self-talk practice • Ongoing: Shift focus from appearance to function", mindset: "Your worth is not determined by your weight, your wrinkles, or your waistline.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 142,
                type: "selfcare",
                front: { title: "Self-Care: When to Seek Help", why: "Some symptoms need medical investigation, not self-management. Knowing when to seek help protects your health", system: "Self-Care" },
                back: { actions: ["See GP urgently for: heavy bleeding, severe pain, sudden new symptoms, chest pain, severe headache", "Book routine GP appointment for: persistent symptoms, quality of life impact, HRT discussion", "Seek specialist help for: complex symptoms, HRT side effects, ongoing struggles"], when: "Urgent: Same day or A&E • Routine: Within 2 weeks • Specialist: GP referral when needed", mindset: "You are not wasting anyone's time. Your symptoms matter, and you deserve medical support.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 142,
                type: "selfcare",
                front: { title: "Self-Care: Breathing Techniques", why: "Deep breathing activates your parasympathetic nervous system, which counters stress, reduces anxiety, and can help manage hot flushes", system: "Self-Care" },
                back: { actions: ["Try 4-7-8 breathing: Breathe in for 4, hold for 7, out for 8 (repeat 4 times)", "Box breathing: In for 4, hold for 4, out for 4, hold for 4", "Use during hot flushes, before sleep, or when anxious"], when: "During symptoms: Immediate relief • Daily: 5-10 minutes practice • Anytime: Stress management", mindset: "Your breath is always with you: a free, instant tool for calm.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 143,
                type: "selfcare",
                front: { title: "Self-Care: Digital Boundaries", why: "Constant phone use disrupts sleep, increases stress, and reduces presence. Setting boundaries protects your mental health and relationships", system: "Self-Care" },
                back: { actions: ["Turn off notifications after 8pm or set 'Do Not Disturb' hours", "Keep phone out of bedroom (use a regular alarm clock)", "Have phone-free mealtimes and conversations"], when: "Evening: No notifications after 8pm • Bedtime: Phone stays outside bedroom • Meals: Phone-free zones", mindset: "Your attention is valuable. You decide where it goes.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 144,
                type: "selfcare",
                front: { title: "Self-Care: Creative Expression", why: "Creative activities engage different parts of your brain, reduce stress, and give you a sense of accomplishment. You don't need to be 'good' at it", system: "Self-Care" },
                back: { actions: ["Try: colouring, painting, writing, knitting, gardening, crafts, music", "Give yourself 15-30 minutes with no pressure to create anything 'good'", "Focus on the process, not the product"], when: "Weekly: Dedicated creative time • Daily: 10-minute doodle or write • Anytime: When you need distraction", mindset: "Creativity is not about talent. It's about expression and joy.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 145,
                type: "selfcare",
                front: { title: "Self-Care: Saying No", why: "You cannot pour from an empty cup. Protecting your time and energy is essential, not selfish. 'No' is a complete sentence", system: "Self-Care" },
                back: { actions: ["Practice: 'I appreciate you thinking of me, but I can't commit to that right now'", "Don't over-explain - a polite decline is enough", "Check in: Am I saying yes out of guilt, or because I genuinely want to?"], when: "Anytime: When asked for commitment • Before agreeing: Pause and check in • Ongoing: Protect your capacity", mindset: "Saying no to others sometimes means saying yes to yourself.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 146,
                type: "selfcare",
                front: { title: "Self-Care: Gratitude Practice", why: "Gratitude shifts focus from what's wrong to what's working. It doesn't ignore difficulties - it helps you see the whole picture", system: "Self-Care" },
                back: { actions: ["Each evening, write down 3 things that went okay today (even tiny things count)", "Notice small moments: sunshine, a kind word, a comfortable bed", "On hard days, gratitude can be as simple as 'I made it through today'"], when: "Daily: Evening gratitude practice • Throughout day: Notice small good moments • Hard days: Give yourself credit", mindset: "Gratitude doesn't mean everything is perfect. It means some things are still good.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 147,
                type: "selfcare",
                front: { title: "Self-Care: Time in Nature", why: "Nature exposure reduces cortisol, improves mood, and supports sleep. Even 10 minutes outside makes a difference", system: "Self-Care" },
                back: { actions: ["Morning sunlight helps regulate your body clock (even 5-10 minutes)", "Walk in a park, garden, or anywhere green when possible", "If you can't get outside, sit by an open window or look at plants"], when: "Morning: 5-10 minutes sunlight • Daily: Short outdoor time • Weekly: Longer nature walk", mindset: "You don't need a mountain hike. A few minutes outside still counts.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 148,
                type: "selfcare",
                front: { title: "Self-Care: Rest Without Guilt", why: "Menopause is hard on your body. Rest is not laziness - it's how you recover and cope. You don't have to earn the right to rest", system: "Self-Care" },
                back: { actions: ["Give yourself permission to cancel plans when you're exhausted", "Take a 20-minute rest in the afternoon if you need it", "Notice the guilt that comes up - acknowledge it, then rest anyway"], when: "Daily: Rest when tired, not when 'everything is done' • Ongoing: Challenge rest-guilt • As needed: Cancel without apology", mindset: "Rest is productive. Your body needs it to function.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 149,
                type: "selfcare",
                front: { title: "Self-Care: Laugh and Play", why: "Laughter reduces stress hormones, boosts mood, and releases tension. Play and joy are not just for children - they're essential for adults too", system: "Self-Care" },
                back: { actions: ["Watch something funny - comedy, sitcom, stand-up, silly videos", "Play with children, pets, or friends without an agenda)", "Do something purely for fun with no productivity goal"], when: "Daily: 10-15 minutes of laughter • Weekly: Playful activity • Anytime: When life feels too serious", mindset: "You don't need a reason to have fun. Joy is its own purpose.", closing: "Self-care is not selfish. It's essential for your wellbeing." }
            },
            {
                id: 150,
                type: "supplement-legend",
                front: {
                    title: "How to Use This Supplement Guide",
                    content: `<div class="legend-card">
                        <div class="legend-icon">ℹ️</div>
                        <p style="margin-bottom: 1.5rem; font-size: 1.05rem;">This section contains information about <strong>30 supplements</strong> sometimes explored during menopause.</p>
                        
                        <div style="background: rgba(255,255,255,0.2); padding: 1.2rem; border-radius: 12px; margin-bottom: 1.5rem; border-left: 4px solid rgba(255,200,0,0.8);">
                            <p style="font-weight: 600; margin-bottom: 0.8rem;">⚠️ IMPORTANT SAFETY INFORMATION</p>
                            <p style="margin-bottom: 0.5rem;">• Supplements are <strong>optional</strong> and do not replace medical care or HRT</p>
                            <p style="margin-bottom: 0.5rem;">• <strong>Always speak to your GP or qualified menopause specialist</strong> before taking any supplements, especially if you take medicines or HRT</p>
                            <p style="margin-bottom: 0.5rem;">• Evidence varies - what helps one person may not help another</p>
                            <p>• Some supplements can interact with medications or have side effects</p>
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <p style="font-weight: 600; margin-bottom: 0.8rem;">🔍 HOW TO USE THIS SECTION</p>
                            <p style="margin-bottom: 0.5rem;">• Search by <strong>symptom</strong> (e.g., "hot flushes", "joint pain")</p>
                            <p style="margin-bottom: 0.5rem;">• Each card shows the supplement, related symptom, and evidence level</p>
                            <p style="margin-bottom: 0.5rem;">• Flip cards to see detailed information</p>
                            <p>• Use Previous/Next buttons or keyboard arrows to navigate</p>
                        </div>
                        
                        <div style="background: rgba(200,255,200,0.15); padding: 1.2rem; border-radius: 12px; margin-bottom: 1rem;">
                            <p style="font-weight: 600; margin-bottom: 0.8rem;">🛒 WHERE TO PURCHASE</p>
                            <p style="margin-bottom: 1rem;"><strong>Natural Dispensary:</strong></p>
                            <a href="https://www.naturaldispensary.co.uk" target="_blank" rel="noopener" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(255,255,255,0.9); color: #E91E63; text-decoration: none; border-radius: 8px; font-weight: 600; margin-bottom: 0.5rem;">🛍️ Visit Natural Dispensary</a>
                            <p style="font-size: 0.9rem; margin-top: 0.5rem;">Use discount code: <strong>SVVA10</strong></p>
                            
                            <p style="margin: 1.5rem 0 1rem;"><strong>4Life:</strong></p>
                            <a href="https://unitedkingdom.4life.com/12800513/shop" target="_blank" rel="noopener" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(255,255,255,0.9); color: #E91E63; text-decoration: none; border-radius: 8px; font-weight: 600; margin-bottom: 0.75rem;">🛍️ Visit 4Life Shop</a>
                            <div style="background: linear-gradient(135deg, #FFE5CC, #FFF5E5); padding: 0.85rem 1rem; border-radius: 8px; border-left: 4px solid #FF9F7F; margin-top: 0.5rem;">
                                <p style="font-size: 0.9rem; margin: 0; color: var(--text-dark); font-weight: 600;">✨ <strong>Exclusive Benefit:</strong> Purchase 4Life supplements at wholesale prices through this direct link</p>
                            </div>
                        </div>
                        
                        <p style="font-size: 0.95rem; font-style: italic; opacity: 0.9; margin-top: 1.5rem;">💡 Flip this card to see key reminders about supplement safety</p>
                    </div>`
                },
                back: {
                    title: "Key Safety Reminders",
                    content: `<div style="line-height: 1.8;">
                        <div style="background: rgba(255,255,255,0.2); padding: 1.2rem; border-radius: 12px; margin-bottom: 1.5rem; border-left: 4px solid rgba(255,100,100,0.8);">
                            <p style="font-weight: 600; margin-bottom: 1rem; font-size: 1.1rem;">⚠️ WHEN TO AVOID SUPPLEMENTS</p>
                            <p style="margin-bottom: 0.5rem;">• If you are pregnant or breastfeeding</p>
                            <p style="margin-bottom: 0.5rem;">• If you have liver or kidney disease</p>
                            <p style="margin-bottom: 0.5rem;">• If you have hormone-sensitive conditions (without medical advice)</p>
                            <p style="margin-bottom: 0.5rem;">• Before surgery (some supplements affect bleeding/anesthesia)</p>
                            <p>• If you take blood thinners or other medications (check interactions)</p>
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <p style="font-weight: 600; margin-bottom: 1rem; font-size: 1.1rem;">✅ GOOD SUPPLEMENT PRACTICES</p>
                            <p style="margin-bottom: 0.5rem;">• Start one supplement at a time (to identify what helps or causes issues)</p>
                            <p style="margin-bottom: 0.5rem;">• Follow dosage instructions carefully</p>
                            <p style="margin-bottom: 0.5rem;">• Give supplements 4-8 weeks to show effects</p>
                            <p style="margin-bottom: 0.5rem;">• Buy from reputable suppliers with quality testing</p>
                            <p>• Keep GP/specialist informed about all supplements you take</p>
                        </div>
                        
                        <div style="background: rgba(200,220,255,0.2); padding: 1.2rem; border-radius: 12px; margin-bottom: 1.5rem;">
                            <p style="font-weight: 600; margin-bottom: 1rem;">💡 REMEMBER</p>
                            <p style="margin-bottom: 0.5rem;">Supplements work best <strong>alongside</strong> healthy lifestyle choices:</p>
                            <p style="margin-bottom: 0.3rem;">• Balanced nutrition with protein, fibre, healthy fats</p>
                            <p style="margin-bottom: 0.3rem;">• Regular movement and strength work</p>
                            <p style="margin-bottom: 0.3rem;">• Stress management and good sleep</p>
                            <p>• Social connection and emotional support</p>
                        </div>
                        
                        <p style="text-align: center; font-size: 1rem; font-weight: 600; margin-top: 1.5rem;">Your health and safety come first. When in doubt, ask a professional.</p>
                    </div>`
                }
            },
            {
                id: 175,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "Menopeace (New Roots)",
                    subtitle: "Sometimes explored alongside hot flushes",
                    context: "Hot flushes",
                    helps: "Hot flushes, night sweats, temperature regulation & hormonal balance"
                },
                back: {
                    what: "A herbal blend containing black cohosh, sage, and other botanicals aimed at supporting temperature regulation and hormonal balance during menopause.",
                    symptomContext: "Some women explore Menopeace alongside hot flushes and night sweats during menopause.",
                    evidence: "Evidence is emerging. Black cohosh and sage show promise in some studies for reducing hot flush frequency, though results vary between individuals.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 151,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "MegaMag® PeriMeno Plus Orange Flavour (Metagenics)",
                    subtitle: "Sometimes explored alongside hot flushes",
                    context: "Hot flushes",
                    helps: "Hot flushes, temperature regulation, magnesium support & menopause symptoms"
                },
                back: {
                    what: "A magnesium formula specifically designed for perimenopause and menopause, combining magnesium with soya isoflavones and other nutrients.",
                    symptomContext: "Some women explore this alongside hot flushes and general menopause symptoms.",
                    evidence: "Evidence is emerging. Magnesium plays a role in many body processes, and the added isoflavones may provide modest benefit for some women.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 152,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "Soya Isoflavones (Lamberts)",
                    subtitle: "Sometimes explored alongside hot flushes and mood swings",
                    context: "Hot flushes, mood swings",
                    helps: "Hot flushes, mood swings, hormonal balance & menopause symptoms"
                },
                back: {
                    what: "Plant compounds from soya that have a similar structure to oestrogen and may provide mild oestrogenic effects in the body.",
                    symptomContext: "Some women explore soya isoflavones alongside hot flushes and mood changes during menopause.",
                    evidence: "Evidence is mixed. Some studies show modest benefits for hot flushes, but results vary widely. Response depends on gut bacteria and individual metabolism.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 153,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "MegaMag® Night 60 Tablets (Metagenics)",
                    subtitle: "Sometimes explored alongside sleep problems",
                    context: "Sleep problems",
                    helps: "Sleep quality, night-time relaxation, restful sleep & nervous system calm"
                },
                back: {
                    what: "A magnesium supplement with added nutrients specifically formulated to support relaxation and sleep quality.",
                    symptomContext: "Some women explore this alongside sleep disturbances and night-time waking during menopause.",
                    evidence: "Evidence is emerging. Magnesium deficiency is common in menopause and can affect sleep quality. Supplementation may help some women.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 154,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "MegaMag Calmeze (Metagenics)",
                    subtitle: "Sometimes explored alongside sleep problems",
                    context: "Sleep problems",
                    helps: "Sleep quality, anxiety, stress management & muscle relaxation"
                },
                back: {
                    what: "A magnesium supplement with added B vitamins and herbs aimed at supporting relaxation and sleep quality.",
                    symptomContext: "Some women explore this alongside sleep problems and anxiety during menopause.",
                    evidence: "Evidence is emerging. Magnesium may support sleep quality in those with deficiency, but results vary between individuals.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 155,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "MegaMag PeriMeno Plus (Metagenics)",
                    subtitle: "Sometimes explored alongside night sweats",
                    context: "Night sweats",
                    helps: "Night sweats, temperature regulation, sleep quality & hormonal balance"
                },
                back: {
                    what: "A comprehensive magnesium formula with isoflavones and nutrients aimed at supporting women during perimenopause and menopause.",
                    symptomContext: "Some women explore this alongside night sweats and sleep disruption during menopause.",
                    evidence: "Evidence is emerging. The combination of magnesium and isoflavones may provide modest benefit for some women with vasomotor symptoms.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 156,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "MegaMag® PeriMeno (Metagenics)",
                    subtitle: "Sometimes explored alongside mood swings",
                    context: "Mood swings",
                    helps: "Mood swings, emotional balance, irritability & anxiety relief"
                },
                back: {
                    what: "A magnesium formula with added nutrients specifically aimed at supporting women during perimenopause and menopause.",
                    symptomContext: "Some women explore this alongside mood swings, anxiety, and irritability during menopause.",
                    evidence: "Evidence is emerging. Magnesium may support mood regulation in those with deficiency, though individual responses vary.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 157,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "Magnesium Glycinate",
                    subtitle: "Sometimes explored alongside anxiety",
                    context: "Anxiety",
                    helps: "Anxiety, stress, sleep quality & muscle tension relief"
                },
                back: {
                    what: "A highly absorbable form of magnesium that may support nervous system function, muscle relaxation, and calm.",
                    symptomContext: "Some women explore magnesium alongside anxiety and stress during menopause.",
                    evidence: "Evidence is emerging. Magnesium deficiency is linked to anxiety, and supplementation may help some women feel calmer.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 158,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "Transfer Factor ReCall™ (4Life)",
                    subtitle: "Sometimes explored alongside brain fog and memory problems",
                    context: "Brain fog, memory problems",
                    helps: "Brain fog, memory, mental clarity, focus & cognitive function"
                },
                back: {
                    what: "A supplement containing transfer factors and other nutrients aimed at supporting cognitive function and mental clarity.",
                    symptomContext: "Some women explore this alongside brain fog and memory problems during menopause.",
                    evidence: "Evidence is limited. Individual responses vary, and lifestyle approaches (sleep, stress management, nutrition) remain the foundation.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "4Life",
                    link: "https://unitedkingdom.4life.com/12800513/shop",
                    code: null
                }
            },
            {
                id: 159,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "4Life® Transfer Factor ReCall™",
                    subtitle: "Sometimes explored for cognitive and energy support",
                    context: "Cognitive function, energy, mental performance",
                    helps: "Cognitive function, energy, mental performance, focus & memory support"
                },
                back: {
                    what: "An advanced formulation containing transfer factors, vitamins, and botanical extracts aimed at supporting brain health and energy metabolism.",
                    symptomContext: "Some women explore this for comprehensive cognitive and energy support during menopause.",
                    evidence: "Evidence is limited. Cognitive changes in menopause are complex and multifactorial. Lifestyle approaches remain most important.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "4Life",
                    link: "https://unitedkingdom.4life.com/12800513/shop",
                    code: null
                }
            },
            {
                id: 160,
                type: "supplement",
                system: "Musculoskeletal",
                systemIcon: "🦴",
                systemName: "Musculoskeletal System",
                front: {
                    title: "MetaActive Rapid (Metagenics)",
                    subtitle: "Sometimes explored alongside joint pain",
                    context: "Joint pain",
                    helps: "Joint pain, inflammation, mobility & musculoskeletal comfort"
                },
                back: {
                    what: "A supplement containing curcumin and other anti-inflammatory compounds aimed at supporting joint health and comfort.",
                    symptomContext: "Some women explore this alongside joint pain and stiffness during menopause.",
                    evidence: "Evidence is emerging. Curcumin has anti-inflammatory properties, though absorption can be an issue. Movement and weight management remain most important.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 161,
                type: "supplement",
                system: "Musculoskeletal",
                systemIcon: "🦴",
                systemName: "Musculoskeletal System",
                front: {
                    title: "Fibro-AMJ (4Life)",
                    subtitle: "Sometimes explored alongside muscle aches",
                    context: "Muscle aches",
                    helps: "Muscle aches, joint comfort, flexibility & recovery support"
                },
                back: {
                    what: "A supplement containing transfer factors and nutrients aimed at supporting muscle and joint comfort.",
                    symptomContext: "Some women explore this alongside muscle aches and joint discomfort during menopause.",
                    evidence: "Evidence is limited. Muscle and joint pain have many causes. Regular movement, strength training, and adequate protein are most effective.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "4Life",
                    link: "https://unitedkingdom.4life.com/12800513/shop",
                    code: null
                }
            },
            {
                id: 162,
                type: "supplement",
                system: "Urogenital",
                systemIcon: "🌸",
                systemName: "Urogenital System",
                front: {
                    title: "Intima Gel (Hifas da Terra)",
                    subtitle: "Sometimes explored alongside vaginal dryness",
                    context: "Vaginal dryness",
                    helps: "Vaginal dryness, intimate comfort, tissue health & moisture support"
                },
                back: {
                    what: "A topical gel containing medicinal mushroom extracts aimed at supporting vaginal tissue health and comfort.",
                    symptomContext: "Some women explore this alongside vaginal dryness and discomfort during menopause.",
                    evidence: "Evidence is limited. Vaginal oestrogen prescribed by your GP is the most effective treatment. Regular use and gentle care are important.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 163,
                type: "supplement",
                system: "Urogenital",
                systemIcon: "🌸",
                systemName: "Urogenital System",
                front: {
                    title: "Hifas-Menopause (Hifas da Terra)",
                    subtitle: "Sometimes explored alongside low libido",
                    context: "Low libido",
                    helps: "Low libido, vitality, hormonal balance & overall menopause support"
                },
                back: {
                    what: "A blend of medicinal mushrooms (Reishi, Cordyceps, Lion's Mane) with Ashwagandha KSM-66 and Green Tea Extract aimed at supporting vitality and hormonal balance.",
                    symptomContext: "Some women explore this alongside low libido and reduced energy during menopause.",
                    evidence: "Evidence is limited. Libido is complex and affected by many factors including hormones, stress, relationship dynamics, and physical symptoms.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 164,
                type: "supplement",
                system: "Urogenital",
                systemIcon: "🌸",
                systemName: "Urogenital System",
                front: {
                    title: "Menopause Support (Hifas da Terra)",
                    subtitle: "Sometimes explored alongside low libido",
                    context: "Low libido",
                    helps: "Low libido, hormonal balance, vitality & overall menopause symptoms"
                },
                back: {
                    what: "A supplement containing medicinal mushroom extracts aimed at supporting hormonal balance and vitality during menopause.",
                    symptomContext: "Some women explore this alongside low libido and reduced energy during menopause.",
                    evidence: "Evidence is limited. Libido is complex and affected by many factors including hormones, stress, relationship dynamics, and physical symptoms.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 165,
                type: "supplement",
                system: "Urogenital",
                systemIcon: "🌸",
                systemName: "Urogenital System",
                front: {
                    title: "FermentActive Maca (New Roots)",
                    subtitle: "Sometimes explored alongside low libido",
                    context: "Low libido",
                    helps: "Low libido, energy, vitality, hormonal balance & stamina"
                },
                back: {
                    what: "A fermented maca root supplement aimed at supporting energy, vitality, and hormonal balance in women.",
                    symptomContext: "Some women explore maca alongside low libido and reduced energy during menopause.",
                    evidence: "Evidence is mixed. Some studies suggest maca may support sexual function and energy, but results vary widely between individuals.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 166,
                type: "supplement",
                system: "Digestive",
                systemIcon: "🫃",
                systemName: "Digestive System",
                front: {
                    title: "Bio-Me Barrier",
                    subtitle: "Sometimes explored alongside bloating",
                    context: "Bloating",
                    helps: "Bloating, digestive comfort, gut health & IBS symptoms"
                },
                back: {
                    what: "A probiotic supplement aimed at supporting gut barrier function and digestive comfort.",
                    symptomContext: "Some women explore this alongside bloating and digestive discomfort during menopause.",
                    evidence: "Evidence is emerging. Gut health affects many symptoms, though specific probiotic strains may work differently for different people.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 167,
                type: "supplement",
                system: "Digestive",
                systemIcon: "🫃",
                systemName: "Digestive System",
                front: {
                    title: "Bio Intestin (Hifas da Terra)",
                    subtitle: "Sometimes explored alongside digestive symptoms",
                    context: "Digestive symptoms",
                    helps: "Digestive comfort, gut health, bloating & intestinal balance"
                },
                back: {
                    what: "A blend of medicinal mushrooms (Shiitake, Oyster, Lion's Mane) aimed at supporting digestive health and intestinal balance.",
                    symptomContext: "Some women explore this alongside digestive changes and discomfort during menopause.",
                    evidence: "Evidence is limited. Digestive symptoms have many causes. Fibre, hydration, movement, and stress management remain most important.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 168,
                type: "supplement",
                system: "Digestive",
                systemIcon: "🫃",
                systemName: "Digestive System",
                front: {
                    title: "4Life Transfer Factor® Belle Vie® (4Life)",
                    subtitle: "Sometimes explored for immune and digestive comfort",
                    context: "Immune support, digestive comfort",
                    helps: "Immune support, digestive comfort, overall wellness & gut health"
                },
                back: {
                    what: "A supplement containing transfer factors specifically formulated to support immune function and digestive comfort.",
                    symptomContext: "Some women explore this for comprehensive immune and digestive support during menopause.",
                    evidence: "Evidence is limited. Immune function and digestive health are complex. Lifestyle approaches (nutrition, sleep, stress management) remain foundational.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "4Life",
                    link: "https://unitedkingdom.4life.com/12800513/shop",
                    code: null
                }
            },
            {
                id: 169,
                type: "supplement",
                system: "Metabolic",
                systemIcon: "🔥",
                systemName: "Metabolic Health",
                front: {
                    title: "Vitamin B Complex",
                    subtitle: "Sometimes explored alongside fatigue",
                    context: "Fatigue",
                    helps: "Fatigue, low energy, brain fog, mood support & metabolism"
                },
                back: {
                    what: "A combination of B vitamins that support energy production, nervous system function, and red blood cell formation.",
                    symptomContext: "Some women explore B vitamins alongside fatigue and low energy during menopause.",
                    evidence: "Evidence is mixed. B vitamins are essential for energy, but supplementation only helps if you are deficient. Diet is the best source.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 170,
                type: "supplement",
                system: "Metabolic",
                systemIcon: "🔥",
                systemName: "Metabolic Health",
                front: {
                    title: "GluCoach (4Life)",
                    subtitle: "Sometimes explored alongside weight gain",
                    context: "Weight gain",
                    helps: "Weight management, blood sugar balance, metabolic health & insulin sensitivity"
                },
                back: {
                    what: "A supplement containing chromium and other nutrients aimed at supporting blood sugar balance and healthy weight management.",
                    symptomContext: "Some women explore this alongside weight gain and insulin resistance during menopause.",
                    evidence: "Evidence is limited. Weight management requires a comprehensive approach including protein intake, movement, and sleep. Supplements alone are not effective.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "4Life",
                    link: "https://unitedkingdom.4life.com/12800513/shop",
                    code: null
                }
            },
            {
                id: 171,
                type: "supplement",
                system: "Skin",
                systemIcon: "🧴",
                systemName: "Skin & Hair",
                front: {
                    title: "Collagen + EPA/DHA",
                    subtitle: "Sometimes explored alongside dry skin",
                    context: "Dry skin",
                    helps: "Dry skin, skin elasticity, hydration, anti-ageing & joint support"
                },
                back: {
                    what: "A combination of collagen protein and omega-3 fatty acids aimed at supporting skin hydration, elasticity, and overall health.",
                    symptomContext: "Some women explore collagen and omega-3s alongside dry skin and signs of ageing during menopause.",
                    evidence: "Evidence is emerging. Some studies suggest collagen and omega-3s may support skin health, though results vary and topical care remains essential.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 172,
                type: "supplement",
                system: "Skin",
                systemIcon: "🧴",
                systemName: "Skin & Hair",
                front: {
                    title: "Hair, Skin & Nail Complex",
                    subtitle: "Sometimes explored alongside hair thinning and brittle nails",
                    context: "Hair thinning, brittle nails",
                    helps: "Hair thinning, brittle nails, hair growth, strength & nail resilience"
                },
                back: {
                    what: "A supplement containing biotin, zinc, and other nutrients aimed at supporting hair, skin, and nail health.",
                    symptomContext: "Some women explore this alongside hair thinning and brittle nails during menopause.",
                    evidence: "Evidence is mixed. These nutrients are essential, but supplementation only helps if you are deficient. Check iron and thyroid levels with your GP first.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 173,
                type: "supplement",
                system: "Cardio",
                systemIcon: "❤️",
                systemName: "Cardiovascular System",
                front: {
                    title: "Magnesium Glycinate",
                    subtitle: "Sometimes explored alongside heart palpitations",
                    context: "Heart palpitations",
                    helps: "Heart palpitations, irregular heartbeat, cardiovascular support & anxiety"
                },
                back: {
                    what: "A highly absorbable form of magnesium that may support normal heart rhythm, muscle relaxation, and nervous system function.",
                    symptomContext: "Some women explore magnesium alongside heart palpitations and anxiety during menopause.",
                    evidence: "Evidence is emerging. Magnesium plays a role in heart rhythm, and deficiency can contribute to palpitations in some women.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 174,
                type: "supplement",
                system: "Headaches",
                systemIcon: "🤕",
                systemName: "Headaches",
                front: {
                    title: "Ritestart (4Life)",
                    subtitle: "Sometimes explored alongside headaches",
                    context: "Headaches",
                    helps: "Overall wellness, immune support, energy, nutritional foundation & headache prevention"
                },
                back: {
                    what: "A comprehensive multivitamin and mineral supplement aimed at supporting overall health and filling nutritional gaps.",
                    symptomContext: "Some women explore comprehensive supplementation alongside headaches and general wellbeing during menopause.",
                    evidence: "Evidence is mixed. Nutrient deficiencies can contribute to headaches, but most women get adequate nutrition from food. Address specific deficiencies first.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "4Life",
                    link: "https://unitedkingdom.4life.com/12800513/shop",
                    code: null
                }
            },
            {
                id: 179,
                type: "supplement",
                system: "Immune",
                systemIcon: "🛡️",
                systemName: "Immune System",
                front: {
                    title: "4Life® Transfer Factor Plus® Tri-Factor™ Formula (4Life)",
                    subtitle: "Sometimes explored for immune support",
                    context: "Immune support",
                    helps: "Immune support, overall wellness, vitality & immune system strength"
                },
                back: {
                    what: "An advanced immune support supplement containing transfer factors and other nutrients aimed at supporting natural immune function.",
                    symptomContext: "Some women explore immune support supplements during menopause to support overall health and resilience.",
                    evidence: "Evidence is limited. Immune function is complex and best supported through lifestyle: balanced nutrition, regular movement, adequate sleep, and stress management.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "4Life",
                    link: "https://unitedkingdom.4life.com/12800513/shop",
                    code: null
                }
            },
            {
                id: 176,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "Oestrogen Balance (Metagenics)",
                    subtitle: "Sometimes explored for hormone balance support",
                    context: "Hormone balance",
                    helps: "Hormone balance, menopause symptoms, overall wellness & oestrogen metabolism"
                },
                back: {
                    what: "A supplement containing nutrients and botanicals aimed at supporting healthy oestrogen metabolism and hormonal balance.",
                    symptomContext: "Some women explore this for general hormonal balance support during menopause.",
                    evidence: "Evidence is limited. Hormonal balance in menopause is complex. HRT prescribed by your GP is the most effective approach for most women.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 177,
                type: "supplement",
                system: "Urogenital",
                systemIcon: "🌸",
                systemName: "Urogenital System",
                front: {
                    title: "Pelvic Floor Support",
                    subtitle: "Sometimes explored alongside pelvic floor concerns",
                    context: "Urinary urgency, pelvic floor weakness, bladder control",
                    helps: "Pelvic floor muscle function, urinary control, connective tissue support & muscle strength"
                },
                back: {
                    what: "A combination approach that may include vitamin D, magnesium, creatine-based muscle formulas, and collagen peptides aimed at supporting pelvic floor muscle function and connective tissue strength alongside targeted pelvic floor exercises.",
                    symptomContext: "Some women explore nutritional support alongside pelvic floor physiotherapy for urinary urgency, stress incontinence, and pelvic floor weakness during menopause. Key nutrients include: Vitamin D (low levels linked to weaker pelvic floor muscles), magnesium (supports muscle relaxation and may reduce pelvic floor tightness), creatine-leucine-magnesium formulas (small pilot trial showed added benefit with pelvic floor exercises), and collagen peptides (may support connective tissue strength).",
                    evidence: "Evidence is emerging. Pelvic floor muscle training remains first-line treatment. Early research shows vitamin D supplementation may help urinary symptoms in women with deficiency, and a small trial found creatine-based formulas plus exercises improved incontinence scores more than exercises alone. Collagen and magnesium show promise for connective tissue and muscle function, but pelvic-floor-specific evidence is still limited. These are optional extras, not treatments for prolapse or incontinence.",
                    guidance: "Supplements are optional and do not replace pelvic floor physiotherapy or medical care - always work with a pelvic floor physiotherapist and speak to your GP before starting supplements, especially if you take medicines or HRT. Address underlying conditions (infections, constipation) first. Products are not a treatment for prolapse or incontinence - targeted exercises remain most important.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 178,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "MegaMag® Night Plus (Metagenics)",
                    subtitle: "Sometimes explored alongside night sweats",
                    context: "Night sweats",
                    helps: "Night sweats, sleep disruption & restful recovery"
                },
                back: {
                    what: "A magnesium supplement that may support muscle relaxation, nervous system function, and sleep quality.",
                    symptomContext: "Some women explore magnesium alongside night sweats and sleep disruption during menopause.",
                    evidence: "Evidence is emerging. Magnesium deficiency is common in menopause, and supplementation may help some women with sleep and temperature regulation.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "Natural Dispensary",
                    link: "https://www.naturaldispensary.co.uk",
                    code: "SVVA10"
                }
            },
            {
                id: 180,
                type: "supplement",
                system: "Nervous",
                systemIcon: "🧠",
                systemName: "Nervous System",
                front: {
                    title: "Transfer Factor ReCall (4Life)",
                    subtitle: "Sometimes explored alongside memory lapses",
                    context: "Memory problems",
                    helps: "Memory problems, recall, cognitive function & mental sharpness"
                },
                back: {
                    what: "A supplement containing transfer factors and nutrients aimed at supporting cognitive function and memory.",
                    symptomContext: "Some women explore this alongside memory lapses and mental clarity issues during menopause.",
                    evidence: "Evidence is limited. Memory changes in menopause are primarily hormone-related. Sleep, stress management, and mental stimulation remain most important.",
                    guidance: "Supplements are optional. They may support lifestyle approaches but do not replace medical care - always speak to your GP or a qualified menopause specialist before using supplements, especially if you take medicines or HRT.",
                    where: "4Life",
                    link: "https://unitedkingdom.4life.com/12800513/shop",
                    code: null
                }
            }
        ];

        // Separate symptom+self-care cards (ID 1-149) from supplement cards (ID 150+)
        const allCards = cards;
        const symptomCards = cards.filter(card => card.id <= 149);
        const supplementCards = cards.filter(card => card.id >= 150);
        
        // Use symptom cards for this section
        let displayedCards = [...symptomCards];
        let currentIndex = 0;
        let isFlipped = false;

        // Search functionality with autocomplete
        const searchInput = document.getElementById('symptomSearch');
        const searchDropdown = document.getElementById('searchDropdown');
        
        if (searchInput && searchDropdown) {
            // Prevent dropdown from blocking input
            searchInput.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase().trim();
                
                if (searchTerm === '' || searchTerm.length < 2) {
                    // Hide dropdown and show all symptom cards if empty or too short
                    searchDropdown.classList.remove('show');
                    if (searchTerm === '') {
                        displayedCards = [...symptomCards];
                        currentIndex = 0;
                        displayCard(currentIndex);
                    }
                    return;
                }
                
                // Filter symptom cards based on search (supports multi-word)
                const matches = symptomCards.filter(card => {
                    if (card.id === 1) return false; // Skip legend card
                    if (card.front.title) {
                        const cardSystem = card.system || card.front.system;
                        const titleMatch = card.front.title.toLowerCase().includes(searchTerm);
                        const whyMatch = card.front.why && card.front.why.toLowerCase().includes(searchTerm);
                        const systemMatch = cardSystem && cardSystem.toLowerCase().includes(searchTerm);
                        return titleMatch || whyMatch || systemMatch;
                    }
                    return false;
                });
                
                // Show dropdown with matches
                if (matches.length > 0) {
                    const systemIcons = {
                        'Nervous': '🧠',
                        'Metabolic': '🔥',
                        'Urogenital': '🌸',
                        'Musculoskeletal': '🦴',
                        'Cardio': '❤️',
                        'Headaches': '🤕',
                        'Skin': '🧴',
                        'Digestive': '🍽️',
                        'Self-Care': '💚',
                        'Immune': '🛡️'
                    };
                    
                    searchDropdown.innerHTML = matches.slice(0, 8).map((card, index) => {
                        const cardSystem = card.system || card.front.system;
                        return `
                        <div class="dropdown-item" data-card-index="${symptomCards.indexOf(card)}" tabindex="0">
                            <span class="dropdown-item-icon">${systemIcons[cardSystem] || '🔹'}</span>
                            <div class="dropdown-item-text">
                                <div class="dropdown-item-title">${card.front.title}</div>
                                <div class="dropdown-item-system">${cardSystem} System</div>
                            </div>
                        </div>
                    `}).join('');
                    
                    searchDropdown.classList.add('show');
                    
                    // Add click handlers to dropdown items
                    searchDropdown.querySelectorAll('.dropdown-item').forEach(item => {
                        item.addEventListener('click', function(e) {
                            e.stopPropagation(); // Prevent event bubbling
                            const cardIndex = parseInt(this.getAttribute('data-card-index'));
                            currentIndex = cardIndex;
                            displayedCards = [...symptomCards];
                            displayCard(currentIndex);
                            searchDropdown.classList.remove('show');
                            searchInput.value = ''; // Clear search after selection
                            searchInput.blur(); // Remove focus
                        });
                    });
                } else {
                    searchDropdown.innerHTML = '<div class="dropdown-no-results">No symptoms found. Try: hot flushes, anxiety, joint pain</div>';
                    searchDropdown.classList.add('show');
                }
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!searchInput.contains(e.target) && !searchDropdown.contains(e.target)) {
                    searchDropdown.classList.remove('show');
                }
            });
            
            // Handle keyboard navigation - ALLOW SPACE KEY FOR TYPING
            searchInput.addEventListener('keydown', function(e) {
                // Allow space key to work normally for typing
                if (e.key === ' ') {
                    // Do nothing - let space work naturally
                    return;
                }
                
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const firstItem = searchDropdown.querySelector('.dropdown-item');
                    if (firstItem) {
                        firstItem.click();
                    }
                } else if (e.key === 'Escape') {
                    e.preventDefault();
                    searchDropdown.classList.remove('show');
                    searchInput.value = '';
                    displayedCards = [...symptomCards];
                    currentIndex = 0;
                    displayCard(currentIndex);
                }
            });
        }

        function displayCard(index) {
            const card = displayedCards[index];
            const frontEl = document.getElementById('cardFront');
            const backEl = document.getElementById('cardBack');
            
            // Display front
            if (card.front.content) {
                // Legend card
                frontEl.innerHTML = `
                    <div class="legend-card">
                        <div class="legend-icon">ℹ️</div>
                        <div class="card-title" style="color: #E91E63; text-align: center;">${card.front.title}</div>
                        <div class="legend-item">
                            <strong>👆 Tap to flip</strong><br>
                            See practical actions and food suggestions on the back
                        </div>
                        <div class="legend-item">
                            <strong>🔍 Search & Filter</strong><br>
                            Find symptoms by name or body system
                        </div>
                        <div class="legend-item">
                            <strong style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <span style="background: rgba(209, 213, 219, 0.1); border: 2px solid #D1D5DB; color: #D1D5DB; padding: 0.2rem 0.4rem; border-radius: 6px; font-size: 1.2rem; font-weight: bold;">☆</span>
                                <span>→</span>
                                <span style="background: rgba(255, 215, 0, 0.1); border: 2px solid #FFD700; color: #FFD700; padding: 0.2rem 0.4rem; border-radius: 6px; font-size: 1.2rem; font-weight: bold;">★</span>
                                Save Cards
                            </strong>
                            Click the star on any card to save it. Grey = not saved, Gold = saved!
                        </div>
                        <div class="legend-item">
                            <strong>🔄 Random card</strong><br>
                            Not sure where to start? Try a random card
                        </div>
                    </div>
                `;
            } else if (card.type === 'selfcare') {
                // Self-care card FRONT
                const cardSystem = card.system || card.front.system;
                const isFavorite = favorites.includes(card.id);
                const starColor = isFavorite ? '#FFD700' : '#D1D5DB';
                const starFill = isFavorite ? '★' : '☆';
                
                frontEl.innerHTML = `
                    <div class="system-badge system-selfcare">
                        <span style="font-size: 1.3rem;">💚</span>
                        <span>${cardSystem}</span>
                    </div>
                    <div style="display: flex; align-items: center; justify-content: center; gap: 0.8rem; margin-bottom: 1.5rem;">
                        <div class="card-title" style="margin: 0;">${card.front.title}</div>
                        <button class="card-star-btn" onclick="toggleCardFavorite(event, ${card.id})" style="background: ${isFavorite ? 'rgba(255, 215, 0, 0.1)' : 'rgba(209, 213, 219, 0.1)'}; border: 2px solid ${starColor}; color: ${starColor}; font-size: 1.8rem; cursor: pointer; padding: 0.3rem 0.5rem; transition: all 0.2s; line-height: 1; border-radius: 8px; font-weight: bold;" onmouseover="this.style.transform='scale(1.15)'" onmouseout="this.style.transform='scale(1)'" title="${isFavorite ? 'Remove from favorites' : 'Add to favorites'}">${starFill}</button>
                    </div>
                    <div class="card-section">
                        <div class="card-label">🔸 WHY THIS MATTERS</div>
                        <p class="card-text">${card.front.why}</p>
                    </div>
                    <div class="closing-note">
                        💡 Flip card to see self-care practices
                    </div>
                `;
            } else if (card.type === 'supplement') {
                // Supplement card FRONT
                const systemColors = {
                    'Nervous': 'system-nervous',
                    'Metabolic': 'system-metabolic',
                    'Urogenital': 'system-urogenital',
                    'Musculoskeletal': 'system-musculoskeletal',
                    'Cardio': 'system-cardio',
                    'Headaches': 'system-headaches',
                    'Skin': 'system-skin'
                };
                const systemClass = systemColors[card.system] || 'system-nervous';
                
                frontEl.innerHTML = `
                    <div class="system-badge ${systemClass}">
                        <span style="font-size: 1.3rem;">${card.systemIcon}</span>
                        <span>${card.systemName}</span>
                    </div>
                    <div class="card-title">💊 ${card.front.title}</div>
                    <div class="card-section">
                        <div class="card-label">🔸 SYMPTOM CONTEXT</div>
                        <p class="card-text">${card.front.subtitle}</p>
                        <p class="card-text" style="margin-top: 0.5rem; font-style: italic;">Related to: ${card.front.context}</p>
                    </div>
                `;
            } else {
                // Regular symptom card FRONT
                const systemColors = {
                    'Nervous': 'system-nervous',
                    'Metabolic': 'system-metabolic',
                    'Urogenital': 'system-urogenital',
                    'Musculoskeletal': 'system-musculoskeletal',
                    'Cardio': 'system-cardio',
                    'Headaches': 'system-headaches',
                    'Skin': 'system-skin',
                    'Digestive': 'system-digestive',
                    'Self-Care': 'system-selfcare',
                    'Immune': 'system-immune'
                };
                
                const systemIcons = {
                    'Nervous': '🧠',
                    'Metabolic': '🔥',
                    'Urogenital': '🌸',
                    'Musculoskeletal': '🦴',
                    'Cardio': '❤️',
                    'Headaches': '🤕',
                    'Skin': '🧴',
                    'Digestive': '🍽️',
                    'Self-Care': '💚',
                    'Immune': '🛡️'
                };
                const cardSystem = card.system || card.front.system;
                const systemClass = systemColors[cardSystem] || 'system-nervous';
                const systemIcon = systemIcons[cardSystem] || '🧠';
                const isFavorite = favorites.includes(card.id);
                const starColor = isFavorite ? '#FFD700' : '#D1D5DB';
                const starFill = isFavorite ? '★' : '☆';
                
                frontEl.innerHTML = `
                    <div class="system-badge ${systemClass}">
                        <span style="font-size: 1.3rem;">${systemIcon}</span>
                        <span>${cardSystem} System</span>
                    </div>
                    <div style="display: flex; align-items: center; justify-content: center; gap: 0.8rem; margin-bottom: 1.5rem;">
                        <div class="card-title" style="margin: 0;">${card.front.title}</div>
                        <button class="card-star-btn" onclick="toggleCardFavorite(event, ${card.id})" style="background: ${isFavorite ? 'rgba(255, 215, 0, 0.1)' : 'rgba(209, 213, 219, 0.1)'}; border: 2px solid ${starColor}; color: ${starColor}; font-size: 1.8rem; cursor: pointer; padding: 0.3rem 0.5rem; transition: all 0.2s; line-height: 1; border-radius: 8px; font-weight: bold;" onmouseover="this.style.transform='scale(1.15)'" onmouseout="this.style.transform='scale(1)'" title="${isFavorite ? 'Remove from favorites' : 'Add to favorites'}">${starFill}</button>
                    </div>
                    <div class="card-section">
                        <div class="card-label">🔸 WHY THIS HAPPENS</div>
                        <p class="card-text">${card.front.why}</p>
                    </div>
                    <div class="closing-note">
                        💡 Flip card to see what you can do today
                    </div>
                `;
            }

            // Display back
            if (card.back.content) {
                // Legend back
                backEl.innerHTML = `
                    <div class="legend-icon">💡</div>
                    <div class="card-title">${card.back.title}</div>
                    <p class="card-text" style="font-size: 1.15rem; line-height: 1.8;">${card.back.content}</p>
                    <div class="closing-note">
                        These cards provide supportive information, not medical advice
                    </div>
                `;
            } else if (card.type === 'selfcare') {
                // Self-care card BACK
                backEl.innerHTML = `
                    <div class="card-title">${card.front.title}</div>
                    
                    <div class="card-section">
                        <div class="card-label">✨ WHAT TO DO</div>
                        <ul class="card-list">${card.back.actions.map(a => `<li>${a}</li>`).join('')}</ul>
                    </div>
                    
                    <div class="card-section">
                        <div class="card-label">🕐 WHEN TO DO IT</div>
                        <p class="card-text">${card.back.when}</p>
                    </div>
                    
                    <div class="mindset-box">
                        <div class="card-label" style="margin-bottom: 0.5rem;">💭 MINDSET</div>
                        <p>${card.back.mindset}</p>
                    </div>
                    
                    <div class="closing-note">
                        ${card.back.closing}
                    </div>
                `;
            } else if (card.type === 'supplement') {
                // Supplement card BACK
                const shopLink = card.back.code 
                    ? `<a href="${card.back.link}" target="_blank" rel="noopener" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(255,255,255,0.9); color: #E91E63; text-decoration: none; border-radius: 8px; font-weight: 600; margin-top: 0.5rem;">🛍️ Shop at ${card.back.where}</a><br><span style="font-size: 0.9rem; margin-top: 0.5rem; display: inline-block;">Use code <strong>${card.back.code}</strong> for discount</span>`
                    : `<a href="${card.back.link}" target="_blank" rel="noopener" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(255,255,255,0.9); color: #E91E63; text-decoration: none; border-radius: 8px; font-weight: 600; margin-top: 0.5rem;">🛍️ Shop ${card.back.where} Supplements Here</a>`;
                
                backEl.innerHTML = `
                    <div class="card-title">💊 ${card.front.title}</div>
                    
                    <div class="card-section">
                        <div class="card-label">📖 WHAT IT IS</div>
                        <p class="card-text">${card.back.what}</p>
                    </div>
                    
                    <div class="card-section">
                        <div class="card-label">🔗 SYMPTOM CONTEXT</div>
                        <p class="card-text">${card.back.symptomContext}</p>
                    </div>
                    
                    <div class="card-section">
                        <div class="card-label">🔬 WHAT THE EVIDENCE SAYS</div>
                        <p class="card-text">${card.back.evidence}</p>
                    </div>
                    
                    <div class="card-section" style="background: rgba(255, 255, 255, 0.25); border-left-color: rgba(255, 200, 0, 0.8);">
                        <div class="card-label">⚠️ IMPORTANT GUIDANCE</div>
                        <p class="card-text">${card.back.guidance}</p>
                    </div>
                    
                    <div class="card-section">
                        <div class="card-label">🛒 WHERE TO FIND IT</div>
                        ${shopLink}
                    </div>
                    
                    <div class="closing-note">
                        Everyone is different. What helps one person may not help another.
                    </div>
                `;
            } else {
                // Regular symptom card BACK
                backEl.innerHTML = `
                    <div class="card-title">${card.front.title}</div>
                    
                    <div class="card-section">
                        <div class="card-label">✅ WHAT YOU CAN DO TODAY</div>
                        <ul class="card-list">${card.back.actions.map(a => `<li>${a}</li>`).join('')}</ul>
                    </div>
                    
                    <div class="card-section">
                        <div class="card-label">🍽️ WHAT TO EAT</div>
                        <ul class="card-list">${card.back.foods.map(f => `<li>${f}</li>`).join('')}</ul>
                    </div>
                    
                    <div class="mindset-box">
                        <div class="card-label" style="margin-bottom: 0.5rem;">💭 MINDSET</div>
                        <p>${card.back.mindset}</p>
                    </div>
                    
                    <div class="closing-note">
                        Everyone is different. What helps one person may not help another.
                    </div>
                `;
            }

            // Reset flip
            isFlipped = false;
            document.getElementById('flashcard').classList.remove('flipped');

            // Update counter and buttons
            document.getElementById('counter').textContent = `Card ${index + 1} of ${displayedCards.length}`;
            document.getElementById('prevBtn').disabled = index === 0;
            document.getElementById('nextBtn').disabled = index === displayedCards.length - 1;
        }

        // Event listeners
        document.getElementById('flashcard').addEventListener('click', () => {
            isFlipped = !isFlipped;
            document.getElementById('flashcard').classList.toggle('flipped');
        });

        document.getElementById('prevBtn').addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex--;
                displayCard(currentIndex);
            }
        });

        document.getElementById('nextBtn').addEventListener('click', () => {
            if (currentIndex < cards.length - 1) {
                currentIndex++;
                displayCard(currentIndex);
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            // Don't interfere when typing in search input
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                return; // Let typing work normally
            }
            
            if (e.key === 'ArrowLeft' && currentIndex > 0) {
                currentIndex--;
                displayCard(currentIndex);
            } else if (e.key === 'ArrowRight' && currentIndex < displayedCards.length - 1) {
                currentIndex++;
                displayCard(currentIndex);
            } else if (e.key === ' ' || e.key === 'Enter') {
                e.preventDefault();
                document.getElementById('flashcard').click();
            }
        });

        // ===== TOUCH SWIPE NAVIGATION FOR MOBILE =====
        let touchStartX = 0;
        let touchEndX = 0;
        let touchStartY = 0;
        let touchEndY = 0;
        const flashcardElement = document.getElementById('flashcard');
        const minSwipeDistance = 50; // Minimum distance for swipe to register
        
        flashcardElement.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        }, { passive: true });
        
        flashcardElement.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        }, { passive: true });
        
        function handleSwipe() {
            const swipeDistanceX = touchEndX - touchStartX;
            const swipeDistanceY = Math.abs(touchEndY - touchStartY);
            
            // Only register as swipe if horizontal movement is greater than vertical
            // This prevents interfering with scrolling
            if (Math.abs(swipeDistanceX) > swipeDistanceY && Math.abs(swipeDistanceX) > minSwipeDistance) {
                if (swipeDistanceX > 0) {
                    // Swiped right - go to previous card
                    if (currentIndex > 0) {
                        currentIndex--;
                        displayCard(currentIndex);
                    }
                } else {
                    // Swiped left - go to next card
                    if (currentIndex < displayedCards.length - 1) {
                        currentIndex++;
                        displayCard(currentIndex);
                    }
                }
            }
        }

        // ===== FAVORITES FUNCTIONALITY =====
        let favorites = JSON.parse(localStorage.getItem('symptomFavorites') || '[]');
        
        // Global function to toggle favorite from card star button
        window.toggleCardFavorite = function(event, cardId) {
            event.stopPropagation(); // Prevent card flip
            
            const isFavorite = favorites.includes(cardId);
            
            if (isFavorite) {
                favorites = favorites.filter(id => id !== cardId);
            } else {
                favorites.push(cardId);
            }
            
            localStorage.setItem('symptomFavorites', JSON.stringify(favorites));
            updateFavoriteCount();
            displayCard(currentIndex); // Refresh to update star
        };
        
        function updateFavoriteCount() {
            document.getElementById('favCount').textContent = `Saved Favorites (${favorites.length})`;
        }
        
        // View favorites in modal
        function refreshFavoritesModal() {
            const modal = document.getElementById('favoritesModal');
            const grid = document.getElementById('favoritesGrid');
            
            if (favorites.length === 0) {
                grid.innerHTML = `
                    <div style="text-align: center; padding: 3rem 2rem; color: var(--text-medium);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">💝</div>
                        <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">No favorites saved yet</div>
                        <div style="font-size: 0.9rem;">Click the star (★) on any card to save it here</div>
                    </div>
                `;
                return;
            }
            
            // Populate favorites
            const favoriteCards = symptomCards.filter(card => favorites.includes(card.id));
            
            grid.innerHTML = favoriteCards.map(card => {
                const cardSystem = card.system || card.front.system || 'General';
                const cardType = card.type === 'selfcare' ? '💚 Self-Care' : `${card.front.system || cardSystem} System`;
                
                return `
                    <div style="position: relative; background: linear-gradient(135deg, #FAF8F3, white); border: 2px solid var(--light-green); border-radius: 12px; padding: 1rem; cursor: pointer; transition: all 0.3s;" onclick="goToFavoriteCard(${card.id})">
                        <button onclick="event.stopPropagation(); removeFavorite(${card.id});" style="position: absolute; top: 0.5rem; right: 0.5rem; background: white; border: 2px solid #D1D5DB; color: #6B7280; width: 28px; height: 28px; border-radius: 50%; cursor: pointer; font-size: 1.2rem; font-weight: bold; line-height: 1; display: flex; align-items: center; justify-content: center; transition: all 0.2s; padding: 0;" onmouseover="this.style.background='#FF6B6B'; this.style.borderColor='#FF6B6B'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.borderColor='#D1D5DB'; this.style.color='#6B7280';" title="Remove from favorites">×</button>
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem; padding-right: 2rem;">
                            <div style="font-size: 0.8rem; color: var(--text-medium); font-weight: 600;">${cardType}</div>
                            <div style="background: rgba(255, 215, 0, 0.1); border: 2px solid #FFD700; color: #FFD700; font-size: 1.3rem; padding: 0.2rem 0.4rem; border-radius: 6px; font-weight: bold; line-height: 1;">★</div>
                        </div>
                        <div style="font-weight: 700; color: #E91E63; margin-bottom: 0.5rem;">${card.front.title}</div>
                        <div style="font-size: 0.9rem; color: var(--text-dark); line-height: 1.5;">${card.front.why.substring(0, 120)}${card.front.why.length > 120 ? '...' : ''}</div>
                    </div>
                `;
            }).join('');
        }
        
        // Remove individual favorite
        window.removeFavorite = function(cardId) {
            favorites = favorites.filter(id => id !== cardId);
            localStorage.setItem('symptomFavorites', JSON.stringify(favorites));
            updateFavoriteCount();
            refreshFavoritesModal();
            
            // If this is the current card being displayed, update its star
            if (displayedCards[currentIndex] && displayedCards[currentIndex].id === cardId) {
                displayCard(currentIndex);
            }
        };
        
        document.getElementById('viewFavoritesBtn').addEventListener('click', () => {
            if (favorites.length === 0) {
                alert('You haven\'t saved any favorites yet! 💝\n\nClick the star (★) on any card to save it to your favorites.');
                return;
            }
            
            // Show modal
            const modal = document.getElementById('favoritesModal');
            refreshFavoritesModal();
            modal.style.display = 'flex';
        });
        
        // Close modal
        document.getElementById('closeFavoritesModal').addEventListener('click', () => {
            document.getElementById('favoritesModal').style.display = 'none';
        });
        
        // Clear All Favorites
        document.getElementById('clearAllFavoritesBtn').addEventListener('click', () => {
            if (confirm(`Are you sure you want to remove all ${favorites.length} saved favorites?\n\nThis cannot be undone.`)) {
                favorites = [];
                localStorage.setItem('symptomFavorites', JSON.stringify(favorites));
                updateFavoriteCount();
                document.getElementById('favoritesModal').style.display = 'none';
                displayCard(currentIndex); // Refresh current card to update star
                
                // Show confirmation
                const grid = document.getElementById('favoritesGrid');
                grid.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--text-medium);">All favorites cleared! ✨</div>';
                
                setTimeout(() => {
                    document.getElementById('favoritesModal').style.display = 'none';
                }, 1500);
            }
        });
        
        // Close modal on background click
        document.getElementById('favoritesModal').addEventListener('click', (e) => {
            if (e.target.id === 'favoritesModal') {
                document.getElementById('favoritesModal').style.display = 'none';
            }
        });
        
        // Go to favorite card
        window.goToFavoriteCard = function(cardId) {
            document.getElementById('favoritesModal').style.display = 'none';
            
            // Find card index in current displayed cards
            const cardIndex = displayedCards.findIndex(card => card.id === cardId);
            if (cardIndex !== -1) {
                currentIndex = cardIndex;
                displayCard(currentIndex);
            } else {
                // Card not in current filter, show all cards first
                displayedCards = [...symptomCards];
                const newIndex = displayedCards.findIndex(card => card.id === cardId);
                currentIndex = newIndex !== -1 ? newIndex : 0;
                displayCard(currentIndex);
            }
            window.scrollTo(0, 0);
        };
        
        // Random card
        document.getElementById('randomBtn').addEventListener('click', () => {
            const randomIndex = Math.floor(Math.random() * displayedCards.length);
            currentIndex = randomIndex;
            displayCard(currentIndex);
            isFlipped = false;
            document.getElementById('flashcard').classList.remove('flipped');
        });
        
        // Self-care filter
        let showingSelfCare = false;
        document.getElementById('selfCareFilterBtn').addEventListener('click', () => {
            const selfCareBtn = document.getElementById('selfCareFilterBtn');
            
            if (showingSelfCare) {
                // Show all cards
                displayedCards = [...symptomCards];
                currentIndex = 0;
                displayCard(currentIndex);
                selfCareBtn.style.background = 'white';
                selfCareBtn.style.color = '#A67FCF';
                selfCareBtn.querySelector('span:last-child').textContent = 'Self-Care Cards';
                showingSelfCare = false;
            } else {
                // Show only self-care cards
                displayedCards = symptomCards.filter(card => card.type === 'selfcare');
                
                if (displayedCards.length === 0) {
                    alert('No self-care cards found in this section.');
                    return;
                }
                
                currentIndex = 0;
                displayCard(currentIndex);
                selfCareBtn.style.background = 'linear-gradient(135deg, #C4A5E1, #E8D5F2)';
                selfCareBtn.style.color = 'white';
                selfCareBtn.querySelector('span:last-child').textContent = `Showing ${displayedCards.length} Self-Care Cards`;
                showingSelfCare = true;
            }
            
            // Clear search
            searchInput.value = '';
            searchDropdown.classList.remove('show');
        });

        // Initialize
        displayCard(0);
        updateFavoriteCount();

        // ===== SUPPLEMENTS SECTION FUNCTIONALITY =====
        let suppCurrentIndex = 0;
        let suppIsFlipped = false;
        let supplementFavorites = JSON.parse(localStorage.getItem('supplementFavorites') || '[]');
        
        // Supplement favorites functions
        window.toggleSupplementFavorite = function(event, cardId) {
            event.stopPropagation();
            const isFavorite = supplementFavorites.includes(cardId);
            if (isFavorite) {
                supplementFavorites = supplementFavorites.filter(id => id !== cardId);
            } else {
                supplementFavorites.push(cardId);
            }
            localStorage.setItem('supplementFavorites', JSON.stringify(supplementFavorites));
            updateSupplementFavoriteCount();
            displaySupplementCard(suppCurrentIndex);
        };
        
        function updateSupplementFavoriteCount() {
            document.getElementById('suppFavCount').textContent = `Saved Favorites (${supplementFavorites.length})`;
        }
        
        function refreshSupplementFavoritesModal() {
            const grid = document.getElementById('supplementFavoritesGrid');
            if (supplementFavorites.length === 0) {
                grid.innerHTML = `
                    <div style="text-align: center; padding: 3rem 2rem; color: var(--text-medium);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">💝</div>
                        <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">No favorites saved yet</div>
                        <div style="font-size: 0.9rem;">Click the star (★) on any supplement to save it here</div>
                    </div>
                `;
                return;
            }
            const favoriteCards = supplementCards.filter(card => supplementFavorites.includes(card.id));
            grid.innerHTML = favoriteCards.map(card => {
                return `
                    <div style="position: relative; background: linear-gradient(135deg, #FAF8F3, white); border: 2px solid var(--light-green); border-radius: 12px; padding: 1rem; cursor: pointer; transition: all 0.3s;" onclick="goToSupplementFavoriteCard(${card.id})">
                        <button onclick="event.stopPropagation(); removeSupplementFavorite(${card.id});" style="position: absolute; top: 0.5rem; right: 0.5rem; background: white; border: 2px solid #D1D5DB; color: #6B7280; width: 28px; height: 28px; border-radius: 50%; cursor: pointer; font-size: 1.2rem; font-weight: bold; line-height: 1; display: flex; align-items: center; justify-content: center; transition: all 0.2s; padding: 0;" onmouseover="this.style.background='#FF6B6B'; this.style.borderColor='#FF6B6B'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.borderColor='#D1D5DB'; this.style.color='#6B7280';">×</button>
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem; padding-right: 2rem;">
                            <div style="font-size: 0.8rem; color: var(--text-medium); font-weight: 600;">${card.systemName || 'Supplement'}</div>
                            <div style="background: rgba(255, 215, 0, 0.1); border: 2px solid #FFD700; color: #FFD700; font-size: 1.3rem; padding: 0.2rem 0.4rem; border-radius: 6px; font-weight: bold; line-height: 1;">★</div>
                        </div>
                        <div style="font-weight: 700; color: #E91E63; margin-bottom: 0.5rem;">💊 ${card.front.title}</div>
                        <div style="font-size: 0.9rem; color: var(--text-dark); line-height: 1.5;">${(card.front.helps || card.front.subtitle).substring(0, 100)}...</div>
                    </div>
                `;
            }).join('');
        }
        
        window.removeSupplementFavorite = function(cardId) {
            supplementFavorites = supplementFavorites.filter(id => id !== cardId);
            localStorage.setItem('supplementFavorites', JSON.stringify(supplementFavorites));
            updateSupplementFavoriteCount();
            refreshSupplementFavoritesModal();
            if (supplementCards[suppCurrentIndex] && supplementCards[suppCurrentIndex].id === cardId) {
                displaySupplementCard(suppCurrentIndex);
            }
        };
        
        window.goToSupplementFavoriteCard = function(cardId) {
            document.getElementById('supplementFavoritesModal').style.display = 'none';
            const cardIndex = supplementCards.findIndex(card => card.id === cardId);
            if (cardIndex !== -1) {
                suppCurrentIndex = cardIndex;
                displaySupplementCard(suppCurrentIndex);
            }
            window.scrollTo(0, 0);
        };

        function displaySupplementCard(index) {
            const card = supplementCards[index];
            const frontEl = document.getElementById('suppCardFront');
            const backEl = document.getElementById('suppCardBack');
            
            if (!card) return;
            
            // Check if this is the legend card
            if (card.type === 'supplement-legend') {
                frontEl.innerHTML = card.front.content;
                backEl.innerHTML = `<div class="legend-icon">💡</div>
                    <div class="card-title">${card.back.title}</div>
                    ${card.back.content}`;
            } else {
                // Regular supplement card
                // Display FRONT
                const systemColors = {
                    'Nervous': 'system-nervous',
                    'Metabolic': 'system-metabolic',
                    'Urogenital': 'system-urogenital',
                    'Musculoskeletal': 'system-musculoskeletal',
                    'Cardio': 'system-cardio',
                    'Headaches': 'system-headaches',
                    'Skin': 'system-skin',
                    'Digestive': 'system-digestive'
                };
                const systemClass = systemColors[card.system] || 'system-nervous';
                const isFavorite = supplementFavorites.includes(card.id);
                const starColor = isFavorite ? '#FFD700' : '#D1D5DB';
                const starFill = isFavorite ? '★' : '☆';
                
                frontEl.innerHTML = `
                    <div class="system-badge ${systemClass}">
                        <span style="font-size: 1.3rem;">${card.systemIcon}</span>
                        <span>${card.systemName}</span>
                    </div>
                    <div style="display: flex; align-items: center; justify-content: center; gap: 0.8rem; margin-bottom: 1.5rem;">
                        <div class="card-title" style="margin: 0;">💊 ${card.front.title}</div>
                        <button class="card-star-btn" onclick="toggleSupplementFavorite(event, ${card.id})" style="background: ${isFavorite ? 'rgba(255, 215, 0, 0.1)' : 'rgba(209, 213, 219, 0.1)'}; border: 2px solid ${starColor}; color: ${starColor}; font-size: 1.8rem; cursor: pointer; padding: 0.3rem 0.5rem; transition: all 0.2s; line-height: 1; border-radius: 8px; font-weight: bold;" onmouseover="this.style.transform='scale(1.15)'" onmouseout="this.style.transform='scale(1)'" title="${isFavorite ? 'Remove from favorites' : 'Add to favorites'}">${starFill}</button>
                    </div>
                    
                    ${card.front.helps ? `
                    <div style="background: linear-gradient(135deg, rgba(116, 139, 117, 0.2), rgba(156, 175, 136, 0.12)); padding: 1.2rem 1.4rem; border-radius: 14px; margin-bottom: 1.5rem; border-left: 5px solid var(--primary-green); box-shadow: 0 4px 15px rgba(116, 139, 117, 0.1);">
                        <div style="font-weight: 700; color: #E91E63; font-size: 0.9rem; margin-bottom: 0.7rem; letter-spacing: 0.8px; text-transform: uppercase;">✨ What This May Help With</div>
                        <p style="margin: 0; font-size: 1.05rem; line-height: 1.7; color: var(--text-dark); font-weight: 600;">${card.front.helps}</p>
                    </div>
                    ` : ''}
                    
                    <div class="card-section" style="flex-grow: 1;">
                        <div class="card-label">🔸 SYMPTOM CONTEXT</div>
                        <p class="card-text">${card.front.subtitle}</p>
                        <p class="card-text" style="margin-top: 0.5rem; font-style: italic;">Related to: ${card.front.context}</p>
                    </div>
                    
                    <!-- Decorative bottom element -->
                    <div style="margin-top: auto; padding-top: 1.5rem; border-top: 2px solid var(--light-green); text-align: center;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 0.8rem; opacity: 0.7;">
                            <div style="width: 30px; height: 2px; background: linear-gradient(to right, transparent, var(--secondary-green));"></div>
                            <span style="font-size: 1.2rem; color: #E91E63;">🌿</span>
                            <div style="width: 30px; height: 2px; background: linear-gradient(to left, transparent, var(--secondary-green));"></div>
                        </div>
                        <p style="margin: 0.7rem 0 0 0; font-size: 0.85rem; color: var(--text-medium); font-style: italic;">Tap to flip for full details</p>
                    </div>
                `;
            
            // Display BACK
            const is4Life = card.back.where === '4Life';
            const shopLink = card.back.code 
                ? `<a href="${card.back.link}" target="_blank" rel="noopener" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(255,255,255,0.9); color: #E91E63; text-decoration: none; border-radius: 8px; font-weight: 600; margin-top: 0.5rem;">🛍️ Shop at ${card.back.where}</a><br><span style="font-size: 0.9rem; margin-top: 0.5rem; display: inline-block;">Use code <strong>${card.back.code}</strong> for discount</span>`
                : is4Life 
                    ? `<a href="${card.back.link}" target="_blank" rel="noopener" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(255,255,255,0.9); color: #E91E63; text-decoration: none; border-radius: 8px; font-weight: 600; margin-top: 0.5rem; margin-bottom: 0.75rem;">🛍️ Shop ${card.back.where} Supplements Here</a><div style="background: linear-gradient(135deg, #FFE5CC, #FFF5E5); padding: 0.75rem 0.9rem; border-radius: 8px; border-left: 4px solid #FF9F7F; margin-top: 0.5rem;"><p style="font-size: 0.85rem; margin: 0; color: var(--text-dark); font-weight: 600; line-height: 1.5;">✨ <strong>Exclusive Benefit:</strong> Purchase at wholesale prices through this direct link</p></div>`
                    : `<a href="${card.back.link}" target="_blank" rel="noopener" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(255,255,255,0.9); color: #E91E63; text-decoration: none; border-radius: 8px; font-weight: 600; margin-top: 0.5rem;">🛍️ Shop ${card.back.where} Supplements Here</a>`;
            
            backEl.innerHTML = `
                <div class="card-title">💊 ${card.front.title}</div>
                
                <div class="card-section">
                    <div class="card-label">📖 WHAT IT IS</div>
                    <p class="card-text">${card.back.what}</p>
                </div>
                
                <div class="card-section">
                    <div class="card-label">🔗 SYMPTOM CONTEXT</div>
                    <p class="card-text">${card.back.symptomContext}</p>
                </div>
                
                <div class="card-section">
                    <div class="card-label">🔬 WHAT THE EVIDENCE SAYS</div>
                    <p class="card-text">${card.back.evidence}</p>
                </div>
                
                <div class="card-section" style="background: rgba(255, 255, 255, 0.25); border-left-color: rgba(255, 200, 0, 0.8);">
                    <div class="card-label">⚠️ IMPORTANT GUIDANCE</div>
                    <p class="card-text">${card.back.guidance}</p>
                </div>
                
                <div class="card-section">
                    <div class="card-label">🛒 WHERE TO FIND IT</div>
                    ${shopLink}
                </div>
                
                <div class="closing-note">
                    Everyone is different. What helps one person may not help another.
                </div>
            `;
            }
            
            // Reset flip state
            suppIsFlipped = false;
            document.getElementById('supplementFlashcard').classList.remove('flipped');
            
            // Update counter and buttons
            document.getElementById('suppCounter').textContent = `Card ${index + 1} of ${supplementCards.length}`;
            document.getElementById('suppPrevBtn').disabled = index === 0;
            document.getElementById('suppNextBtn').disabled = index === supplementCards.length - 1;
        }

        // Supplement flashcard click to flip
        document.getElementById('supplementFlashcard').addEventListener('click', () => {
            suppIsFlipped = !suppIsFlipped;
            document.getElementById('supplementFlashcard').classList.toggle('flipped');
        });

        // Supplement navigation buttons
        document.getElementById('suppPrevBtn').addEventListener('click', () => {
            if (suppCurrentIndex > 0) {
                suppCurrentIndex--;
                displaySupplementCard(suppCurrentIndex);
            }
        });

        document.getElementById('suppNextBtn').addEventListener('click', () => {
            if (suppCurrentIndex < supplementCards.length - 1) {
                suppCurrentIndex++;
                displaySupplementCard(suppCurrentIndex);
            }
        });

        // ===== TOUCH SWIPE NAVIGATION FOR SUPPLEMENT CARDS =====
        let suppTouchStartX = 0;
        let suppTouchEndX = 0;
        let suppTouchStartY = 0;
        let suppTouchEndY = 0;
        const supplementFlashcardElement = document.getElementById('supplementFlashcard');
        const suppMinSwipeDistance = 50;
        
        supplementFlashcardElement.addEventListener('touchstart', (e) => {
            suppTouchStartX = e.changedTouches[0].screenX;
            suppTouchStartY = e.changedTouches[0].screenY;
        }, { passive: true });
        
        supplementFlashcardElement.addEventListener('touchend', (e) => {
            suppTouchEndX = e.changedTouches[0].screenX;
            suppTouchEndY = e.changedTouches[0].screenY;
            handleSupplementSwipe();
        }, { passive: true });
        
        function handleSupplementSwipe() {
            const swipeDistanceX = suppTouchEndX - suppTouchStartX;
            const swipeDistanceY = Math.abs(suppTouchEndY - suppTouchStartY);
            
            // Only register as swipe if horizontal movement is greater than vertical
            if (Math.abs(swipeDistanceX) > swipeDistanceY && Math.abs(swipeDistanceX) > suppMinSwipeDistance) {
                if (swipeDistanceX > 0) {
                    // Swiped right - go to previous card
                    if (suppCurrentIndex > 0) {
                        suppCurrentIndex--;
                        displaySupplementCard(suppCurrentIndex);
                    }
                } else {
                    // Swiped left - go to next card
                    if (suppCurrentIndex < supplementCards.length - 1) {
                        suppCurrentIndex++;
                        displaySupplementCard(suppCurrentIndex);
                    }
                }
            }
        }

        // Supplement favorites buttons
        document.getElementById('viewSupplementFavoritesBtn').addEventListener('click', () => {
            if (supplementFavorites.length === 0) {
                alert('You haven\'t saved any supplement favorites yet! 💝\n\nClick the star (★) on any supplement card to save it.');
                return;
            }
            refreshSupplementFavoritesModal();
            document.getElementById('supplementFavoritesModal').style.display = 'flex';
        });
        
        document.getElementById('closeSupplementFavoritesModal').addEventListener('click', () => {
            document.getElementById('supplementFavoritesModal').style.display = 'none';
        });
        
        document.getElementById('clearAllSupplementFavoritesBtn').addEventListener('click', () => {
            if (confirm(`Are you sure you want to remove all ${supplementFavorites.length} saved supplements?\n\nThis cannot be undone.`)) {
                supplementFavorites = [];
                localStorage.setItem('supplementFavorites', JSON.stringify(supplementFavorites));
                updateSupplementFavoriteCount();
                document.getElementById('supplementFavoritesModal').style.display = 'none';
                displaySupplementCard(suppCurrentIndex);
            }
        });
        
        document.getElementById('supplementFavoritesModal').addEventListener('click', (e) => {
            if (e.target.id === 'supplementFavoritesModal') {
                document.getElementById('supplementFavoritesModal').style.display = 'none';
            }
        });
        
        document.getElementById('randomSupplementBtn').addEventListener('click', () => {
            const randomIndex = Math.floor(Math.random() * supplementCards.length);
            suppCurrentIndex = randomIndex;
            displaySupplementCard(suppCurrentIndex);
            suppIsFlipped = false;
            document.getElementById('supplementFlashcard').classList.remove('flipped');
        });
        
        updateSupplementFavoriteCount();

        // Supplement search by symptom
        const supplementSearchInput = document.getElementById('supplementSearch');
        const supplementSearchDropdown = document.getElementById('supplementSearchDropdown');
        
        if (supplementSearchInput && supplementSearchDropdown) {
            supplementSearchInput.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase().trim();
                
                if (searchTerm === '' || searchTerm.length < 2) {
                    supplementSearchDropdown.classList.remove('show');
                    return;
                }
                
                // Search supplements by symptom context
                const matches = supplementCards.filter(card => {
                    if (card.type === 'supplement-legend') return false; // Skip legend
                    const contextMatch = card.front.context && card.front.context.toLowerCase().includes(searchTerm);
                    const subtitleMatch = card.front.subtitle && card.front.subtitle.toLowerCase().includes(searchTerm);
                    const titleMatch = card.front.title && card.front.title.toLowerCase().includes(searchTerm);
                    return contextMatch || subtitleMatch || titleMatch;
                });
                
                if (matches.length > 0) {
                    supplementSearchDropdown.innerHTML = matches.slice(0, 8).map((card, idx) => {
                        const suppIndex = supplementCards.indexOf(card);
                        return `
                        <div class="dropdown-item" data-supp-index="${suppIndex}" tabindex="0">
                            <span class="dropdown-item-icon">💊</span>
                            <div class="dropdown-item-text">
                                <div class="dropdown-item-title">${card.front.title}</div>
                                <div class="dropdown-item-system">For: ${card.front.context}</div>
                            </div>
                        </div>
                    `}).join('');
                    
                    supplementSearchDropdown.classList.add('show');
                    
                    // Add click handlers
                    supplementSearchDropdown.querySelectorAll('.dropdown-item').forEach(item => {
                        item.addEventListener('click', function(e) {
                            e.stopPropagation();
                            const suppIndex = parseInt(this.getAttribute('data-supp-index'));
                            suppCurrentIndex = suppIndex;
                            displaySupplementCard(suppCurrentIndex);
                            supplementSearchDropdown.classList.remove('show');
                            supplementSearchInput.value = '';
                        });
                    });
                } else {
                    supplementSearchDropdown.innerHTML = '<div class="dropdown-no-results">No supplements found for this symptom. Try: hot flushes, joint pain, anxiety</div>';
                    supplementSearchDropdown.classList.add('show');
                }
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!supplementSearchInput.contains(e.target) && !supplementSearchDropdown.contains(e.target)) {
                    supplementSearchDropdown.classList.remove('show');
                }
            });
            
            // Handle keyboard
            supplementSearchInput.addEventListener('keydown', function(e) {
                if (e.key === ' ') return; // Allow space
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const firstItem = supplementSearchDropdown.querySelector('.dropdown-item');
                    if (firstItem) firstItem.click();
                } else if (e.key === 'Escape') {
                    e.preventDefault();
                    supplementSearchDropdown.classList.remove('show');
                    supplementSearchInput.value = '';
                }
            });
        }

        // ===== WELCOME SCREEN FUNCTIONALITY =====
        document.getElementById('startBtn').addEventListener('click', function() {
            const welcomeScreen = document.getElementById('welcomeScreen');
            const toolkitContainer = document.getElementById('toolkitContainer');
            const symptomsSection = toolkitContainer.querySelector('.container');
            
            // Fade out welcome screen
            welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
            
            setTimeout(() => {
                welcomeScreen.style.display = 'none';
                
                // Show toolkit container
                toolkitContainer.style.display = 'block';
                toolkitContainer.classList.add('active');
                
                // Show symptoms section
                if (symptomsSection) symptomsSection.style.display = 'block';
                
                // Hide all other sections
                document.getElementById('supplementsContainer').style.display = 'none';
                if (document.getElementById('proteinContainer')) {
                    document.getElementById('proteinContainer').style.display = 'none';
                }
                if (document.getElementById('progressContainer')) {
                    document.getElementById('progressContainer').style.display = 'none';
                }
                
                // Initialize symptom cards from the beginning
                displayedCards = [...symptomCards];
                currentIndex = 0;
                displayCard(currentIndex);
                
                // Scroll to top
                window.scrollTo(0, 0);
            }, 500);
        });

        // ===== BOTTOM NAVIGATION BUTTONS =====
        document.getElementById('backToWelcomeBtn').addEventListener('click', function() {
            const welcomeScreen = document.getElementById('welcomeScreen');
            const toolkitContainer = document.getElementById('toolkitContainer');
            
            // Fade out toolkit
            toolkitContainer.style.animation = 'fadeOut 0.5s ease-out forwards';
            
            setTimeout(() => {
                toolkitContainer.classList.remove('active');
                toolkitContainer.style.display = 'none';
                toolkitContainer.style.animation = '';
                welcomeScreen.style.display = 'flex';
                welcomeScreen.style.animation = 'fadeInUp 0.5s ease-out forwards';
                window.scrollTo(0, 0);
            }, 500);
        });

        document.getElementById('nextSectionBtn').addEventListener('click', function() {
            showSupplementsSection();
        });

        // Navigate back from supplements to symptoms
        document.getElementById('backToSymptomsBtn').addEventListener('click', function() {
            document.getElementById('supplementsContainer').style.display = 'none';
            document.getElementById('toolkitContainer').querySelector('.container').style.display = 'block';
            window.scrollTo(0, 0);
        });

        // Navigate back to welcome from supplements
        document.getElementById('backToWelcomeFromSupp').addEventListener('click', function() {
            const welcomeScreen = document.getElementById('welcomeScreen');
            const toolkitContainer = document.getElementById('toolkitContainer');
            const supplementsContainer = document.getElementById('supplementsContainer');
            
            supplementsContainer.style.display = 'none';
            toolkitContainer.classList.remove('active');
            toolkitContainer.style.display = 'none';
            welcomeScreen.style.display = 'flex';
            welcomeScreen.style.animation = 'fadeInUp 0.5s ease-out forwards';
            window.scrollTo(0, 0);
        });

        // Function to show supplements section
        function showSupplementsSection() {
            document.getElementById('toolkitContainer').querySelector('.container').style.display = 'none';
            document.getElementById('supplementsContainer').style.display = 'block';
            
            // Hide protein and progress containers
            if (document.getElementById('proteinContainer')) {
                document.getElementById('proteinContainer').style.display = 'none';
            }
            if (document.getElementById('progressContainer')) {
                document.getElementById('progressContainer').style.display = 'none';
            }
            
            window.scrollTo(0, 0);
            
            // Initialize supplements display
            suppCurrentIndex = 0;
            displaySupplementCard(suppCurrentIndex);
        }

        // Handle menu navigation
        document.querySelectorAll('.welcome-menu-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const section = this.getAttribute('data-section');
                
                if (section === 'symptoms') {
                    // Navigate to symptoms flashcards
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const toolkitContainer = document.getElementById('toolkitContainer');
                    const symptomsSection = toolkitContainer.querySelector('.container');
                    
                    welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
                    
                    setTimeout(() => {
                        welcomeScreen.style.display = 'none';
                        
                        // Show toolkit container
                        toolkitContainer.style.display = 'block';
                        toolkitContainer.classList.add('active');
                        
                        // Show symptoms section
                        if (symptomsSection) symptomsSection.style.display = 'block';
                        
                        // Hide all other sections
                        document.getElementById('supplementsContainer').style.display = 'none';
                        if (document.getElementById('proteinContainer')) {
                            document.getElementById('proteinContainer').style.display = 'none';
                        }
                        if (document.getElementById('progressContainer')) {
                            document.getElementById('progressContainer').style.display = 'none';
                        }
                        
                        window.scrollTo(0, 0);
                        
                        // Start at beginning
                        displayedCards = [...symptomCards];
                        currentIndex = 0;
                        displayCard(currentIndex);
                    }, 500);
                } else if (section === 'supplements') {
                    // Navigate to supplements section
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const toolkitContainer = document.getElementById('toolkitContainer');
                    const supplementsContainer = document.getElementById('supplementsContainer');
                    
                    welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
                    
                    setTimeout(() => {
                        welcomeScreen.style.display = 'none';
                        
                        // Show toolkit container
                        toolkitContainer.style.display = 'block';
                        toolkitContainer.classList.add('active');
                        
                        // Hide symptoms section (first .container)
                        const symptomsSection = toolkitContainer.querySelector('.container');
                        if (symptomsSection) symptomsSection.style.display = 'none';
                        
                        // Show supplements
                        supplementsContainer.style.display = 'block';
                        
                        // Hide protein and progress containers
                        if (document.getElementById('proteinContainer')) {
                            document.getElementById('proteinContainer').style.display = 'none';
                        }
                        if (document.getElementById('progressContainer')) {
                            document.getElementById('progressContainer').style.display = 'none';
                        }
                        
                        window.scrollTo(0, 0);
                        
                        // Initialize supplements display
                        suppCurrentIndex = 0;
                        displaySupplementCard(suppCurrentIndex);
                    }, 500);
                } else if (section === 'protein') {
                    // Navigate to protein calculator
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const toolkitContainer = document.getElementById('toolkitContainer');
                    const proteinContainer = document.getElementById('proteinContainer');
                    
                    welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
                    
                    setTimeout(() => {
                        welcomeScreen.style.display = 'none';
                        toolkitContainer.classList.add('active');
                        
                        // Hide other sections
                        toolkitContainer.querySelector('.container').style.display = 'none';
                        document.getElementById('supplementsContainer').style.display = 'none';
                        
                        // Show protein section
                        proteinContainer.style.display = 'block';
                        window.scrollTo(0, 0);
                    }, 500);
                } else if (section === 'tracking') {
                    // Navigate to tracking section (OLD progress tracker)
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const toolkitContainer = document.getElementById('toolkitContainer');
                    const trackingContainer = document.getElementById('trackingContainer');
                    
                    welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
                    
                    setTimeout(() => {
                        welcomeScreen.style.display = 'none';
                        toolkitContainer.classList.add('active');
                        
                        // Hide other sections
                        toolkitContainer.querySelector('.container').style.display = 'none';
                        document.getElementById('supplementsContainer').style.display = 'none';
                        if (document.getElementById('proteinContainer')) {
                            document.getElementById('proteinContainer').style.display = 'none';
                        }
                        if (document.getElementById('progressContainer')) {
                            document.getElementById('progressContainer').style.display = 'none';
                        }
                        
                        // Show tracking section
                        trackingContainer.style.display = 'block';
                        window.scrollTo(0, 0);
                    }, 500);
                } else if (section === 'recipes') {
                    // Navigate to recipes section
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const toolkitContainer = document.getElementById('toolkitContainer');
                    const recipesMainPage = document.getElementById('recipesMainPage');
                    const weekViewContainer = document.getElementById('weekViewContainer');
                    
                    welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
                    
                    setTimeout(() => {
                        welcomeScreen.style.display = 'none';
                        toolkitContainer.classList.add('active');
                        
                        // Hide other sections
                        toolkitContainer.querySelector('.container').style.display = 'none';
                        document.getElementById('supplementsContainer').style.display = 'none';
                        if (document.getElementById('proteinContainer')) {
                            document.getElementById('proteinContainer').style.display = 'none';
                        }
                        if (document.getElementById('progressContainer')) {
                            document.getElementById('progressContainer').style.display = 'none';
                        }
                        if (document.getElementById('movementContainer')) {
                            document.getElementById('movementContainer').style.display = 'none';
                        }
                        weekViewContainer.style.display = 'none';
                        
                        // Show main recipes page (don't auto-load Week 1)
                        recipesMainPage.style.display = 'block';
                        
                        // Initialize week button colors
                        initializeWeekButtons();
                        
                        window.scrollTo(0, 0);
                    }, 500);
                } else if (section === 'movement') {
                    // Navigate to movement & activity section
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const toolkitContainer = document.getElementById('toolkitContainer');
                    const movementContainer = document.getElementById('movementContainer');
                    
                    welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
                    
                    setTimeout(() => {
                        welcomeScreen.style.display = 'none';
                        toolkitContainer.classList.add('active');
                        
                        // Hide other sections
                        toolkitContainer.querySelector('.container').style.display = 'none';
                        document.getElementById('supplementsContainer').style.display = 'none';
                        if (document.getElementById('proteinContainer')) {
                            document.getElementById('proteinContainer').style.display = 'none';
                        }
                        if (document.getElementById('progressContainer')) {
                            document.getElementById('progressContainer').style.display = 'none';
                        }
                        
                        // Show movement section
                        movementContainer.style.display = 'block';
                        window.scrollTo(0, 0);
                    }, 500);
                } else if (section === 'dailyplan') {
                    // Navigate to daily plan section
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const toolkitContainer = document.getElementById('toolkitContainer');
                    const dailyPlanContainer = document.getElementById('dailyPlanContainer');
                    
                    if (dailyPlanContainer) {
                        welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
                        
                        setTimeout(() => {
                            welcomeScreen.style.display = 'none';
                            
                            // Hide all other sections
                            toolkitContainer.querySelector('.container').style.display = 'none';
                            document.getElementById('supplementsContainer').style.display = 'none';
                            if (document.getElementById('proteinContainer')) {
                                document.getElementById('proteinContainer').style.display = 'none';
                            }
                            if (document.getElementById('progressContainer')) {
                                document.getElementById('progressContainer').style.display = 'none';
                            }
                            if (document.getElementById('movementContainer')) {
                                document.getElementById('movementContainer').style.display = 'none';
                            }
                            if (document.getElementById('recipesMainPage')) {
                                document.getElementById('recipesMainPage').style.display = 'none';
                            }
                            
                            // Show daily plan section
                            dailyPlanContainer.style.display = 'block';
                            window.scrollTo(0, 0);
                        }, 500);
                    }
                } else if (section === 'progress') {
                    // Navigate to progress section
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const toolkitContainer = document.getElementById('toolkitContainer');
                    const progressContainer = document.getElementById('progressContainer');
                    
                    if (progressContainer) {
                        welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
                        
                        setTimeout(() => {
                            welcomeScreen.style.display = 'none';
                            
                            // Hide all other sections
                            toolkitContainer.querySelector('.container').style.display = 'none';
                            document.getElementById('supplementsContainer').style.display = 'none';
                            if (document.getElementById('proteinContainer')) {
                                document.getElementById('proteinContainer').style.display = 'none';
                            }
                            if (document.getElementById('dailyPlanContainer')) {
                                document.getElementById('dailyPlanContainer').style.display = 'none';
                            }
                            if (document.getElementById('movementContainer')) {
                                document.getElementById('movementContainer').style.display = 'none';
                            }
                            if (document.getElementById('recipesMainPage')) {
                                document.getElementById('recipesMainPage').style.display = 'none';
                            }
                            
                            // Show progress section
                            progressContainer.style.display = 'block';
                            window.scrollTo(0, 0);
                        }, 500);
                    }
                } else if (section === 'diary') {
                    // Navigate to Diary section
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const diaryContainer = document.getElementById('diaryContainer');
                    
                    if (diaryContainer) {
                        welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
                        
                        setTimeout(() => {
                            welcomeScreen.style.display = 'none';
                            
                            // Hide all other sections
                            document.getElementById('toolkitContainer').querySelector('.container').style.display = 'none';
                            document.getElementById('supplementsContainer').style.display = 'none';
                            if (document.getElementById('proteinContainer')) document.getElementById('proteinContainer').style.display = 'none';
                            if (document.getElementById('dailyPlanContainer')) document.getElementById('dailyPlanContainer').style.display = 'none';
                            if (document.getElementById('progressContainer')) document.getElementById('progressContainer').style.display = 'none';
                            if (document.getElementById('movementContainer')) document.getElementById('movementContainer').style.display = 'none';
                            if (document.getElementById('recipesMainPage')) document.getElementById('recipesMainPage').style.display = 'none';
                            if (document.getElementById('trackingContainer')) document.getElementById('trackingContainer').style.display = 'none';
                            if (document.getElementById('medicationContainer')) document.getElementById('medicationContainer').style.display = 'none';
                            if (document.getElementById('habitsContainer')) document.getElementById('habitsContainer').style.display = 'none';
                            if (document.getElementById('sosContainer')) document.getElementById('sosContainer').style.display = 'none';
                            
                            diaryContainer.style.display = 'block';
                            if (typeof loadDiaryEntries === 'function') {
                                loadDiaryEntries();
                            }
                            window.scrollTo(0, 0);
                        }, 500);
                    }
                } else if (section === 'habits') {
                    // Navigate to Habits section
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const habitsContainer = document.getElementById('habitsContainer');
                    
                    if (habitsContainer) {
                        welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
                        
                        setTimeout(() => {
                            welcomeScreen.style.display = 'none';
                            
                            // Hide all other sections
                            document.getElementById('toolkitContainer').querySelector('.container').style.display = 'none';
                            document.getElementById('supplementsContainer').style.display = 'none';
                            if (document.getElementById('proteinContainer')) document.getElementById('proteinContainer').style.display = 'none';
                            if (document.getElementById('dailyPlanContainer')) document.getElementById('dailyPlanContainer').style.display = 'none';
                            if (document.getElementById('progressContainer')) document.getElementById('progressContainer').style.display = 'none';
                            if (document.getElementById('movementContainer')) document.getElementById('movementContainer').style.display = 'none';
                            if (document.getElementById('recipesMainPage')) document.getElementById('recipesMainPage').style.display = 'none';
                            if (document.getElementById('trackingContainer')) document.getElementById('trackingContainer').style.display = 'none';
                            if (document.getElementById('medicationContainer')) document.getElementById('medicationContainer').style.display = 'none';
                            if (document.getElementById('diaryContainer')) document.getElementById('diaryContainer').style.display = 'none';
                            if (document.getElementById('sosContainer')) document.getElementById('sosContainer').style.display = 'none';
                            
                            habitsContainer.style.display = 'block';
                            if (typeof loadHabitsList === 'function') {
                                loadHabitsList();
                            }
                            window.scrollTo(0, 0);
                        }, 500);
                    }
                } else if (section === 'medication') {
                    // Navigate to Medication/HRT Tracker section
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const toolkitContainer = document.getElementById('toolkitContainer');
                    const medicationContainer = document.getElementById('medicationContainer');
                    
                    if (medicationContainer) {
                        welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
                        
                        setTimeout(() => {
                            welcomeScreen.style.display = 'none';
                            
                            // Hide all other sections
                            toolkitContainer.querySelector('.container').style.display = 'none';
                            document.getElementById('supplementsContainer').style.display = 'none';
                            if (document.getElementById('proteinContainer')) {
                                document.getElementById('proteinContainer').style.display = 'none';
                            }
                            if (document.getElementById('dailyPlanContainer')) {
                                document.getElementById('dailyPlanContainer').style.display = 'none';
                            }
                            if (document.getElementById('progressContainer')) {
                                document.getElementById('progressContainer').style.display = 'none';
                            }
                            if (document.getElementById('movementContainer')) {
                                document.getElementById('movementContainer').style.display = 'none';
                            }
                            if (document.getElementById('recipesMainPage')) {
                                document.getElementById('recipesMainPage').style.display = 'none';
                            }
                            if (document.getElementById('trackingContainer')) {
                                document.getElementById('trackingContainer').style.display = 'none';
                            }
                            if (document.getElementById('sosContainer')) {
                                document.getElementById('sosContainer').style.display = 'none';
                            }
                            
                            // Show medication section
                            medicationContainer.style.display = 'block';
                            // Load medications after a brief delay to ensure function is available
                            setTimeout(() => {
                                if (typeof loadMedicationsList === 'function') {
                                    loadMedicationsList();
                                }
                            }, 100);
                            window.scrollTo(0, 0);
                        }, 500);
                    }
                } else if (section === 'sos') {
                    // Navigate to SOS Quick Relief section
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    const toolkitContainer = document.getElementById('toolkitContainer');
                    const sosContainer = document.getElementById('sosContainer');
                    
                    if (sosContainer) {
                        welcomeScreen.style.animation = 'fadeOut 0.5s ease-out forwards';
                        
                        setTimeout(() => {
                            welcomeScreen.style.display = 'none';
                            
                            // Hide all other sections
                            toolkitContainer.querySelector('.container').style.display = 'none';
                            document.getElementById('supplementsContainer').style.display = 'none';
                            if (document.getElementById('proteinContainer')) {
                                document.getElementById('proteinContainer').style.display = 'none';
                            }
                            if (document.getElementById('dailyPlanContainer')) {
                                document.getElementById('dailyPlanContainer').style.display = 'none';
                            }
                            if (document.getElementById('progressContainer')) {
                                document.getElementById('progressContainer').style.display = 'none';
                            }
                            if (document.getElementById('movementContainer')) {
                                document.getElementById('movementContainer').style.display = 'none';
                            }
                            if (document.getElementById('recipesMainPage')) {
                                document.getElementById('recipesMainPage').style.display = 'none';
                            }
                            if (document.getElementById('trackingContainer')) {
                                document.getElementById('trackingContainer').style.display = 'none';
                            }
                            
                            // Show SOS section
                            sosContainer.style.display = 'block';
                            window.scrollTo(0, 0);
                        }, 500);
                    }
                } else {
                    // Other sections - show coming soon
                    alert(this.querySelector('.menu-label').textContent + ' section coming soon! 🚀\n\nWe\'re building:\n✓ Symptoms & Supplements (ready now!)\n✓ Protein Target Calculator (ready now!)\n✓ Progress Tracker (ready now!)\n✓ Recipes (ready now!)\n✓ Movement (ready now!)\n✓ Daily Plan (ready now!)\n⏳ Tracking');
                }
            });
        });

        // ===== PROTEIN CALCULATOR FUNCTIONALITY =====
        const calculateProteinBtn = document.getElementById('calculateProteinBtn');
        const weightInput = document.getElementById('weightInput');
        const weightUnit = document.getElementById('weightUnit');
        const proteinResults = document.getElementById('proteinResults');
        const proteinAmount = document.getElementById('proteinAmount');
        const breakfastProtein = document.getElementById('breakfastProtein');
        const lunchProtein = document.getElementById('lunchProtein');
        const dinnerProtein = document.getElementById('dinnerProtein');

        // Add hover effects to radio buttons
        document.querySelectorAll('label:has(input[type="radio"])').forEach(label => {
            label.addEventListener('mouseenter', function() {
                if (!this.querySelector('input').checked) {
                    this.style.borderColor = 'var(--secondary-green)';
                    this.style.background = 'rgba(156, 175, 136, 0.05)';
                }
            });
            label.addEventListener('mouseleave', function() {
                if (!this.querySelector('input').checked) {
                    this.style.borderColor = 'var(--light-green)';
                    this.style.background = 'white';
                }
            });
        });

        // Update radio button styling when selected
        document.querySelectorAll('input[name="activity"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.querySelectorAll('label:has(input[type="radio"])').forEach(label => {
                    if (label.querySelector('input').checked) {
                        label.style.borderColor = '#E91E63';
                        label.style.background = 'rgba(116, 139, 117, 0.1)';
                    } else {
                        label.style.borderColor = 'var(--light-green)';
                        label.style.background = 'white';
                    }
                });
            });
        });

        // Input focus effects
        weightInput.addEventListener('focus', function() {
            this.style.borderColor = '#E91E63';
        });
        weightInput.addEventListener('blur', function() {
            this.style.borderColor = 'var(--light-green)';
        });

        // Button hover effect
        calculateProteinBtn.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-3px)';
            this.style.boxShadow = '0 8px 25px rgba(116, 139, 117, 0.4)';
        });
        calculateProteinBtn.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 6px 20px rgba(116, 139, 117, 0.3)';
        });

        // Calculate protein target
        calculateProteinBtn.addEventListener('click', function() {
            const weight = parseFloat(weightInput.value);
            const unit = weightUnit.value;
            const activityMultiplier = parseFloat(document.querySelector('input[name="activity"]:checked').value);

            // Validation
            if (!weight || weight <= 0) {
                alert('Please enter a valid weight.');
                weightInput.focus();
                return;
            }

            // Convert weight to kg if needed
            let weightInKg = weight;
            if (unit === 'stone') {
                weightInKg = weight * 6.35029; // 1 stone = 6.35029 kg
            } else if (unit === 'lbs') {
                weightInKg = weight * 0.453592; // 1 lb = 0.453592 kg
            }

            // Calculate protein target
            // Base recommendation: 1.2g per kg for menopause
            // Adjusted by activity level
            const baseProtein = weightInKg * 1.2;
            const targetProtein = Math.round(baseProtein * activityMultiplier);

            // Calculate per-meal breakdown (slightly higher for breakfast)
            const breakfastAmount = Math.round(targetProtein * 0.35); // 35% breakfast
            const lunchAmount = Math.round(targetProtein * 0.33); // 33% lunch
            const dinnerAmount = targetProtein - breakfastAmount - lunchAmount; // Remainder for dinner

            // Display results with animation
            proteinAmount.textContent = targetProtein;
            breakfastProtein.textContent = breakfastAmount;
            lunchProtein.textContent = lunchAmount;
            dinnerProtein.textContent = dinnerAmount;

            // Show results with fade-in
            proteinResults.style.display = 'block';
            proteinResults.style.animation = 'fadeInUp 0.6s ease-out';

            // Scroll to results
            setTimeout(() => {
                proteinResults.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        });

        // Navigation for protein section
        document.getElementById('backToWelcomeFromProtein').addEventListener('click', function() {
            const welcomeScreen = document.getElementById('welcomeScreen');
            const proteinContainer = document.getElementById('proteinContainer');
            
            proteinContainer.style.display = 'none';
            document.getElementById('toolkitContainer').classList.remove('active');
            document.getElementById('toolkitContainer').style.display = 'none';
            welcomeScreen.style.display = 'flex';
            welcomeScreen.style.animation = 'fadeInUp 0.5s ease-out forwards';
            window.scrollTo(0, 0);
        });

        document.getElementById('nextFromProteinBtn').addEventListener('click', function() {
            // Navigate to recipes section
            const proteinContainer = document.getElementById('proteinContainer');
            const recipesMainPage = document.getElementById('recipesMainPage');
            
            proteinContainer.style.animation = 'fadeOut 0.5s ease-out forwards';
            
            setTimeout(() => {
                proteinContainer.style.display = 'none';
                recipesMainPage.style.display = 'block';
                recipesMainPage.style.animation = 'fadeInUp 0.5s ease-out forwards';
                window.scrollTo(0, 0);
            }, 500);
        });

        // ===== FOOD CONVERTER FUNCTIONALITY =====
        const foodDatabase = [
            // Fish & Seafood
            { name: 'Salmon', category: 'Fish', serving: '100g', protein: 25 },
            { name: 'Tuna (tinned)', category: 'Fish', serving: '100g', protein: 30 },
            { name: 'Tuna steak', category: 'Fish', serving: '100g', protein: 32 },
            { name: 'Cod', category: 'Fish', serving: '100g', protein: 23 },
            { name: 'Haddock', category: 'Fish', serving: '100g', protein: 24 },
            { name: 'Prawns', category: 'Seafood', serving: '100g', protein: 24 },
            { name: 'Mackerel', category: 'Fish', serving: '100g', protein: 19 },
            { name: 'Sardines (tinned)', category: 'Fish', serving: '100g', protein: 25 },
            { name: 'Anchovies', category: 'Fish', serving: '30g', protein: 8 },
            { name: 'Sea bass', category: 'Fish', serving: '100g', protein: 22 },
            { name: 'Trout', category: 'Fish', serving: '100g', protein: 24 },
            { name: 'Crab', category: 'Seafood', serving: '100g', protein: 18 },
            { name: 'Mussels', category: 'Seafood', serving: '100g', protein: 12 },
            
            // Poultry
            { name: 'Chicken breast', category: 'Poultry', serving: '100g', protein: 31 },
            { name: 'Turkey breast', category: 'Poultry', serving: '100g', protein: 29 },
            { name: 'Chicken thigh', category: 'Poultry', serving: '100g', protein: 26 },
            { name: 'Turkey mince', category: 'Poultry', serving: '100g', protein: 27 },
            { name: 'Chicken drumstick', category: 'Poultry', serving: '100g', protein: 28 },
            { name: 'Duck breast', category: 'Poultry', serving: '100g', protein: 23 },
            
            // Meat
            { name: 'Lean beef mince', category: 'Meat', serving: '100g', protein: 26 },
            { name: 'Beef steak', category: 'Meat', serving: '100g', protein: 27 },
            { name: 'Pork loin', category: 'Meat', serving: '100g', protein: 27 },
            { name: 'Lamb chop', category: 'Meat', serving: '100g', protein: 25 },
            { name: 'Gammon', category: 'Meat', serving: '100g', protein: 22 },
            { name: 'Venison', category: 'Meat', serving: '100g', protein: 30 },
            { name: 'Bacon (2 rashers)', category: 'Meat', serving: '50g', protein: 11 },
            { name: 'Ham (sliced)', category: 'Meat', serving: '50g', protein: 10 },
            
            // Dairy
            { name: 'Greek yoghurt', category: 'Dairy', serving: '150g', protein: 15 },
            { name: 'Natural yoghurt', category: 'Dairy', serving: '150g', protein: 8 },
            { name: 'Cottage cheese', category: 'Dairy', serving: '100g', protein: 11 },
            { name: 'Cheddar cheese', category: 'Dairy', serving: '30g', protein: 8 },
            { name: 'Mozzarella', category: 'Dairy', serving: '30g', protein: 6 },
            { name: 'Feta cheese', category: 'Dairy', serving: '30g', protein: 4 },
            { name: 'Parmesan', category: 'Dairy', serving: '30g', protein: 11 },
            { name: 'Milk (semi-skimmed)', category: 'Dairy', serving: '200ml', protein: 7 },
            { name: 'Milk (whole)', category: 'Dairy', serving: '200ml', protein: 7 },
            { name: 'Skyr yoghurt', category: 'Dairy', serving: '150g', protein: 17 },
            { name: 'Halloumi', category: 'Dairy', serving: '50g', protein: 11 },
            { name: 'Ricotta', category: 'Dairy', serving: '100g', protein: 11 },
            
            // Eggs
            { name: 'Eggs (2 large)', category: 'Eggs', serving: '2 eggs', protein: 13 },
            { name: 'Eggs (1 large)', category: 'Eggs', serving: '1 egg', protein: 6 },
            { name: 'Egg whites (2 large)', category: 'Eggs', serving: '2 whites', protein: 7 },
            { name: 'Scotch egg', category: 'Eggs', serving: '1 egg', protein: 10 },
            
            // Legumes & Pulses
            { name: 'Lentils (cooked)', category: 'Legumes', serving: '100g', protein: 9 },
            { name: 'Red lentils (cooked)', category: 'Legumes', serving: '100g', protein: 8 },
            { name: 'Chickpeas (cooked)', category: 'Legumes', serving: '100g', protein: 9 },
            { name: 'Black beans (cooked)', category: 'Legumes', serving: '100g', protein: 9 },
            { name: 'Kidney beans (cooked)', category: 'Legumes', serving: '100g', protein: 9 },
            { name: 'Butter beans (cooked)', category: 'Legumes', serving: '100g', protein: 7 },
            { name: 'Edamame', category: 'Legumes', serving: '100g', protein: 11 },
            { name: 'Split peas (cooked)', category: 'Legumes', serving: '100g', protein: 8 },
            { name: 'Baked beans', category: 'Legumes', serving: '200g', protein: 10 },
            { name: 'Hummus', category: 'Legumes', serving: '2 tbsp', protein: 3 },
            
            // Nuts & Seeds
            { name: 'Almonds', category: 'Nuts', serving: '30g', protein: 6 },
            { name: 'Cashews', category: 'Nuts', serving: '30g', protein: 5 },
            { name: 'Peanuts', category: 'Nuts', serving: '30g', protein: 7 },
            { name: 'Peanut butter', category: 'Nuts', serving: '2 tbsp', protein: 8 },
            { name: 'Almond butter', category: 'Nuts', serving: '2 tbsp', protein: 7 },
            { name: 'Walnuts', category: 'Nuts', serving: '30g', protein: 4 },
            { name: 'Pistachios', category: 'Nuts', serving: '30g', protein: 6 },
            { name: 'Brazil nuts', category: 'Nuts', serving: '30g', protein: 4 },
            { name: 'Chia seeds', category: 'Seeds', serving: '2 tbsp', protein: 4 },
            { name: 'Pumpkin seeds', category: 'Seeds', serving: '30g', protein: 8 },
            { name: 'Sunflower seeds', category: 'Seeds', serving: '30g', protein: 6 },
            { name: 'Flaxseeds', category: 'Seeds', serving: '2 tbsp', protein: 4 },
            { name: 'Hemp seeds', category: 'Seeds', serving: '2 tbsp', protein: 6 },
            { name: 'Tahini', category: 'Seeds', serving: '2 tbsp', protein: 5 },
            
            // Soy Products
            { name: 'Tofu (firm)', category: 'Soy', serving: '100g', protein: 17 },
            { name: 'Tofu (silken)', category: 'Soy', serving: '100g', protein: 8 },
            { name: 'Tempeh', category: 'Soy', serving: '100g', protein: 19 },
            { name: 'Soya mince', category: 'Soy', serving: '100g', protein: 52 },
            { name: 'Soya milk', category: 'Soy', serving: '200ml', protein: 7 },
            { name: 'Soya yoghurt', category: 'Soy', serving: '150g', protein: 6 },
            { name: 'Edamame beans', category: 'Soy', serving: '100g', protein: 11 },
            
            // Grains & Bread
            { name: 'Quinoa (cooked)', category: 'Grains', serving: '100g', protein: 4 },
            { name: 'Oats (dry)', category: 'Grains', serving: '50g', protein: 6 },
            { name: 'Brown rice (cooked)', category: 'Grains', serving: '100g', protein: 3 },
            { name: 'White rice (cooked)', category: 'Grains', serving: '100g', protein: 3 },
            { name: 'Wholemeal bread', category: 'Grains', serving: '2 slices', protein: 7 },
            { name: 'Pitta bread (wholemeal)', category: 'Grains', serving: '1 pitta', protein: 6 },
            { name: 'Bagel (plain)', category: 'Grains', serving: '1 bagel', protein: 10 },
            { name: 'Couscous (cooked)', category: 'Grains', serving: '100g', protein: 4 },
            { name: 'Bulgur wheat (cooked)', category: 'Grains', serving: '100g', protein: 3 },
            { name: 'Pasta (cooked)', category: 'Grains', serving: '100g', protein: 5 },
            { name: 'Wholemeal pasta (cooked)', category: 'Grains', serving: '100g', protein: 5 },
            
            // Protein Powders & Supplements
            { name: 'Whey protein powder', category: 'Supplements', serving: '1 scoop (30g)', protein: 24 },
            { name: 'Pea protein powder', category: 'Supplements', serving: '1 scoop (30g)', protein: 21 },
            { name: 'Soy protein powder', category: 'Supplements', serving: '1 scoop (30g)', protein: 22 },
            { name: 'Hemp protein powder', category: 'Supplements', serving: '1 scoop (30g)', protein: 15 },
            { name: 'Collagen powder', category: 'Supplements', serving: '1 scoop (20g)', protein: 18 },
            
            // Prepared Foods
            { name: 'Protein bar', category: 'Snacks', serving: '1 bar', protein: 15 },
            { name: 'Protein shake (ready-made)', category: 'Drinks', serving: '330ml', protein: 20 },
            { name: 'Beef jerky', category: 'Snacks', serving: '30g', protein: 12 },
            { name: 'Roast chicken (shop-bought)', category: 'Prepared', serving: '100g', protein: 28 },
            { name: 'Smoked salmon', category: 'Prepared', serving: '50g', protein: 12 },
            
            // Vegetables (higher protein)
            { name: 'Broccoli (cooked)', category: 'Vegetables', serving: '100g', protein: 4 },
            { name: 'Spinach (cooked)', category: 'Vegetables', serving: '100g', protein: 3 },
            { name: 'Peas (cooked)', category: 'Vegetables', serving: '100g', protein: 5 },
            { name: 'Sweetcorn (cooked)', category: 'Vegetables', serving: '100g', protein: 3 },
            { name: 'Asparagus (cooked)', category: 'Vegetables', serving: '100g', protein: 3 },
            { name: 'Brussels sprouts (cooked)', category: 'Vegetables', serving: '100g', protein: 3 },
            { name: 'Kale (cooked)', category: 'Vegetables', serving: '100g', protein: 3 },
            { name: 'Mushrooms (cooked)', category: 'Vegetables', serving: '100g', protein: 3 },
            
            // Plant-Based Meat Alternatives
            { name: 'Quorn mince', category: 'Meat Alternatives', serving: '100g', protein: 14 },
            { name: 'Quorn pieces', category: 'Meat Alternatives', serving: '100g', protein: 14 },
            { name: 'Linda McCartney sausages', category: 'Meat Alternatives', serving: '2 sausages', protein: 12 },
            { name: 'Beyond Burger', category: 'Meat Alternatives', serving: '1 burger', protein: 20 },
            { name: 'Moving Mountains burger', category: 'Meat Alternatives', serving: '1 burger', protein: 18 },
            { name: 'Falafel', category: 'Meat Alternatives', serving: '4 pieces', protein: 8 },
            { name: 'Veggie burger (shop-bought)', category: 'Meat Alternatives', serving: '1 burger', protein: 12 },
            { name: 'Seitan', category: 'Meat Alternatives', serving: '100g', protein: 25 },
            { name: 'Veggie sausages', category: 'Meat Alternatives', serving: '2 sausages', protein: 10 },
            
            // More Legumes & Bean Dishes
            { name: 'Pinto beans (cooked)', category: 'Legumes', serving: '100g', protein: 9 },
            { name: 'Haricot beans (cooked)', category: 'Legumes', serving: '100g', protein: 9 },
            { name: 'Broad beans (cooked)', category: 'Legumes', serving: '100g', protein: 8 },
            { name: 'Mung beans (cooked)', category: 'Legumes', serving: '100g', protein: 7 },
            { name: 'Aduki beans (cooked)', category: 'Legumes', serving: '100g', protein: 8 },
            { name: 'Chickpea flour', category: 'Legumes', serving: '50g', protein: 11 },
            { name: 'Bean salad (mixed)', category: 'Legumes', serving: '150g', protein: 10 },
            
            // Seeds & Seed Products (expanded)
            { name: 'Sesame seeds', category: 'Seeds', serving: '2 tbsp', protein: 5 },
            { name: 'Poppy seeds', category: 'Seeds', serving: '2 tbsp', protein: 4 },
            { name: 'Sesame seed paste (tahini)', category: 'Seeds', serving: '2 tbsp', protein: 5 },
            
            // More Nuts & Nut Products
            { name: 'Hazelnuts', category: 'Nuts', serving: '30g', protein: 4 },
            { name: 'Pecans', category: 'Nuts', serving: '30g', protein: 3 },
            { name: 'Macadamias', category: 'Nuts', serving: '30g', protein: 2 },
            { name: 'Mixed nuts', category: 'Nuts', serving: '30g', protein: 6 },
            { name: 'Cashew butter', category: 'Nuts', serving: '2 tbsp', protein: 6 },
            
            // Vegetarian Dairy Alternatives
            { name: 'Oat milk', category: 'Plant Milk', serving: '200ml', protein: 2 },
            { name: 'Almond milk', category: 'Plant Milk', serving: '200ml', protein: 1 },
            { name: 'Coconut milk', category: 'Plant Milk', serving: '200ml', protein: 1 },
            { name: 'Coconut yoghurt', category: 'Plant Yoghurt', serving: '150g', protein: 1 },
            { name: 'Oat yoghurt', category: 'Plant Yoghurt', serving: '150g', protein: 3 },
            { name: 'Almond yoghurt', category: 'Plant Yoghurt', serving: '150g', protein: 2 },
            { name: 'Vegan cheese (coconut-based)', category: 'Plant Cheese', serving: '30g', protein: 1 },
            { name: 'Nutritional yeast', category: 'Plant Cheese', serving: '2 tbsp', protein: 8 },
            
            // Ancient Grains & Seeds
            { name: 'Amaranth (cooked)', category: 'Grains', serving: '100g', protein: 4 },
            { name: 'Buckwheat (cooked)', category: 'Grains', serving: '100g', protein: 3 },
            { name: 'Spelt (cooked)', category: 'Grains', serving: '100g', protein: 6 },
            { name: 'Freekeh (cooked)', category: 'Grains', serving: '100g', protein: 4 },
            { name: 'Teff (cooked)', category: 'Grains', serving: '100g', protein: 4 },
            { name: 'Wild rice (cooked)', category: 'Grains', serving: '100g', protein: 4 },
            
            // More Soy & Fermented Products
            { name: 'Miso paste', category: 'Soy', serving: '1 tbsp', protein: 2 },
            { name: 'Natto', category: 'Soy', serving: '50g', protein: 9 },
            { name: 'TVP (textured vegetable protein)', category: 'Soy', serving: '50g dry', protein: 25 },
            { name: 'Soy chunks', category: 'Soy', serving: '50g dry', protein: 26 },
            
            // Sprouted Foods
            { name: 'Sprouted lentils', category: 'Sprouts', serving: '100g', protein: 9 },
            { name: 'Alfalfa sprouts', category: 'Sprouts', serving: '50g', protein: 2 },
            { name: 'Mung bean sprouts', category: 'Sprouts', serving: '100g', protein: 3 },
            
            // High-Protein Vegetables & Superfoods
            { name: 'Spirulina powder', category: 'Superfoods', serving: '1 tbsp', protein: 4 },
            { name: 'Chlorella powder', category: 'Superfoods', serving: '1 tbsp', protein: 3 },
            { name: 'Moringa powder', category: 'Superfoods', serving: '1 tbsp', protein: 2 },
            { name: 'Artichoke (cooked)', category: 'Vegetables', serving: '100g', protein: 3 },
            { name: 'Potato (baked with skin)', category: 'Vegetables', serving: '1 medium', protein: 4 },
            { name: 'Sweet potato (baked)', category: 'Vegetables', serving: '1 medium', protein: 2 },
            
            // Vegetarian Ready Meals & Convenience
            { name: 'Vegetable curry (with chickpeas)', category: 'Prepared', serving: '300g', protein: 12 },
            { name: 'Lentil dhal', category: 'Prepared', serving: '300g', protein: 15 },
            { name: 'Bean chilli', category: 'Prepared', serving: '300g', protein: 18 },
            { name: 'Vegetable stir-fry with tofu', category: 'Prepared', serving: '300g', protein: 15 },
            { name: 'Veggie pizza (cheese)', category: 'Prepared', serving: '1/2 pizza', protein: 20 },
            { name: 'Cheese & tomato pasta', category: 'Prepared', serving: '300g', protein: 15 }
        ];

        let myMeals = [];
        let targetProtein = 0;

        const foodSearchInput = document.getElementById('foodSearchInput');
        const foodSearchResults = document.getElementById('foodSearchResults');
        const myMealsSection = document.getElementById('myMealsSection');
        const mealsList = document.getElementById('mealsList');
        const totalProteinAmount = document.getElementById('totalProteinAmount');
        const proteinProgress = document.getElementById('proteinProgress');

        // Search food database
        foodSearchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase().trim();
            
            if (searchTerm.length === 0) {
                foodSearchResults.innerHTML = '';
                return;
            }

            const matches = foodDatabase.filter(food => 
                food.name.toLowerCase().includes(searchTerm) ||
                food.category.toLowerCase().includes(searchTerm)
            );

            if (matches.length > 0) {
                foodSearchResults.innerHTML = matches.slice(0, 10).map(food => `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--bg-cream); border-radius: 12px; margin-bottom: 0.5rem; cursor: pointer; transition: all 0.3s;" 
                         onmouseover="this.style.background='rgba(156, 175, 136, 0.15)'; this.style.transform='translateX(5px)';" 
                         onmouseout="this.style.background='var(--bg-cream)'; this.style.transform='translateX(0)';"
                         onclick="addFoodToMeals('${food.name}', '${food.serving}', ${food.protein})">
                        <div>
                            <div style="font-weight: 600; color: var(--text-dark); margin-bottom: 0.2rem;">${food.name}</div>
                            <div style="font-size: 0.85rem; color: var(--text-medium);">${food.category} • ${food.serving}</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <div style="text-align: right;">
                                <div style="font-size: 1.4rem; font-weight: 700; color: #E91E63;">${food.protein}g</div>
                                <div style="font-size: 0.75rem; color: var(--text-medium);">protein</div>
                            </div>
                            <div style="background: var(--primary-green); color: #2C3E50; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">+</div>
                        </div>
                    </div>
                `).join('');
            } else {
                foodSearchResults.innerHTML = '<div style="text-align: center; color: var(--text-medium); padding: 1rem;">No foods found. Try: chicken, salmon, eggs, yoghurt</div>';
            }
        });

        // Add food to meals
        window.addFoodToMeals = function(name, serving, protein) {
            myMeals.push({ name, serving, protein, id: Date.now() });
            updateMealsList();
            foodSearchInput.value = '';
            foodSearchResults.innerHTML = '';
            
            // Show meals section if hidden
            if (myMealsSection.style.display === 'none') {
                myMealsSection.style.display = 'block';
                myMealsSection.style.animation = 'fadeInUp 0.5s ease-out';
            }
        };

        // Update meals list display
        function updateMealsList() {
            if (myMeals.length === 0) {
                myMealsSection.style.display = 'none';
                return;
            }

            const total = myMeals.reduce((sum, meal) => sum + meal.protein, 0);
            
            mealsList.innerHTML = myMeals.map(meal => `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.9rem 1rem; background: white; border: 2px solid var(--light-green); border-radius: 10px; margin-bottom: 0.5rem;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; color: var(--text-dark);">${meal.name}</div>
                        <div style="font-size: 0.85rem; color: var(--text-medium);">${meal.serving}</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <div style="font-size: 1.2rem; font-weight: 700; color: #E91E63;">${meal.protein}g</div>
                        <button onclick="removeMeal(${meal.id})" style="background: white; border: 2px solid #FFB5C5; color: #FFB5C5; width: 28px; height: 28px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; font-weight: 700;">×</button>
                    </div>
                </div>
            `).join('');

            totalProteinAmount.textContent = total;

            // Show progress towards target if calculated
            if (targetProtein > 0) {
                const percentage = Math.round((total / targetProtein) * 100);
                const remaining = Math.max(0, targetProtein - total);
                
                if (total >= targetProtein) {
                    proteinProgress.innerHTML = `🎉 Target reached! You've met your ${targetProtein}g goal!`;
                } else {
                    proteinProgress.innerHTML = `${percentage}% of your ${targetProtein}g target • ${remaining}g to go`;
                }
            } else {
                proteinProgress.innerHTML = '';
            }
        }

        // Remove meal
        window.removeMeal = function(id) {
            const index = myMeals.findIndex(meal => meal.id === id);
            if (index > -1) {
                myMeals.splice(index, 1); // Remove item in place
            }
            updateMealsList();
        };

        // Update target protein when calculated
        const originalCalculateHandler = calculateProteinBtn.onclick;
        calculateProteinBtn.addEventListener('click', function() {
            // Get the calculated target
            setTimeout(() => {
                const calculatedAmount = parseInt(proteinAmount.textContent);
                if (!isNaN(calculatedAmount)) {
                    targetProtein = calculatedAmount;
                    updateMealsList(); // Update progress display
                }
            }, 100);
        });

        // Reset protein calculator
        window.resetProteinCalculator = function() {
            // Clear all input fields
            document.getElementById('weightInput').value = '';
            document.getElementById('weightUnit').value = 'kg';
            
            // Uncheck all activity radio buttons
            document.querySelectorAll('input[name="activity"]').forEach(radio => {
                radio.checked = false;
            });
            
            // Hide results
            document.getElementById('proteinResults').style.display = 'none';
            
            // Reset displayed values
            document.getElementById('proteinAmount').textContent = '---';
            document.getElementById('breakfastProtein').textContent = '---';
            document.getElementById('lunchProtein').textContent = '---';
            document.getElementById('dinnerProtein').textContent = '---';
            
            // Scroll to top of form
            document.getElementById('proteinContainer').scrollIntoView({ behavior: 'smooth', block: 'start' });
        };


        // ===== PROGRESS TRACKER FUNCTIONALITY =====
        const symptomsBySystem = {
            'Nervous System / Vasomotor': [
                'Hot flushes', 'Night sweats', 'Cold sweats', 'Chills', 'Feeling flushed'
            ],
            'Sleep & Energy': [
                'Sleep problems', 'Insomnia', 'Waking frequently', 'Early morning waking', 
                'Fatigue', 'Exhaustion', 'Low energy', 'Difficulty waking up'
            ],
            'Mood & Mental Health': [
                'Anxiety', 'Panic attacks', 'Mood swings', 'Irritability', 'Low mood', 
                'Depression', 'Feeling tearful', 'Feeling overwhelmed', 'Loss of confidence',
                'Social anxiety', 'Rage', 'Emotional sensitivity'
            ],
            'Cognitive': [
                'Brain fog', 'Memory problems', 'Difficulty concentrating', 'Confusion',
                'Word-finding difficulty', 'Forgetfulness', 'Mental fatigue'
            ],
            'Musculoskeletal': [
                'Joint pain', 'Muscle aches', 'Stiffness', 'Frozen shoulder', 
                'Back pain', 'Neck pain', 'Restless legs', 'Muscle tension', 'Jaw pain'
            ],
            'Cardiovascular': [
                'Heart palpitations', 'Racing heart', 'Irregular heartbeat', 'Chest tightness',
                'Dizziness', 'Lightheadedness'
            ],
            'Digestive': [
                'Bloating', 'Constipation', 'Diarrhoea', 'Indigestion', 'Nausea',
                'IBS symptoms', 'Food intolerances', 'Loss of appetite', 'Increased appetite'
            ],
            'Urogenital': [
                'Vaginal dryness', 'Painful sex', 'Loss of libido', 'Reduced arousal',
                'Urinary urgency', 'Urinary frequency', 'Urinary incontinence', 
                'Recurrent UTIs', 'Burning urination'
            ],
            'Breast & Reproductive': [
                'Breast tenderness', 'Breast pain', 'Changes in breast size',
                'Irregular periods', 'Heavy periods', 'Light periods', 
                'Spotting between periods', 'Longer cycles', 'Shorter cycles'
            ],
            'Skin, Hair & Nails': [
                'Dry skin', 'Itchy skin', 'Sensitive skin', 'Acne', 'Skin rashes',
                'Hair thinning', 'Hair loss', 'Dry hair', 'Changes in hair texture',
                'Brittle nails', 'Nail changes', 'Formication (crawling skin sensation)'
            ],
            'Head & Face': [
                'Headaches', 'Migraines', 'Tension headaches', 'Facial flushing',
                'Dry eyes', 'Burning eyes', 'Blurred vision', 'Dry mouth',
                'Metallic taste', 'Burning tongue', 'Gum problems', 'Tooth sensitivity'
            ],
            'Sensory & Neurological': [
                'Tinnitus (ringing in ears)', 'Vertigo', 'Numbness', 'Tingling',
                'Electric shock sensations', 'Heightened sensitivity to noise',
                'Heightened sensitivity to smell', 'Temperature sensitivity'
            ],
            'Metabolic & Weight': [
                'Weight gain', 'Difficulty losing weight', 'Changes in body shape',
                'Increased abdominal fat', 'Water retention', 'Sugar cravings',
                'Increased thirst'
            ],
            'General & Whole Body': [
                'Body odour changes', 'Feeling unwell', 'Flu-like symptoms',
                'Allergies (new or worsening)', 'Weakened immune system'
            ]
        };

        // System colors for visual grouping
        const systemColors = {
            'Nervous System / Vasomotor': '#9B7EBD',
            'Sleep & Energy': '#8EBFB5',
            'Mood & Mental Health': '#FFB5C5',
            'Cognitive': '#FF9F7F',
            'Musculoskeletal': '#8EBFB5',
            'Cardiovascular': '#FFB5C5',
            'Digestive': '#FFD8CC',
            'Urogenital': '#FFB5C5',
            'Breast & Reproductive': '#FFB5C5',
            'Skin, Hair & Nails': '#9B7EBD',
            'Head & Face': '#FF9F7F',
            'Sensory & Neurological': '#9B7EBD',
            'Metabolic & Weight': '#FF9F7F',
            'General & Whole Body': '#FFD8CC'
        };

        let currentTrackingDate = new Date();
        let progressData = {}; // Will load from localStorage

        // Load existing progress data from localStorage
        function loadProgressData() {
            const saved = localStorage.getItem('menopauseProgressData');
            if (saved) {
                try {
                    progressData = JSON.parse(saved);
                } catch(e) {
                    console.error('Error loading progress data:', e);
                    progressData = {};
                }
            }
        }

        // Save progress data to localStorage
        function saveProgressData() {
            localStorage.setItem('menopauseProgressData', JSON.stringify(progressData));
        }

        // Format date as YYYY-MM-DD for storage keys
        function formatDateKey(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        // Format date for display
        function formatDateDisplay(date) {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-GB', options);
        }

        // Generate symptom checkboxes grouped by system
        function generateSymptomCheckboxes() {
            const container = document.getElementById('symptomCheckboxes');
            let html = '';
            
            Object.keys(symptomsBySystem).forEach(system => {
                const systemColor = systemColors[system] || '#E91E63';
                
                // System header
                html += `
                    <div style="grid-column: 1 / -1; background: linear-gradient(135deg, ${systemColor}20, ${systemColor}10); padding: 0.75rem 1rem; border-radius: 8px; border-left: 4px solid ${systemColor}; margin-top: ${html ? '1rem' : '0'};">
                        <h4 style="color: ${systemColor}; font-size: 1rem; font-weight: 700; margin: 0; display: flex; align-items: center; gap: 0.5rem;">
                            <span style="font-size: 1.2rem;">•</span> ${system}
                        </h4>
                    </div>
                `;
                
                // Symptoms for this system
                symptomsBySystem[system].forEach(symptom => {
                    html += `
                        <label style="display: flex; align-items: center; padding: 0.75rem; background: var(--bg-cream); border-radius: 8px; cursor: pointer; transition: all 0.3s; border-left: 3px solid transparent;" class="symptom-checkbox" data-system="${system}">
                            <input type="checkbox" value="${symptom}" style="width: 20px; height: 20px; margin-right: 0.75rem; cursor: pointer; accent-color: ${systemColor};">
                            <span style="font-size: 0.95rem; color: var(--text-dark);">${symptom}</span>
                        </label>
                    `;
                });
            });
            
            container.innerHTML = html;

            // Add hover and selection effects
            document.querySelectorAll('.symptom-checkbox').forEach(label => {
                const system = label.getAttribute('data-system');
                const systemColor = systemColors[system] || '#E91E63';
                
                label.addEventListener('mouseenter', function() {
                    if (!this.querySelector('input').checked) {
                        this.style.background = `${systemColor}15`;
                        this.style.borderLeftColor = systemColor;
                    }
                });
                
                label.addEventListener('mouseleave', function() {
                    if (!this.querySelector('input').checked) {
                        this.style.background = 'var(--bg-cream)';
                        this.style.borderLeftColor = 'transparent';
                    }
                });
                
                label.querySelector('input').addEventListener('change', function() {
                    if (this.checked) {
                        label.style.background = `${systemColor}20`;
                        label.style.borderLeftColor = systemColor;
                        label.style.fontWeight = '600';
                    } else {
                        label.style.background = 'var(--bg-cream)';
                        label.style.borderLeftColor = 'transparent';
                        label.style.fontWeight = '400';
                    }
                });
            });
        }

        // Load data for current date
        function loadDayData() {
            const dateKey = formatDateKey(currentTrackingDate);
            const dayData = progressData[dateKey] || {};

            // Update date display
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            currentTrackingDate.setHours(0, 0, 0, 0);
            
            if (currentTrackingDate.getTime() === today.getTime()) {
                document.getElementById('currentDate').textContent = 'Today';
            } else if (currentTrackingDate.getTime() === today.getTime() - 86400000) {
                document.getElementById('currentDate').textContent = 'Yesterday';
            } else {
                document.getElementById('currentDate').textContent = formatDateKey(currentTrackingDate);
            }
            document.getElementById('currentDateFull').textContent = formatDateDisplay(currentTrackingDate);

            // Load mood
            document.querySelectorAll('.mood-btn').forEach(btn => {
                btn.style.background = 'white';
                btn.style.borderColor = 'var(--light-green)';
                btn.style.transform = 'scale(1)';
            });
            if (dayData.mood) {
                const moodBtn = document.querySelector(`.mood-btn[data-mood="${dayData.mood}"]`);
                if (moodBtn) {
                    moodBtn.style.background = 'var(--primary-green)';
                    moodBtn.style.borderColor = '#E91E63';
                    moodBtn.style.transform = 'scale(1.05)';
                    moodBtn.querySelector('div:last-child').style.color = 'white';
                }
            }

            // Load symptoms
            document.querySelectorAll('#symptomCheckboxes input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = dayData.symptoms && dayData.symptoms.includes(checkbox.value);
                if (checkbox.checked) {
                    checkbox.parentElement.style.background = 'rgba(116, 139, 117, 0.2)';
                    checkbox.parentElement.style.borderLeft = '4px solid #E91E63';
                } else {
                    checkbox.parentElement.style.background = 'var(--bg-cream)';
                    checkbox.parentElement.style.borderLeft = 'none';
                }
            });

            // Load notes
            document.getElementById('dailyNotes').value = dayData.notes || '';

            // Update week overview
            updateWeekOverview();
        }

        // Save current day data
        function saveDayData() {
            const dateKey = formatDateKey(currentTrackingDate);
            
            // Get mood
            const selectedMood = document.querySelector('.mood-btn[data-mood]');
            let mood = null;
            document.querySelectorAll('.mood-btn').forEach(btn => {
                if (btn.style.background.includes('rgb(116, 139, 117)') || btn.style.background.includes('#F4C2C2')) {
                    mood = btn.getAttribute('data-mood');
                }
            });

            // Get symptoms
            const symptoms = [];
            document.querySelectorAll('#symptomCheckboxes input[type="checkbox"]:checked').forEach(checkbox => {
                symptoms.push(checkbox.value);
            });

            // Get notes
            const notes = document.getElementById('dailyNotes').value.trim();

            // Save data
            progressData[dateKey] = {
                mood: mood,
                symptoms: symptoms,
                notes: notes,
                saved: new Date().toISOString()
            };

            saveProgressData();

            // Show save message
            const saveMsg = document.getElementById('saveMessage');
            saveMsg.textContent = '✓ Progress saved successfully!';
            saveMsg.style.display = 'block';
            setTimeout(() => {
                saveMsg.style.display = 'none';
            }, 3000);

            // Update week overview
            updateWeekOverview();
        }

        // Update week overview
        function updateWeekOverview() {
            const container = document.getElementById('weekOverview');
            const days = [];
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date(currentTrackingDate);
                date.setDate(date.getDate() - i);
                days.push(date);
            }

            container.innerHTML = days.map(date => {
                const dateKey = formatDateKey(date);
                const dayData = progressData[dateKey];
                const dayName = date.toLocaleDateString('en-GB', { weekday: 'short' });
                const dayNum = date.getDate();
                
                let moodEmoji = '⚪';
                let bgColor = '#FAF8F3';
                
                if (dayData && dayData.mood) {
                    const moods = { '5': '😊', '4': '🙂', '3': '😐', '2': '😟', '1': '😢' };
                    moodEmoji = moods[dayData.mood] || '⚪';
                    const colors = { 
                        '5': 'linear-gradient(135deg, #EDFDF4, #F0FFF4)', // Soft mint green
                        '4': 'linear-gradient(135deg, #F0FAFF, #E6F7FF)', // Soft sky blue
                        '3': 'linear-gradient(135deg, #FFFAF0, #FFF8E7)', // Soft cream
                        '2': 'linear-gradient(135deg, #FFF8EF, #FFEEDD)', // Soft peach
                        '1': 'linear-gradient(135deg, #FFF0F3, #FFE5EA)'  // Soft rose
                    };
                    bgColor = colors[dayData.mood] || '#FAF8F3';
                }

                const isToday = formatDateKey(date) === formatDateKey(new Date());
                
                // Calculate moon phase
                const moonPhase = getMoonPhase(date);
                const moonEmoji = getMoonEmoji(moonPhase);
                const moonColor = getMoonColor(moonPhase);
                
                return `
                    <div style="background: ${bgColor}; border-radius: 12px; padding: 1rem; text-align: center; border: ${isToday ? '3px solid var(--primary-green)' : '2px solid #e0e0e0'}; transition: all 0.3s;">
                        <div style="font-size: 0.75rem; color: var(--text-medium); margin-bottom: 0.3rem; font-weight: 600;">${dayName}</div>
                        <div style="font-size: 1.1rem; font-weight: 700; color: var(--text-dark); margin-bottom: 0.5rem;">${dayNum}</div>
                        <div style="font-size: 2rem; margin-bottom: 0.3rem;">${moodEmoji}</div>
                        <div style="width: 42px; height: 42px; margin: 0 auto 0.2rem; background: ${moonColor}; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" title="Moon phase: ${(moonPhase * 100).toFixed(0)}%">${moonEmoji}</div>
                        ${dayData && dayData.symptoms ? `<div style="font-size: 0.7rem; color: var(--text-medium); margin-top: 0.3rem;">${dayData.symptoms.length} symptoms</div>` : ''}
                    </div>
                `;
            }).join('');
        }

        // Calculate moon phase (0 = new moon, 0.5 = full moon, 1 = new moon)
        function getMoonPhase(date) {
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            
            // Moon phase calculation using astronomical formula
            // Reference date: Known new moon on 6 January 2000
            const refDate = new Date(2000, 0, 6, 18, 14);
            const synodicMonth = 29.53058867; // Average lunar cycle in days
            
            const diffTime = date.getTime() - refDate.getTime();
            const diffDays = diffTime / (1000 * 60 * 60 * 24);
            
            const phase = (diffDays % synodicMonth) / synodicMonth;
            return phase;
        }

        // Get moon emoji based on phase
        function getMoonEmoji(phase) {
            if (phase < 0.03 || phase > 0.97) return '🌑'; // New Moon
            if (phase < 0.22) return '🌒'; // Waxing Crescent
            if (phase < 0.28) return '🌓'; // First Quarter
            if (phase < 0.47) return '🌔'; // Waxing Gibbous
            if (phase < 0.53) return '🌕'; // Full Moon
            if (phase < 0.72) return '🌖'; // Waning Gibbous
            if (phase < 0.78) return '🌗'; // Last Quarter
            if (phase < 0.97) return '🌘'; // Waning Crescent
            return '🌑'; // New Moon
        }

        // Get moon phase color - different feminine color for each phase
        function getMoonColor(phase) {
            if (phase < 0.03 || phase > 0.97) return 'linear-gradient(135deg, #E8D5F2, #F3EAFA)'; // New Moon - Lavender
            if (phase < 0.22) return 'linear-gradient(135deg, #FFE5EA, #FFF0F3)'; // Waxing Crescent - Rose
            if (phase < 0.28) return 'linear-gradient(135deg, #FFE9DB, #FFF4ED)'; // First Quarter - Peach
            if (phase < 0.47) return 'linear-gradient(135deg, #FFF5E0, #FFFAF0)'; // Waxing Gibbous - Cream
            if (phase < 0.53) return 'linear-gradient(135deg, #FFF8EF, #FFFCF7)'; // Full Moon - Soft Yellow
            if (phase < 0.72) return 'linear-gradient(135deg, #E0F2EE, #EDF7F5)'; // Waning Gibbous - Mint
            if (phase < 0.78) return 'linear-gradient(135deg, #DFF3FF, #F0FAFF)'; // Last Quarter - Sky Blue
            if (phase < 0.97) return 'linear-gradient(135deg, #FFEAF9, #FFF5FC)'; // Waning Crescent - Pink
            return 'linear-gradient(135deg, #E8D5F2, #F3EAFA)'; // New Moon - Lavender
        }

        // Initialize tracking section (old progress tracker)
        if (document.getElementById('trackingContainer')) {
            loadProgressData();
            generateSymptomCheckboxes();
            loadDayData();

            // Mood button handlers
            document.querySelectorAll('.mood-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.mood-btn').forEach(b => {
                        b.style.background = 'white';
                        b.style.borderColor = 'var(--light-green)';
                        b.style.transform = 'scale(1)';
                        b.querySelector('div:last-child').style.color = 'var(--text-dark)';
                    });
                    this.style.background = 'var(--primary-green)';
                    this.style.borderColor = '#E91E63';
                    this.style.transform = 'scale(1.05)';
                    this.querySelector('div:last-child').style.color = 'white';
                });
            });

            // Date navigation
            document.getElementById('prevDayBtn').addEventListener('click', function() {
                currentTrackingDate.setDate(currentTrackingDate.getDate() - 1);
                loadDayData();
            });

            document.getElementById('nextDayBtn').addEventListener('click', function() {
                currentTrackingDate.setDate(currentTrackingDate.getDate() + 1);
                loadDayData();
            });

            document.getElementById('todayBtn').addEventListener('click', function() {
                currentTrackingDate = new Date();
                loadDayData();
            });

            // Save button
            document.getElementById('saveProgressBtn').addEventListener('click', saveDayData);

            // Export data
            document.getElementById('exportDataBtn').addEventListener('click', function() {
                const dataStr = JSON.stringify(progressData, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `menopause-progress-${formatDateKey(new Date())}.json`;
                link.click();
                URL.revokeObjectURL(url);
                alert('Your progress data has been exported! 📥');
            });

            // Clear all data
            document.getElementById('clearDataBtn').addEventListener('click', function() {
                if (confirm('Are you sure you want to clear ALL your progress data? This cannot be undone.')) {
                    if (confirm('This will permanently delete all your tracking history. Are you absolutely sure?')) {
                        progressData = {};
                        saveProgressData();
                        loadDayData();
                        alert('All progress data has been cleared.');
                    }
                }
            });

            // Navigation buttons
            document.getElementById('backToWelcomeFromProgress').addEventListener('click', function() {
                document.getElementById('trackingContainer').style.display = 'none';
                document.getElementById('toolkitContainer').classList.remove('active');
                document.getElementById('toolkitContainer').style.display = 'none';
                document.getElementById('welcomeScreen').style.display = 'flex';
                document.getElementById('welcomeScreen').style.animation = 'fadeInUp 0.5s ease-out forwards';
                window.scrollTo(0, 0);
            });

            // Back from Recipes
            document.getElementById('backToWelcomeFromRecipes').addEventListener('click', function() {
                document.getElementById('recipesMainPage').style.display = 'none';
                document.getElementById('weekViewContainer').style.display = 'none';
                document.getElementById('toolkitContainer').classList.remove('active');
                document.getElementById('toolkitContainer').style.display = 'none';
                document.getElementById('welcomeScreen').style.display = 'flex';
                document.getElementById('welcomeScreen').style.animation = 'fadeInUp 0.5s ease-out forwards';
                window.scrollTo(0, 0);
            });

            // Back from Movement & Activity
            document.getElementById('backToWelcomeFromMovement').addEventListener('click', function() {
                document.getElementById('movementContainer').style.display = 'none';
                document.getElementById('toolkitContainer').classList.remove('active');
                document.getElementById('toolkitContainer').style.display = 'none';
                document.getElementById('welcomeScreen').style.display = 'flex';
                document.getElementById('welcomeScreen').style.animation = 'fadeInUp 0.5s ease-out forwards';
                window.scrollTo(0, 0);
            });


            // ===== DAILY PLAN SECTION =====
            
            // Initialize date
            function initDailyPlan() {
                const today = new Date();
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('dailyPlanDate').textContent = today.toLocaleDateString('en-GB', options);
                
                // Initialize water glasses (8 glasses)
                const waterContainer = document.getElementById('waterGlassesContainer');
                waterContainer.innerHTML = '';
                for (let i = 0; i < 8; i++) {
                    const glass = document.createElement('div');
                    glass.className = 'water-glass';
                    glass.dataset.index = i;
                    glass.style.cssText = `
                        width: 32px;
                        height: 40px;
                        border: 2px solid #75E6DA;
                        border-radius: 6px;
                        cursor: pointer;
                        transition: all 0.3s;
                        position: relative;
                    `;
                    glass.addEventListener('click', toggleWaterGlass);
                    waterContainer.appendChild(glass);
                }
                
                // Load saved protein target
                loadProteinTarget();
                
                // Load saved data for today
                loadDailyPlanData();
            }
            
            // Toggle water glass
            function toggleWaterGlass(e) {
                const glass = e.currentTarget;
                const isFilled = glass.dataset.filled === 'true';
                
                if (isFilled) {
                    glass.dataset.filled = 'false';
                    glass.style.background = 'transparent';
                } else {
                    glass.dataset.filled = 'true';
                    glass.style.background = 'linear-gradient(180deg, #75E6DA 0%, #D4F1F4 100%)';
                }
                
                updateWaterCount();
                saveDailyPlanData();
            }
            
            // Update water count
            function updateWaterCount() {
                const glasses = document.querySelectorAll('.water-glass');
                const filled = Array.from(glasses).filter(g => g.dataset.filled === 'true').length;
                document.getElementById('waterCount').textContent = `${filled} of 8 glasses`;
            }
            
            // Save daily plan data
            function saveDailyPlanData() {
                const today = new Date().toISOString().split('T')[0];
                const data = {
                    date: today,
                    water: Array.from(document.querySelectorAll('.water-glass')).map(g => g.dataset.filled === 'true'),
                    movement: document.getElementById('movementDone').checked,
                    supplements: document.getElementById('supplementsTaken').checked,
                    meals: {
                        breakfast: document.getElementById('breakfastPlan').value,
                        lunch: document.getElementById('lunchPlan').value,
                        dinner: document.getElementById('dinnerPlan').value,
                        snacks: document.getElementById('snacksPlan').value,
                        breakfastDone: document.getElementById('breakfastEaten').checked,
                        lunchDone: document.getElementById('lunchEaten').checked,
                        dinnerDone: document.getElementById('dinnerEaten').checked,
                        snacksDone: document.getElementById('snacksEaten').checked
                    },
                    protein: {
                        breakfast: parseFloat(document.getElementById('dailyBreakfastProtein').value) || 0,
                        lunch: parseFloat(document.getElementById('dailyLunchProtein').value) || 0,
                        dinner: parseFloat(document.getElementById('dailyDinnerProtein').value) || 0,
                        snacks: parseFloat(document.getElementById('dailySnacksProtein').value) || 0
                    },
                    symptoms: Array.from(document.querySelectorAll('.symptom-check')).map(cb => ({
                        symptom: cb.dataset.symptom,
                        checked: cb.checked
                    })),
                    selfCare: {
                        outdoors: document.getElementById('selfCare1').checked,
                        mindfulness: document.getElementById('selfCare2').checked,
                        connection: document.getElementById('selfCare3').checked,
                        rest: document.getElementById('selfCare4').checked,
                        enjoyment: document.getElementById('selfCare5').checked
                    },
                    sleep: {
                        quality: document.querySelector('.sleep-quality-btn[style*="scale(1.05)"]')?.dataset.quality || null,
                        hours: parseFloat(document.getElementById('sleepHours').value) || null,
                        wakeups: parseInt(document.getElementById('sleepWakeups').value) || null,
                        bedtime: document.getElementById('bedtime').value || null,
                        waketime: document.getElementById('waketime').value || null,
                        issues: Array.from(document.querySelectorAll('.sleep-issue')).map(cb => ({
                            issue: cb.dataset.issue,
                            checked: cb.checked
                        })),
                        notes: document.getElementById('sleepNotes').value || ''
                    },
                    notes: document.getElementById('dailyNotes').value
                };
                
                localStorage.setItem(`dailyPlan_${today}`, JSON.stringify(data));
                
                // Update protein display after saving
                updateDailyProteinFromInputs();
            }
            
            // Load daily plan data
            function loadDailyPlanData() {
                const today = new Date().toISOString().split('T')[0];
                const savedData = localStorage.getItem(`dailyPlan_${today}`);
                
                if (savedData) {
                    const data = JSON.parse(savedData);
                    
                    // Restore water glasses
                    if (data.water) {
                        const glasses = document.querySelectorAll('.water-glass');
                        data.water.forEach((filled, i) => {
                            if (glasses[i]) {
                                glasses[i].dataset.filled = filled.toString();
                                if (filled) {
                                    glasses[i].style.background = 'linear-gradient(180deg, #75E6DA 0%, #D4F1F4 100%)';
                                }
                            }
                        });
                        updateWaterCount();
                    }
                    
                    // Restore checkboxes
                    if (data.movement !== undefined) document.getElementById('movementDone').checked = data.movement;
                    if (data.supplements !== undefined) document.getElementById('supplementsTaken').checked = data.supplements;
                    
                    // Restore meals
                    if (data.meals) {
                        document.getElementById('breakfastPlan').value = data.meals.breakfast || '';
                        document.getElementById('lunchPlan').value = data.meals.lunch || '';
                        document.getElementById('dinnerPlan').value = data.meals.dinner || '';
                        document.getElementById('snacksPlan').value = data.meals.snacks || '';
                        document.getElementById('breakfastEaten').checked = data.meals.breakfastDone || false;
                        document.getElementById('lunchEaten').checked = data.meals.lunchDone || false;
                        document.getElementById('dinnerEaten').checked = data.meals.dinnerDone || false;
                        document.getElementById('snacksEaten').checked = data.meals.snacksDone || false;
                    }
                    
                    // Restore protein values
                    if (data.protein) {
                        document.getElementById('dailyBreakfastProtein').value = data.protein.breakfast || '';
                        document.getElementById('dailyLunchProtein').value = data.protein.lunch || '';
                        document.getElementById('dailyDinnerProtein').value = data.protein.dinner || '';
                        document.getElementById('dailySnacksProtein').value = data.protein.snacks || '';
                        updateDailyProteinFromInputs();
                    }
                    
                    // Restore symptoms
                    if (data.symptoms) {
                        data.symptoms.forEach(item => {
                            const checkbox = document.querySelector(`.symptom-check[data-symptom="${item.symptom}"]`);
                            if (checkbox) checkbox.checked = item.checked;
                        });
                    }
                    
                    // Restore self-care
                    if (data.selfCare) {
                        document.getElementById('selfCare1').checked = data.selfCare.outdoors || false;
                        document.getElementById('selfCare2').checked = data.selfCare.mindfulness || false;
                        document.getElementById('selfCare3').checked = data.selfCare.connection || false;
                        document.getElementById('selfCare4').checked = data.selfCare.rest || false;
                        document.getElementById('selfCare5').checked = data.selfCare.enjoyment || false;
                    }
                    
                    // Restore sleep data
                    if (data.sleep) {
                        // Restore sleep quality
                        if (data.sleep.quality) {
                            const qualityBtn = document.querySelector(`.sleep-quality-btn[data-quality="${data.sleep.quality}"]`);
                            if (qualityBtn) {
                                qualityBtn.style.border = '3px solid #3498DB';
                                qualityBtn.style.background = 'linear-gradient(135deg, #EBF5FB, #FFFFFF)';
                                qualityBtn.style.transform = 'scale(1.05)';
                            }
                        }
                        
                        // Restore sleep hours and wakeups
                        if (data.sleep.hours !== null) document.getElementById('sleepHours').value = data.sleep.hours;
                        if (data.sleep.wakeups !== null) document.getElementById('sleepWakeups').value = data.sleep.wakeups;
                        
                        // Restore bedtime and waketime
                        if (data.sleep.bedtime) document.getElementById('bedtime').value = data.sleep.bedtime;
                        if (data.sleep.waketime) document.getElementById('waketime').value = data.sleep.waketime;
                        
                        // Restore sleep issues
                        if (data.sleep.issues) {
                            data.sleep.issues.forEach(item => {
                                const checkbox = document.querySelector(`.sleep-issue[data-issue="${item.issue}"]`);
                                if (checkbox) checkbox.checked = item.checked;
                            });
                        }
                        
                        // Restore sleep notes
                        if (data.sleep.notes) document.getElementById('sleepNotes').value = data.sleep.notes;
                    }
                    
                    // Restore notes
                    if (data.notes) document.getElementById('dailyNotes').value = data.notes;
                }
            }
            
            // Auto-save on changes
            
            // ===== SLEEP TRACKER FUNCTIONS =====
            
            // Global function for sleep quality selection
            window.selectSleepQuality = function(quality) {
                // Remove active state from all buttons
                document.querySelectorAll('.sleep-quality-btn').forEach(btn => {
                    btn.style.border = '3px solid #E0E0E0';
                    btn.style.background = 'white';
                    btn.style.transform = 'scale(1)';
                });
                
                // Add active state to selected button
                const selectedBtn = document.querySelector(`.sleep-quality-btn[data-quality="${quality}"]`);
                selectedBtn.style.border = '3px solid #3498DB';
                selectedBtn.style.background = 'linear-gradient(135deg, #EBF5FB, #FFFFFF)';
                selectedBtn.style.transform = 'scale(1.05)';
                
                // Save to local storage
                saveDailyPlan();
            };
            
            function setupDailyPlanAutoSave() {
                const inputs = [
                    'movementDone', 'supplementsTaken',
                    'breakfastPlan', 'lunchPlan', 'dinnerPlan', 'snacksPlan',
                    'breakfastEaten', 'lunchEaten', 'dinnerEaten', 'snacksEaten',
                    'dailyBreakfastProtein', 'dailyLunchProtein', 'dailyDinnerProtein', 'dailySnacksProtein',
                    'selfCare1', 'selfCare2', 'selfCare3', 'selfCare4', 'selfCare5',
                    'sleepHours', 'sleepWakeups', 'bedtime', 'waketime', 'sleepNotes',
                    'dailyNotes'
                ];
                
                inputs.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('change', saveDailyPlanData);
                        if (element.tagName === 'TEXTAREA') {
                            element.addEventListener('blur', saveDailyPlanData);
                        }
                        // For protein number inputs, also update on input (real-time)
                        if (id.includes('Protein')) {
                            element.addEventListener('input', updateDailyProteinFromInputs);
                        }
                    }
                });
                
                // Symptom checkboxes
                document.querySelectorAll('.symptom-check').forEach(cb => {
                    cb.addEventListener('change', saveDailyPlanData);
                });
                
                // Sleep issue checkboxes
                document.querySelectorAll('.sleep-issue').forEach(cb => {
                    cb.addEventListener('change', saveDailyPlanData);
                });
            }
            
            // Update protein from daily plan inputs
            function updateDailyProteinFromInputs() {
                const breakfast = parseFloat(document.getElementById('dailyBreakfastProtein').value) || 0;
                const lunch = parseFloat(document.getElementById('dailyLunchProtein').value) || 0;
                const dinner = parseFloat(document.getElementById('dailyDinnerProtein').value) || 0;
                const snacks = parseFloat(document.getElementById('dailySnacksProtein').value) || 0;
                
                const total = breakfast + lunch + dinner + snacks;
                
                // Get target from display (user can edit it)
                const targetElement = document.getElementById('currentProteinTarget');
                const target = parseFloat(targetElement.textContent) || 100;
                
                const percentage = (total / target) * 100;
                const percentageCapped = Math.min(percentage, 100);
                
                // Update current amount display
                const currentAmount = document.getElementById('currentProteinAmount');
                if (currentAmount) {
                    currentAmount.textContent = Math.round(total) + 'g';
                }
                
                // Update target display
                const targetDisplay = document.getElementById('targetProteinDisplay');
                if (targetDisplay) {
                    targetDisplay.textContent = target + 'g';
                }
                
                // Update progress bar
                const progressBar = document.getElementById('dailyProteinProgressBar');
                const progressText = document.getElementById('dailyProteinProgressText');
                const overBar = document.getElementById('dailyProteinOverBar');
                
                if (progressBar) {
                    if (percentage <= 100) {
                        progressBar.style.width = percentage + '%';
                        overBar.style.display = 'none';
                    } else {
                        // Over 100% - show full bar plus overflow
                        progressBar.style.width = '100%';
                        const overflow = percentage - 100;
                        overBar.style.display = 'block';
                        overBar.style.left = '100%';
                        overBar.style.width = Math.min(overflow, 50) + '%'; // Cap overflow display at 50%
                    }
                }
                
                if (progressText) {
                    if (total > 0) {
                        progressText.textContent = Math.round(total) + 'g (' + Math.round(percentage) + '%)';
                    } else {
                        progressText.textContent = '';
                    }
                }
                
                // Update status message
                const statusMsg = document.getElementById('proteinStatusMessage');
                if (statusMsg) {
                    if (total === 0) {
                        statusMsg.textContent = 'Enter your meals below to track progress';
                        statusMsg.style.color = '#7D8A99';
                    } else if (percentage < 50) {
                        statusMsg.textContent = '💪 Good start! Keep going to reach your target';
                        statusMsg.style.color = '#E67E22';
                    } else if (percentage < 80) {
                        statusMsg.textContent = '🎯 You\'re halfway there! Keep it up';
                        statusMsg.style.color = '#F39C12';
                    } else if (percentage < 100) {
                        statusMsg.textContent = '⭐ Almost there! Just a bit more to hit your goal';
                        statusMsg.style.color = '#3498DB';
                    } else if (percentage === 100) {
                        statusMsg.textContent = '🎉 Perfect! You\'ve hit your protein target!';
                        statusMsg.style.color = '#27AE60';
                    } else {
                        statusMsg.textContent = '✨ Excellent! You\'ve exceeded your target';
                        statusMsg.style.color = '#8E44AD';
                    }
                }
                
                // Update the dashboard widget protein bar
                const dashboardBar = document.getElementById('dailyProteinBar');
                const dashboardText = document.getElementById('dailyProteinText');
                if (dashboardBar) {
                    dashboardBar.style.width = percentageCapped + '%';
                }
                if (dashboardText) {
                    dashboardText.textContent = `${Math.round(total)}g of ${target}g`;
                }
                
                // Save target when protein changes
                localStorage.setItem('dailyProteinTarget', target.toString());
            }
            
            // Toggle food converter visibility
            if (document.getElementById('toggleFoodConverter')) {
                document.getElementById('toggleFoodConverter').addEventListener('click', function() {
                    const converter = document.getElementById('foodConverterSection');
                    if (converter.style.display === 'none') {
                        converter.style.display = 'block';
                        this.textContent = '✖️ Close Lookup';
                        // Focus on search input
                        setTimeout(() => {
                            document.getElementById('foodSearchInput').focus();
                        }, 100);
                    } else {
                        converter.style.display = 'none';
                        this.textContent = '🔍 Full Food Lookup';
                        // Clear search
                        document.getElementById('foodSearchInput').value = '';
                        filterFoodList();
                    }
                });
            }
            
            // Food search/filter function
            window.filterFoodList = function() {
                const searchTerm = document.getElementById('foodSearchInput').value.toLowerCase();
                const foodItems = document.querySelectorAll('.food-item');
                const categories = document.querySelectorAll('.food-category');
                
                if (searchTerm === '') {
                    // Show all
                    foodItems.forEach(item => item.style.display = 'flex');
                    categories.forEach(cat => cat.style.display = 'block');
                } else {
                    // Filter items
                    categories.forEach(cat => {
                        let categoryHasMatch = false;
                        const itemsInCategory = cat.querySelectorAll('.food-item');
                        
                        itemsInCategory.forEach(item => {
                            const foodName = item.getAttribute('data-name').toLowerCase();
                            if (foodName.includes(searchTerm)) {
                                item.style.display = 'flex';
                                categoryHasMatch = true;
                            } else {
                                item.style.display = 'none';
                            }
                        });
                        
                        // Hide category if no matches
                        cat.style.display = categoryHasMatch ? 'block' : 'none';
                    });
                }
            };
            
            // Toggle protein calculator visibility
            if (document.getElementById('toggleProteinCalculator')) {
                document.getElementById('toggleProteinCalculator').addEventListener('click', function() {
                    const calculator = document.getElementById('proteinCalculatorSection');
                    if (calculator.style.display === 'none') {
                        calculator.style.display = 'block';
                        this.textContent = '✖️ Close Calculator';
                    } else {
                        calculator.style.display = 'none';
                        this.textContent = '⚙️ Set Your Target';
                    }
                });
            }
            
            // Reset protein tracker
            if (document.getElementById('resetProteinTracker')) {
                document.getElementById('resetProteinTracker').addEventListener('click', function() {
                    if (confirm('Reset protein tracker?\n\nThis will clear:\n✓ All protein entries for today\n✓ Your protein target\n\nAre you sure?')) {
                        // Clear all protein inputs
                        document.getElementById('dailyBreakfastProtein').value = '';
                        document.getElementById('dailyLunchProtein').value = '';
                        document.getElementById('dailyDinnerProtein').value = '';
                        document.getElementById('dailySnacksProtein').value = '';
                        
                        // Reset target to default 100g
                        document.getElementById('currentProteinTarget').textContent = '100';
                        localStorage.setItem('dailyProteinTarget', '100');
                        
                        // Clear calculator display
                        const calcDisplay = document.getElementById('calculatedTargetDisplay');
                        if (calcDisplay) {
                            calcDisplay.style.display = 'none';
                        }
                        
                        // Clear calculator inputs
                        const weightInput = document.getElementById('dailyWeightInput');
                        const activitySelect = document.getElementById('dailyActivityLevel');
                        if (weightInput) weightInput.value = '';
                        if (activitySelect) activitySelect.selectedIndex = 1; // Reset to "Lightly active"
                        
                        // Update displays
                        updateDailyProteinFromInputs();
                        
                        // Save the cleared state
                        saveDailyPlanData();
                        
                        // Show confirmation
                        this.innerHTML = '<span>✓</span> Reset Complete!';
                        this.style.background = '#27AE60';
                        this.style.color = 'white';
                        this.style.borderColor = '#27AE60';
                        
                        setTimeout(() => {
                            this.innerHTML = '<span>🔄</span> Reset Today';
                            this.style.background = 'white';
                            this.style.color = '#FF6B6B';
                            this.style.borderColor = '#FF6B6B';
                        }, 2000);
                    }
                });
            }
            
            // Calculate protein target
            if (document.getElementById('calculateDailyProteinTarget')) {
                document.getElementById('calculateDailyProteinTarget').addEventListener('click', function() {
                    const weight = parseFloat(document.getElementById('dailyWeightInput').value);
                    const unit = document.getElementById('dailyWeightUnit').value;
                    const activityMultiplier = parseFloat(document.getElementById('dailyActivityLevel').value);
                    
                    if (!weight || weight <= 0) {
                        alert('Please enter your weight');
                        return;
                    }
                    
                    // Convert to kg if needed
                    let weightKg = weight;
                    if (unit === 'lbs') {
                        weightKg = weight * 0.453592;
                    } else if (unit === 'st') {
                        weightKg = weight * 6.35029;
                    }
                    
                    // Calculate target: weight in kg × activity multiplier
                    const target = Math.round(weightKg * activityMultiplier);
                    
                    // Update displays
                    document.getElementById('calculatedTargetValue').textContent = target;
                    document.getElementById('calculatedTargetDisplay').style.display = 'block';
                    document.getElementById('currentProteinTarget').textContent = target;
                    
                    // Update and save
                    updateDailyProteinFromInputs();
                    
                    // Show success message
                    this.textContent = '✓ Target Set!';
                    this.style.background = '#27AE60';
                    setTimeout(() => {
                        this.textContent = 'Calculate Target';
                        this.style.background = 'linear-gradient(135deg, #76D7C4, #48C9B0)';
                    }, 2000);
                });
            }
            
            // Make target editable and save on blur
            if (document.getElementById('currentProteinTarget')) {
                document.getElementById('currentProteinTarget').addEventListener('blur', function() {
                    this.contentEditable = 'false';
                    const newTarget = parseFloat(this.textContent) || 100;
                    this.textContent = Math.round(newTarget); // Clean up input
                    updateDailyProteinFromInputs();
                });
                
                // Save on Enter key
                document.getElementById('currentProteinTarget').addEventListener('keydown', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        this.blur();
                    }
                });
            }
            
            // Load saved target on init
            function loadProteinTarget() {
                const savedTarget = localStorage.getItem('dailyProteinTarget');
                if (savedTarget) {
                    document.getElementById('currentProteinTarget').textContent = savedTarget;
                    document.getElementById('targetProteinDisplay').textContent = savedTarget + 'g';
                }
            }
            
            // Save button click
            if (document.getElementById('saveDailyPlan')) {
                document.getElementById('saveDailyPlan').addEventListener('click', function() {
                    saveDailyPlanData();
                    
                    // Show confirmation
                    const originalText = this.innerHTML;
                    this.innerHTML = '<span style="font-size: 1.3rem;">✅</span><span>Saved!</span>';
                    this.style.background = 'linear-gradient(135deg, #76D7C4, #48C9B0)';
                    
                    setTimeout(() => {
                        this.innerHTML = originalText;
                        this.style.background = 'linear-gradient(135deg, var(--primary-green), var(--secondary-green))';
                    }, 2000);
                });
            }
            
            // Reset entire day button
            if (document.getElementById('resetEntireDay')) {
                document.getElementById('resetEntireDay').addEventListener('click', function() {
                    const confirmMessage = `⚠️ Reset Entire Day?\n\nThis will clear ALL of today's data:\n\n✓ Water tracker\n✓ Movement & supplements\n✓ All meal plans\n✓ Protein tracker\n✓ Symptom check-in\n✓ Self-care checklist\n✓ Sleep tracker\n✓ Daily notes\n\nYour protein target will be kept.\n\nAre you sure?`;
                    
                    if (confirm(confirmMessage)) {
                        // Clear water glasses
                        document.querySelectorAll('.water-glass').forEach(glass => {
                            glass.dataset.filled = 'false';
                            glass.style.background = 'transparent';
                        });
                        updateWaterCount();
                        
                        // Clear checkboxes
                        document.getElementById('movementDone').checked = false;
                        document.getElementById('supplementsTaken').checked = false;
                        
                        // Clear meals
                        document.getElementById('breakfastPlan').value = '';
                        document.getElementById('lunchPlan').value = '';
                        document.getElementById('dinnerPlan').value = '';
                        document.getElementById('snacksPlan').value = '';
                        document.getElementById('breakfastEaten').checked = false;
                        document.getElementById('lunchEaten').checked = false;
                        document.getElementById('dinnerEaten').checked = false;
                        document.getElementById('snacksEaten').checked = false;
                        
                        // Clear protein tracker
                        document.getElementById('dailyBreakfastProtein').value = '';
                        document.getElementById('dailyLunchProtein').value = '';
                        document.getElementById('dailyDinnerProtein').value = '';
                        document.getElementById('dailySnacksProtein').value = '';
                        updateDailyProteinFromInputs();
                        
                        // Clear symptoms
                        document.querySelectorAll('.symptom-check').forEach(cb => {
                            cb.checked = false;
                        });
                        
                        // Clear self-care
                        document.getElementById('selfCare1').checked = false;
                        document.getElementById('selfCare2').checked = false;
                        document.getElementById('selfCare3').checked = false;
                        document.getElementById('selfCare4').checked = false;
                        document.getElementById('selfCare5').checked = false;
                        
                        // Clear sleep tracker
                        document.querySelectorAll('.sleep-quality-btn').forEach(btn => {
                            btn.style.border = '3px solid #E0E0E0';
                            btn.style.background = 'white';
                            btn.style.transform = 'scale(1)';
                        });
                        document.getElementById('sleepHours').value = '';
                        document.getElementById('sleepWakeups').value = '';
                        document.getElementById('bedtime').value = '';
                        document.getElementById('waketime').value = '';
                        document.querySelectorAll('.sleep-issue').forEach(cb => {
                            cb.checked = false;
                        });
                        document.getElementById('sleepNotes').value = '';
                        
                        // Clear notes
                        document.getElementById('dailyNotes').value = '';
                        
                        // Save the reset state
                        saveDailyPlanData();
                        
                        // Show confirmation
                        const originalText = this.innerHTML;
                        this.innerHTML = '<span style="font-size: 1.3rem;">✅</span><span>Day Reset!</span>';
                        this.style.background = '#27AE60';
                        this.style.color = 'white';
                        this.style.borderColor = '#27AE60';
                        
                        setTimeout(() => {
                            this.innerHTML = originalText;
                            this.style.background = 'white';
                            this.style.color = '#FF6B6B';
                            this.style.borderColor = '#FF6B6B';
                        }, 2500);
                        
                        // Scroll to top to see fresh start
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                });
            }
            
            // Back to welcome
            if (document.getElementById('backToWelcomeFromDaily')) {
                document.getElementById('backToWelcomeFromDaily').addEventListener('click', function() {
                    document.getElementById('dailyPlanContainer').style.display = 'none';
                    document.getElementById('toolkitContainer').classList.remove('active');
                    document.getElementById('toolkitContainer').style.display = 'none';
                    document.getElementById('welcomeScreen').style.display = 'flex';
                    document.getElementById('welcomeScreen').style.animation = 'fadeInUp 0.5s ease-out forwards';
                    window.scrollTo(0, 0);
                });
            }
            
            // Initialize on page load if daily plan section is active
            if (document.getElementById('dailyPlanContainer')) {
                // Set up mutation observer to initialize when section becomes visible
                const observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                            const container = document.getElementById('dailyPlanContainer');
                            if (container && container.style.display !== 'none') {
                                initDailyPlan();
                                setupDailyPlanAutoSave();
                                updateDailyProteinFromInputs();
                            }
                        }
                    });
                });
                
                observer.observe(document.getElementById('dailyPlanContainer'), {
                    attributes: true,
                    attributeFilter: ['style']
                });
            }


            // ===== DIARY SECTION =====
            
            // Back to home from diary
            if (document.getElementById('backToHomeFromDiary')) {
                document.getElementById('backToHomeFromDiary').addEventListener('click', function() {
                    document.getElementById('diaryContainer').style.display = 'none';
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    welcomeScreen.style.display = 'flex';
                    welcomeScreen.style.animation = 'fadeInUp 0.5s ease-out forwards';
                    window.scrollTo(0, 0);
                });
            }
            
            // Load diary entries
            function loadDiaryEntries() {
                const entries = JSON.parse(localStorage.getItem('diaryEntries') || '[]');
                const container = document.getElementById('diaryEntriesList');
                
                if (!container) return;
                
                if (entries.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 4rem 2rem; background: linear-gradient(135deg, #FFB3D9, #FFFFFF); border-radius: 20px; border: 2px dashed #F06292;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">📔</div>
                            <h3 style="color: #C2185B; margin-bottom: 1rem;">No Journal Entries Yet</h3>
                            <p style="color: #AD1457;">Start journaling about your menopause journey</p>
                        </div>
                    `;
                    return;
                }
                
                // Sort by date (newest first)
                entries.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                let html = '';
                entries.forEach((entry, index) => {
                    const entryDate = new Date(entry.date);
                    const isToday = entryDate.toDateString() === new Date().toDateString();
                    
                    html += `
                        <div style="background: white; border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.08); border-left: 6px solid ${isToday ? '#E91E63' : '#FF69B4'};">
                            <!-- Header -->
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 1rem; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 2px solid #F8F9FA;">
                                <div>
                                    <h3 style="color: #C2185B; margin-bottom: 0.3rem; font-size: 1.3rem; font-weight: 700;">
                                        ${entryDate.toLocaleDateString('en-GB', {weekday: 'long', day: 'numeric', month: 'long', year: 'numeric'})}
                                    </h3>
                                    ${isToday ? '<span style="background: linear-gradient(135deg, #E91E63, #C2185B); color: #2C3E50; padding: 0.4rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600;">✨ Today</span>' : ''}
                                </div>
                                <div style="display: flex; gap: 0.8rem;">
                                    <button onclick="editDiaryEntry(${index})" style="padding: 0.6rem 1.2rem; background: white; border: 2px solid #E91E63; color: #E91E63; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 0.9rem; transition: all 0.3s;" onmouseover="this.style.background='#E91E63'; this.style.color='white'" onmouseout="this.style.background='white'; this.style.color='#E91E63'">✏️ Edit</button>
                                    <button onclick="deleteDiaryEntry(${index})" style="padding: 0.6rem 1.2rem; background: white; border: 2px solid #E74C3C; color: #E74C3C; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 0.9rem; transition: all 0.3s;" onmouseover="this.style.background='#E74C3C'; this.style.color='white'" onmouseout="this.style.background='white'; this.style.color='#E74C3C'">🗑️</button>
                                </div>
                            </div>
                            
                            <!-- Mood & Energy -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;" class="diary-mood-energy-display">
                                <div style="background: linear-gradient(135deg, #FFB3D9, #FFFFFF); padding: 1.2rem; border-radius: 12px; border: 2px solid #FF69B4;">
                                    <div style="font-size: 0.75rem; color: #AD1457; margin-bottom: 0.5rem; font-weight: 700; letter-spacing: 0.5px;">MOOD</div>
                                    <div style="display: flex; align-items: center; gap: 0.8rem;">
                                        <div style="font-size: 2.5rem;">${getMoodEmoji(entry.mood)}</div>
                                        <div style="font-size: 1.1rem; color: #5A6C7D; font-weight: 600;">${getMoodLabel(entry.mood)}</div>
                                    </div>
                                </div>
                                
                                <div style="background: linear-gradient(135deg, #FFB3D9, #FFFFFF); padding: 1.2rem; border-radius: 12px; border: 2px solid #FF69B4;">
                                    <div style="font-size: 0.75rem; color: #AD1457; margin-bottom: 0.5rem; font-weight: 700; letter-spacing: 0.5px;">ENERGY</div>
                                    <div style="font-size: 1.8rem; font-weight: 700; color: ${getEnergyColor(entry.energy)}; margin-bottom: 0.5rem;">${entry.energy}/5</div>
                                    <div style="height: 10px; background: #F0F0F0; border-radius: 5px; overflow: hidden;">
                                        <div style="height: 100%; background: ${getEnergyColor(entry.energy)}; width: ${entry.energy * 20}%; transition: width 0.3s;"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Tags -->
                            ${entry.tags && entry.tags.length > 0 ? `
                            <div style="margin-bottom: 1.5rem;">
                                <div style="font-size: 0.75rem; color: #7D8A99; margin-bottom: 0.8rem; font-weight: 700; letter-spacing: 0.5px;">🏷️ TAGS</div>
                                <div style="display: flex; flex-wrap: wrap; gap: 0.6rem;">
                                    ${entry.tags.map(tag => `<span style="background: #E91E63; color: #2C3E50; padding: 0.4rem 1rem; border-radius: 16px; font-size: 0.85rem; font-weight: 600;">${tag}</span>`).join('')}
                                </div>
                            </div>
                            ` : ''}
                            
                            <!-- Journal Entry -->
                            ${entry.journal ? `
                            <div>
                                <div style="font-size: 0.75rem; color: #7D8A99; margin-bottom: 0.8rem; font-weight: 700; letter-spacing: 0.5px;">✍️ JOURNAL ENTRY</div>
                                <div style="padding: 1.5rem; background: #FFFAF0; border-radius: 12px; border: 2px solid #FF69B4; color: #2C3E50; font-size: 1rem; line-height: 1.8; white-space: pre-wrap;">${entry.journal}</div>
                            </div>
                            ` : ''}
                        </div>
                    `;
                });
                
                container.innerHTML = html;
            }
            
            function getMoodEmoji(mood) {
                const moods = { 1: '😫', 2: '😔', 3: '😐', 4: '🙂', 5: '😊' };
                return moods[mood] || '😐';
            }
            
            function getMoodLabel(mood) {
                const labels = { 1: 'Awful', 2: 'Low', 3: 'Okay', 4: 'Good', 5: 'Great' };
                return labels[mood] || 'Okay';
            }
            
            // Track selected mood globally on window object so form submission can access it
            window.selectedMoodValue = null;
            
            // Make selectMood available globally
            window.selectMood = function(mood) {
                window.selectedMoodValue = mood;
                console.log('Mood selected:', mood, 'selectedMoodValue now:', window.selectedMoodValue); // Debug log
                
                // Update all mood buttons
                const buttons = document.querySelectorAll('.mood-btn');
                console.log('Found mood buttons:', buttons.length); // Debug log
                
                buttons.forEach(btn => {
                    const btnMood = parseInt(btn.getAttribute('data-mood'));
                    if (btnMood === mood) {
                        // Selected button - colored with stronger effect
                        btn.style.border = '3px solid #E91E63';
                        btn.style.background = 'linear-gradient(135deg, #FFB3D9, #FFFFFF)';
                        btn.style.boxShadow = '0 4px 12px rgba(233, 30, 99, 0.3)';
                        btn.style.transform = 'scale(1.05)';
                        btn.classList.add('mood-selected');
                    } else {
                        // Unselected buttons - white and grey
                        btn.style.border = '2px solid #E0E0E0';
                        btn.style.background = 'white';
                        btn.style.boxShadow = 'none';
                        btn.style.transform = 'scale(1)';
                        btn.classList.remove('mood-selected');
                    }
                });
            }
            
            function getEnergyColor(energy) {
                if (energy >= 4) return '#27AE60';
                if (energy >= 3) return '#F39C12';
                return '#E74C3C';
            }
            
            // Add/Edit diary entry
            window.showDiaryForm = function(editIndex = null) {
                const entries = JSON.parse(localStorage.getItem('diaryEntries') || '[]');
                const isEdit = editIndex !== null && editIndex >= 0;
                const entry = (isEdit && entries[editIndex]) ? entries[editIndex] : { date: new Date().toISOString().split('T')[0] };
                
                const overlay = document.createElement('div');
                overlay.id = 'diaryFormOverlay';
                overlay.style.cssText = `
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7);
                    z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 1rem; overflow-y: auto;
                `;
                
                overlay.innerHTML = `
                    <div onclick="event.stopPropagation();" style="background: white; border-radius: 20px; max-width: 800px; width: 100%; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
                        <div style="background: linear-gradient(135deg, #FF6B9D, #E91E63); color: #2C3E50; padding: 2rem; border-radius: 20px 20px 0 0; position: relative;">
                            <button onclick="document.getElementById('diaryFormOverlay').remove();" style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.2); border: 2px solid white; color: #2C3E50; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 1.5rem; font-weight: 700; transition: all 0.3s; display: flex; align-items: center; justify-content: center; padding: 0; line-height: 1;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">×</button>
                            <h2 style="margin: 0; font-size: 1.5rem; padding-right: 3rem;">${isEdit ? '✏️ Edit' : '📔 New'} Journal Entry</h2>
                        </div>
                        
                        <div style="padding: 2rem;">
                            <form id="diaryForm">
                                <!-- Date -->
                                <div style="margin-bottom: 2rem;">
                                    <label style="display: block; margin-bottom: 0.8rem; font-weight: 600; color: #2C3E50; font-size: 1rem;">📅 Date</label>
                                    <input type="date" id="entryDate" required value="${entry.date || ''}" max="${new Date().toISOString().split('T')[0]}" style="width: 100%; padding: 1rem; border: 2px solid #FF69B4; border-radius: 12px; font-size: 1rem; background: #FFF;">
                                </div>
                                
                                <!-- Mood & Energy Row -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                                    <div>
                                        <label style="display: block; margin-bottom: 0.8rem; font-weight: 600; color: #2C3E50; font-size: 1rem;">😊 Mood <span style="font-weight: 400; color: #7D8A99; font-size: 0.85rem;">(optional)</span></label>
                                        <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.5rem;">
                                            ${[1,2,3,4,5].map(m => `
                                                <button type="button" class="mood-btn" data-mood="${m}" onclick="selectMood(${m})" style="aspect-ratio: 1; border-radius: 12px; border: 2px solid #E0E0E0; background: white; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: all 0.3s; padding: 0.5rem;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                                                    <div style="font-size: 1.8rem;">${getMoodEmoji(m)}</div>
                                                    <div style="font-size: 0.7rem; color: #5A6C7D; margin-top: 0.2rem;">${getMoodLabel(m)}</div>
                                                </button>
                                            `).join('')}
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label style="display: block; margin-bottom: 0.8rem; font-weight: 600; color: #2C3E50; font-size: 1rem;">⚡ Energy</label>
                                        <div style="background: #F8F9FA; padding: 1.5rem; border-radius: 12px; border: 2px solid #FF69B4;">
                                            <input type="range" id="energySlider" min="1" max="5" value="${entry.energy || 3}" oninput="document.getElementById('energyValue').textContent = this.value" style="width: 100%; cursor: pointer;">
                                            <div style="text-align: center; margin-top: 0.8rem;">
                                                <span style="font-size: 2rem; font-weight: 700; color: #E91E63;" id="energyValue">${entry.energy || 3}</span><span style="color: #7D8A99; font-size: 1.2rem;">/5</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Journal Entry -->
                                <div style="margin-bottom: 2rem;">
                                    <label style="display: block; margin-bottom: 0.8rem; font-weight: 600; color: #2C3E50; font-size: 1rem;">✍️ How are you feeling today?</label>
                                    <textarea id="journalEntry" required placeholder="Write here... Share your thoughts, feelings, symptoms, what helped or didn't help, triggers, patterns...

Examples:
• Had 3 hot flushes today, worst one around 3pm
• Feeling anxious about work presentation
• Slept poorly - woke up 4 times
• Really helped: went for a walk, felt so much better
• Noticed: sugar makes brain fog worse" style="width: 100%; min-height: 250px; padding: 1.5rem; border: 2px solid #FF69B4; border-radius: 12px; font-size: 1rem; font-family: inherit; line-height: 1.8; resize: vertical; background: #FFFAF0;">${entry.journal || ''}</textarea>
                                    <div style="margin-top: 0.5rem; font-size: 0.85rem; color: #7D8A99;">💡 Tip: Write freely - this is your private space. Note symptoms, triggers, wins, struggles.</div>
                                </div>
                                
                                <!-- Quick Tags (Optional) -->
                                <div style="margin-bottom: 2rem;">
                                    <label style="display: block; margin-bottom: 0.8rem; font-weight: 600; color: #2C3E50; font-size: 1rem;">🏷️ Quick Tags (Optional)</label>
                                    <div style="display: flex; flex-wrap: wrap; gap: 0.8rem;">
                                        ${['Hot Flushes', 'Night Sweats', 'Anxiety', 'Brain Fog', 'Great Day', 'Tough Day', 'Insomnia', 'Headache', 'Good Sleep', 'Exercise'].map(tag => {
                                            const isSelected = entry.tags?.includes(tag);
                                            return `
                                                <label style="cursor: pointer;">
                                                    <input type="checkbox" class="tag-checkbox" value="${tag}" ${isSelected ? 'checked' : ''} style="display: none;">
                                                    <span class="tag-label" onclick="this.previousElementSibling.checked = !this.previousElementSibling.checked; this.style.background = this.previousElementSibling.checked ? '#E91E63' : '#FF69B4'; this.style.color = this.previousElementSibling.checked ? 'white' : '#C2185B';" style="display: inline-block; padding: 0.5rem 1rem; background: ${isSelected ? '#E91E63' : '#FF69B4'}; color: ${isSelected ? 'white' : '#C2185B'}; border-radius: 20px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;">${tag}</span>
                                                </label>
                                            `;
                                        }).join('')}
                                    </div>
                                </div>
                                
                                <!-- Buttons -->
                                <div style="display: flex; gap: 1rem; justify-content: space-between; padding-top: 1rem; border-top: 2px solid #F0F0F0; flex-wrap: wrap;">
                                    <button type="button" id="resetFormBtn" style="padding: 1rem 2rem; background: white; border: 2px solid #FF6B6B; color: #FF6B6B; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s;" onmouseover="this.style.background='#FF6B6B'; this.style.color='white'" onmouseout="this.style.background='white'; this.style.color='#FF6B6B'">🔄 Reset All</button>
                                    <div style="display: flex; gap: 1rem;">
                                        <button type="button" onclick="document.getElementById('diaryFormOverlay').remove();" style="padding: 1rem 2rem; background: white; border: 2px solid #D0D0D0; color: #7D8A99; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s;" onmouseover="this.style.background='#F8F9FA'" onmouseout="this.style.background='white'">Cancel</button>
                                        <button type="submit" style="padding: 1rem 2rem; background: linear-gradient(135deg, #E91E63, #C2185B); color: #2C3E50; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem; box-shadow: 0 4px 15px rgba(233, 30, 99, 0.3); transition: all 0.3s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(233, 30, 99, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(233, 30, 99, 0.3)'">${isEdit ? '💾 Save Changes' : '📔 Save Entry'}</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(overlay);
                
                // Initialize selected mood if editing - use setTimeout to ensure DOM is ready
                if (entry.mood) {
                    window.selectedMoodValue = entry.mood;
                    setTimeout(() => {
                        selectMood(entry.mood);
                    }, 100);
                } else {
                    window.selectedMoodValue = null;
                }
                
                // Reset form button
                document.getElementById('resetFormBtn').addEventListener('click', function() {
                    if (confirm('Are you sure you want to reset all fields? This cannot be undone.')) {
                        // Reset mood
                        window.selectedMoodValue = null;
                        document.querySelectorAll('.mood-btn').forEach(btn => {
                            btn.style.border = '2px solid #E0E0E0';
                            btn.style.background = 'white';
                        });
                        
                        // Reset energy slider
                        const energySlider = document.getElementById('energySlider');
                        energySlider.value = 3;
                        document.getElementById('energyValue').textContent = '3';
                        
                        // Reset journal textarea
                        document.getElementById('journalEntry').value = '';
                        
                        // Reset all tags
                        document.querySelectorAll('.tag-checkbox').forEach(checkbox => {
                            checkbox.checked = false;
                        });
                        document.querySelectorAll('.tag-label').forEach(label => {
                            label.style.background = '#FF69B4';
                            label.style.color = '#C2185B';
                        });
                        
                        // Reset date to today
                        document.getElementById('entryDate').value = new Date().toISOString().split('T')[0];
                    }
                });
                
                // Add intensity slider listeners
                document.querySelectorAll('.symptom-intensity').forEach(slider => {
                    slider.addEventListener('input', function() {
                        this.nextElementSibling.textContent = this.value;
                    });
                });
                
                // Form submission
                // Form submission
                document.getElementById('diaryForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const journalText = document.getElementById('journalEntry').value.trim();
                    if (!journalText) {
                        alert('Please write something in your journal');
                        return;
                    }
                    
                    const tags = Array.from(document.querySelectorAll('.tag-checkbox:checked')).map(cb => cb.value);
                    
                    console.log('Saving entry with mood:', window.selectedMoodValue); // Debug log
                    
                    const newEntry = {
                        date: document.getElementById('entryDate').value,
                        mood: window.selectedMoodValue ? parseInt(window.selectedMoodValue) : 3,
                        energy: parseInt(document.getElementById('energySlider').value),
                        journal: journalText,
                        tags: tags
                    };
                    
                    const entries = JSON.parse(localStorage.getItem('diaryEntries') || '[]');
                    
                    if (isEdit) {
                        entries[editIndex] = newEntry;
                    } else {
                        entries.push(newEntry);
                    }
                    
                    localStorage.setItem('diaryEntries', JSON.stringify(entries));
                    
                    // Success feedback
                    const submitBtn = document.querySelector('#diaryForm button[type="submit"]');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = '✅ Saved!';
                    submitBtn.style.background = 'linear-gradient(135deg, #4CAF50, #388E3C)';
                    
                    setTimeout(() => {
                        overlay.remove();
                        loadDiaryEntries();
                    }, 800);
                });
            };
            
            
            window.editDiaryEntry = function(index) {
                showDiaryForm(index);
            };
            
            window.deleteDiaryEntry = function(index) {
                if (confirm('Delete this diary entry?')) {
                    const entries = JSON.parse(localStorage.getItem('diaryEntries') || '[]');
                    entries.splice(index, 1);
                    localStorage.setItem('diaryEntries', JSON.stringify(entries));
                    loadDiaryEntries();
                }
            };
            
            // Add diary entry button
            if (document.getElementById('addDiaryEntry')) {
                document.getElementById('addDiaryEntry').addEventListener('click', () => showDiaryForm());
            }
            
            // ===== HABITS & STREAKS SECTION =====
            
            // Back to home from habits
            if (document.getElementById('backToHomeFromHabits')) {
                document.getElementById('backToHomeFromHabits').addEventListener('click', function() {
                    document.getElementById('habitsContainer').style.display = 'none';
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    welcomeScreen.style.display = 'flex';
                    welcomeScreen.style.animation = 'fadeInUp 0.5s ease-out forwards';
                    window.scrollTo(0, 0);
                });
            }
            
            // Load habits list
            function loadHabitsList() {
                const habits = JSON.parse(localStorage.getItem('habits') || '[]');
                const container = document.getElementById('habitsList');
                
                if (!container) return;
                
                if (habits.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 4rem 2rem; background: linear-gradient(135deg, #FFF3E0, #FFFFFF); border-radius: 20px; border: 2px dashed #FFB74D;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">🎯</div>
                            <h3 style="color: #F57C00; margin-bottom: 1rem;">No Habits Yet</h3>
                            <p style="color: #E65100;">Create your first habit to start building streaks!</p>
                        </div>
                    `;
                    return;
                }
                
                const today = new Date().toISOString().split('T')[0];
                
                let html = '';
                habits.forEach((habit, index) => {
                    const streak = calculateStreak(habit);
                    const completedToday = habit.completions?.includes(today);
                    const longestStreak = calculateLongestStreak(habit);
                    
                    html += `
                        <div style="background: white; border-radius: 16px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.08); border-left: 5px solid ${completedToday ? '#4CAF50' : '#FF9800'};">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 1rem;">
                                <div style="flex: 1;">
                                    <h3 style="color: #E65100; margin-bottom: 0.5rem; font-size: 1.2rem;">${habit.name}</h3>
                                    ${habit.description ? `<p style="color: #7D8A99; margin-bottom: 1rem; font-size: 0.9rem;">${habit.description}</p>` : ''}
                                    
                                    <div style="display: flex; gap: 1.5rem; flex-wrap: wrap; margin-top: 1rem;">
                                        <div>
                                            <div style="font-size: 0.75rem; color: #7D8A99; margin-bottom: 0.3rem;">CURRENT STREAK</div>
                                            <div style="font-size: 1.8rem; font-weight: 700; color: ${streak >= 7 ? '#4CAF50' : '#FF9800'};">${streak} 🔥</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.75rem; color: #7D8A99; margin-bottom: 0.3rem;">BEST STREAK</div>
                                            <div style="font-size: 1.3rem; font-weight: 700; color: #7D8A99;">${longestStreak} days</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.75rem; color: #7D8A99; margin-bottom: 0.3rem;">TOTAL DAYS</div>
                                            <div style="font-size: 1.3rem; font-weight: 700; color: #7D8A99;">${habit.completions?.length || 0}</div>
                                        </div>
                                    </div>
                                    
                                    ${streak >= 30 ? '<div style="margin-top: 1rem; padding: 0.8rem; background: linear-gradient(135deg, #FFD700, #FFA000); border-radius: 10px; color: #2C3E50; font-weight: 700; text-align: center;">🏆 30-DAY CHAMPION! 🏆</div>' : ''}
                                    ${streak >= 7 && streak < 30 ? '<div style="margin-top: 1rem; padding: 0.8rem; background: linear-gradient(135deg, #4CAF50, #388E3C); border-radius: 10px; color: #2C3E50; font-weight: 600; text-align: center;">🎉 Week Streak! Keep going! 🎉</div>' : ''}
                                </div>
                                
                                <div style="display: flex; flex-direction: column; gap: 0.8rem;">
                                    ${completedToday ? `
                                        <button onclick="uncompleteHabit(${index})" style="padding: 0.8rem 1.5rem; background: #4CAF50; color: #2C3E50; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                                            ✓ Done Today
                                        </button>
                                    ` : `
                                        <button onclick="completeHabit(${index})" style="padding: 0.8rem 1.5rem; background: linear-gradient(135deg, #FF9800, #F57C00); color: #2C3E50; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                                            ✓ Mark Done
                                        </button>
                                    `}
                                    <button onclick="deleteHabit(${index})" style="padding: 0.6rem 1.2rem; background: white; border: 2px solid #E74C3C; color: #E74C3C; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 0.9rem;">🗑️ Delete</button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
            }
            
            function calculateStreak(habit) {
                if (!habit.completions || habit.completions.length === 0) return 0;
                
                const sorted = [...habit.completions].sort((a, b) => new Date(b) - new Date(a));
                const today = new Date().toISOString().split('T')[0];
                
                let streak = 0;
                const startDate = sorted[0] === today ? new Date(today) : new Date(new Date(today).getTime() - 86400000);
                
                for (let i = 0; i < 365; i++) {
                    const checkDate = new Date(startDate.getTime() - i * 86400000).toISOString().split('T')[0];
                    if (sorted.includes(checkDate)) {
                        streak++;
                    } else {
                        break;
                    }
                }
                
                return streak;
            }
            
            function calculateLongestStreak(habit) {
                if (!habit.completions || habit.completions.length === 0) return 0;
                
                const sorted = [...habit.completions].sort((a, b) => new Date(a) - new Date(b));
                let longest = 1;
                let current = 1;
                
                for (let i = 1; i < sorted.length; i++) {
                    const diff = (new Date(sorted[i]) - new Date(sorted[i-1])) / 86400000;
                    if (diff === 1) {
                        current++;
                        longest = Math.max(longest, current);
                    } else {
                        current = 1;
                    }
                }
                
                return longest;
            }
            
            window.completeHabit = function(index) {
                const habits = JSON.parse(localStorage.getItem('habits') || '[]');
                const today = new Date().toISOString().split('T')[0];
                
                if (!habits[index].completions) {
                    habits[index].completions = [];
                }
                
                if (!habits[index].completions.includes(today)) {
                    habits[index].completions.push(today);
                    localStorage.setItem('habits', JSON.stringify(habits));
                    loadHabitsList();
                }
            };
            
            window.uncompleteHabit = function(index) {
                const habits = JSON.parse(localStorage.getItem('habits') || '[]');
                const today = new Date().toISOString().split('T')[0];
                
                habits[index].completions = habits[index].completions.filter(d => d !== today);
                localStorage.setItem('habits', JSON.stringify(habits));
                loadHabitsList();
            };
            
            window.deleteHabit = function(index) {
                if (confirm('Delete this habit? All streak data will be lost.')) {
                    const habits = JSON.parse(localStorage.getItem('habits') || '[]');
                    habits.splice(index, 1);
                    localStorage.setItem('habits', JSON.stringify(habits));
                    loadHabitsList();
                }
            };
            
            window.showHabitForm = function() {
                const overlay = document.createElement('div');
                overlay.id = 'habitFormOverlay';
                overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 1rem;';
                
                overlay.innerHTML = `
                    <div onclick="event.stopPropagation();" style="background: white; border-radius: 20px; max-width: 600px; width: 100%; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
                        <div style="background: linear-gradient(135deg, #FFD8CC, #FFE5D9); color: #2C3E50; padding: 2rem; border-radius: 20px 20px 0 0; position: relative;">
                            <button onclick="document.getElementById('habitFormOverlay').remove();" style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.2); border: 2px solid white; color: #2C3E50; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 1.5rem; font-weight: 700; display: flex; align-items: center; justify-content: center; line-height: 1; padding: 0;">×</button>
                            <h2 style="margin: 0; font-size: 1.5rem; padding-right: 3rem;">🎯 Create New Habit</h2>
                        </div>
                        
                        <div style="padding: 2rem;">
                            <form id="habitForm">
                                <div style="margin-bottom: 1.5rem;">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #2C3E50;">Habit Name *</label>
                                    <input type="text" id="habitName" required placeholder="e.g., Take evening primrose oil" style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem;">
                                </div>
                                
                                <div style="margin-bottom: 1.5rem;">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #2C3E50;">Description (optional)</label>
                                    <textarea id="habitDesc" placeholder="Why this habit matters to you..." style="width: 100%; min-height: 80px; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem; resize: vertical;"></textarea>
                                </div>
                                
                                <div style="padding: 1rem; background: #FFF3E0; border-radius: 10px; margin-bottom: 1.5rem;">
                                    <div style="font-weight: 600; color: #E65100; margin-bottom: 0.5rem;">💡 Habit Ideas:</div>
                                    <ul style="margin: 0; padding-left: 1.5rem; color: #5A6C7D; font-size: 0.9rem;">
                                        <li>30-minute walk after lunch</li>
                                        <li>No caffeine after 2pm</li>
                                        <li>Journal before bed</li>
                                        <li>Take supplements with breakfast</li>
                                        <li>10 minutes of stretching</li>
                                    </ul>
                                </div>
                                
                                <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                                    <button type="button" onclick="document.getElementById('habitFormOverlay').remove();" style="padding: 0.8rem 2rem; background: white; border: 2px solid #7D8A99; color: #7D8A99; border-radius: 12px; cursor: pointer; font-weight: 600;">Cancel</button>
                                    <button type="submit" style="padding: 0.8rem 2rem; background: linear-gradient(135deg, #FF9800, #F57C00); color: #2C3E50; border: none; border-radius: 12px; cursor: pointer; font-weight: 600;">🎯 Create Habit</button>
                                </div>
                            </form>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(overlay);
                
                document.getElementById('habitForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const newHabit = {
                        name: document.getElementById('habitName').value,
                        description: document.getElementById('habitDesc').value,
                        createdDate: new Date().toISOString(),
                        completions: []
                    };
                    
                    const habits = JSON.parse(localStorage.getItem('habits') || '[]');
                    habits.push(newHabit);
                    localStorage.setItem('habits', JSON.stringify(habits));
                    
                    overlay.remove();
                    loadHabitsList();
                });
            };
            
            // Add habit button
            if (document.getElementById('addHabitBtn')) {
                document.getElementById('addHabitBtn').addEventListener('click', () => showHabitForm());
            }

            // ===== MEDICATION/HRT TRACKER SECTION =====
            
            // Silently clean up any corrupted medication data on load
            (function() {
                try {
                    const testData = localStorage.getItem('medications');
                    if (testData && testData !== '[]') {
                        const parsed = JSON.parse(testData);
                        if (Array.isArray(parsed)) {
                            // Validate and clean data
                            const cleaned = parsed.filter(m => {
                                try {
                                    return m && typeof m === 'object' && m.name && m.type;
                                } catch {
                                    return false;
                                }
                            });
                            if (cleaned.length !== parsed.length) {
                                localStorage.setItem('medications', JSON.stringify(cleaned));
                            }
                        } else {
                            localStorage.setItem('medications', '[]');
                        }
                    }
                } catch (e) {
                    // Silently clear corrupted data
                    try {
                        localStorage.removeItem('medications');
                    } catch {}
                }
            })();
            
            try {
                // Back to home from medication
                if (document.getElementById('backToHomeFromMedication')) {
                    document.getElementById('backToHomeFromMedication').addEventListener('click', function() {
                        document.getElementById('medicationContainer').style.display = 'none';
                        const welcomeScreen = document.getElementById('welcomeScreen');
                        welcomeScreen.style.display = 'flex';
                        welcomeScreen.style.animation = 'fadeInUp 0.5s ease-out forwards';
                        window.scrollTo(0, 0);
                    });
                }
            } catch (e) {
                // Silently handle - back button is non-critical
            }
            
            // Load medications from localStorage
            function loadMedicationsList() {
                try {
                    const medications = JSON.parse(localStorage.getItem('medications') || '[]');
                    const container = document.getElementById('medicationsList');
                    
                    if (!container) {
                        // Container not found, exit silently
                        return;
                    }
                    
                    // Attach all button handlers after DOM is ready
                    setTimeout(() => {
                        try {
                            if (window.attachMedicationFormHandler) {
                                window.attachMedicationFormHandler();
                            }
                            if (window.attachExportHandler) {
                                window.attachExportHandler();
                            }
                            if (window.attachPrintHandler) {
                                window.attachPrintHandler();
                            }
                        } catch (e) {
                            // Silently handle handler attachment errors
                        }
                    }, 100);
                    
                    if (medications.length === 0) {
                        container.innerHTML = `
                            <div style="text-align: center; padding: 4rem 2rem; background: linear-gradient(135deg, #F8F9FA, #FFFFFF); border-radius: 20px; border: 2px dashed #D0D0D0;">
                                <div style="font-size: 4rem; margin-bottom: 1rem;">💊</div>
                                <h3 style="color: #5A6C7D; margin-bottom: 1rem;">No Medications Yet</h3>
                                <p style="color: #7D8A99;">Click "Add Medication / Supplement" to start tracking</p>
                            </div>
                        `;
                        return;
                    }
                    
                    // Group medications by type - with safety checks
                    const hrt = medications.filter(m => m && m.type === 'HRT');
                    const supplements = medications.filter(m => m && m.type === 'Supplement');
                    const prescription = medications.filter(m => m && m.type === 'Prescription');
                    const otc = medications.filter(m => m && m.type === 'OTC');
                    
                    let html = '';
                    
                    if (hrt.length > 0) {
                        html += generateMedicationGroup('💊 HRT (Hormone Replacement Therapy)', hrt, '#8E44AD');
                    }
                    if (prescription.length > 0) {
                        html += generateMedicationGroup('🏥 Prescription Medications', prescription, '#3498DB');
                    }
                    if (supplements.length > 0) {
                        html += generateMedicationGroup('🌿 Supplements', supplements, '#27AE60');
                    }
                    if (otc.length > 0) {
                        html += generateMedicationGroup('💚 Over-the-Counter', otc, '#F39C12');
                    }
                    
                    container.innerHTML = html;
                    
                    // Add event listeners to edit/delete buttons
                    medications.forEach((med, index) => {
                        if (!med) return;
                        
                        const editBtn = document.getElementById(`editMed${index}`);
                        const deleteBtn = document.getElementById(`deleteMed${index}`);
                        
                        if (editBtn) {
                            editBtn.addEventListener('click', () => editMedication(index));
                        }
                        if (deleteBtn) {
                            deleteBtn.addEventListener('click', () => deleteMedication(index));
                        }
                    });
                } catch (e) {
                    // Silently handle errors - show empty state instead
                    const container = document.getElementById('medicationsList');
                    if (container) {
                        container.innerHTML = `
                            <div style="text-align: center; padding: 4rem 2rem; background: linear-gradient(135deg, #F8F9FA, #FFFFFF); border-radius: 20px; border: 2px dashed #D0D0D0;">
                                <div style="font-size: 4rem; margin-bottom: 1rem;">💊</div>
                                <h3 style="color: #5A6C7D; margin-bottom: 1rem;">No Medications Yet</h3>
                                <p style="color: #7D8A99;">Click "Add Medication / Supplement" to start tracking</p>
                            </div>
                        `;
                    }
                }
            }
            
            function generateMedicationGroup(title, meds, color) {
                // Safety check
                if (!meds || meds.length === 0) {
                    return '';
                }
                
                let html = `
                    <div style="margin-bottom: 2rem;">
                        <h3 style="color: ${color}; margin-bottom: 1.5rem; font-size: 1.3rem; display: flex; align-items: center; gap: 0.8rem;">
                            <span>${title}</span>
                            <span style="background: ${color}22; color: ${color}; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.9rem; font-weight: 600;">${meds.length}</span>
                        </h3>
                        <div style="display: grid; gap: 1rem;">
                `;
                
                const allMeds = JSON.parse(localStorage.getItem('medications') || '[]');
                
                meds.forEach((med) => {
                    // Safety check for undefined medication
                    if (!med || !med.name) {
                        return;
                    }
                    
                    const index = allMeds.findIndex(m => m && m.id === med.id);
                    
                    // Skip if medication not found
                    if (index === -1) {
                        return;
                    }
                    
                    html += `
                        <div style="background: white; border-radius: 16px; padding: 1.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.08); border-left: 5px solid ${color};">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 1rem;">
                                <div style="flex: 1; min-width: 200px;">
                                    <h4 style="color: #2C3E50; font-size: 1.2rem; margin-bottom: 0.8rem;">${med.name || 'Unnamed'}</h4>
                                    <div style="display: grid; gap: 0.5rem; font-size: 0.95rem;">
                                        <div><span style="color: #7D8A99;">Dosage:</span> <span style="color: #2C3E50; font-weight: 600;">${med.dosage || 'Not specified'}</span></div>
                                        <div><span style="color: #7D8A99;">Frequency:</span> <span style="color: #2C3E50; font-weight: 600;">${med.frequency || 'Not specified'}</span></div>
                                        <div><span style="color: #7D8A99;">Started:</span> <span style="color: #2C3E50; font-weight: 600;">${med.startDate ? new Date(med.startDate).toLocaleDateString('en-GB', {day: 'numeric', month: 'short', year: 'numeric'}) : 'Not specified'}</span></div>
                                        ${med.prescriber ? `<div><span style="color: #7D8A99;">Prescribed by:</span> <span style="color: #2C3E50; font-weight: 600;">${med.prescriber}</span></div>` : ''}
                                        ${med.purpose ? `<div style="margin-top: 0.5rem;"><span style="color: #7D8A99;">Purpose:</span> <span style="color: #2C3E50;">${med.purpose}</span></div>` : ''}
                                        ${med.sideEffects && med.sideEffects.length > 0 ? `
                                            <div style="margin-top: 0.5rem;">
                                                <span style="color: #E67E22; font-weight: 600;">⚠️ Side Effects Noted:</span>
                                                <div style="margin-top: 0.3rem;">${med.sideEffects.map(se => `<span style="display: inline-block; background: #FFE5D9; color: #D35400; padding: 0.2rem 0.6rem; border-radius: 8px; margin-right: 0.5rem; margin-bottom: 0.3rem; font-size: 0.85rem;">${se}</span>`).join('')}</div>
                                            </div>
                                        ` : ''}
                                        ${med.notes ? `<div style="margin-top: 0.5rem; padding: 0.8rem; background: #F8F9FA; border-radius: 8px;"><span style="color: #7D8A99; font-size: 0.85rem;">Notes:</span><br><span style="color: #5A6C7D; font-size: 0.9rem;">${med.notes}</span></div>` : ''}
                                    </div>
                                </div>
                                <div style="display: flex; gap: 0.8rem;">
                                    <button id="editMed${index}" style="padding: 0.6rem 1.2rem; background: white; border: 2px solid #3498DB; color: #3498DB; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 0.9rem; transition: all 0.3s;" onmouseover="this.style.background='#3498DB'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='#3498DB';">
                                        ✏️ Edit
                                    </button>
                                    <button id="deleteMed${index}" style="padding: 0.6rem 1.2rem; background: white; border: 2px solid #E74C3C; color: #E74C3C; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 0.9rem; transition: all 0.3s;" onmouseover="this.style.background='#E74C3C'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='#E74C3C';">
                                        🗑️ Delete
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
                
                return html;
            }
            
            // Add new medication button
            function attachMedicationFormHandler() {
                const addBtn = document.getElementById('addMedicationBtn');
                if (addBtn) {
                    addBtn.addEventListener('click', showMedicationForm);
                }
            }
            
            // Call when medication section loads
            window.attachMedicationFormHandler = attachMedicationFormHandler;
            
            // Make showMedicationForm globally available
            window.showMedicationForm = function showMedicationForm(editIndex = null) {
                try {
                    const medications = JSON.parse(localStorage.getItem('medications') || '[]');
                    const isEdit = editIndex !== null && editIndex >= 0;
                    const med = (isEdit && medications[editIndex]) ? medications[editIndex] : {};
                    
                    const overlay = document.createElement('div');
                overlay.id = 'medicationFormOverlay';
                overlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.7);
                    z-index: 10000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 1rem;
                    overflow-y: auto;
                `;
                
                overlay.innerHTML = `
                    <div onclick="event.stopPropagation();" style="background: white; border-radius: 20px; max-width: 700px; width: 100%; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
                        <div style="background: linear-gradient(135deg, #8E44AD, #6C3483); color: #2C3E50; padding: 2rem; border-radius: 20px 20px 0 0; position: relative;">
                            <button onclick="document.getElementById('medicationFormOverlay').remove();" style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.2); border: 2px solid white; color: #2C3E50; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 1.5rem; font-weight: 700; display: flex; align-items: center; justify-content: center; transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">×</button>
                            <h2 style="margin: 0; font-size: 1.5rem; padding-right: 3rem;">${isEdit ? '✏️ Edit' : '➕ Add New'} Medication / Supplement</h2>
                        </div>
                        
                        <div style="padding: 2rem;">
                            <form id="medicationForm">
                                <!-- Type -->
                                <div style="margin-bottom: 1.5rem;">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #2C3E50;">Type *</label>
                                    <select id="medType" required style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem;">
                                        <option value="">Select type...</option>
                                        <option value="HRT" ${(med && med.type) === 'HRT' ? 'selected' : ''}>HRT (Hormone Replacement Therapy)</option>
                                        <option value="Prescription" ${(med && med.type) === 'Prescription' ? 'selected' : ''}>Prescription Medication</option>
                                        <option value="Supplement" ${(med && med.type) === 'Supplement' ? 'selected' : ''}>Supplement</option>
                                        <option value="OTC" ${(med && med.type) === 'OTC' ? 'selected' : ''}>Over-the-Counter</option>
                                    </select>
                                </div>
                                
                                <!-- Name -->
                                <div style="margin-bottom: 1.5rem;">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #2C3E50;">Medication / Supplement Name *</label>
                                    <input type="text" id="medName" required placeholder="e.g., Estradot, Magnesium, Propranolol" value="${(med && med.name) || ''}" style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem;">
                                </div>
                                
                                <!-- Dosage & Frequency -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                                    <div>
                                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #2C3E50;">Dosage *</label>
                                        <input type="text" id="medDosage" required placeholder="e.g., 50mg, 2 patches" value="${(med && med.dosage) || ''}" style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem;">
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #2C3E50;">Frequency *</label>
                                        <select id="medFrequency" required style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem;">
                                            <option value="">Select...</option>
                                            <option value="Once daily" ${(med && med.frequency) === 'Once daily' ? 'selected' : ''}>Once daily</option>
                                            <option value="Twice daily" ${(med && med.frequency) === 'Twice daily' ? 'selected' : ''}>Twice daily</option>
                                            <option value="Three times daily" ${(med && med.frequency) === 'Three times daily' ? 'selected' : ''}>Three times daily</option>
                                            <option value="Every other day" ${(med && med.frequency) === 'Every other day' ? 'selected' : ''}>Every other day</option>
                                            <option value="Twice weekly" ${(med && med.frequency) === 'Twice weekly' ? 'selected' : ''}>Twice weekly</option>
                                            <option value="Weekly" ${(med && med.frequency) === 'Weekly' ? 'selected' : ''}>Weekly</option>
                                            <option value="As needed" ${(med && med.frequency) === 'As needed' ? 'selected' : ''}>As needed</option>
                                            <option value="Other" ${(med && med.frequency && !['Once daily', 'Twice daily', 'Three times daily', 'Every other day', 'Twice weekly', 'Weekly', 'As needed'].includes(med.frequency)) ? 'selected' : ''}>Other</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Start Date & Prescriber -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                                    <div>
                                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #2C3E50;">Start Date *</label>
                                        <input type="date" id="medStartDate" required value="${(med && med.startDate) || ''}" style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem;">
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #2C3E50;">Prescribed By (optional)</label>
                                        <input type="text" id="medPrescriber" placeholder="Dr. Name" value="${(med && med.prescriber) || ''}" style="width: 100%; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem;">
                                    </div>
                                </div>
                                
                                <!-- Purpose -->
                                <div style="margin-bottom: 1.5rem;">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #2C3E50;">Purpose / Reason (optional)</label>
                                    <textarea id="medPurpose" placeholder="e.g., Hot flushes, Anxiety, Bone health" style="width: 100%; min-height: 60px; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem; resize: vertical;">${(med && med.purpose) || ''}</textarea>
                                </div>
                                
                                <!-- Side Effects -->
                                <div style="margin-bottom: 1.5rem;">
                                    <label style="display: block; margin-bottom: 0.8rem; font-weight: 600; color: #2C3E50;">Any Side Effects? (optional)</label>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.8rem;">
                                        <label style="display: flex; align-items: center; gap: 0.5rem; padding: 0.6rem; background: #F8F9FA; border-radius: 8px; cursor: pointer;">
                                            <input type="checkbox" class="side-effect" value="Nausea" ${med.sideEffects?.includes('Nausea') ? 'checked' : ''}>
                                            <span style="font-size: 0.9rem;">Nausea</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 0.5rem; padding: 0.6rem; background: #F8F9FA; border-radius: 8px; cursor: pointer;">
                                            <input type="checkbox" class="side-effect" value="Headache" ${med.sideEffects?.includes('Headache') ? 'checked' : ''}>
                                            <span style="font-size: 0.9rem;">Headache</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 0.5rem; padding: 0.6rem; background: #F8F9FA; border-radius: 8px; cursor: pointer;">
                                            <input type="checkbox" class="side-effect" value="Dizziness" ${med.sideEffects?.includes('Dizziness') ? 'checked' : ''}>
                                            <span style="font-size: 0.9rem;">Dizziness</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 0.5rem; padding: 0.6rem; background: #F8F9FA; border-radius: 8px; cursor: pointer;">
                                            <input type="checkbox" class="side-effect" value="Fatigue" ${med.sideEffects?.includes('Fatigue') ? 'checked' : ''}>
                                            <span style="font-size: 0.9rem;">Fatigue</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 0.5rem; padding: 0.6rem; background: #F8F9FA; border-radius: 8px; cursor: pointer;">
                                            <input type="checkbox" class="side-effect" value="Bloating" ${med.sideEffects?.includes('Bloating') ? 'checked' : ''}>
                                            <span style="font-size: 0.9rem;">Bloating</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 0.5rem; padding: 0.6rem; background: #F8F9FA; border-radius: 8px; cursor: pointer;">
                                            <input type="checkbox" class="side-effect" value="Mood changes" ${med.sideEffects?.includes('Mood changes') ? 'checked' : ''}>
                                            <span style="font-size: 0.9rem;">Mood changes</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Notes -->
                                <div style="margin-bottom: 1.5rem;">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #2C3E50;">Additional Notes (optional)</label>
                                    <textarea id="medNotes" placeholder="Any other details, observations, or reminders..." style="width: 100%; min-height: 80px; padding: 0.8rem; border: 2px solid #E0E0E0; border-radius: 10px; font-size: 1rem; resize: vertical;">${(med && med.notes) || ''}</textarea>
                                </div>
                                
                                <!-- Buttons -->
                                <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                                    <button type="button" id="cancelMedForm" onclick="document.getElementById('medicationFormOverlay').remove();" style="padding: 0.8rem 2rem; background: white; border: 2px solid #7D8A99; color: #7D8A99; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem;">
                                        Cancel
                                    </button>
                                    <button type="submit" style="padding: 0.8rem 2rem; background: linear-gradient(135deg, #8E44AD, #6C3483); color: #2C3E50; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem;">
                                        ${isEdit ? '💾 Save Changes' : '➕ Add Medication'}
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(overlay);
                
                // Click outside to close
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.remove();
                    }
                });
                
                // Cancel button
                document.getElementById('cancelMedForm').addEventListener('click', () => {
                    overlay.remove();
                });
                
                // Form submission
                document.getElementById('medicationForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const sideEffects = Array.from(document.querySelectorAll('.side-effect:checked')).map(cb => cb.value);
                    
                    const newMed = {
                        id: isEdit ? med.id : Date.now(),
                        type: document.getElementById('medType').value,
                        name: document.getElementById('medName').value,
                        dosage: document.getElementById('medDosage').value,
                        frequency: document.getElementById('medFrequency').value,
                        startDate: document.getElementById('medStartDate').value,
                        prescriber: document.getElementById('medPrescriber').value,
                        purpose: document.getElementById('medPurpose').value,
                        sideEffects: sideEffects,
                        notes: document.getElementById('medNotes').value,
                        addedDate: isEdit ? med.addedDate : new Date().toISOString()
                    };
                    
                    const medications = JSON.parse(localStorage.getItem('medications') || '[]');
                    
                    if (isEdit) {
                        medications[editIndex] = newMed;
                    } else {
                        medications.push(newMed);
                    }
                    
                    localStorage.setItem('medications', JSON.stringify(medications));
                    
                    // Show brief success message
                    const submitBtn = document.querySelector('#medicationForm button[type="submit"]');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = isEdit ? '✅ Saved!' : '✅ Added!';
                    submitBtn.style.background = 'linear-gradient(135deg, #27AE60, #229954)';
                    
                    // Close after brief delay
                    setTimeout(() => {
                        overlay.remove();
                        loadMedicationsList();
                    }, 800);
                });
                } catch (e) {
                    // Silently handle form creation errors
                    alert('Unable to open medication form. Please refresh the page and try again.');
                }
            }
            
            window.editMedication = function editMedication(index) {
                showMedicationForm(index);
            }
            
            window.deleteMedication = function deleteMedication(index) {
                const medications = JSON.parse(localStorage.getItem('medications') || '[]');
                const med = medications[index];
                
                if (confirm(`⚠️ Delete ${med.name}?\n\nThis will permanently remove this medication from your records.\n\nAre you sure?`)) {
                    medications.splice(index, 1);
                    localStorage.setItem('medications', JSON.stringify(medications));
                    loadMedicationsList();
                }
            }
            
            // Export GP Report - attach handler when section loads
            function attachExportHandler() {
                const exportBtn = document.getElementById('exportMedicationHistory');
                if (exportBtn) {
                    exportBtn.addEventListener('click', generateGPReport);
                }
            }
            window.attachExportHandler = attachExportHandler;
            
            function generateGPReport() {
                const medications = JSON.parse(localStorage.getItem('medications') || '[]');
                
                if (medications.length === 0) {
                    alert('No medications to export. Add some medications first!');
                    return;
                }
                
                let report = `MEDICATION HISTORY REPORT\n`;
                report += `Generated: ${new Date().toLocaleDateString('en-GB', {day: 'numeric', month: 'long', year: 'numeric'})}\n`;
                report += `\n${'='.repeat(60)}\n\n`;
                
                const groups = {
                    'HRT': medications.filter(m => m.type === 'HRT'),
                    'Prescription': medications.filter(m => m.type === 'Prescription'),
                    'Supplement': medications.filter(m => m.type === 'Supplement'),
                    'OTC': medications.filter(m => m.type === 'OTC')
                };
                
                Object.entries(groups).forEach(([type, meds]) => {
                    if (meds.length > 0) {
                        report += `${type.toUpperCase()}\n${'-'.repeat(60)}\n`;
                        meds.forEach((med, i) => {
                            report += `\n${i + 1}. ${med.name}\n`;
                            report += `   Dosage: ${med.dosage}\n`;
                            report += `   Frequency: ${med.frequency}\n`;
                            report += `   Started: ${new Date(med.startDate).toLocaleDateString('en-GB')}\n`;
                            if (med.prescriber) report += `   Prescribed by: ${med.prescriber}\n`;
                            if (med.purpose) report += `   Purpose: ${med.purpose}\n`;
                            if (med.sideEffects?.length > 0) report += `   Side effects noted: ${med.sideEffects.join(', ')}\n`;
                            if (med.notes) report += `   Notes: ${med.notes}\n`;
                        });
                        report += `\n`;
                    }
                });
                
                report += `\n${'='.repeat(60)}\n`;
                report += `Total medications: ${medications.length}\n`;
                report += `\nThis report was generated by the Menopause Wellness Toolkit\nfor information purposes only. Please review with your GP.`;
                
                // Create downloadable text file
                const blob = new Blob([report], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `medication-history-${new Date().toISOString().split('T')[0]}.txt`;
                a.click();
                URL.revokeObjectURL(url);
            }
            
            // Print Medication List - attach handler when section loads
            function attachPrintHandler() {
                const printBtn = document.getElementById('printMedicationList');
                if (printBtn) {
                    printBtn.addEventListener('click', () => {
                        window.print();
                    });
                }
            }
            window.attachPrintHandler = attachPrintHandler;

            // ===== SOS QUICK RELIEF SECTION =====
            
            // Back to home from SOS
            if (document.getElementById('backToHomeFromSOS')) {
                document.getElementById('backToHomeFromSOS').addEventListener('click', function() {
                    document.getElementById('sosContainer').style.display = 'none';
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    welcomeScreen.style.display = 'flex';
                    welcomeScreen.style.animation = 'fadeInUp 0.5s ease-out forwards';
                    window.scrollTo(0, 0);
                });
            }
            
            // Relief protocols data
            const reliefProtocols = {
                hotflush: {
                    title: "🔥 Hot Flush Relief",
                    color: "#E74C3C",
                    gradient: "linear-gradient(135deg, #FFE5D9, #FFFFFF)",
                    steps: [
                        {
                            title: "1. Cooling Breath (Right Now)",
                            content: "Breathe in through your nose for 4 counts, out through your mouth for 8 counts. The long exhale helps cool your body. Repeat 5 times.",
                            action: "Start Breathing Exercise"
                        },
                        {
                            title: "2. Immediate Actions",
                            content: "• Remove layers or loosen clothing<br>• Splash cold water on wrists and neck<br>• Stand near a window or fan<br>• Sip ice-cold water slowly<br>• Place a cool cloth on the back of your neck"
                        },
                        {
                            title: "3. Ground Yourself",
                            content: "Say out loud: 'This is a hot flush. It will pass in 2-3 minutes. My body is recalibrating. I am safe.'"
                        },
                        {
                            title: "4. After It Passes",
                            content: "• Change into dry clothes if needed<br>• Keep sipping water<br>• Note what triggered it (food, stress, temperature) in your Daily Plan"
                        }
                    ]
                },
                anxiety: {
                    title: "😰 Calm Anxiety",
                    color: "#8E44AD",
                    gradient: "linear-gradient(135deg, #E8DAEF, #FFFFFF)",
                    steps: [
                        {
                            title: "1. Box Breathing (Right Now)",
                            content: "Breathe in for 4, hold for 4, out for 4, hold for 4. Repeat 4 times. This activates your calm nervous system.",
                            action: "Start Breathing Exercise"
                        },
                        {
                            title: "2. 5-4-3-2-1 Grounding",
                            content: "Look around and name:<br>• 5 things you can SEE<br>• 4 things you can TOUCH<br>• 3 things you can HEAR<br>• 2 things you can SMELL<br>• 1 thing you can TASTE<br><br>This brings you back to the present moment."
                        },
                        {
                            title: "3. Remind Yourself",
                            content: "Say out loud: 'Anxiety is uncomfortable, but it cannot harm me. This feeling will pass. I am safe right now.'"
                        },
                        {
                            title: "4. Move Your Body",
                            content: "• Shake out your hands<br>• Roll your shoulders<br>• Take a short walk<br>• Stretch gently<br>Movement helps discharge anxious energy"
                        }
                    ]
                },
                panic: {
                    title: "💚 Stop Panic Attack",
                    color: "#27AE60",
                    gradient: "linear-gradient(135deg, #D5F4E6, #FFFFFF)",
                    steps: [
                        {
                            title: "1. 4-7-8 Breathing (URGENT)",
                            content: "Breathe in for 4 counts, hold for 7, out for 8. This will slow your heart rate. Do this 4 times. Focus ONLY on counting.",
                            action: "Start Breathing Exercise"
                        },
                        {
                            title: "2. Physical Grounding",
                            content: "• Press your feet firmly into the floor<br>• Squeeze an ice cube in your hand<br>• Splash very cold water on your face<br>• Hold something textured (keys, fabric)<br>These jolt your nervous system back to safety"
                        },
                        {
                            title: "3. Name What's Happening",
                            content: "Say out loud: 'This is a panic attack. It is not dangerous. It will peak and pass within 10 minutes. I have survived every panic attack I've ever had.'"
                        },
                        {
                            title: "4. Don't Fight It",
                            content: "Trying to stop panic makes it worse. Instead, say: 'Okay, panic. Do your worst. I'm not afraid of you.' Let the wave pass through you."
                        },
                        {
                            title: "5. After It Passes",
                            content: "• Rest without guilt<br>• Drink water<br>• Be gentle with yourself<br>• Consider speaking to your GP about panic attacks"
                        }
                    ]
                },
                sleep: {
                    title: "😴 Can't Sleep Help",
                    color: "#2980B9",
                    gradient: "linear-gradient(135deg, #D4F1F4, #FFFFFF)",
                    steps: [
                        {
                            title: "1. 4-7-8 Sleep Breath",
                            content: "Lie down. Breathe in for 4, hold for 7, out for 8. Repeat 8 times. This triggers sleep hormones. Don't worry if your mind wanders - just return to counting.",
                            action: "Start Breathing Exercise"
                        },
                        {
                            title: "2. Body Scan Relaxation",
                            content: "Starting at your toes, tense each muscle for 3 seconds, then release. Move up: feet, calves, thighs, belly, chest, arms, hands, neck, face. This releases physical tension."
                        },
                        {
                            title: "3. If Still Awake After 20 Minutes",
                            content: "• Get out of bed<br>• Do something boring (fold laundry, read something dull)<br>• Keep lights very dim<br>• Return to bed when you feel sleepy<br>Staying in bed while awake trains your brain that bed = awake"
                        },
                        {
                            title: "4. Reframe Your Thoughts",
                            content: "Instead of: 'I NEED to sleep or tomorrow will be awful'<br>Say: 'Rest is still helpful. My body knows how to sleep. It will come when it's ready.'"
                        },
                        {
                            title: "5. Tomorrow",
                            content: "• Get morning sunlight (even 5 minutes)<br>• Avoid napping<br>• Note what time you woke in Daily Plan to spot patterns"
                        }
                    ]
                }
            };
            
            // SOS card click handlers
            document.querySelectorAll('.sos-card').forEach(card => {
                card.addEventListener('click', function() {
                    const reliefType = this.getAttribute('data-relief');
                    showReliefProtocol(reliefType);
                });
            });
            
            // Function to display relief protocol
            function showReliefProtocol(type) {
                const protocol = reliefProtocols[type];
                const container = document.getElementById('reliefProtocol');
                
                let stepsHTML = '';
                protocol.steps.forEach((step, index) => {
                    const hasAction = step.action;
                    stepsHTML += `
                        <div style="background: white; border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-left: 5px solid ${protocol.color};">
                            <h3 style="color: ${protocol.color}; margin-bottom: 1rem; font-size: 1.2rem;">${step.title}</h3>
                            <p style="color: #4A5568; line-height: 1.7; font-size: 1rem; margin-bottom: ${hasAction ? '1.5rem' : '0'};">${step.content}</p>
                            ${hasAction ? `
                                <button class="breathing-btn" data-type="${type}" style="width: 100%; padding: 1rem; background: ${protocol.color}; color: #2C3E50; border: none; border-radius: 12px; font-weight: 700; font-size: 1rem; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                                    ${step.action}
                                </button>
                            ` : ''}
                        </div>
                    `;
                });
                
                container.innerHTML = `
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <h2 style="color: ${protocol.color}; font-size: 2rem; margin-bottom: 0.5rem;">${protocol.title}</h2>
                        <p style="color: #5A6C7D; font-size: 1rem;">Follow these steps at your own pace. You've got this. 💪</p>
                    </div>
                    
                    ${stepsHTML}
                    
                    <div style="text-align: center; margin-top: 2rem; padding: 1.5rem; background: linear-gradient(135deg, #FFF9E6, #FFFFFF); border-radius: 16px; border: 2px solid #F39C12;">
                        <p style="color: #E67E22; font-weight: 600; font-size: 0.95rem; margin: 0;">
                            ⚠️ If symptoms are severe or you're concerned, contact your GP or call 111. For mental health crisis, call Samaritans on 116 123 (free, 24/7).
                        </p>
                    </div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <button id="backToSOSMenu" style="padding: 1rem 2rem; background: white; border: 2px solid ${protocol.color}; color: ${protocol.color}; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s;" onmouseover="this.style.background='${protocol.color}'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='${protocol.color}';">
                            ← Back to Quick Relief Menu
                        </button>
                    </div>
                `;
                
                // Hide cards grid, show protocol
                const cardsGrid = document.getElementById('sosCardsGrid');
                if (cardsGrid) cardsGrid.style.display = 'none';
                document.querySelectorAll('.sos-card').forEach(c => c.style.display = 'none');
                container.style.display = 'block';
                window.scrollTo(0, 0);
                
                // Add breathing exercise handlers
                setTimeout(() => {
                    const breathingBtns = document.querySelectorAll('.breathing-btn');
                    breathingBtns.forEach(btn => {
                        btn.addEventListener('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            const breathType = this.getAttribute('data-type');
                            startBreathingExercise(breathType);
                        });
                    });
                    
                    // Back to menu handler
                    document.getElementById('backToSOSMenu').addEventListener('click', function() {
                        container.style.display = 'none';
                        const cardsGrid = document.getElementById('sosCardsGrid');
                        if (cardsGrid) cardsGrid.style.display = 'grid';
                        document.querySelectorAll('.sos-card').forEach(c => c.style.display = 'block');
                        window.scrollTo(0, 0);
                    });
                }, 100);
            }
            
            // Breathing exercise animation
            function startBreathingExercise(type) {
                // First, scroll to top and hide SOS content
                window.scrollTo(0, 0);
                const reliefProtocol = document.getElementById('reliefProtocol');
                const sosContainer = document.getElementById('sosContainer');
                if (reliefProtocol) reliefProtocol.style.display = 'none';
                if (sosContainer) sosContainer.style.display = 'none';
                
                const breathPatterns = {
                    hotflush: { in: 4, hold1: 0, out: 8, hold2: 0, cycles: 5, name: "Cooling Breath" },
                    anxiety: { in: 4, hold1: 4, out: 4, hold2: 4, cycles: 4, name: "Box Breathing" },
                    panic: { in: 4, hold1: 7, out: 8, hold2: 0, cycles: 4, name: "4-7-8 Breath" },
                    sleep: { in: 4, hold1: 7, out: 8, hold2: 0, cycles: 8, name: "Sleep Breath" }
                };
                
                const pattern = breathPatterns[type];
                
                // Audio variables (will be created after user clicks start)
                let audioContext = null;
                let musicGainNode = null;
                let musicOscillators = [];
                let musicEnabled = true;
                
                // Function to create ambient pad sound
                function createAmbientMusic() {
                    if (!audioContext) {
                        const AudioContext = window.AudioContext || window.webkitAudioContext;
                        audioContext = new AudioContext();
                    }
                    
                    // Resume context if suspended (mobile Safari)
                    if (audioContext.state === 'suspended') {
                        audioContext.resume();
                    }
                    
                    // Create gain node for volume control
                    musicGainNode = audioContext.createGain();
                    musicGainNode.connect(audioContext.destination);
                    musicGainNode.gain.value = 0;
                    
                    // Gentle ambient chord (C major 7th with extra harmony)
                    const frequencies = [
                        130.81, // C3
                        164.81, // E3
                        196.00, // G3
                        246.94, // B3
                        261.63  // C4
                    ];
                    
                    frequencies.forEach((freq, index) => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        
                        oscillator.type = 'sine';
                        oscillator.frequency.value = freq;
                        
                        // Different volumes for each tone
                        gainNode.gain.value = 0.08 / (index + 1);
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(musicGainNode);
                        
                        oscillator.start();
                        musicOscillators.push({ osc: oscillator, gain: gainNode, baseFreq: freq });
                    });
                    
                    // Fade in music
                    musicGainNode.gain.linearRampToValueAtTime(0.15, audioContext.currentTime + 2);
                    
                    // Add subtle pitch variation for organic feel
                    const variationInterval = setInterval(() => {
                        if (musicOscillators.length === 0) {
                            clearInterval(variationInterval);
                            return;
                        }
                        musicOscillators.forEach((item) => {
                            const variation = (Math.random() - 0.5) * 0.5;
                            item.osc.frequency.setValueAtTime(item.baseFreq + variation, audioContext.currentTime);
                        });
                    }, 3000);
                }
                
                // Function to play breath sound (subtle whoosh)
                function playBreathSound(isInhale) {
                    if (!audioContext || !musicEnabled) return;
                    
                    const breathOsc = audioContext.createOscillator();
                    const breathGain = audioContext.createGain();
                    const filter = audioContext.createBiquadFilter();
                    
                    breathOsc.type = 'sine';
                    breathOsc.frequency.value = isInhale ? 200 : 150;
                    
                    filter.type = 'lowpass';
                    filter.frequency.value = isInhale ? 800 : 600;
                    
                    breathGain.gain.value = 0;
                    breathGain.gain.linearRampToValueAtTime(0.05, audioContext.currentTime + 0.1);
                    breathGain.gain.linearRampToValueAtTime(0, audioContext.currentTime + (isInhale ? 1.5 : 2));
                    
                    breathOsc.connect(filter);
                    filter.connect(breathGain);
                    breathGain.connect(audioContext.destination);
                    
                    breathOsc.start();
                    breathOsc.stop(audioContext.currentTime + (isInhale ? 1.5 : 2));
                }
                
                // Function to stop all music
                function stopMusic() {
                    if (musicGainNode && audioContext) {
                        musicGainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 1);
                    }
                    setTimeout(() => {
                        musicOscillators.forEach(item => {
                            try { item.osc.stop(); } catch(e) {}
                        });
                        musicOscillators = [];
                        if (audioContext && audioContext.state !== 'closed') {
                            audioContext.close();
                        }
                    }, 1100);
                }
                
                // Create fullscreen breathing overlay with START SCREEN
                const overlay = document.createElement('div');
                overlay.id = 'breathingOverlay';
                overlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    z-index: 99999;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    color: #2C3E50;
                `;
                
                overlay.innerHTML = `
                    <div id="startScreen" style="text-align: center; max-width: 500px; padding: 2rem;">
                        <h2 style="font-size: 2.5rem; margin-bottom: 1rem;">${pattern.name}</h2>
                        <p style="font-size: 1.2rem; margin-bottom: 2rem; opacity: 0.9;">Find a comfortable position and prepare to breathe</p>
                        <button id="beginBreathing" style="background: white; color: #667eea; border: none; padding: 1.5rem 3rem; border-radius: 16px; font-size: 1.3rem; font-weight: 700; cursor: pointer; box-shadow: 0 8px 30px rgba(0,0,0,0.3); transition: all 0.3s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            🎵 Start with Sound
                        </button>
                        <p style="margin-top: 1.5rem; font-size: 0.95rem; opacity: 0.8;">Calming sounds will play</p>
                    </div>
                    
                    <div id="breathingScreen" style="display: none; width: 100%; height: 100%; position: relative;">
                        <div style="position: absolute; top: 20px; right: 20px; display: flex; gap: 1rem; align-items: center; z-index: 10;">
                            <button id="toggleMusic" style="background: rgba(255,255,255,0.3); border: 2px solid white; color: #2C3E50; padding: 0.6rem 1.2rem; border-radius: 12px; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                                <span id="musicIcon">🔊</span> <span id="musicText">Sound On</span>
                            </button>
                            <button id="closeBreathing" style="background: rgba(255,255,255,0.3); border: 2px solid white; color: #2C3E50; padding: 0.6rem 1.2rem; border-radius: 12px; cursor: pointer; font-weight: 600;">
                                ✕ Close
                            </button>
                        </div>
                        
                        <div style="width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                            <div id="breathCircle" style="width: 250px; height: 250px; border-radius: 50%; background: rgba(255,255,255,0.3); display: flex; align-items: center; justify-content: center; transition: all 1s ease; margin-bottom: 2rem; box-shadow: 0 0 50px rgba(255,255,255,0.3);">
                                <div style="font-size: 3rem; font-weight: 700;" id="breathText">Ready?</div>
                            </div>
                            <div style="font-size: 1.5rem; margin-bottom: 1rem;" id="breathInstruction">Get comfortable...</div>
                            <div style="font-size: 1rem; opacity: 0.9;" id="breathCount">Cycle 1 of ${pattern.cycles}</div>
                            
                            <div style="position: absolute; bottom: 30px; text-align: center;">
                                <p style="opacity: 0.7; font-size: 0.9rem;">🎵 Relaxing music playing...</p>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(overlay);
                
                // Start button handler
                document.getElementById('beginBreathing').addEventListener('click', function() {
                    // Hide start screen, show breathing screen
                    document.getElementById('startScreen').style.display = 'none';
                    document.getElementById('breathingScreen').style.display = 'block';
                    
                    // Start music NOW (after user interaction)
                    createAmbientMusic();
                    
                    // Start breathing after 2 seconds
                    setTimeout(() => {
                        runBreathCycle();
                    }, 2000);
                });
                
                const circle = document.getElementById('breathCircle');
                const text = document.getElementById('breathText');
                const instruction = document.getElementById('breathInstruction');
                const countEl = document.getElementById('breathCount');
                
                let currentCycle = 0;
                
                // Music toggle button
                document.getElementById('toggleMusic').addEventListener('click', function() {
                    musicEnabled = !musicEnabled;
                    const icon = document.getElementById('musicIcon');
                    const musicText = document.getElementById('musicText');
                    
                    if (musicEnabled) {
                        icon.textContent = '🔊';
                        musicText.textContent = 'Sound On';
                        if (musicGainNode && audioContext) {
                            musicGainNode.gain.linearRampToValueAtTime(0.15, audioContext.currentTime + 0.5);
                        }
                    } else {
                        icon.textContent = '🔇';
                        musicText.textContent = 'Sound Off';
                        if (musicGainNode && audioContext) {
                            musicGainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 0.5);
                        }
                    }
                });
                
                document.getElementById('closeBreathing').addEventListener('click', () => {
                    stopMusic();
                    overlay.remove();
                    // Restore SOS content
                    const reliefProtocol = document.getElementById('reliefProtocol');
                    const sosContainer = document.getElementById('sosContainer');
                    if (reliefProtocol) reliefProtocol.style.display = 'block';
                    if (sosContainer) sosContainer.style.display = 'block';
                    window.scrollTo(0, 0);
                });
                
                function runBreathCycle() {
                    if (currentCycle >= pattern.cycles) {
                        text.textContent = '✓';
                        instruction.textContent = 'Complete! Well done.';
                        circle.style.boxShadow = '0 0 80px rgba(255,255,255,0.8)';
                        setTimeout(() => {
                            stopMusic();
                            overlay.remove();
                            // Restore SOS content
                            const reliefProtocol = document.getElementById('reliefProtocol');
                            const sosContainer = document.getElementById('sosContainer');
                            if (reliefProtocol) reliefProtocol.style.display = 'block';
                            if (sosContainer) sosContainer.style.display = 'block';
                            window.scrollTo(0, 0);
                        }, 3000);
                        return;
                    }
                    
                    currentCycle++;
                    countEl.textContent = `Cycle ${currentCycle} of ${pattern.cycles}`;
                    
                    // Breathe in
                    playBreathSound(true);
                    circle.style.transform = 'scale(1.5)';
                    circle.style.background = 'rgba(255,255,255,0.5)';
                    circle.style.boxShadow = '0 0 60px rgba(255,255,255,0.6)';
                    text.textContent = pattern.in;
                    instruction.textContent = 'Breathe IN';
                    countdown(pattern.in, () => {
                        
                        // Hold 1
                        if (pattern.hold1 > 0) {
                            circle.style.transform = 'scale(1.5)';
                            text.textContent = pattern.hold1;
                            instruction.textContent = 'HOLD';
                            countdown(pattern.hold1, () => {
                                
                                // Breathe out
                                playBreathSound(false);
                                circle.style.transform = 'scale(1)';
                                circle.style.background = 'rgba(255,255,255,0.3)';
                                circle.style.boxShadow = '0 0 30px rgba(255,255,255,0.3)';
                                text.textContent = pattern.out;
                                instruction.textContent = 'Breathe OUT';
                                countdown(pattern.out, () => {
                                    
                                    // Hold 2
                                    if (pattern.hold2 > 0) {
                                        text.textContent = pattern.hold2;
                                        instruction.textContent = 'HOLD';
                                        countdown(pattern.hold2, () => {
                                            setTimeout(runBreathCycle, 500);
                                        });
                                    } else {
                                        setTimeout(runBreathCycle, 500);
                                    }
                                });
                            });
                        } else {
                            // Breathe out
                            playBreathSound(false);
                            circle.style.transform = 'scale(1)';
                            circle.style.background = 'rgba(255,255,255,0.3)';
                            circle.style.boxShadow = '0 0 30px rgba(255,255,255,0.3)';
                            text.textContent = pattern.out;
                            instruction.textContent = 'Breathe OUT';
                            countdown(pattern.out, () => {
                                setTimeout(runBreathCycle, 500);
                            });
                        }
                    });
                }
                
                function countdown(seconds, callback) {
                    let remaining = seconds;
                    const interval = setInterval(() => {
                        remaining--;
                        if (remaining > 0) {
                            text.textContent = remaining;
                        } else {
                            clearInterval(interval);
                            callback();
                        }
                    }, 1500);
                }
            }


            // ===== PROGRESS TRACKER SECTION =====
            
            let currentPeriod = 7; // Default 7 days
            
            // Back to home from progress
            if (document.getElementById('backToHomeFromProgress')) {
                document.getElementById('backToHomeFromProgress').addEventListener('click', function() {
                    const progressContainer = document.getElementById('progressContainer');
                    const welcomeScreen = document.getElementById('welcomeScreen');
                    
                    // Hide progress section
                    progressContainer.style.display = 'none';
                    
                    // Show welcome screen with proper display
                    welcomeScreen.style.display = 'flex';
                    welcomeScreen.style.animation = 'fadeInUp 0.5s ease-out forwards';
                    
                    window.scrollTo(0, 0);
                });
            }
            
            // Period selector buttons
            document.querySelectorAll('.period-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Update active state
                    document.querySelectorAll('.period-btn').forEach(b => {
                        b.style.background = 'white';
                        b.style.color = '#4A5568';
                        b.style.border = '2px solid #E0E0E0';
                    });
                    this.style.background = 'linear-gradient(135deg, #76D7C4, #48C9B0)';
                    this.style.color = 'white';
                    this.style.border = 'none';
                    this.style.boxShadow = '0 4px 12px rgba(118, 215, 196, 0.3)';
                    
                    currentPeriod = parseInt(this.getAttribute('data-period'));
                    loadProgressCharts();
                });
            });
            
            // Function to load and calculate progress data
            function loadProgressCharts() {
                const days = currentPeriod;
                const today = new Date();
                const data = {
                    water: [],
                    protein: [],
                    movement: [],
                    selfCare: [],
                    sleep: [],
                    symptoms: {},
                    dates: []
                };
                
                // Collect data for the selected period
                for (let i = days - 1; i >= 0; i--) {
                    const date = new Date(today);
                    date.setDate(date.getDate() - i);
                    const dateStr = date.toISOString().split('T')[0];
                    data.dates.push(dateStr);
                    
                    const dayData = localStorage.getItem(`dailyPlan_${dateStr}`);
                    if (dayData) {
                        const parsed = JSON.parse(dayData);
                        
                        // Water
                        const waterCount = parsed.water ? parsed.water.filter(w => w).length : 0;
                        data.water.push(waterCount);
                        
                        // Protein
                        const proteinTotal = (parsed.protein?.breakfast || 0) + 
                                           (parsed.protein?.lunch || 0) + 
                                           (parsed.protein?.dinner || 0) + 
                                           (parsed.protein?.snacks || 0);
                        data.protein.push(proteinTotal);
                        
                        // Movement
                        data.movement.push(parsed.movement ? 1 : 0);
                        
                        // Self-care count
                        const selfCareCount = Object.values(parsed.selfCare || {}).filter(v => v).length;
                        data.selfCare.push(selfCareCount);
                        
                        // Sleep quality (1-5)
                        const sleepQuality = parsed.sleep?.quality ? parseInt(parsed.sleep.quality) : 0;
                        data.sleep.push(sleepQuality);
                        
                        // Symptoms
                        if (parsed.symptoms) {
                            parsed.symptoms.forEach(s => {
                                if (s.checked) {
                                    data.symptoms[s.symptom] = (data.symptoms[s.symptom] || 0) + 1;
                                }
                            });
                        }
                    } else {
                        data.water.push(0);
                        data.protein.push(0);
                        data.movement.push(0);
                        data.selfCare.push(0);
                        data.sleep.push(0);
                    }
                }
                
                // Calculate streaks
                calculateStreaks(data);
                
                // Update charts
                updateCharts(data);
                
                // Update stats
                updateStats(data);
                
                // Generate insights
                generateInsights(data);
            }
            
            // Calculate current streaks
            function calculateStreaks(data) {
                // Water streak (8 glasses)
                let waterStreak = 0;
                for (let i = data.water.length - 1; i >= 0; i--) {
                    if (data.water[i] >= 8) {
                        waterStreak++;
                    } else {
                        break;
                    }
                }
                document.getElementById('waterStreak').textContent = waterStreak;
                
                // Movement streak
                let movementStreak = 0;
                for (let i = data.movement.length - 1; i >= 0; i--) {
                    if (data.movement[i] === 1) {
                        movementStreak++;
                    } else {
                        break;
                    }
                }
                document.getElementById('movementStreak').textContent = movementStreak;
                
                // Protein streak (met target)
                const target = parseInt(localStorage.getItem('dailyProteinTarget') || '100');
                let proteinStreak = 0;
                for (let i = data.protein.length - 1; i >= 0; i--) {
                    if (data.protein[i] >= target) {
                        proteinStreak++;
                    } else {
                        break;
                    }
                }
                document.getElementById('proteinStreak').textContent = proteinStreak;
                
                // Self-care streak (3+ activities)
                let selfCareStreak = 0;
                for (let i = data.selfCare.length - 1; i >= 0; i--) {
                    if (data.selfCare[i] >= 3) {
                        selfCareStreak++;
                    } else {
                        break;
                    }
                }
                document.getElementById('selfCareStreak').textContent = selfCareStreak;
            }
            
            // Update charts using simple bar visualization
            function updateCharts(data) {
                // Water Chart
                updateWaterChart(data);
                
                // Protein Chart
                updateProteinChart(data);
                
                // Sleep Chart
                updateSleepChart(data);
                
                // Symptom Heatmap
                updateSymptomHeatmap(data);
            }
            
            function updateWaterChart(data) {
                const canvas = document.getElementById('waterChart');
                const ctx = canvas.getContext('2d');
                canvas.width = canvas.offsetWidth;
                canvas.height = 250;
                
                const padding = 40;
                const chartWidth = canvas.width - padding * 2;
                const chartHeight = canvas.height - padding * 2;
                const barWidth = chartWidth / data.water.length - 5;
                const maxValue = 10; // Max 10 glasses
                
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw bars
                data.water.forEach((value, i) => {
                    const barHeight = (value / maxValue) * chartHeight;
                    const x = padding + i * (barWidth + 5);
                    const y = canvas.height - padding - barHeight;
                    
                    // Gradient
                    const gradient = ctx.createLinearGradient(0, y, 0, y + barHeight);
                    gradient.addColorStop(0, '#75E6DA');
                    gradient.addColorStop(1, '#189AB4');
                    
                    ctx.fillStyle = gradient;
                    ctx.fillRect(x, y, barWidth, barHeight);
                    
                    // Goal line at 8 glasses
                    if (value >= 8) {
                        ctx.strokeStyle = '#27AE60';
                        ctx.lineWidth = 2;
                        ctx.strokeRect(x - 1, y - 1, barWidth + 2, barHeight + 2);
                    }
                    
                    // Date label (last 3 chars of date)
                    if (i % Math.ceil(data.dates.length / 7) === 0) {
                        ctx.fillStyle = '#7D8A99';
                        ctx.font = '10px sans-serif';
                        ctx.textAlign = 'center';
                        const dateLabel = data.dates[i].split('-')[2];
                        ctx.fillText(dateLabel, x + barWidth / 2, canvas.height - 10);
                    }
                });
                
                // Goal line
                const goalY = canvas.height - padding - (8 / maxValue) * chartHeight;
                ctx.strokeStyle = '#E0E0E0';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(padding, goalY);
                ctx.lineTo(canvas.width - padding, goalY);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Goal label
                ctx.fillStyle = '#7D8A99';
                ctx.font = '12px sans-serif';
                ctx.textAlign = 'right';
                ctx.fillText('Goal: 8', padding - 5, goalY + 5);
            }
            
            function updateProteinChart(data) {
                const canvas = document.getElementById('proteinChart');
                const ctx = canvas.getContext('2d');
                canvas.width = canvas.offsetWidth;
                canvas.height = 250;
                
                const padding = 40;
                const chartWidth = canvas.width - padding * 2;
                const chartHeight = canvas.height - padding * 2;
                const barWidth = chartWidth / data.protein.length - 5;
                const maxValue = Math.max(...data.protein, 150);
                const target = parseInt(localStorage.getItem('dailyProteinTarget') || '100');
                
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw bars
                data.protein.forEach((value, i) => {
                    const barHeight = (value / maxValue) * chartHeight;
                    const x = padding + i * (barWidth + 5);
                    const y = canvas.height - padding - barHeight;
                    
                    // Gradient
                    const gradient = ctx.createLinearGradient(0, y, 0, y + barHeight);
                    gradient.addColorStop(0, '#76D7C4');
                    gradient.addColorStop(1, '#117A65');
                    
                    ctx.fillStyle = gradient;
                    ctx.fillRect(x, y, barWidth, barHeight);
                    
                    // Met goal indicator
                    if (value >= target) {
                        ctx.strokeStyle = '#27AE60';
                        ctx.lineWidth = 2;
                        ctx.strokeRect(x - 1, y - 1, barWidth + 2, barHeight + 2);
                    }
                    
                    // Date label
                    if (i % Math.ceil(data.dates.length / 7) === 0) {
                        ctx.fillStyle = '#7D8A99';
                        ctx.font = '10px sans-serif';
                        ctx.textAlign = 'center';
                        const dateLabel = data.dates[i].split('-')[2];
                        ctx.fillText(dateLabel, x + barWidth / 2, canvas.height - 10);
                    }
                });
                
                // Target line
                const goalY = canvas.height - padding - (target / maxValue) * chartHeight;
                ctx.strokeStyle = '#E0E0E0';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(padding, goalY);
                ctx.lineTo(canvas.width - padding, goalY);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Target label
                ctx.fillStyle = '#7D8A99';
                ctx.font = '12px sans-serif';
                ctx.textAlign = 'right';
                ctx.fillText(`Goal: ${target}g`, padding - 5, goalY + 5);
            }
            
            function updateSleepChart(data) {
                const canvas = document.getElementById('sleepChart');
                const ctx = canvas.getContext('2d');
                canvas.width = canvas.offsetWidth;
                canvas.height = 250;
                
                const padding = 40;
                const chartWidth = canvas.width - padding * 2;
                const chartHeight = canvas.height - padding * 2;
                
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Find max for scale (5 stars max)
                const maxQuality = 5;
                
                // Draw bars
                const barWidth = chartWidth / data.sleep.length - 5;
                
                data.sleep.forEach((quality, i) => {
                    const barHeight = (quality / maxQuality) * chartHeight;
                    const x = padding + i * (chartWidth / data.sleep.length);
                    const y = canvas.height - padding - barHeight;
                    
                    // Create gradient (blue)
                    const gradient = ctx.createLinearGradient(x, y, x, y + barHeight);
                    gradient.addColorStop(0, '#5DADE2');
                    gradient.addColorStop(1, '#2874A6');
                    
                    ctx.fillStyle = gradient;
                    ctx.fillRect(x, y, barWidth, barHeight);
                    
                    // Draw green border if quality is 4+
                    if (quality >= 4) {
                        ctx.strokeStyle = '#27AE60';
                        ctx.lineWidth = 3;
                        ctx.strokeRect(x, y, barWidth, barHeight);
                    }
                });
                
                // Draw axes
                ctx.strokeStyle = '#E0E0E0';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(padding, padding);
                ctx.lineTo(padding, canvas.height - padding);
                ctx.lineTo(canvas.width - padding, canvas.height - padding);
                ctx.stroke();
                
                // Draw date labels (every ~7th date)
                ctx.fillStyle = '#7D8A99';
                ctx.font = '11px sans-serif';
                ctx.textAlign = 'center';
                const labelInterval = Math.ceil(data.dates.length / 7);
                data.dates.forEach((date, i) => {
                    if (i % labelInterval === 0 || i === data.dates.length - 1) {
                        const x = padding + i * (chartWidth / data.dates.length) + barWidth / 2;
                        const shortDate = new Date(date).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' });
                        ctx.fillText(shortDate, x, canvas.height - padding + 20);
                    }
                });
                
                // Draw Y-axis labels (1-5)
                ctx.textAlign = 'right';
                for (let i = 1; i <= 5; i++) {
                    const y = canvas.height - padding - (i / 5) * chartHeight;
                    ctx.fillText(i.toString(), padding - 10, y + 5);
                }
                
                // Draw goal line at 4 (Good sleep)
                const goodY = canvas.height - padding - (4 / 5) * chartHeight;
                ctx.strokeStyle = '#27AE60';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(padding, goodY);
                ctx.lineTo(canvas.width - padding, goodY);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Goal label
                ctx.fillStyle = '#27AE60';
                ctx.font = '12px sans-serif';
                ctx.textAlign = 'right';
                ctx.fillText('Good Sleep (4+)', padding - 5, goodY - 5);
            }
            
            function updateSymptomHeatmap(data) {
                const container = document.getElementById('symptomHeatmap');
                const topContainer = document.getElementById('topSymptoms');
                container.innerHTML = '';
                topContainer.innerHTML = '';
                
                const symptomNames = {
                    'hot-flushes': { emoji: '🔥', label: 'Hot flushes' },
                    'anxiety': { emoji: '😰', label: 'Anxiety' },
                    'sleep-issues': { emoji: '😴', label: 'Sleep issues' },
                    'joint-pain': { emoji: '🦴', label: 'Joint pain' },
                    'brain-fog': { emoji: '🧠', label: 'Brain fog' },
                    'low-energy': { emoji: '💪', label: 'Low energy' }
                };
                
                const maxCount = Math.max(...Object.values(data.symptoms), 1);
                const sorted = Object.entries(data.symptoms).sort((a, b) => b[1] - a[1]);
                
                sorted.forEach(([symptom, count]) => {
                    const percentage = (count / data.dates.length) * 100;
                    const width = (count / maxCount) * 100;
                    const info = symptomNames[symptom] || { emoji: '📝', label: symptom };
                    
                    const bar = document.createElement('div');
                    bar.style.cssText = 'margin-bottom: 1rem;';
                    bar.innerHTML = `
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span style="font-size: 0.9rem; color: #4A5568;">
                                <span style="font-size: 1.2rem;">${info.emoji}</span> ${info.label}
                            </span>
                            <span style="font-size: 0.85rem; color: #7D8A99;">${count} days (${percentage.toFixed(0)}%)</span>
                        </div>
                        <div style="background: #F0F0F0; border-radius: 10px; height: 20px; overflow: hidden;">
                            <div style="background: linear-gradient(90deg, #FFB69D, #D35400); height: 100%; width: ${width}%; transition: width 0.5s ease;"></div>
                        </div>
                    `;
                    container.appendChild(bar);
                });
                
                // Top 3 symptoms
                sorted.slice(0, 3).forEach(([symptom, count]) => {
                    const info = symptomNames[symptom] || { emoji: '📝', label: symptom };
                    const badge = document.createElement('div');
                    badge.style.cssText = 'background: white; padding: 0.6rem 1.2rem; border-radius: 20px; border: 2px solid #FFB69D; display: inline-flex; align-items: center; gap: 0.5rem;';
                    badge.innerHTML = `
                        <span style="font-size: 1.2rem;">${info.emoji}</span>
                        <span style="color: #D35400; font-weight: 600; font-size: 0.9rem;">${info.label}</span>
                    `;
                    topContainer.appendChild(badge);
                });
                
                if (sorted.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: #7D8A99; padding: 2rem;">No symptoms tracked in this period</p>';
                    topContainer.innerHTML = '<span style="color: #7D8A99; font-size: 0.9rem;">Start tracking symptoms in your Daily Plan!</span>';
                }
            }
            
            function updateStats(data) {
                const target = parseInt(localStorage.getItem('dailyProteinTarget') || '100');
                
                // Water stats
                const avgWater = (data.water.reduce((a, b) => a + b, 0) / data.water.length).toFixed(1);
                const bestWater = Math.max(...data.water);
                const successWater = ((data.water.filter(w => w >= 8).length / data.water.length) * 100).toFixed(0);
                
                document.getElementById('avgWater').textContent = avgWater;
                document.getElementById('bestWater').textContent = bestWater;
                document.getElementById('successWater').textContent = successWater + '%';
                
                // Protein stats
                const avgProtein = (data.protein.reduce((a, b) => a + b, 0) / data.protein.length).toFixed(0);
                const bestProtein = Math.max(...data.protein);
                const successProtein = ((data.protein.filter(p => p >= target).length / data.protein.length) * 100).toFixed(0);
                
                document.getElementById('avgProtein').textContent = avgProtein + 'g';
                document.getElementById('bestProtein').textContent = bestProtein + 'g';
                document.getElementById('successProtein').textContent = successProtein + '%';
                
                // Sleep stats
                const sleepData = data.sleep.filter(s => s > 0); // Only days with data
                if (sleepData.length > 0) {
                    const avgSleep = (sleepData.reduce((a, b) => a + b, 0) / sleepData.length).toFixed(1);
                    const bestSleep = Math.max(...sleepData);
                    const goodSleepRate = ((sleepData.filter(s => s >= 4).length / sleepData.length) * 100).toFixed(0);
                    
                    document.getElementById('avgSleep').textContent = avgSleep + '/5';
                    document.getElementById('bestSleep').textContent = bestSleep + '/5';
                    document.getElementById('goodSleepRate').textContent = goodSleepRate + '%';
                } else {
                    document.getElementById('avgSleep').textContent = 'No data';
                    document.getElementById('bestSleep').textContent = '-';
                    document.getElementById('goodSleepRate').textContent = '0%';
                }
                
                // Weekly overview
                const daysTracked = data.water.filter((_, i) => data.water[i] > 0 || data.protein[i] > 0).length;
                const goalsMetCount = data.water.filter((w, i) => w >= 8 && data.protein[i] >= target).length;
                const longestStreak = Math.max(
                    parseInt(document.getElementById('waterStreak').textContent),
                    parseInt(document.getElementById('movementStreak').textContent),
                    parseInt(document.getElementById('proteinStreak').textContent),
                    parseInt(document.getElementById('selfCareStreak').textContent)
                );
                const selfCareRate = ((data.selfCare.filter(s => s >= 3).length / data.selfCare.length) * 100).toFixed(0);
                
                document.getElementById('weeklyDays').textContent = daysTracked;
                document.getElementById('weeklyGoals').textContent = goalsMetCount;
                document.getElementById('weeklyStreak').textContent = longestStreak;
                document.getElementById('weeklySelfCare').textContent = selfCareRate + '%';
            }
            
            function generateInsights(data) {
                const container = document.getElementById('insightsContainer');
                container.innerHTML = '';
                
                const insights = [];
                const target = parseInt(localStorage.getItem('dailyProteinTarget') || '100');
                
                // Water insight
                const avgWater = data.water.reduce((a, b) => a + b, 0) / data.water.length;
                if (avgWater >= 8) {
                    insights.push({
                        icon: '🌊',
                        title: 'Excellent Hydration!',
                        message: `You're averaging ${avgWater.toFixed(1)} glasses per day. Keep up the great work!`,
                        color: '#189AB4'
                    });
                } else if (avgWater >= 6) {
                    insights.push({
                        icon: '💧',
                        title: 'Good Progress',
                        message: `You're drinking ${avgWater.toFixed(1)} glasses daily. Just ${(8 - avgWater).toFixed(1)} more to reach your goal!`,
                        color: '#48C9B0'
                    });
                } else {
                    insights.push({
                        icon: '💡',
                        title: 'Hydration Opportunity',
                        message: `Try setting reminders throughout the day to boost your water intake.`,
                        color: '#F39C12'
                    });
                }
                
                // Protein insight
                const avgProtein = data.protein.reduce((a, b) => a + b, 0) / data.protein.length;
                if (avgProtein >= target) {
                    insights.push({
                        icon: '🎯',
                        title: 'Protein Champion!',
                        message: `You're consistently meeting your protein target of ${target}g. This supports muscle health during menopause.`,
                        color: '#117A65'
                    });
                } else if (avgProtein >= target * 0.8) {
                    insights.push({
                        icon: '🍗',
                        title: 'Almost There!',
                        message: `You're at ${avgProtein.toFixed(0)}g daily. Adding a protein-rich snack could help you reach ${target}g.`,
                        color: '#48C9B0'
                    });
                } else {
                    insights.push({
                        icon: '💪',
                        title: 'Protein Boost Needed',
                        message: `Current average: ${avgProtein.toFixed(0)}g. Use the food lookup tool to find high-protein options you enjoy.`,
                        color: '#E67E22'
                    });
                }
                
                // Movement insight
                const movementDays = data.movement.filter(m => m === 1).length;
                const movementPercent = (movementDays / data.dates.length * 100).toFixed(0);
                if (movementPercent >= 80) {
                    insights.push({
                        icon: '🔥',
                        title: 'Movement Superstar!',
                        message: `${movementPercent}% consistency! Regular movement helps manage menopause symptoms.`,
                        color: '#D35400'
                    });
                } else if (movementPercent >= 50) {
                    insights.push({
                        icon: '🚶',
                        title: 'Building Momentum',
                        message: `You're moving ${movementDays} days out of ${data.dates.length}. Even 10 minutes counts!`,
                        color: '#E67E22'
                    });
                }
                
                // Pattern detection
                const weekendWater = [];
                const weekdayWater = [];
                data.water.forEach((w, i) => {
                    const date = new Date(data.dates[i]);
                    const day = date.getDay();
                    if (day === 0 || day === 6) {
                        weekendWater.push(w);
                    } else {
                        weekdayWater.push(w);
                    }
                });
                
                if (weekendWater.length > 0 && weekdayWater.length > 0) {
                    const weekendAvg = weekendWater.reduce((a, b) => a + b, 0) / weekendWater.length;
                    const weekdayAvg = weekdayWater.reduce((a, b) => a + b, 0) / weekdayWater.length;
                    
                    if (weekdayAvg > weekendAvg + 1.5) {
                        insights.push({
                            icon: '📊',
                            title: 'Weekend Pattern Detected',
                            message: `You drink more water on weekdays. Consider setting weekend reminders!`,
                            color: '#9B59B6'
                        });
                    } else if (weekendAvg > weekdayAvg + 1.5) {
                        insights.push({
                            icon: '📊',
                            title: 'Weekday Pattern Detected',
                            message: `Your weekend hydration is stronger. Try keeping a water bottle at your desk!`,
                            color: '#9B59B6'
                        });
                    }
                }
                
                // Sleep insights
                const sleepData = data.sleep.filter(s => s > 0);
                if (sleepData.length > 0) {
                    const avgSleep = sleepData.reduce((a, b) => a + b, 0) / sleepData.length;
                    const goodNights = sleepData.filter(s => s >= 4).length;
                    const poorNights = sleepData.filter(s => s <= 2).length;
                    
                    if (avgSleep >= 4) {
                        insights.push({
                            icon: '😴',
                            title: 'Sleep Champion!',
                            message: `Your sleep quality is averaging ${avgSleep.toFixed(1)}/5. Great rest supports hormone balance!`,
                            color: '#2874A6'
                        });
                    } else if (avgSleep >= 3) {
                        insights.push({
                            icon: '🌙',
                            title: 'Sleep Improving',
                            message: `Average sleep quality: ${avgSleep.toFixed(1)}/5. Try the SOS sleep breathing exercises before bed!`,
                            color: '#5DADE2'
                        });
                    } else if (poorNights >= 3) {
                        insights.push({
                            icon: '💤',
                            title: 'Sleep Support Needed',
                            message: `${poorNights} difficult nights this period. Check the sleep hygiene tips in Self-Care flashcards.`,
                            color: '#E67E22'
                        });
                    }
                }
                
                // Symptom insights
                const topSymptom = Object.entries(data.symptoms).sort((a, b) => b[1] - a[1])[0];
                if (topSymptom && topSymptom[1] > data.dates.length * 0.3) {
                    const symptomNames = {
                        'hot-flushes': 'hot flushes',
                        'anxiety': 'anxiety',
                        'sleep-issues': 'sleep issues',
                        'joint-pain': 'joint pain',
                        'brain-fog': 'brain fog',
                        'low-energy': 'low energy'
                    };
                    insights.push({
                        icon: '🔍',
                        title: 'Symptom Tracking',
                        message: `${symptomNames[topSymptom[0]] || topSymptom[0]} appears most frequently. Check the symptom flashcards for management tips!`,
                        color: '#E74C3C'
                    });
                }
                
                // Render insights
                insights.forEach(insight => {
                    const card = document.createElement('div');
                    card.style.cssText = `
                        padding: 1.5rem;
                        background: white;
                        border-radius: 16px;
                        border-left: 4px solid ${insight.color};
                        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
                    `;
                    card.innerHTML = `
                        <div style="display: flex; align-items: flex-start; gap: 1rem;">
                            <div style="font-size: 2rem;">${insight.icon}</div>
                            <div style="flex: 1;">
                                <div style="font-size: 1rem; font-weight: 700; color: ${insight.color}; margin-bottom: 0.5rem;">
                                    ${insight.title}
                                </div>
                                <div style="font-size: 0.9rem; color: #5A6C7D; line-height: 1.5;">
                                    ${insight.message}
                                </div>
                            </div>
                        </div>
                    `;
                    container.appendChild(card);
                });
                
                if (insights.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: #7D8A99; padding: 2rem;">Start tracking your daily plan to see personalized insights!</p>';
                }
            }
            
            // Initialize progress when section becomes visible
            if (document.getElementById('progressContainer')) {
                const progressObserver = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                            const container = document.getElementById('progressContainer');
                            if (container && container.style.display !== 'none') {
                                loadProgressCharts();
                            }
                        }
                    });
                });
                
                progressObserver.observe(document.getElementById('progressContainer'), {
                    attributes: true,
                    attributeFilter: ['style']
                });
            }


            // ===== RECIPES SECTION - COMPLETE WEEK 1 =====
const recipeData = {
    week1: {
        theme: 'Nervous System Focus',
        color: '#9B7EBD',
        subtitle: 'Meals to support mood, sleep, and hot flushes',
        symptoms: ['🔥 Hot Flushes', '😰 Anxiety & Mood', '😴 Sleep', '🧠 Brain Fog'],
        eatingOut: {
            title: '🍽️ Eating Out Guide - Week 1',
            best: [
                'Mediterranean/Greek: Grilled fish, Greek salad with feta, hummus platter',
                'Japanese: Salmon sashimi, edamame beans, miso soup',
                'Italian: Grilled sea bass, seafood pasta (ask for extra vegetables)',
                'British Pub: Grilled salmon with side salad (swap chips for extra veg)'
            ],
            priority: [
                'Prioritise: Oily fish (salmon, mackerel, sardines)',
                'Add: Leafy greens, olive oil-based dressings',
                'Avoid: Heavy cream sauces, deep-fried foods, excessive alcohol'
            ],
            fastFood: [
                'Pret: Salmon & avocado salad, boiled eggs, vegetable soup',
                'M&S: Salmon fillet with vegetables, Greek yoghurt pots, mixed nuts',
                'Tesco Meal Deal: Chicken & bacon salad, protein pot, water',
                'Costa: Porridge with berries, boiled eggs (avoid pastries)'
            ],
            tips: 'Choose oat milk lattes over dairy | Bring nuts from home | Skip sugary drinks (blood sugar spike = hot flushes)'
        },
        days: [
            // DAY 1
            {
                breakfast: {
                    name: 'Berry & Walnut Protein Bowl',
                    prep: 5, cook: 0,
                    helps: ['🔥 Hot Flushes', '🧠 Brain Fog', '😴 Sleep', '⚖️ Weight'],
                    ingredients: ['150g Greek yoghurt (full-fat)', '80g mixed berries', '30g walnuts, chopped', '1 tbsp ground flaxseed', '1 tsp honey (optional)'],
                    method: ['Spoon yoghurt into bowl', 'Top with berries, walnuts, and flaxseed', 'Drizzle with honey if using', 'Serve immediately'],
                    nutrition: {protein: 25, fibre: 9, omega3: 4, cals: 420},
                    why: 'Walnuts provide omega-3s that reduce inflammation linked to hot flushes. Greek yoghurt stabilises blood sugar (prevents mood swings). Flaxseed contains lignans that support hormone balance.',
                    tips: 'Batch prep: chop walnuts for the week | Dairy-free: use coconut yoghurt | Budget: frozen berries',
                    batch: '✓ Yes'
                },
                lunch: {
                    name: 'Mediterranean Chickpea Salad',
                    prep: 10, cook: 0,
                    helps: ['🔥 Hot Flushes', '😰 Anxiety', '🫃 Bloating', '💪 Energy'],
                    ingredients: ['200g tinned chickpeas, drained', '100g cucumber, diced', '80g cherry tomatoes, halved', '50g feta cheese', '2 tbsp olive oil', '1 tbsp lemon juice', 'Fresh parsley', 'Salt and pepper'],
                    method: ['Combine chickpeas, cucumber, tomatoes in bowl', 'Crumble feta on top', 'Whisk olive oil and lemon juice', 'Pour dressing over salad', 'Add parsley, season, toss gently'],
                    nutrition: {protein: 22, fibre: 14, cals: 485},
                    why: 'Chickpeas are high in fibre (supports gut health, reduces bloating). Olive oil provides anti-inflammatory fats. Protein keeps blood sugar stable.',
                    tips: 'Make ahead: prep 2-3 days\' worth | Add grilled chicken for extra protein | Vegan: skip feta',
                    batch: '✓ Yes'
                },
                dinner: {
                    name: 'Baked Salmon with Roasted Vegetables',
                    prep: 10, cook: 20,
                    helps: ['🔥 Hot Flushes', '🧠 Brain Fog', '🦴 Joint Pain', '😴 Sleep'],
                    ingredients: ['150g salmon fillet', '200g mixed veg (courgette, peppers, red onion)', '2 tbsp olive oil', '1 lemon', 'Fresh dill or parsley', 'Salt and pepper'],
                    method: ['Preheat oven to 200°C', 'Chop veg into chunks, toss with 1 tbsp oil, salt, lemon', 'Spread veg on baking tray', 'Place salmon on veg, drizzle remaining oil', 'Season salmon, add lemon and herbs', 'Bake 18-20 mins until salmon flakes'],
                    nutrition: {protein: 35, fibre: 6, omega3: 2.5, cals: 520},
                    why: 'Salmon is rich in omega-3s (reduces inflammation, supports brain function, improves sleep quality). Vitamin D in salmon helps regulate mood. Colorful veg provide antioxidants.',
                    tips: 'Batch cook: roast extra veg for tomorrow | Frozen salmon works well',
                    batch: 'Partial'
                }
            },
            // DAY 2
            {
                breakfast: {
                    name: 'Spinach & Feta Omelette',
                    prep: 5, cook: 8,
                    helps: ['🧠 Brain Fog', '💪 Energy', '🦴 Bone Health'],
                    ingredients: ['3 eggs', 'Handful fresh spinach', '30g feta cheese', '1 tbsp olive oil', 'Salt and pepper'],
                    method: ['Beat eggs with salt and pepper', 'Heat oil in pan', 'Pour in eggs, cook 2 mins', 'Add spinach and feta to one half', 'Fold omelette, cook 2 mins more'],
                    nutrition: {protein: 28, fibre: 2, cals: 380},
                    why: 'Eggs provide choline for brain function and vitamin D for mood. Spinach is rich in magnesium (calms nervous system). High protein prevents energy crashes.',
                    tips: 'Quick meal under 10 mins | Pre-wash spinach | Add mushrooms for extra nutrients',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Mackerel Nicoise-Style Salad',
                    prep: 10, cook: 0,
                    helps: ['🧠 Brain Fog', '🔥 Hot Flushes', '⚖️ Weight'],
                    ingredients: ['120g smoked mackerel fillets, flaked', '2 boiled eggs, halved', '100g green beans (steamed)', '80g cherry tomatoes', '50g olives', '2 tbsp olive oil', 'Lemon juice'],
                    method: ['Arrange green beans, tomatoes, eggs on plate', 'Add flaked mackerel and olives', 'Drizzle with olive oil and lemon', 'Season with black pepper'],
                    nutrition: {protein: 38, fibre: 8, omega3: 4, cals: 520},
                    why: 'Mackerel is extremely high in omega-3s (4g per serving!). Eggs add choline for brain health. Olives provide healthy fats. Low-carb helps stabilise energy.',
                    tips: 'Boil eggs in advance | Use frozen green beans | Fresh or tinned mackerel both work',
                    batch: '✓ Yes (components)'
                },
                dinner: {
                    name: 'Turkey Meatballs in Tomato Sauce',
                    prep: 15, cook: 25,
                    helps: ['😴 Sleep', '💪 Energy', '⚖️ Weight'],
                    ingredients: ['400g turkey mince', '1 egg', '2 tbsp breadcrumbs', '400g tinned tomatoes', '2 cloves garlic', '1 tbsp olive oil', 'Fresh basil', 'Italian herbs'],
                    method: ['Mix turkey, egg, breadcrumbs, herbs', 'Form into 12 meatballs', 'Fry in oil until browned (8 mins)', 'Add garlic, tomatoes, simmer 15 mins', 'Add basil, serve'],
                    nutrition: {protein: 42, fibre: 5, cals: 420},
                    why: 'Turkey is rich in tryptophan (converts to serotonin for better sleep). High protein supports muscle maintenance. Tomatoes provide lycopene (antioxidant).',
                    tips: 'Batch cook: make double, freeze half | Serve with courgette noodles',
                    batch: '✓✓ Excellent'
                }
            },
            // DAY 3
            {
                breakfast: {
                    name: 'Overnight Oats with Chia & Berries',
                    prep: 5, cook: 0,
                    helps: ['🫃 Bloating', '⚖️ Weight', '💪 Energy'],
                    ingredients: ['50g rolled oats', '150ml oat milk', '1 tbsp chia seeds', '1 tbsp ground flaxseed', '80g berries', '1 tsp honey'],
                    method: ['Night before: mix oats, milk, chia, flaxseed', 'Refrigerate overnight', 'Morning: top with berries and honey', 'Eat cold or microwave 1 min'],
                    nutrition: {protein: 14, fibre: 16, omega3: 3, cals: 380},
                    why: 'Oats are high in soluble fibre (supports gut health, reduces cholesterol). Chia seeds provide omega-3s and keep you full. Slow-release energy prevents crashes.',
                    tips: 'Make 3 jars Sunday night | Add protein powder for 25g protein | Dairy-free naturally',
                    batch: '✓✓✓ Make 3-5 days'
                },
                lunch: {
                    name: 'Grilled Chicken & Avocado Wrap',
                    prep: 10, cook: 0,
                    helps: ['🧠 Brain Fog', '💪 Energy', '⚖️ Weight'],
                    ingredients: ['Wholemeal wrap', '120g cooked chicken breast', 'Half avocado, sliced', 'Handful rocket', '1 tbsp hummus', 'Lemon juice'],
                    method: ['Spread hummus on wrap', 'Layer chicken, avocado, rocket', 'Squeeze lemon juice over', 'Roll tightly, slice in half'],
                    nutrition: {protein: 35, fibre: 10, cals: 450},
                    why: 'Chicken provides lean protein. Avocado offers healthy fats for brain function. Wholemeal wrap provides sustained energy. Quick and portable.',
                    tips: 'Use leftover roast chicken | Batch: cook chicken breasts Sunday | Swap wrap for lettuce cups',
                    batch: '✓ Yes (components)'
                },
                dinner: {
                    name: 'Pan-Fried Sea Bass with Garlic Greens',
                    prep: 10, cook: 15,
                    helps: ['🔥 Hot Flushes', '🧠 Brain Fog', '😴 Sleep'],
                    ingredients: ['150g sea bass fillet', '200g mixed greens (spinach, kale)', '3 cloves garlic, sliced', '2 tbsp olive oil', 'Lemon wedge', 'Chilli flakes (optional)'],
                    method: ['Season fish with salt and pepper', 'Heat 1 tbsp oil in pan, fry fish skin-side down 5 mins', 'Flip, cook 3 mins more, remove', 'Same pan: add oil, garlic, greens', 'Sauté 4 mins, season', 'Serve fish on greens with lemon'],
                    nutrition: {protein: 32, fibre: 6, cals: 420},
                    why: 'Sea bass provides omega-3s and is easy to digest. Garlic has anti-inflammatory properties. Dark leafy greens rich in magnesium (supports sleep).',
                    tips: 'Any white fish works | Frozen spinach is fine | Add cherry tomatoes',
                    batch: 'No - best fresh'
                }
            },
            // DAY 4
            {
                breakfast: {
                    name: 'Smoked Salmon & Scrambled Eggs',
                    prep: 5, cook: 5,
                    helps: ['🧠 Brain Fog', '🔥 Hot Flushes', '💪 Energy'],
                    ingredients: ['3 eggs', '50g smoked salmon', '1 tbsp butter or olive oil', 'Fresh dill', 'Black pepper', 'Lemon wedge'],
                    method: ['Beat eggs with black pepper', 'Heat butter in pan on low', 'Pour in eggs, stir gently 3-4 mins', 'Remove from heat while slightly soft', 'Top with smoked salmon and dill'],
                    nutrition: {protein: 32, fibre: 0, omega3: 2, cals: 380},
                    why: 'Salmon provides omega-3s. Eggs offer choline for brain function and vitamin D for mood. High protein breakfast stabilises blood sugar all morning.',
                    tips: 'Cook eggs on LOW heat for creaminess | Budget: use tinned salmon | Quick 5-min meal',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Lentil & Vegetable Soup',
                    prep: 10, cook: 30,
                    helps: ['🫃 Bloating', '⚖️ Weight', '💪 Energy'],
                    ingredients: ['150g red lentils', '1 onion, diced', '2 carrots, diced', '2 celery sticks', '400g tinned tomatoes', '1L vegetable stock', '2 tbsp olive oil', 'Cumin, paprika'],
                    method: ['Sauté onion in oil 5 mins', 'Add carrots, celery, cook 5 mins', 'Add lentils, tomatoes, stock, spices', 'Simmer 25 mins until lentils soft', 'Blend half (optional), season'],
                    nutrition: {protein: 18, fibre: 16, cals: 320},
                    why: 'Lentils are high in fibre and protein (gut health, sustained energy). Vegetables provide antioxidants. Warm soup is comforting and filling.',
                    tips: 'Batch cook: make HUGE pot, freeze portions | Add spinach at end | Serve with wholemeal bread',
                    batch: '✓✓✓ Freezes perfectly'
                },
                dinner: {
                    name: 'Grilled Lamb Chops with Mint Yogurt',
                    prep: 10, cook: 12,
                    helps: ['💪 Energy', '🦴 Bone Health', '🧠 Brain Fog'],
                    ingredients: ['2 lamb chops (200g)', '150g Greek yoghurt', 'Fresh mint, chopped', '1 clove garlic, crushed', '200g roasted veg', 'Olive oil', 'Lemon'],
                    method: ['Season lamb with salt, pepper, oil', 'Grill/pan-fry 5-6 mins each side', 'Mix yoghurt, mint, garlic, lemon', 'Rest lamb 5 mins', 'Serve with yoghurt sauce and veg'],
                    nutrition: {protein: 40, fibre: 5, cals: 550},
                    why: 'Lamb provides iron (prevents fatigue) and zinc (immune support). Yogurt adds probiotics. Mint aids digestion.',
                    tips: 'Use leftover roasted veg | Swap lamb for chicken thighs | Greek yoghurt = protein boost',
                    batch: 'Partial (veg)'
                }
            },
            // DAY 5
            {
                breakfast: {
                    name: 'Apple & Cinnamon Protein Porridge',
                    prep: 5, cook: 8,
                    helps: ['⚖️ Weight', '💪 Energy', '🫃 Bloating'],
                    ingredients: ['50g rolled oats', '250ml oat milk', '1 apple, grated', '1 tsp cinnamon', '1 scoop protein powder (optional)', '10g walnuts'],
                    method: ['Cook oats in milk 5 mins, stirring', 'Add grated apple, cinnamon', 'Stir in protein powder if using', 'Cook 2 mins more', 'Top with walnuts'],
                    nutrition: {protein: 20, fibre: 10, cals: 400},
                    why: 'Oats provide slow-release energy. Cinnamon helps regulate blood sugar. Apple adds fibre. Warm breakfast is comforting.',
                    tips: 'Batch: pre-mix dry ingredients | Use frozen grated apple | Quick stovetop meal',
                    batch: 'Partial (dry mix)'
                },
                lunch: {
                    name: 'Prawn & Avocado Salad',
                    prep: 10, cook: 0,
                    helps: ['🧠 Brain Fog', '⚖️ Weight', '🔥 Hot Flushes'],
                    ingredients: ['150g cooked prawns', '1 avocado, sliced', '100g mixed leaves', '80g cucumber', '1 tbsp olive oil', 'Lemon juice', 'Fresh coriander'],
                    method: ['Arrange leaves on plate', 'Top with prawns, avocado, cucumber', 'Drizzle with oil and lemon', 'Add coriander, season'],
                    nutrition: {protein: 28, fibre: 8, omega3: 1, cals: 420},
                    why: 'Prawns are low-calorie protein. Avocado provides healthy fats for brain function. Light meal keeps energy steady.',
                    tips: 'Use frozen cooked prawns | Add cherry tomatoes | Swap prawns for chicken',
                    batch: '✓ Yes (components)'
                },
                dinner: {
                    name: 'Baked Cod with Mediterranean Vegetables',
                    prep: 15, cook: 25,
                    helps: ['🔥 Hot Flushes', '🦴 Joint Pain', '💪 Energy'],
                    ingredients: ['150g cod fillet', '1 courgette, sliced', '1 red pepper', '10 cherry tomatoes', '50g olives', '2 tbsp olive oil', 'Fresh basil', 'Garlic'],
                    method: ['Preheat oven 200°C', 'Chop veg, place in baking dish', 'Add olives, garlic, oil, season', 'Roast 15 mins', 'Place cod on top, add basil', 'Bake 10 mins more'],
                    nutrition: {protein: 30, fibre: 8, cals: 380},
                    why: 'Cod is lean protein. Tomatoes provide lycopene (anti-inflammatory). Olives offer healthy fats. Mediterranean diet classic.',
                    tips: 'Use any white fish | Batch roast veg | Add chickpeas for more protein',
                    batch: '✓ Yes (veg)'
                }
            },
            // DAY 6
            {
                breakfast: {
                    name: 'Mushroom & Tomato Scramble on Toast',
                    prep: 5, cook: 10,
                    helps: ['💪 Energy', '🧠 Brain Fog', '🦴 Bone Health'],
                    ingredients: ['3 eggs', '100g mushrooms, sliced', '80g cherry tomatoes, halved', '1 slice wholemeal bread', '1 tbsp olive oil', 'Fresh parsley'],
                    method: ['Toast bread', 'Sauté mushrooms in oil 5 mins', 'Add tomatoes, cook 2 mins', 'Beat eggs, pour over veg', 'Scramble 3 mins', 'Serve on toast'],
                    nutrition: {protein: 26, fibre: 6, cals: 420},
                    why: 'Eggs provide vitamin D and protein. Mushrooms are a rare plant source of vitamin D. Tomatoes add antioxidants.',
                    tips: 'Use any mushrooms | Add spinach | Make without toast for lower carb',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Chicken & Quinoa Buddha Bowl',
                    prep: 10, cook: 15,
                    helps: ['💪 Energy', '⚖️ Weight', '🫃 Bloating'],
                    ingredients: ['120g cooked chicken', '100g cooked quinoa', '80g roasted chickpeas', 'Handful spinach', 'Half avocado', '1 tbsp tahini', 'Lemon juice'],
                    method: ['Cook quinoa as per packet', 'Arrange quinoa, chicken, chickpeas in bowl', 'Add spinach and avocado', 'Mix tahini with lemon and water', 'Drizzle dressing over'],
                    nutrition: {protein: 38, fibre: 14, cals: 580},
                    why: 'Quinoa is a complete protein with all amino acids. Chickpeas add fibre. Tahini provides calcium. Balanced meal.',
                    tips: 'Batch: cook quinoa Sunday | Use leftover chicken | Swap chickpeas for edamame',
                    batch: '✓✓ Excellent'
                },
                dinner: {
                    name: 'Turkey Stir-Fry with Ginger',
                    prep: 10, cook: 12,
                    helps: ['🧠 Brain Fog', '💪 Energy', '🫃 Bloating'],
                    ingredients: ['200g turkey breast, sliced', '200g mixed stir-fry veg', '2cm ginger, grated', '2 cloves garlic', '2 tbsp soy sauce', '1 tbsp sesame oil', 'Spring onions'],
                    method: ['Heat sesame oil in wok', 'Stir-fry turkey 5 mins', 'Remove, set aside', 'Add veg, ginger, garlic', 'Stir-fry 5 mins', 'Return turkey, add soy sauce', 'Cook 2 mins, add spring onions'],
                    nutrition: {protein: 42, fibre: 6, cals: 380},
                    why: 'Ginger aids digestion and reduces inflammation. Turkey is lean protein. Quick cooking preserves nutrients.',
                    tips: 'Use frozen stir-fry veg | Swap turkey for prawns | Serve with cauliflower rice',
                    batch: 'Partial (prep veg)'
                }
            },
            // DAY 7
            {
                breakfast: {
                    name: 'Greek Yogurt Parfait with Nuts',
                    prep: 5, cook: 0,
                    helps: ['🔥 Hot Flushes', '🧠 Brain Fog', '⚖️ Weight'],
                    ingredients: ['200g Greek yoghurt', '30g mixed nuts (almonds, walnuts)', '1 tbsp honey', '50g berries', '1 tbsp pumpkin seeds'],
                    method: ['Layer yoghurt in glass', 'Add berries and nuts', 'Drizzle honey', 'Top with pumpkin seeds'],
                    nutrition: {protein: 28, fibre: 7, omega3: 3, cals: 450},
                    why: 'High protein breakfast. Nuts provide omega-3s and healthy fats. Pumpkin seeds offer zinc (hormone balance).',
                    tips: 'Prep in jar for grab-and-go | Dairy-free: coconut yoghurt | Add granola if active',
                    batch: '✓ Yes (1-2 days)'
                },
                lunch: {
                    name: 'Smoked Mackerel Pâté with Oatcakes',
                    prep: 10, cook: 0,
                    helps: ['🔥 Hot Flushes', '🧠 Brain Fog', '😴 Sleep'],
                    ingredients: ['150g smoked mackerel', '50g cream cheese', '1 tbsp lemon juice', '1 tbsp horseradish (optional)', '6 oatcakes', 'Cucumber sticks'],
                    method: ['Flake mackerel, remove bones', 'Mix with cream cheese, lemon, horseradish', 'Blend until smooth', 'Serve with oatcakes and cucumber'],
                    nutrition: {protein: 32, fibre: 4, omega3: 4, cals: 480},
                    why: 'Mackerel is extremely high in omega-3s (even more than salmon). Quick, no-cook lunch. Oatcakes provide fibre.',
                    tips: 'Make pâté in advance (lasts 3 days) | Spread on wholemeal toast | Add fresh dill',
                    batch: '✓✓ Pâté lasts 3 days'
                },
                dinner: {
                    name: 'Roast Chicken with Root Vegetables',
                    prep: 15, cook: 40,
                    helps: ['💪 Energy', '🦴 Joint Pain', '😴 Sleep'],
                    ingredients: ['2 chicken thighs', '2 carrots', '2 parsnips', '1 red onion', '2 tbsp olive oil', 'Fresh rosemary', 'Garlic', 'Salt and pepper'],
                    method: ['Preheat oven 200°C', 'Chop veg into chunks', 'Toss veg with oil, rosemary, garlic', 'Place in roasting tin', 'Put chicken on top, season', 'Roast 40 mins until golden'],
                    nutrition: {protein: 38, fibre: 10, cals: 550},
                    why: 'Chicken provides tryptophan (supports sleep). Root veg offer slow-release energy. Satisfying comfort food.',
                    tips: 'BATCH COOK: roast double, use chicken all week | Freeze portions | Add sweet potato',
                    batch: '✓✓✓ Perfect for batch'
                }
            }
        ],
        bonusDay: {
            breakfast: {
                name: 'High-Protein Shakshuka',
                prep: 5, cook: 15,
                helps: ['💪 Energy', '⚖️ Weight', '🧠 Brain Fog'],
                ingredients: ['2 eggs', '200g tinned tomatoes', '1 red pepper, diced', '1 onion, diced', '2 cloves garlic', '1 tsp cumin', '1 tsp paprika', '50g feta cheese', '2 tbsp olive oil', 'Fresh parsley'],
                method: ['Heat oil, sauté onion and pepper 5 mins', 'Add garlic, cumin, paprika', 'Add tomatoes, simmer 5 mins', 'Make 2 wells, crack eggs in', 'Cover, cook 5 mins until eggs set', 'Top with feta and parsley'],
                nutrition: {protein: 28, fibre: 8, cals: 420},
                why: 'Eggs provide complete protein and choline for brain health. Peppers are rich in vitamin C. Mediterranean spices reduce inflammation.',
                tips: 'Make tomato base ahead | Add spinach for extra nutrients | Serve with wholegrain toast',
                batch: 'Partial (make sauce ahead)'
            },
            lunch: {
                name: 'Beef & Quinoa Power Bowl',
                prep: 10, cook: 20,
                helps: ['💪 Energy', '⚖️ Weight', '🦴 Joint Pain'],
                ingredients: ['150g lean beef mince', '100g cooked quinoa', '100g spinach', '80g cherry tomatoes, halved', '50g red cabbage, shredded', '50g sweetcorn', '1 avocado, sliced', '2 tbsp olive oil', 'Lime juice', '1 tsp cumin'],
                method: ['Cook beef with cumin until browned', 'Arrange quinoa in bowl as base', 'Add beef, spinach, tomatoes, cabbage, sweetcorn', 'Top with avocado slices', 'Drizzle with olive oil and lime'],
                nutrition: {protein: 38, fibre: 12, cals: 580},
                why: 'Beef provides iron and zinc for energy. Quinoa is a complete protein. Rainbow veg = maximum antioxidants. Healthy fats from avocado.',
                tips: 'Batch cook quinoa for week | Swap beef for turkey | Add jalapeños for metabolism boost',
                batch: '✓ Yes (components)'
            },
            dinner: {
                name: 'Herb-Crusted Lamb Chops with Rainbow Vegetables',
                prep: 10, cook: 25,
                helps: ['💪 Energy', '🦴 Joint Pain', '🔥 Hot Flushes'],
                ingredients: ['2 lamb chops (200g)', '1 courgette, sliced', '1 red pepper', '1 yellow pepper', '100g tenderstem broccoli', '80g cherry tomatoes', '2 cloves garlic, minced', 'Fresh rosemary & mint', '2 tbsp olive oil', 'Salt & pepper'],
                method: ['Preheat oven 200°C', 'Rub lamb with garlic, rosemary, olive oil', 'Chop all veg into chunks', 'Toss veg with remaining oil, season', 'Place veg on tray, roast 15 mins', 'Add lamb, roast 10 mins more', 'Rest lamb 5 mins, serve with mint'],
                nutrition: {protein: 42, fibre: 10, omega3: 1, cals: 520},
                why: 'Lamb provides iron, zinc, and B vitamins for energy and hormone production. Rainbow veg offer complete antioxidant protection. Omega-3s reduce inflammation.',
                tips: 'Check lamb temp (63°C medium-rare) | Swap for chicken if preferred | Add sweet potato for extra carbs',
                batch: 'Best fresh (veg can be prepped)'
            }
        }
    },
    week2: {
        theme: 'Metabolic & Digestive Focus',
        color: '#FF9F7F',
        subtitle: 'Meals to support weight management, energy, and gut health',
        symptoms: ['⚖️ Weight Gain', '💪 Energy & Fatigue', '🫃 Bloating', '🍽️ Digestion'],
        eatingOut: {
            title: '🍽️ Eating Out Guide - Week 2',
            best: [
                'Indian: Tandoori chicken, dal soup, vegetable curry (skip rice, choose extra veg)',
                'Thai: Tom yum soup, chicken larb salad, stir-fried vegetables with tofu',
                'Chinese: Steamed fish with ginger, Chinese greens, hot and sour soup',
                'Italian: Minestrone soup, grilled chicken paillard, tricolore salad'
            ],
            priority: [
                'Prioritise: Soup starters (broth-based, not creamy)',
                'Add: Fermented sides (kimchi, pickles, sauerkraut)',
                'Avoid: Fried appetisers, bread, sugary sauces, alcohol'
            ],
            fastFood: [
                'Leon: Grilled chicken box, love soup, superfood salad',
                'Itsu: Miso soup with chicken, vegetable gyoza, edamame',
                'Wasabi: Hot pots, chicken teriyaki salad, miso soup',
                'Sainsburys: Roast chicken pieces, vegetable soup, boiled eggs'
            ],
            tips: 'Order soup first (fills you up) | Choose steamed over fried | Share desserts or skip | Herbal tea instead of wine'
        },
        days: [
            // DAY 1
            {
                breakfast: {
                    name: 'Mushroom & Herb Omelette',
                    prep: 5, cook: 10,
                    helps: ['💪 Energy', '⚖️ Weight', '🧠 Brain Fog'],
                    ingredients: ['3 eggs', '100g mushrooms, sliced', '1 tbsp olive oil', 'Fresh thyme and parsley', '30g grated Cheddar cheese', 'Salt and pepper'],
                    method: ['Heat oil in non-stick pan', 'Fry mushrooms 5 mins until golden', 'Beat eggs with herbs, salt, pepper', 'Pour eggs over mushrooms', 'Cook 3 mins, add cheese to one side', 'Fold omelette, cook 2 mins more', 'Serve immediately'],
                    nutrition: {protein: 28, fibre: 3, cals: 380},
                    why: 'Eggs provide complete protein and choline for fat metabolism. Mushrooms add B vitamins for energy. High protein breakfast reduces cravings throughout the day.',
                    tips: 'Use any mushrooms you have | Add spinach for extra nutrients | Serve with tomatoes',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Hearty Lentil & Vegetable Soup',
                    prep: 10, cook: 30,
                    helps: ['🍽️ Digestion', '⚖️ Weight', '💪 Energy'],
                    ingredients: ['150g red lentils', '1 carrot, diced', '1 celery stick, diced', '1 onion, diced', '2 cloves garlic, minced', '400g tinned tomatoes', '800ml vegetable stock', '1 tsp cumin', '2 tbsp olive oil', 'Fresh coriander', 'Lemon wedge'],
                    method: ['Heat oil, fry onion, carrot, celery 5 mins', 'Add garlic and cumin, cook 1 min', 'Add lentils, tomatoes, stock', 'Simmer 25 mins until lentils soft', 'Season, add coriander', 'Serve with lemon wedge'],
                    nutrition: {protein: 18, fibre: 16, cals: 380},
                    why: 'Lentils are fibre powerhouses (support gut bacteria, aid digestion). Plant protein keeps you full. Soup format increases satiety with fewer calories.',
                    tips: 'Batch cook: makes 4 portions | Freeze well | Add spinach at end | Blend for smooth texture',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Lemon Garlic Chicken with Roasted Courgettes',
                    prep: 10, cook: 25,
                    helps: ['⚖️ Weight', '💪 Energy', '🫃 Bloating'],
                    ingredients: ['150g chicken breast', '2 courgettes, sliced lengthways', '4 cloves garlic, sliced', '2 tbsp olive oil', 'Juice of 1 lemon', 'Fresh rosemary', 'Salt and pepper'],
                    method: ['Preheat oven to 200°C', 'Toss courgettes with 1 tbsp oil, half the garlic, season', 'Spread on baking tray', 'Rub chicken with lemon juice, remaining oil and garlic', 'Add fresh rosemary', 'Place chicken on courgettes', 'Bake 25 mins until chicken cooked through', 'Squeeze extra lemon over'],
                    nutrition: {protein: 38, fibre: 6, cals: 380},
                    why: 'Lean chicken supports muscle maintenance during weight loss. Courgettes are low-calorie, high water content (aids hydration and reduces bloating). Garlic supports digestion.',
                    tips: 'Batch: cook 2-3 chicken breasts | Save for tomorrow lunch | Add cherry tomatoes',
                    batch: '✓✓ Yes'
                }
            },
            // DAY 2
            {
                breakfast: {
                    name: 'Baked Eggs with Tomatoes & Peppers',
                    prep: 10, cook: 20,
                    helps: ['💪 Energy', '🫃 Bloating', '⚖️ Weight'],
                    ingredients: ['2 eggs', '200g cherry tomatoes', '1 red pepper, sliced', '1 onion, sliced', '2 cloves garlic, minced', '2 tbsp olive oil', '1 tsp paprika', 'Fresh basil', 'Salt and pepper'],
                    method: ['Preheat oven to 180°C', 'Heat oil in ovenproof pan', 'Fry onion and pepper 5 mins', 'Add garlic and paprika, cook 1 min', 'Add tomatoes, cook 5 mins until soft', 'Make 2 wells, crack eggs in', 'Bake 8-10 mins until eggs set', 'Garnish with basil'],
                    nutrition: {protein: 18, fibre: 6, cals: 320},
                    why: 'Eggs provide protein to start the day. Peppers and tomatoes add fibre and vitamin C. One-pan meal saves time. Low carb prevents mid-morning energy crashes.',
                    tips: 'Add feta cheese on top | Use tinned tomatoes | Make for 2-3 portions | Serve with wholegrain toast',
                    batch: '✓ Yes (2-3 portions)'
                },
                lunch: {
                    name: 'Tuscan White Bean Soup',
                    prep: 10, cook: 25,
                    helps: ['🍽️ Digestion', '⚖️ Weight', '💪 Energy'],
                    ingredients: ['400g tinned cannellini beans', '100g kale, chopped', '1 carrot, diced', '1 celery stick, diced', '1 onion, diced', '2 cloves garlic, minced', '700ml vegetable stock', '2 tbsp olive oil', 'Fresh rosemary', 'Lemon juice', 'Parmesan to serve'],
                    method: ['Heat oil, fry onion, carrot, celery 5 mins', 'Add garlic and rosemary, cook 1 min', 'Add beans and stock, simmer 15 mins', 'Add kale, cook 5 mins', 'Blend half for creamy texture (optional)', 'Add lemon juice, season', 'Serve with grated Parmesan'],
                    nutrition: {protein: 20, fibre: 18, cals: 380},
                    why: 'White beans are high in resistant starch (feeds good gut bacteria). Kale adds calcium and iron. Soup is very filling but low in calories.',
                    tips: 'Batch: makes 3-4 portions | Freeze well | Add cooked chicken for extra protein | Use any leafy greens',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Spiced Lamb Meatballs with Greek Salad',
                    prep: 15, cook: 20,
                    helps: ['⚖️ Weight', '💪 Energy', '🧠 Brain Fog'],
                    ingredients: ['300g lamb mince (10% fat)', '1 egg', '1 tsp cumin', '1 tsp coriander', 'Fresh mint', '2 tbsp olive oil', '100g cucumber, diced', '100g cherry tomatoes, halved', '50g feta cheese', '50g Kalamata olives', 'Lemon juice'],
                    method: ['Mix lamb, egg, spices, chopped mint', 'Form into 12 small meatballs', 'Heat oil, fry meatballs 15-18 mins until cooked', 'Meanwhile: combine cucumber, tomatoes, olives', 'Crumble feta over salad', 'Dress with lemon and olive oil', 'Serve meatballs on salad'],
                    nutrition: {protein: 42, fibre: 5, cals: 480},
                    why: 'Lamb provides iron and B12 (supports energy production). High protein keeps you full. Fresh salad aids digestion. Spices boost metabolism.',
                    tips: 'Batch: freeze raw meatballs | Use in pitta for lunch | Swap lamb for turkey',
                    batch: '✓✓ Yes'
                }
            },
            // DAY 3
            {
                breakfast: {
                    name: 'Poached Eggs with Avocado & Spinach',
                    prep: 5, cook: 8,
                    helps: ['💪 Energy', '🧠 Brain Fog', '⚖️ Weight'],
                    ingredients: ['2 eggs', 'Half avocado, sliced', 'Large handful spinach', '1 tbsp olive oil', '1 tsp white vinegar', '2 slices wholegrain bread', 'Chilli flakes (optional)', 'Salt and pepper'],
                    method: ['Bring pan of water to simmer, add vinegar', 'Crack eggs into water, poach 3-4 mins', 'Meanwhile: wilt spinach in pan with olive oil', 'Toast bread', 'Layer spinach, avocado on toast', 'Top with poached eggs', 'Season with salt, pepper, chilli flakes'],
                    nutrition: {protein: 22, fibre: 12, cals: 450},
                    why: 'Eggs provide complete protein and choline. Avocado adds healthy fats (supports hormone production). Spinach rich in magnesium (aids energy). Satisfying breakfast prevents overeating.',
                    tips: 'Poach eggs ahead, reheat in hot water | Swap bread for sweet potato | Add cherry tomatoes',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Asian Chicken Noodle Soup',
                    prep: 10, cook: 20,
                    helps: ['🍽️ Digestion', '💪 Energy', '🫃 Bloating'],
                    ingredients: ['150g chicken breast, thinly sliced', '100g rice noodles', '1 litre chicken stock', '100g pak choi, chopped', '50g mushrooms, sliced', '2cm ginger, grated', '2 cloves garlic, minced', '1 tbsp soy sauce', 'Spring onions', 'Fresh coriander', 'Lime wedge'],
                    method: ['Bring stock to boil', 'Add ginger, garlic, soy sauce', 'Add chicken, simmer 8 mins', 'Add mushrooms, cook 3 mins', 'Add noodles, cook per packet (3-4 mins)', 'Add pak choi, cook 2 mins', 'Serve with spring onions, coriander, lime'],
                    nutrition: {protein: 32, fibre: 4, cals: 380},
                    why: 'Bone broth supports gut lining. Ginger aids digestion. Protein-rich but light and hydrating. Rice noodles are gentle on digestion.',
                    tips: 'Use ready-made stock | Batch: make broth ahead | Freeze without noodles | Add more veg',
                    batch: '✓✓ Yes (broth only)'
                },
                dinner: {
                    name: 'Baked Salmon with Asparagus & Lemon',
                    prep: 5, cook: 15,
                    helps: ['💪 Energy', '🧠 Brain Fog', '🦴 Joint Pain'],
                    ingredients: ['150g salmon fillet', '200g asparagus spears', '2 tbsp olive oil', 'Juice and zest of 1 lemon', '2 cloves garlic, sliced', 'Fresh dill', 'Salt and pepper'],
                    method: ['Preheat oven to 200°C', 'Place salmon and asparagus on baking tray', 'Drizzle with olive oil', 'Add garlic slices, lemon zest', 'Season well', 'Bake 12-15 mins until salmon flakes', 'Squeeze lemon juice over', 'Garnish with dill'],
                    nutrition: {protein: 36, fibre: 5, omega3: 2.5, cals: 420},
                    why: 'Salmon omega-3s reduce inflammation (aids weight management and joint pain). Asparagus is natural diuretic (reduces bloating). Quick, simple, nutritious.',
                    tips: 'Frozen salmon works | Add green beans | Serve with quinoa | Save for tomorrow lunch',
                    batch: 'Partial'
                }
            },
            // DAY 4
            {
                breakfast: {
                    name: 'Courgette & Feta Frittata',
                    prep: 10, cook: 20,
                    helps: ['⚖️ Weight', '💪 Energy', '🫃 Bloating'],
                    ingredients: ['4 eggs', '1 courgette, grated (squeeze out water)', '50g feta cheese, crumbled', '1 onion, finely diced', '1 tbsp olive oil', 'Fresh mint', 'Salt and pepper'],
                    method: ['Preheat oven to 180°C', 'Heat oil in ovenproof pan', 'Fry onion 3 mins', 'Add grated courgette, cook 2 mins', 'Beat eggs with salt, pepper, mint', 'Pour eggs over veg', 'Scatter feta on top', 'Bake 12-15 mins until set', 'Slice into wedges'],
                    nutrition: {protein: 30, fibre: 4, cals: 380},
                    why: 'Frittata is meal-prep friendly (eat hot or cold for 2-3 days). Courgette adds volume without calories. High protein keeps hunger at bay.',
                    tips: 'Batch: makes 4 portions | Great for packed lunches | Add sun-dried tomatoes | Serve with salad',
                    batch: '✓✓✓ Excellent'
                },
                lunch: {
                    name: 'Spiced Carrot & Coriander Soup',
                    prep: 10, cook: 25,
                    helps: ['🍽️ Digestion', '💪 Energy', '⚖️ Weight'],
                    ingredients: ['500g carrots, chopped', '1 onion, diced', '2 cloves garlic, minced', '2cm ginger, grated', '1 tsp cumin', '1 tsp coriander', '800ml vegetable stock', '2 tbsp olive oil', 'Fresh coriander', 'Greek yoghurt to serve'],
                    method: ['Heat oil, fry onion 5 mins', 'Add garlic, ginger, spices, cook 1 min', 'Add carrots and stock', 'Simmer 20 mins until carrots soft', 'Blend until smooth', 'Season to taste', 'Serve with dollop yoghurt and coriander'],
                    nutrition: {protein: 8, fibre: 12, cals: 280},
                    why: 'Carrots are high in beta-carotene (supports skin and eye health). Warming spices aid digestion. Low calorie but very filling. Ginger reduces bloating.',
                    tips: 'Batch: makes 4-5 portions | Freeze well | Add red lentils for extra protein | Serve with wholegrain bread',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Beef & Vegetable Stir-Fry',
                    prep: 15, cook: 12,
                    helps: ['💪 Energy', '⚖️ Weight', '🧠 Brain Fog'],
                    ingredients: ['150g beef sirloin, thinly sliced', '200g mixed stir-fry veg (broccoli, peppers, baby corn)', '2 cloves garlic, minced', '1 tbsp oyster sauce', '1 tbsp soy sauce', '1 tbsp sesame oil', '1 tsp cornflour', 'Spring onions', 'Chilli flakes (optional)'],
                    method: ['Toss beef with cornflour', 'Heat sesame oil in wok on high', 'Stir-fry beef 3-4 mins, remove', 'Add garlic, cook 30 secs', 'Add veg, stir-fry 5 mins', 'Return beef, add sauces', 'Toss well 2 mins', 'Garnish with spring onions, chilli'],
                    nutrition: {protein: 36, fibre: 6, cals: 420},
                    why: 'Beef provides iron and B12 (prevents fatigue). High protein aids muscle maintenance. Vegetables add fibre and nutrients. Quick and satisfying.',
                    tips: 'Freeze beef 20 mins (easier to slice thinly) | Use any veg | Serve over cauliflower rice',
                    batch: 'No - best fresh'
                }
            },
            // DAY 5
            {
                breakfast: {
                    name: 'Shakshuka (Middle Eastern Eggs)',
                    prep: 10, cook: 20,
                    helps: ['💪 Energy', '🫃 Bloating', '⚖️ Weight'],
                    ingredients: ['2 eggs', '200g tinned tomatoes', '1 red pepper, diced', '1 onion, diced', '2 cloves garlic, minced', '1 tsp cumin', '1 tsp paprika', '2 tbsp olive oil', 'Fresh parsley', 'Salt and pepper'],
                    method: ['Heat oil, fry onion and pepper 5 mins', 'Add garlic, cumin, paprika, cook 1 min', 'Add tinned tomatoes, simmer 10 mins', 'Make 2 wells in sauce', 'Crack eggs into wells', 'Cover, cook 5 mins until eggs set', 'Garnish with parsley'],
                    nutrition: {protein: 18, fibre: 8, cals: 360},
                    why: 'Eggs provide protein. Tomatoes and peppers rich in antioxidants. Spices aid digestion and metabolism. Filling savoury breakfast prevents sugar cravings.',
                    tips: 'Make sauce ahead | Serve with wholegrain pitta | Add feta cheese | Makes 2-3 portions',
                    batch: '✓✓ Yes (sauce)'
                },
                lunch: {
                    name: 'Classic Minestrone Soup',
                    prep: 15, cook: 30,
                    helps: ['🍽️ Digestion', '⚖️ Weight', '💪 Energy'],
                    ingredients: ['200g tinned cannellini beans', '100g green beans, chopped', '1 carrot, diced', '1 celery stick, diced', '1 courgette, diced', '1 onion, diced', '2 cloves garlic, minced', '400g tinned tomatoes', '800ml vegetable stock', '50g small pasta', '2 tbsp olive oil', 'Fresh basil', 'Parmesan'],
                    method: ['Heat oil, fry onion, carrot, celery 5 mins', 'Add garlic, cook 1 min', 'Add tomatoes, stock, bring to boil', 'Add courgette, beans, simmer 15 mins', 'Add pasta, cook per packet (8-10 mins)', 'Add green beans last 5 mins', 'Season, add basil', 'Serve with Parmesan'],
                    nutrition: {protein: 16, fibre: 14, cals: 380},
                    why: 'Vegetable-packed soup provides massive fibre (supports gut health). Low calorie but very filling. Pasta adds energy without heaviness.',
                    tips: 'Batch: makes 5-6 portions | Freeze without pasta | Add leftover roast chicken | Use any veg',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Roasted Chicken Thighs with Root Vegetables',
                    prep: 15, cook: 40,
                    helps: ['⚖️ Weight', '💪 Energy', '🦴 Bone Health'],
                    ingredients: ['2 chicken thighs (skin on)', '200g carrots, chunked', '200g parsnips, chunked', '100g red onion, wedged', '3 cloves garlic, whole', '2 tbsp olive oil', 'Fresh thyme and rosemary', 'Salt and pepper'],
                    method: ['Preheat oven to 200°C', 'Toss root veg with 1 tbsp oil, herbs, season', 'Spread in roasting tin', 'Rub chicken with remaining oil, season well', 'Place chicken on veg', 'Roast 40 mins until chicken golden', 'Rest 5 mins before serving'],
                    nutrition: {protein: 36, fibre: 10, cals: 480},
                    why: 'Chicken thighs have more flavour and stay moist. Root vegetables provide complex carbs for sustained energy. One-tray meal (easy cleanup).',
                    tips: 'Remove skin after cooking to reduce calories | Batch: roast extra veg | Save for lunch wraps',
                    batch: '✓ Yes'
                }
            },
            // DAY 6
            {
                breakfast: {
                    name: 'Greek-Style Scrambled Eggs with Tomatoes',
                    prep: 5, cook: 8,
                    helps: ['💪 Energy', '⚖️ Weight', '🧠 Brain Fog'],
                    ingredients: ['3 eggs', '100g cherry tomatoes, halved', '30g feta cheese, crumbled', '1 tbsp olive oil', 'Fresh oregano', 'Black pepper'],
                    method: ['Heat oil in pan', 'Add tomatoes, cook 3 mins until soft', 'Beat eggs with oregano and pepper', 'Pour eggs over tomatoes', 'Scramble gently 3-4 mins', 'Remove from heat', 'Top with crumbled feta', 'Serve immediately'],
                    nutrition: {protein: 26, fibre: 2, cals: 340},
                    why: 'High protein breakfast stabilises blood sugar and prevents mid-morning snacking. Feta adds calcium. Tomatoes provide lycopene. Quick and satisfying.',
                    tips: 'Add spinach for extra nutrients | Serve with wholegrain toast | Use any cheese',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Roasted Tomato & Red Pepper Soup',
                    prep: 10, cook: 35,
                    helps: ['🍽️ Digestion', '💪 Energy', '⚖️ Weight'],
                    ingredients: ['500g tomatoes, halved', '2 red peppers, chopped', '1 onion, quartered', '3 cloves garlic, whole', '2 tbsp olive oil', '500ml vegetable stock', '1 tsp smoked paprika', 'Fresh basil', 'Greek yoghurt to serve'],
                    method: ['Preheat oven to 200°C', 'Toss tomatoes, peppers, onion, garlic with oil', 'Roast 25 mins', 'Transfer to pot, add stock and paprika', 'Simmer 10 mins', 'Blend until smooth', 'Season to taste', 'Serve with yoghurt and basil'],
                    nutrition: {protein: 10, fibre: 8, cals: 280},
                    why: 'Roasting vegetables intensifies flavour without added calories. Red peppers high in vitamin C. Low calorie but filling. Supports immune function.',
                    tips: 'Batch: makes 4 portions | Freeze well | Add white beans for protein | Serve with cheese on toast',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Turkey Burgers with Coleslaw',
                    prep: 15, cook: 15,
                    helps: ['⚖️ Weight', '💪 Energy', '🍽️ Digestion'],
                    ingredients: ['300g turkey mince', '1 egg', '1 tbsp Dijon mustard', 'Fresh thyme', '2 tbsp olive oil', '200g cabbage, shredded', '100g carrot, grated', '2 tbsp Greek yoghurt', '1 tbsp lemon juice', 'Salt and pepper'],
                    method: ['Mix turkey, egg, mustard, thyme, season', 'Form into 3 burgers', 'Heat oil, fry burgers 6-7 mins each side', 'Meanwhile: mix cabbage, carrot', 'Whisk yoghurt with lemon juice', 'Toss coleslaw with dressing', 'Serve burgers with coleslaw'],
                    nutrition: {protein: 42, fibre: 6, cals: 420},
                    why: 'Turkey is lean protein (supports weight loss). Coleslaw adds crunch and fibre. Skip the bun to reduce bloating and calories. Very satisfying.',
                    tips: 'Batch: freeze raw burgers | Serve in wholegrain bun if desired | Add pickles | Make slaw ahead',
                    batch: '✓✓ Yes'
                }
            },
            // DAY 7
            {
                breakfast: {
                    name: 'Baked Egg Muffins with Peppers & Ham',
                    prep: 10, cook: 18,
                    helps: ['⚖️ Weight', '💪 Energy', '🫃 Bloating'],
                    ingredients: ['6 eggs', '100g diced ham', '1 red pepper, finely diced', '50g grated Cheddar', 'Handful fresh chives', '1 tbsp olive oil (for tin)', 'Salt and pepper'],
                    method: ['Preheat oven to 180°C', 'Grease 6-hole muffin tin', 'Whisk eggs with salt, pepper, chives', 'Divide ham and pepper between holes', 'Pour egg mixture over', 'Top with cheese', 'Bake 15-18 mins until set', 'Cool slightly before removing'],
                    nutrition: {protein: 32, fibre: 2, cals: 380},
                    why: 'Perfect grab-and-go breakfast. High protein keeps you full for hours. Make ahead for busy mornings. Portable and meal-prep friendly.',
                    tips: 'Batch: makes 6 muffins (2-3 days) | Freeze well | Use any veg | Add spinach',
                    batch: '✓✓✓ Excellent'
                },
                lunch: {
                    name: 'Creamy Butternut Squash Soup',
                    prep: 10, cook: 30,
                    helps: ['🍽️ Digestion', '⚖️ Weight', '💪 Energy'],
                    ingredients: ['600g butternut squash, cubed', '1 onion, diced', '2 cloves garlic, minced', '1 tsp cumin', '700ml vegetable stock', '2 tbsp olive oil', '2 tbsp Greek yoghurt', 'Pumpkin seeds to serve', 'Fresh sage'],
                    method: ['Heat oil, fry onion 5 mins', 'Add garlic and cumin, cook 1 min', 'Add squash and stock', 'Simmer 25 mins until squash soft', 'Blend until smooth', 'Stir in yoghurt', 'Season to taste', 'Serve with pumpkin seeds and sage'],
                    nutrition: {protein: 10, fibre: 10, cals: 280},
                    why: 'Butternut squash is high in beta-carotene (supports skin health). Naturally sweet and creamy without cream. Very filling but low calorie.',
                    tips: 'Batch: makes 4 portions | Freeze well | Add red lentils for protein | Roast squash first for deeper flavour',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Pan-Fried Sea Bass with Green Beans',
                    prep: 10, cook: 15,
                    helps: ['💪 Energy', '🧠 Brain Fog', '⚖️ Weight'],
                    ingredients: ['150g sea bass fillet', '200g green beans, trimmed', '100g cherry tomatoes', '3 cloves garlic, sliced', '2 tbsp olive oil', 'Juice of half lemon', 'Fresh parsley', 'Salt and pepper'],
                    method: ['Season fish with salt and pepper', 'Heat 1 tbsp oil in pan', 'Fry fish skin-side down 5 mins', 'Flip, cook 3 mins more, remove', 'Same pan: add remaining oil, garlic', 'Add green beans and tomatoes', 'Sauté 6 mins until beans tender', 'Season, add lemon juice', 'Serve fish on vegetables with parsley'],
                    nutrition: {protein: 34, fibre: 6, cals: 380},
                    why: 'Sea bass is lean protein with omega-3s. Green beans provide fibre and nutrients. Simple, elegant, quick to cook. Light but satisfying.',
                    tips: 'Any white fish works | Frozen green beans fine | Add capers | Serve with new potatoes',
                    batch: 'No - best fresh'
                }
            }
        ],
        bonusDay: {
            breakfast: {
                name: 'Spanish Tortilla (Potato & Onion Omelette)',
                prep: 10, cook: 25,
                helps: ['💪 Energy', '⚖️ Weight', '🫃 Bloating'],
                ingredients: ['4 eggs', '200g potatoes, thinly sliced', '1 onion, thinly sliced', '3 tbsp olive oil', 'Salt and pepper'],
                method: ['Heat 2 tbsp oil in pan', 'Fry potatoes and onion 15 mins until tender', 'Beat eggs with salt and pepper', 'Add potato mix to eggs, stir gently', 'Heat remaining oil in same pan', 'Pour egg mixture in, cook 5 mins', 'Flip using plate, cook 5 mins more', 'Serve warm or cold'],
                nutrition: {protein: 24, fibre: 4, cals: 420},
                why: 'Traditional Spanish dish perfect for meal prep. Eat hot or cold for 2-3 days. Potatoes provide sustained energy. High protein keeps hunger at bay.',
                tips: 'Batch: makes 4-6 portions | Great for packed lunches | Add spinach | Serve with salad',
                batch: '✓✓✓ Excellent'
            },
            lunch: {
                name: 'Thai-Style Prawn Soup (Tom Yum)',
                prep: 10, cook: 15,
                helps: ['🍽️ Digestion', '💪 Energy', '⚖️ Weight'],
                ingredients: ['150g raw prawns', '800ml chicken or vegetable stock', '100g mushrooms, sliced', '50g cherry tomatoes, halved', '2cm galangal or ginger, sliced', '2 lime leaves (or zest)', '1 lemongrass stalk, bruised', '1 red chilli, sliced', '2 tbsp fish sauce', 'Lime juice', 'Fresh coriander'],
                method: ['Bring stock to boil', 'Add galangal, lime leaves, lemongrass', 'Simmer 5 mins', 'Add mushrooms and tomatoes, cook 3 mins', 'Add prawns, cook 4 mins until pink', 'Add fish sauce and chilli', 'Remove from heat, add lime juice', 'Garnish with coriander'],
                nutrition: {protein: 26, fibre: 3, cals: 220},
                why: 'Light, spicy, aromatic soup boosts metabolism. Prawns are lean protein. Low calorie but very satisfying. Broth hydrates and aids digestion.',
                tips: 'Find ingredients in Asian supermarkets | Substitute with easy-to-find ginger | Add rice noodles',
                batch: 'No - best fresh'
            },
            dinner: {
                name: 'Slow-Cooked Beef & Vegetable Casserole',
                prep: 15, cook: 120,
                helps: ['💪 Energy', '⚖️ Weight', '🧠 Brain Fog'],
                ingredients: ['300g beef stewing steak, cubed', '2 carrots, chunked', '2 celery sticks, chopped', '1 onion, diced', '200g mushrooms, halved', '2 tbsp tomato puree', '400ml beef stock', '2 tbsp olive oil', 'Fresh thyme and bay leaf', 'Salt and pepper'],
                method: ['Preheat oven to 160°C (or use slow cooker)', 'Heat oil, brown beef all over', 'Remove beef, fry onion 5 mins', 'Add carrots, celery, mushrooms, cook 3 mins', 'Return beef, add tomato puree, stock, herbs', 'Cover, cook in oven 2 hours (or slow cooker 6 hours)', 'Season to taste', 'Serve with steamed greens'],
                nutrition: {protein: 38, fibre: 8, cals: 420},
                why: 'Slow cooking makes beef tender and flavourful. High protein and iron support energy. One-pot wonder. Perfect for batch cooking.',
                tips: 'Batch: makes 4 portions | Freeze well | Use slow cooker | Add red wine | Serve with mashed cauliflower',
                batch: '✓✓✓ Excellent'
            }
        },
        batchCooking: {
            sunday: [
                'Make egg muffins (Day 7 breakfast - 6 muffins)',
                'Prepare frittata (Day 4 breakfast - 4 portions)',
                'Cook Spanish tortilla (Bonus breakfast - 6 portions)',
                'Make 3 soups: lentil, white bean, minestrone (12-15 portions total)',
                'Grill 4 chicken breasts for salads and wraps',
                'Boil 8-10 eggs for quick snacks',
                'Make beef casserole (Bonus dinner - 4 portions)',
                'Prep coleslaw vegetables (store separately from dressing)',
                'Cook lamb meatballs (Day 2 dinner - freeze half)'
            ],
            wednesday: [
                'Make 2 more soups: carrot & coriander, tomato & pepper (8 portions)',
                'Prepare shakshuka sauce (Day 5 breakfast)',
                'Grill 2 more chicken breasts',
                'Make another batch egg muffins if needed',
                'Chop vegetables for stir-fries (store in containers)',
                'Prepare turkey burgers (Day 6 - shape and refrigerate)'
            ],
            storage: [
                'Egg muffins: fridge 3 days, freeze 3 months',
                'Frittata: fridge 3 days',
                'Spanish tortilla: fridge 3 days',
                'All soups: fridge 5 days, freeze 3 months',
                'Cooked chicken: fridge 3-4 days',
                'Boiled eggs: fridge 7 days',
                'Beef casserole: fridge 3 days, freeze 3 months',
                'Shakshuka sauce: fridge 5 days',
                'Raw burgers/meatballs: freeze 3 months'
            ],
            tips: [
                'Label soup containers with date and type',
                'Freeze soups in portion sizes (single or double)',
                'Store egg muffins individually for grab-and-go',
                'Keep raw and cooked foods separate',
                'Use glass containers for soups (easier to reheat)',
                'Portion and freeze casseroles in individual servings',
                'Defrost overnight in fridge for food safety'
            ]
        }
    },
    week3: {
        theme: 'Musculoskeletal & Skin Focus',
        color: '#8EBFB5',
        subtitle: 'Meals to support joints, bones, and skin health',
        symptoms: ['🦴 Joint Pain', '🦴 Bone Health', '💆 Skin Health'],
        eatingOut: {
            title: '🍽️ Eating Out Guide - Week 3',
            best: [
                'Japanese: Salmon teriyaki, bone broth ramen, edamame, seaweed salad',
                'Vietnamese: Pho (beef bone broth), spring rolls, grilled fish with veg',
                'Korean: Bone broth soup, bibimbap, grilled mackerel, kimchi',
                'Steak Restaurant: Grilled steak, bone marrow, roasted vegetables, side salad'
            ],
            priority: [
                'Prioritise: Bone broth soups, collagen-rich foods (skin-on fish, slow-cooked meats)',
                'Add: Leafy greens (calcium), oily fish (vitamin D), fermented foods',
                'Avoid: Inflammatory foods (excessive sugar, processed meats, trans fats)'
            ],
            fastFood: [
                'Wagamama: Chicken ramen, salmon donburi, edamame',
                'Yo! Sushi: Salmon nigiri, miso soup, seaweed salad, edamame',
                'Chipotle: Chicken bowl with extra veg, black beans, salsa (skip rice)',
                'Marks & Spencer: Salmon fillet, pre-cooked bone broth, mixed salad'
            ],
            tips: 'Order bone broth-based soups when available | Choose grilled fish with skin | Add fermented sides | Prioritise collagen-rich cuts'
        },
        days: [
            // DAY 1
            {
                breakfast: {
                    name: 'Smoked Salmon & Cream Cheese Omelette',
                    prep: 5, cook: 8,
                    helps: ['🦴 Bone Health', '💆 Skin Health', '🧠 Brain Fog'],
                    ingredients: ['3 eggs', '50g smoked salmon, torn', '30g cream cheese', '1 tbsp olive oil', 'Fresh dill', 'Black pepper', 'Lemon wedge'],
                    method: ['Beat eggs with black pepper', 'Heat oil in non-stick pan', 'Pour in eggs, cook 2 mins', 'Add cream cheese and salmon to one half', 'Fold omelette, cook 2 mins more', 'Garnish with dill', 'Serve with lemon wedge'],
                    nutrition: {protein: 32, omega3: 2, cals: 420},
                    why: 'Salmon provides omega-3s and vitamin D (both crucial for bone health). Eggs supply vitamin K2 (directs calcium to bones). Protein supports collagen production for skin.',
                    tips: 'Use leftover smoked salmon | Add spinach | Serve with avocado',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Rainbow Roasted Vegetable & Feta Salad',
                    prep: 15, cook: 30,
                    helps: ['💆 Skin Health', '🦴 Bone Health', '🫃 Bloating'],
                    ingredients: ['200g butternut squash, cubed', '1 red pepper, chunked', '1 courgette, sliced', '100g cherry tomatoes', '100g red onion, wedged', '100g feta cheese, cubed', '100g rocket leaves', '3 tbsp olive oil', '1 tbsp balsamic vinegar', 'Pumpkin seeds', 'Fresh basil'],
                    method: ['Preheat oven to 200°C', 'Toss veg with 2 tbsp oil, season', 'Roast 30 mins until tender and charred', 'Cool slightly', 'Arrange rocket on plates', 'Top with roasted veg', 'Add feta cubes', 'Whisk remaining oil with vinegar', 'Drizzle over salad', 'Scatter pumpkin seeds and basil'],
                    nutrition: {protein: 18, fibre: 10, cals: 420},
                    why: 'Rainbow vegetables provide antioxidants (fight skin aging). Feta adds calcium for bones. Pumpkin seeds contain zinc (essential for skin repair). Vitamin A from squash supports skin cell turnover.',
                    tips: 'Batch: roast double portions | Add chickpeas for extra protein | Use any seasonal veg',
                    batch: '✓✓ Yes'
                },
                dinner: {
                    name: 'Slow-Cooked Lamb Shanks with Root Vegetables',
                    prep: 15, cook: 150,
                    helps: ['🦴 Joint Pain', '🦴 Bone Health', '💆 Skin Health'],
                    ingredients: ['2 lamb shanks', '2 carrots, chunked', '2 parsnips, chunked', '1 onion, quartered', '3 cloves garlic, whole', '400ml beef stock', '200ml red wine (or extra stock)', '2 tbsp tomato puree', 'Fresh rosemary and thyme', '2 tbsp olive oil'],
                    method: ['Preheat oven to 160°C', 'Season lamb, brown in hot oil all over', 'Remove lamb, set aside', 'Fry onion and garlic 3 mins', 'Add carrots, parsnips, herbs', 'Return lamb, add tomato puree, wine, stock', 'Cover tightly, cook 2.5 hours until meat falls off bone', 'Season to taste', 'Serve with greens'],
                    nutrition: {protein: 42, collagen: 'high', cals: 520},
                    why: 'Lamb shanks are collagen-rich (supports joint health and skin elasticity). Slow cooking breaks down connective tissue into gelatin (provides building blocks for cartilage). Bone marrow provides nutrients for bone health.',
                    tips: 'Batch: makes 4 portions | Freeze well | Use slow cooker on low 6-8 hours | Save bones for broth',
                    batch: '✓✓✓ Excellent'
                }
            },
            // DAY 2
            {
                breakfast: {
                    name: 'Boiled Eggs with Asparagus Soldiers',
                    prep: 5, cook: 10,
                    helps: ['🦴 Bone Health', '💆 Skin Health', '💪 Energy'],
                    ingredients: ['3 eggs', '150g asparagus spears', '1 tbsp olive oil', 'Sea salt flakes', 'Black pepper', 'Lemon wedge'],
                    method: ['Bring pan of water to boil', 'Add eggs, boil 6-7 mins (soft-boiled)', 'Meanwhile: steam or grill asparagus 5 mins', 'Drizzle asparagus with olive oil', 'Season with salt and pepper', 'Serve eggs with asparagus for dipping', 'Squeeze lemon over asparagus'],
                    nutrition: {protein: 24, vitamin_k: 'high', cals: 320},
                    why: 'Egg yolks contain vitamin D and K2 (essential for bone health). Asparagus is rich in vitamin K (helps bones absorb calcium). Biotin in eggs supports skin, hair, nails.',
                    tips: 'Add smoked salmon | Use green beans instead | Serve with wholegrain toast',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Asian Beef Bone Broth Soup',
                    prep: 10, cook: 20,
                    helps: ['🦴 Joint Pain', '💆 Skin Health', '🍽️ Digestion'],
                    ingredients: ['300ml bone broth (homemade or bought)', '100g beef sirloin, thinly sliced', '100g rice noodles', '100g pak choi, chopped', '50g mushrooms, sliced', '2cm ginger, grated', '2 cloves garlic, minced', '1 tbsp soy sauce', 'Spring onions', 'Fresh coriander', 'Lime wedge'],
                    method: ['Bring bone broth to boil', 'Add ginger, garlic, soy sauce', 'Add beef, simmer 5 mins', 'Add mushrooms, cook 3 mins', 'Add noodles, cook per packet (3-4 mins)', 'Add pak choi last 2 mins', 'Serve with spring onions, coriander, lime'],
                    nutrition: {protein: 28, collagen: 'high', cals: 380},
                    why: 'Bone broth is rich in collagen, glucosamine, chondroitin (all support joint health). Amino acids glycine and proline help rebuild cartilage. Minerals from bones support bone density.',
                    tips: 'Make bone broth Sunday (see batch cooking) | Use shop-bought if needed | Add chilli oil',
                    batch: 'Partial (broth)'
                },
                dinner: {
                    name: 'Sardines on Toast with Tomato Salad',
                    prep: 10, cook: 5,
                    helps: ['🦴 Bone Health', '💆 Skin Health', '🧠 Brain Fog'],
                    ingredients: ['120g tinned sardines in olive oil', '2 slices sourdough bread', '200g mixed tomatoes, sliced', '1 red onion, thinly sliced', '2 tbsp olive oil', '1 tbsp red wine vinegar', 'Fresh basil', 'Lemon juice', 'Black pepper'],
                    method: ['Toast sourdough bread', 'Drain sardines (save oil)', 'Mash sardines with lemon juice and pepper', 'Spread generously on toast', 'Mix tomatoes and onion', 'Dress with oil and vinegar', 'Top with basil', 'Serve sardines with tomato salad'],
                    nutrition: {protein: 32, omega3: 3, calcium: 'high', cals: 450},
                    why: 'Sardines with bones provide calcium AND vitamin D together (perfect for bone health). Omega-3s reduce inflammation in joints. Selenium supports skin elasticity.',
                    tips: 'Mash bones into sardines (extra calcium) | Add avocado | Use any tinned fish with bones',
                    batch: 'No - best fresh'
                }
            },
            // DAY 3
            {
                breakfast: {
                    name: 'Spinach & Goat Cheese Scramble',
                    prep: 5, cook: 8,
                    helps: ['🦴 Bone Health', '💆 Skin Health', '💪 Energy'],
                    ingredients: ['3 eggs', '100g fresh spinach', '40g soft goat cheese', '1 tbsp olive oil', 'Fresh chives', 'Salt and pepper'],
                    method: ['Beat eggs with salt and pepper', 'Heat oil in pan', 'Add spinach, wilt 1 min', 'Pour in eggs, stir gently', 'Scramble 3 mins until nearly set', 'Remove from heat', 'Crumble goat cheese on top', 'Garnish with chives'],
                    nutrition: {protein: 28, calcium: 'high', cals: 380},
                    why: 'Spinach is rich in vitamin K and calcium (both essential for bone health). Goat cheese easier to digest than cow dairy. Eggs provide vitamin D and protein for skin repair.',
                    tips: 'Add sun-dried tomatoes | Use feta instead | Serve with mushrooms',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Thai Green Curry with Chicken',
                    prep: 15, cook: 25,
                    helps: ['💆 Skin Health', '🦴 Joint Pain', '💪 Energy'],
                    ingredients: ['300g chicken thighs, cubed', '2 tbsp green curry paste', '400ml coconut milk', '100g green beans', '1 red pepper, sliced', '100g baby corn', '1 tbsp fish sauce', '1 tsp brown sugar', '2 tbsp coconut oil', 'Fresh basil and coriander', 'Lime wedges'],
                    method: ['Heat coconut oil, fry curry paste 1 min', 'Add chicken, cook 5 mins', 'Add coconut milk, bring to simmer', 'Add vegetables, cook 15 mins', 'Add fish sauce and sugar', 'Taste and adjust seasoning', 'Garnish with herbs and lime', 'Serve with cauliflower rice'],
                    nutrition: {protein: 36, healthy_fats: 'high', cals: 480},
                    why: 'Coconut milk provides healthy fats for skin hydration. Turmeric in curry paste is anti-inflammatory (helps joint pain). Vitamin C from peppers supports collagen production.',
                    tips: 'Batch: makes 3 portions | Freeze well | Add aubergine | Serve with brown rice if desired',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Grilled Mackerel with Roasted Beetroot & Walnut Salad',
                    prep: 15, cook: 35,
                    helps: ['🦴 Joint Pain', '💆 Skin Health', '🧠 Brain Fog'],
                    ingredients: ['150g mackerel fillets', '300g beetroot, peeled and cubed', '100g rocket leaves', '50g walnuts, chopped', '30g feta cheese', '2 tbsp olive oil', '1 tbsp balsamic vinegar', 'Fresh dill', 'Lemon wedge'],
                    method: ['Preheat oven to 200°C', 'Toss beetroot with 1 tbsp oil, season', 'Roast 35 mins until tender', 'Last 8 mins: grill mackerel', 'Arrange rocket on plates', 'Top with warm beetroot', 'Flake mackerel on top', 'Scatter walnuts and feta', 'Drizzle with oil and vinegar', 'Garnish with dill and lemon'],
                    nutrition: {protein: 38, omega3: 5, cals: 520},
                    why: 'Mackerel is omega-3 powerhouse (reduces joint inflammation). Beetroot supports liver detoxification (better skin). Walnuts add omega-3s and vitamin E (skin antioxidant).',
                    tips: 'Use vacuum-packed beetroot to save time | Tinned mackerel works | Add orange segments',
                    batch: 'Partial (beetroot)'
                }
            },
            // DAY 4
            {
                breakfast: {
                    name: 'Greek Yogurt with Honey, Nuts & Seeds',
                    prep: 5, cook: 0,
                    helps: ['🦴 Bone Health', '💆 Skin Health', '🍽️ Digestion'],
                    ingredients: ['200g Greek yoghurt (full-fat)', '30g mixed nuts (almonds, walnuts)', '1 tbsp pumpkin seeds', '1 tbsp sunflower seeds', '1 tbsp ground flaxseed', '1 tsp honey', 'Pinch cinnamon'],
                    method: ['Spoon yoghurt into bowl', 'Top with nuts, seeds, flaxseed', 'Drizzle with honey', 'Sprinkle cinnamon', 'Eat immediately'],
                    nutrition: {protein: 24, calcium: 'high', omega3: 3, cals: 450},
                    why: 'Greek yoghurt provides calcium and probiotics (gut health affects skin). Nuts and seeds supply vitamin E and omega-3s (skin protection). Protein supports collagen synthesis.',
                    tips: 'Toast nuts for extra flavour | Add berries | Make seed mix in advance',
                    batch: '✓ Yes (prep seed mix)'
                },
                lunch: {
                    name: 'Roasted Sweet Potato & Chickpea Salad',
                    prep: 15, cook: 30,
                    helps: ['💆 Skin Health', '🦴 Bone Health', '💪 Energy'],
                    ingredients: ['300g sweet potato, cubed', '200g tinned chickpeas', '100g spinach leaves', '50g feta cheese', '30g walnuts, chopped', '3 tbsp olive oil', '1 tbsp lemon juice', '1 tsp cumin', '1 tsp paprika', 'Fresh parsley'],
                    method: ['Preheat oven to 200°C', 'Toss sweet potato with 2 tbsp oil, cumin, paprika', 'Roast 25 mins', 'Add chickpeas last 5 mins', 'Arrange spinach on plates', 'Top with warm sweet potato and chickpeas', 'Crumble feta over', 'Scatter walnuts', 'Drizzle with oil and lemon', 'Add parsley'],
                    nutrition: {protein: 20, fibre: 14, vitamin_a: 'high', cals: 480},
                    why: 'Sweet potato is loaded with beta-carotene (converts to vitamin A for skin health). Chickpeas provide plant protein and zinc. Spinach adds calcium and iron.',
                    tips: 'Batch: roast extra sweet potato | Add grilled halloumi | Use any leafy greens',
                    batch: '✓✓ Yes'
                },
                dinner: {
                    name: 'Beef Stir-Fry with Broccoli & Ginger',
                    prep: 15, cook: 12,
                    helps: ['🦴 Bone Health', '💪 Energy', '🧠 Brain Fog'],
                    ingredients: ['150g beef sirloin, thinly sliced', '200g tenderstem broccoli', '1 red pepper, sliced', '2cm ginger, grated', '2 cloves garlic, minced', '1 tbsp oyster sauce', '1 tbsp soy sauce', '1 tbsp sesame oil', '1 tsp cornflour', 'Sesame seeds'],
                    method: ['Toss beef with cornflour', 'Heat sesame oil in wok on high', 'Stir-fry beef 3 mins, remove', 'Add ginger and garlic, fry 30 secs', 'Add broccoli and pepper, stir-fry 6 mins', 'Return beef, add sauces', 'Toss 2 mins', 'Sprinkle sesame seeds'],
                    nutrition: {protein: 36, iron: 'high', cals: 420},
                    why: 'Beef provides iron and zinc (both essential for healthy skin). Broccoli is rich in vitamin C (collagen production). Ginger has anti-inflammatory properties for joints.',
                    tips: 'Freeze beef 20 mins for easier slicing | Serve over cauliflower rice | Add cashews',
                    batch: 'No - best fresh'
                }
            },
            // DAY 5
            {
                breakfast: {
                    name: 'Smashed Avocado on Sourdough with Seeds',
                    prep: 5, cook: 2,
                    helps: ['💆 Skin Health', '🦴 Bone Health', '💪 Energy'],
                    ingredients: ['1 ripe avocado', '2 slices sourdough bread', '2 tbsp pumpkin seeds', '1 tbsp hemp seeds', 'Chilli flakes', 'Lemon juice', 'Sea salt flakes', 'Olive oil drizzle'],
                    method: ['Toast sourdough bread', 'Mash avocado with lemon juice and salt', 'Spread generously on toast', 'Sprinkle pumpkin and hemp seeds', 'Add chilli flakes', 'Drizzle with olive oil', 'Serve immediately'],
                    nutrition: {protein: 16, healthy_fats: 'high', omega3: 2, cals: 450},
                    why: 'Avocado provides healthy fats and vitamin E (skin hydration and protection). Seeds supply zinc and omega-3s. Sourdough is easier to digest and provides sustained energy.',
                    tips: 'Add poached egg for extra protein | Use sprouted bread | Top with cherry tomatoes',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Immune-Boosting Chicken & Vegetable Soup',
                    prep: 15, cook: 30,
                    helps: ['🦴 Joint Pain', '💆 Skin Health', '🍽️ Digestion'],
                    ingredients: ['200g chicken thighs, diced', '1 litre chicken bone broth', '2 carrots, sliced', '2 celery sticks, sliced', '1 onion, diced', '2 cloves garlic, minced', '100g kale, chopped', '1 bay leaf', 'Fresh thyme', '2 tbsp olive oil', 'Lemon juice'],
                    method: ['Heat oil, fry onion 5 mins', 'Add chicken, brown 5 mins', 'Add carrots, celery, garlic, cook 3 mins', 'Add bone broth, bay leaf, thyme', 'Simmer 20 mins', 'Add kale last 5 mins', 'Remove bay leaf', 'Add lemon juice', 'Season to taste'],
                    nutrition: {protein: 30, collagen: 'high', cals: 320},
                    why: 'Bone broth provides collagen and minerals (joint and skin health). Chicken adds protein. Vegetables supply vitamins and antioxidants. Healing and nourishing.',
                    tips: 'Batch: makes 4 portions | Freeze well | Use leftover roast chicken | Add rice or noodles',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Moroccan Lamb Meatballs with Roasted Vegetables',
                    prep: 20, cook: 30,
                    helps: ['🦴 Bone Health', '💪 Energy', '💆 Skin Health'],
                    ingredients: ['400g lamb mince', '1 egg', '1 tsp cumin', '1 tsp coriander', '½ tsp cinnamon', 'Fresh mint', '2 tbsp olive oil', '1 aubergine, cubed', '1 red pepper, chunked', '200g cherry tomatoes', '2 cloves garlic', 'Fresh coriander'],
                    method: ['Preheat oven to 200°C', 'Mix lamb, egg, spices, chopped mint', 'Form into 12 meatballs', 'Toss veg with 1 tbsp oil, garlic, season', 'Spread veg on tray, roast 15 mins', 'Heat remaining oil, brown meatballs 5 mins', 'Add meatballs to veg tray', 'Roast 15 mins more', 'Garnish with coriander'],
                    nutrition: {protein: 42, iron: 'high', cals: 520},
                    why: 'Lamb provides iron, zinc, and B vitamins (all essential for healthy skin and bones). Spices are anti-inflammatory. Roasted vegetables add antioxidants.',
                    tips: 'Batch: freeze raw meatballs | Serve with Greek yoghurt | Add chickpeas | Use in pitta',
                    batch: '✓✓ Yes'
                }
            },
            // DAY 6
            {
                breakfast: {
                    name: 'Berry & Almond Porridge',
                    prep: 5, cook: 10,
                    helps: ['🦴 Bone Health', '💆 Skin Health', '💪 Energy'],
                    ingredients: ['60g rolled oats', '250ml unsweetened almond milk', '1 tbsp ground almonds', '1 tbsp ground flaxseed', '80g mixed berries', '1 tbsp almond butter', '1 tsp honey', 'Pinch cinnamon'],
                    method: ['Combine oats, milk, ground almonds, flaxseed in pan', 'Bring to simmer, cook 7 mins stirring', 'Add cinnamon', 'Spoon into bowl', 'Top with berries and almond butter', 'Drizzle honey', 'Serve hot'],
                    nutrition: {protein: 16, fibre: 12, omega3: 3, cals: 420},
                    why: 'Oats provide soluble fibre and silica (supports skin and bone health). Almonds add vitamin E and calcium. Berries provide antioxidants (fight skin aging). Flaxseed adds omega-3s.',
                    tips: 'Make overnight oats version | Add protein powder | Use any nut butter',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Grilled Halloumi & Roasted Vegetable Salad',
                    prep: 15, cook: 25,
                    helps: ['🦴 Bone Health', '💆 Skin Health', '💪 Energy'],
                    ingredients: ['150g halloumi cheese, sliced', '200g courgette, sliced', '1 red pepper, chunked', '100g cherry tomatoes', '100g mixed salad leaves', '50g pine nuts', '3 tbsp olive oil', '1 tbsp balsamic vinegar', 'Fresh mint', 'Lemon wedge'],
                    method: ['Preheat oven to 200°C', 'Toss courgette, pepper, tomatoes with 2 tbsp oil', 'Roast 25 mins', 'Last 5 mins: grill halloumi until golden', 'Arrange salad leaves on plates', 'Top with roasted veg', 'Add grilled halloumi', 'Toast pine nuts 2 mins', 'Scatter pine nuts and mint', 'Drizzle with oil and vinegar', 'Serve with lemon'],
                    nutrition: {protein: 24, calcium: 'high', cals: 480},
                    why: 'Halloumi is very high in calcium (essential for bone health). Roasted vegetables provide antioxidants. Pine nuts add zinc and healthy fats for skin.',
                    tips: 'Batch: roast extra veg | Add chickpeas | Use feta instead | Serve warm or cold',
                    batch: '✓ Yes (veg)'
                },
                dinner: {
                    name: 'Baked Salmon with Dill & Cucumber Yogurt',
                    prep: 10, cook: 15,
                    helps: ['🦴 Joint Pain', '💆 Skin Health', '🧠 Brain Fog'],
                    ingredients: ['150g salmon fillet', '200g green beans', '150g Greek yoghurt', '50g cucumber, grated', 'Fresh dill', '2 tbsp olive oil', 'Juice of half lemon', 'Salt and pepper'],
                    method: ['Preheat oven to 200°C', 'Place salmon on baking tray', 'Drizzle with 1 tbsp oil, season', 'Bake 12-15 mins', 'Steam green beans 6 mins', 'Mix yoghurt, cucumber, chopped dill, lemon juice', 'Toss beans with remaining oil', 'Serve salmon with beans and cucumber yoghurt'],
                    nutrition: {protein: 38, omega3: 2.5, cals: 420},
                    why: 'Salmon provides omega-3s and vitamin D (reduce inflammation, support bone health). Greek yoghurt adds probiotics and calcium. Light, fresh, nourishing.',
                    tips: 'Add asparagus | Use frozen salmon | Make extra yoghurt sauce | Serve with new potatoes',
                    batch: 'Partial'
                }
            },
            // DAY 7
            {
                breakfast: {
                    name: 'Tropical Smoothie Bowl',
                    prep: 5, cook: 0,
                    helps: ['💆 Skin Health', '🦴 Bone Health', '💪 Energy'],
                    ingredients: ['1 scoop vanilla protein powder (25g)', '200ml coconut milk', 'Half frozen banana', '80g frozen mango', '1 tbsp chia seeds', 'Toppings: coconut flakes, almonds, berries, kiwi'],
                    method: ['Blend protein powder, coconut milk, banana, mango until smooth', 'Pour into bowl', 'Top with chia seeds, coconut, almonds, berries, kiwi', 'Eat with spoon immediately'],
                    nutrition: {protein: 30, vitamin_c: 'high', cals: 420},
                    why: 'Mango and kiwi are loaded with vitamin C (essential for collagen production). Coconut provides healthy fats for skin. Protein supports tissue repair.',
                    tips: 'Freeze fruit chunks ahead | Add collagen powder | Use any tropical fruit',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Mediterranean Roasted Vegetable & Quinoa Bowl',
                    prep: 15, cook: 30,
                    helps: ['💆 Skin Health', '🦴 Bone Health', '💪 Energy'],
                    ingredients: ['100g quinoa', '1 aubergine, cubed', '1 courgette, sliced', '1 red pepper, chunked', '100g cherry tomatoes', '100g tinned chickpeas', '3 tbsp olive oil', '2 tbsp tahini', '1 tbsp lemon juice', 'Fresh parsley', 'Paprika'],
                    method: ['Preheat oven to 200°C', 'Cook quinoa per packet (15 mins)', 'Toss veg and chickpeas with 2 tbsp oil, paprika', 'Roast 30 mins', 'Mix tahini with lemon juice and water (2 tbsp) for dressing', 'Spoon quinoa into bowl', 'Top with roasted veg', 'Drizzle tahini dressing', 'Garnish with parsley'],
                    nutrition: {protein: 18, fibre: 14, cals: 480},
                    why: 'Quinoa is complete protein with all amino acids. Tahini provides calcium and sesame lignans (antioxidant for skin). Mediterranean vegetables add vitamins and minerals.',
                    tips: 'Batch: roast double veg | Make extra quinoa | Add feta | Meal prep for 2-3 days',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Slow-Cooked Beef Brisket with Roasted Carrots',
                    prep: 15, cook: 180,
                    helps: ['🦴 Joint Pain', '💆 Skin Health', '💪 Energy'],
                    ingredients: ['400g beef brisket', '4 large carrots, halved lengthways', '2 onions, quartered', '3 cloves garlic, whole', '400ml beef bone broth', '2 tbsp tomato puree', '2 tbsp olive oil', 'Fresh thyme and bay leaf', 'Salt and pepper'],
                    method: ['Preheat oven to 150°C', 'Season brisket, brown in hot oil all over', 'Remove brisket', 'Add onions and garlic to pan, cook 3 mins', 'Return brisket, add broth, tomato puree, herbs', 'Cover tightly, cook 3 hours until tender', 'Last 45 mins: add carrots', 'Slice brisket', 'Serve with carrots and cooking juices'],
                    nutrition: {protein: 45, collagen: 'high', cals: 520},
                    why: 'Brisket is collagen-rich cut (breaks down into gelatin during slow cooking). Bone broth adds more collagen and minerals. Carrots provide beta-carotene for skin.',
                    tips: 'Batch: makes 4 portions | Freeze well | Use slow cooker 8 hours on low | Save bones for broth',
                    batch: '✓✓✓ Excellent'
                }
            }
        ],
        bonusDay: {
            breakfast: {
                name: 'Smoked Haddock & Poached Egg',
                prep: 5, cook: 12,
                helps: ['🦴 Bone Health', '💆 Skin Health', '🧠 Brain Fog'],
                ingredients: ['150g smoked haddock fillet', '2 eggs', '100g spinach', '1 tbsp olive oil', '1 tbsp white vinegar', 'Black pepper', 'Lemon wedge'],
                method: ['Poach haddock in simmering water 8 mins', 'Meanwhile: bring another pan to simmer, add vinegar', 'Poach eggs 3-4 mins', 'Wilt spinach in pan with oil', 'Arrange spinach on plate', 'Top with flaked haddock', 'Add poached eggs', 'Season with black pepper and lemon'],
                nutrition: {protein: 42, omega3: 1.5, cals: 380},
                why: 'Smoked fish provides protein, omega-3s, and vitamin D (all essential for bone health). Eggs add more vitamin D and K2. Traditional British breakfast that nourishes bones.',
                tips: 'Use any smoked fish | Add grilled tomatoes | Serve with wholegrain toast',
                batch: 'No - best fresh'
            },
            lunch: {
                name: 'Japanese-Style Miso Soup with Tofu',
                prep: 10, cook: 15,
                helps: ['🦴 Bone Health', '💆 Skin Health', '🍽️ Digestion'],
                ingredients: ['400ml dashi or vegetable stock', '2 tbsp miso paste', '150g firm tofu, cubed', '50g wakame seaweed (dried)', '100g shiitake mushrooms, sliced', '2 spring onions, sliced', '1 tsp sesame oil'],
                method: ['Soak wakame in water 5 mins, drain', 'Bring stock to gentle simmer', 'Add mushrooms, cook 5 mins', 'Add tofu and wakame, heat 3 mins', 'Remove from heat', 'Dissolve miso paste in small amount of broth', 'Stir miso into soup (do not boil)', 'Add spring onions and sesame oil', 'Serve hot'],
                nutrition: {protein: 16, calcium: 'high', iodine: 'high', cals: 220},
                why: 'Miso is fermented soy (probiotics for gut health). Tofu provides calcium. Seaweed is rich in iodine and minerals (support skin and bone health). Traditional healing soup.',
                tips: 'Find miso paste in Asian section | Add rice noodles | Include edamame',
                batch: 'Partial (broth)'
            },
            dinner: {
                name: 'Korean-Style Beef Bulgogi Bowl',
                prep: 20, cook: 15,
                helps: ['🦴 Bone Health', '💪 Energy', '💆 Skin Health'],
                ingredients: ['300g beef sirloin, thinly sliced', '3 tbsp soy sauce', '1 tbsp sesame oil', '1 tbsp honey', '2 cloves garlic, minced', '1 tsp grated ginger', '100g carrot, julienned', '100g cucumber, ribboned', '100g kimchi', 'Sesame seeds', 'Spring onions', 'Cooked brown rice (optional)'],
                method: ['Marinate beef in soy, sesame oil, honey, garlic, ginger for 15 mins', 'Heat pan very hot', 'Stir-fry beef in batches 2-3 mins', 'Arrange rice (if using) in bowl', 'Top with beef, carrot, cucumber, kimchi', 'Sprinkle sesame seeds and spring onions', 'Serve with extra kimchi'],
                nutrition: {protein: 38, iron: 'high', probiotics: 'high', cals: 450},
                why: 'Beef provides iron and zinc (skin and bone health). Kimchi is fermented (probiotics support gut health which affects skin). Balanced, flavourful, nutritious.',
                tips: 'Marinate overnight for deeper flavour | Add fried egg on top | Batch: make extra beef',
                batch: '✓ Yes (beef)'
            }
        },
        batchCooking: {
            sunday: [
                '**BONE BROTH** - Make 2-3 litres from beef/chicken bones (simmer 12-24 hours)',
                'Slow-cook lamb shanks (Day 1 dinner - 4 portions)',
                'Make Thai green curry (Day 3 lunch - 3 portions)',
                'Slow-cook beef brisket (Day 7 dinner - 4 portions)',
                'Roast 2 trays mixed vegetables (for Days 1, 4, 6, 7 lunches)',
                'Cook quinoa (500g for week)',
                'Boil 10 eggs for quick protein',
                'Make Moroccan lamb meatballs (Day 5 - freeze half)',
                'Prep seed & nut mix for breakfasts',
                'Make immune-boosting soup (Day 5 lunch - 4 portions)'
            ],
            wednesday: [
                'Make another batch of bone broth if needed',
                'Roast more vegetables (butternut, courgette, peppers)',
                'Grill 2 salmon fillets',
                'Make Asian beef bone broth soup (Day 2 lunch)',
                'Prepare Korean beef bulgogi (Bonus dinner)',
                'Cook more quinoa if needed',
                'Roast beetroot for Day 3 dinner'
            ],
            bonebroth: [
                '**HOW TO MAKE BONE BROTH:**',
                '1. Use 1-2kg beef bones (marrow, knuckle) or chicken carcasses',
                '2. Roast bones 30 mins at 200°C (better flavour)',
                '3. Place in large pot, cover with cold water',
                '4. Add 2 tbsp apple cider vinegar (helps extract minerals)',
                '5. Add aromatics: onion, carrot, celery, garlic, bay leaf, peppercorns',
                '6. Bring to boil, reduce to very gentle simmer',
                '7. Skim foam from top first 30 mins',
                '8. Simmer 12-24 hours (longer = more collagen)',
                '9. Strain through fine sieve',
                '10. Cool and refrigerate (fat will solidify on top - remove or keep)',
                '11. Store: Fridge 5 days, Freeze 6 months',
                '**WHY:** Collagen, glucosamine, chondroitin, minerals for joints, bones, skin'
            ],
            storage: [
                'Bone broth: fridge 5 days, freeze 6 months',
                'Lamb shanks: fridge 3 days, freeze 3 months',
                'Beef brisket: fridge 4 days, freeze 3 months',
                'Thai green curry: fridge 3 days, freeze 3 months',
                'Roasted vegetables: fridge 4 days',
                'Cooked quinoa: fridge 5 days',
                'Lamb meatballs: freeze raw 3 months',
                'Chicken soup: fridge 3 days, freeze 3 months',
                'Grilled salmon: fridge 2 days'
            ],
            tips: [
                'Save all bones from roasts for bone broth',
                'Freeze bone broth in ice cube trays for sauces',
                'Roast vegetables on high heat for caramelisation',
                'Use bone broth instead of stock in all recipes',
                'Make double batches of slow-cooked meals',
                'Label and date everything',
                'Invest in good glass containers'
            ]
        }
    },
    week4: {
        theme: 'Urogenital & Immune Focus',
        color: '#FFB5C5',
        subtitle: 'Meals to support urinary health and immunity',
        symptoms: ['🌸 Urogenital Health', '🛡️ Immune Support'],
        eatingOut: {
            title: '🍽️ Eating Out Guide - Week 4',
            best: [
                'Greek Taverna: Grilled octopus, Greek salad, grilled sea bream, tzatziki',
                'Spanish Tapas: Garlic prawns, patatas bravas, grilled sardines, gazpacho',
                'Turkish: Shepherd salad, grilled lamb kebabs, hummus, roasted vegetables',
                'Lebanese: Tabbouleh, fattoush salad, grilled chicken, baba ganoush'
            ],
            priority: [
                'Prioritise: Probiotic foods (yoghurt-based sauces), garlic, citrus, berries',
                'Add: Cranberry juice, fermented vegetables, olive oil, herbs',
                'Avoid: Excessive alcohol, sugary cocktails, creamy sauces, processed foods'
            ],
            fastFood: [
                'Ottolenghi/LEON: Mediterranean mezze boxes, salads, grilled proteins',
                'Zizzi: Mediterranean vegetable salad, grilled fish, minestrone soup',
                'Ask Italian: Chicken spiedini, tricolore salad, seafood linguine (extra veg)',
                'Tesco Finest: Greek yoghurt pots, berry packs, grilled chicken, hummus'
            ],
            tips: 'Choose yoghurt-based sauces over cream | Order extra vegetables | Drink water with lemon | Choose grilled over fried'
        },
        days: [
            // DAY 1
            {
                breakfast: {
                    name: 'Berry Compote with Greek Yogurt & Granola',
                    prep: 5, cook: 10,
                    helps: ['🌸 Urogenital Health', '🛡️ Immune Support', '🍽️ Digestion'],
                    ingredients: ['200g mixed berries (blueberries, raspberries, strawberries)', '200g Greek yoghurt', '40g granola', '1 tbsp honey', '1 tbsp water', 'Fresh mint'],
                    method: ['Heat berries with water and half the honey in pan', 'Simmer 8 mins until jammy', 'Cool slightly', 'Spoon yoghurt into bowl', 'Top with warm berry compote', 'Add granola', 'Drizzle remaining honey', 'Garnish with mint'],
                    nutrition: {protein: 20, vitamin_c: 'high', probiotics: 'high', cals: 380},
                    why: 'Berries contain proanthocyanidins (prevent UTIs by stopping bacteria adhering to bladder walls). Greek yoghurt provides probiotics (support urinary tract health). Vitamin C boosts immunity.',
                    tips: 'Make compote ahead | Use frozen berries | Add chia seeds | Swap granola for nuts',
                    batch: '✓✓ Yes (compote)'
                },
                lunch: {
                    name: 'Mediterranean Tuna Niçoise Salad',
                    prep: 15, cook: 10,
                    helps: ['🛡️ Immune Support', '💪 Energy', '🧠 Brain Fog'],
                    ingredients: ['160g tinned tuna in olive oil', '2 eggs, boiled', '100g green beans, blanched', '100g mixed salad leaves', '80g cherry tomatoes, halved', '50g Kalamata olives', '50g cucumber, sliced', '4 anchovy fillets (optional)', '3 tbsp olive oil', '1 tbsp red wine vinegar', 'Fresh basil'],
                    method: ['Boil eggs 7 mins, cool, halve', 'Blanch green beans 4 mins, refresh in cold water', 'Arrange salad leaves on plate', 'Add sections of beans, tomatoes, cucumber, olives', 'Flake tuna on top', 'Add egg halves and anchovies', 'Whisk oil and vinegar', 'Drizzle dressing over', 'Tear basil on top'],
                    nutrition: {protein: 38, omega3: 2, cals: 480},
                    why: 'Tuna provides selenium (supports immune function). Eggs add vitamin D. Olive oil is anti-inflammatory. Classic Mediterranean dish packed with nutrients.',
                    tips: 'Use fresh tuna if available | Add new potatoes | Boil eggs ahead | Make for lunch boxes',
                    batch: '✓ Yes (components)'
                },
                dinner: {
                    name: 'Roasted Rainbow Vegetable & Chickpea Traybake',
                    prep: 15, cook: 35,
                    helps: ['🛡️ Immune Support', '🍽️ Digestion', '💆 Skin Health'],
                    ingredients: ['1 red pepper, chunked', '1 yellow pepper, chunked', '1 orange pepper, chunked', '200g butternut squash, cubed', '1 red onion, wedged', '200g cherry tomatoes (mixed colours)', '200g tinned chickpeas', '100g feta cheese, cubed', '4 tbsp olive oil', '2 tsp zaatar spice', '2 cloves garlic, sliced', 'Fresh coriander', 'Lemon wedges'],
                    method: ['Preheat oven to 200°C', 'Toss all veg and chickpeas with oil, zaatar, garlic', 'Spread on large tray', 'Roast 35 mins until charred and tender', 'Remove from oven', 'Scatter feta over hot veg', 'Garnish with coriander', 'Serve with lemon wedges'],
                    nutrition: {protein: 22, fibre: 16, vitamin_c: 'very high', cals: 480},
                    why: 'Rainbow vegetables provide spectrum of antioxidants (boost immune system). Each colour offers different phytonutrients. Chickpeas add plant protein and fibre. Zaatar contains thyme (antimicrobial properties).',
                    tips: 'Batch: roast double portions | Serve with quinoa | Add halloumi | Use any rainbow veg',
                    batch: '✓✓✓ Excellent'
                }
            },
            // DAY 2
            {
                breakfast: {
                    name: 'Cranberry & Orange Bircher Muesli',
                    prep: 5, cook: 0,
                    helps: ['🌸 Urogenital Health', '🛡️ Immune Support', '💪 Energy'],
                    ingredients: ['60g rolled oats', '150ml unsweetened almond milk', '100g Greek yoghurt', '30g dried cranberries', 'Zest and juice of half orange', '1 tbsp ground flaxseed', '1 tbsp pumpkin seeds', '1 tsp honey'],
                    method: ['Night before: mix oats, milk, yoghurt, cranberries', 'Add orange zest and juice, flaxseed', 'Stir well, refrigerate overnight', 'Morning: top with pumpkin seeds', 'Drizzle honey', 'Eat cold'],
                    nutrition: {protein: 18, fibre: 12, cals: 380},
                    why: 'Cranberries contain compounds that prevent E. coli bacteria from adhering to urinary tract walls (reduce UTI risk). Vitamin C from orange boosts immunity. Probiotic yoghurt supports gut and urinary health.',
                    tips: 'Make 3 jars for week | Fresh or dried cranberries both work | Add extra protein powder',
                    batch: '✓✓✓ Make 3-5 days'
                },
                lunch: {
                    name: 'Spanish Gazpacho with Prawns',
                    prep: 15, cook: 5,
                    helps: ['🛡️ Immune Support', '🌸 Urogenital Health', '💪 Energy'],
                    ingredients: ['500g ripe tomatoes, roughly chopped', '1 red pepper, chopped', '1 cucumber, chopped', '1 small red onion', '2 cloves garlic', '3 tbsp olive oil', '2 tbsp red wine vinegar', '100ml water', '150g cooked prawns', 'Salt and pepper', 'Ice cubes', 'Fresh basil'],
                    method: ['Blend tomatoes, pepper, cucumber, onion, garlic', 'Add oil, vinegar, water', 'Blend until smooth', 'Season with salt and pepper', 'Chill with ice cubes 10 mins', 'Pan-fry prawns 3 mins if raw', 'Serve soup chilled', 'Top with prawns and basil', 'Drizzle extra olive oil'],
                    nutrition: {protein: 24, vitamin_c: 'very high', cals: 320},
                    why: 'Raw vegetables retain maximum vitamin C (immune support). Tomatoes provide lycopene (antioxidant). Garlic has antimicrobial properties. Hydrating and refreshing cold soup.',
                    tips: 'Make ahead (flavour improves) | Batch: makes 3 portions | Serve with wholegrain bread | Add avocado',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Herb-Crusted Rack of Lamb with Roasted Vegetables',
                    prep: 15, cook: 25,
                    helps: ['🛡️ Immune Support', '💪 Energy', '🦴 Bone Health'],
                    ingredients: ['300g lamb rack (4 ribs)', '2 tbsp fresh rosemary, chopped', '2 tbsp fresh thyme, chopped', '3 cloves garlic, minced', '3 tbsp olive oil', '200g rainbow carrots', '200g asparagus', '100g cherry tomatoes', 'Salt and pepper', 'Dijon mustard (1 tbsp)'],
                    method: ['Preheat oven to 200°C', 'Mix herbs, garlic, 2 tbsp oil', 'Brush lamb with mustard', 'Press herb mixture onto lamb', 'Toss veg with remaining oil', 'Place veg on tray, roast 10 mins', 'Add lamb to tray, roast 15 mins (pink)', 'Rest lamb 5 mins', 'Slice between bones', 'Serve with roasted veg'],
                    nutrition: {protein: 38, iron: 'high', zinc: 'high', cals: 520},
                    why: 'Lamb provides zinc and iron (both crucial for immune function). Rosemary and thyme have antimicrobial properties. Rainbow vegetables provide diverse antioxidants.',
                    tips: 'Ask butcher to french trim rack | Cook to preference | Use lamb chops instead',
                    batch: 'No - best fresh'
                }
            },
            // DAY 3
            {
                breakfast: {
                    name: 'Lemon & Blueberry Protein Pancakes',
                    prep: 5, cook: 12,
                    helps: ['🛡️ Immune Support', '🌸 Urogenital Health', '💪 Energy'],
                    ingredients: ['2 eggs', '1 ripe banana', '30g oats', '1 scoop vanilla protein powder', '100g blueberries', 'Zest of 1 lemon', '1 tsp coconut oil', 'Greek yoghurt to serve', 'Honey drizzle'],
                    method: ['Blend eggs, banana, oats, protein powder, lemon zest', 'Fold in half the blueberries', 'Heat oil in pan', 'Pour small amounts (makes 5-6 pancakes)', 'Cook 2 mins each side', 'Warm remaining blueberries in pan', 'Stack pancakes', 'Top with blueberries and yoghurt', 'Drizzle honey'],
                    nutrition: {protein: 36, vitamin_c: 'high', cals: 450},
                    why: 'Blueberries prevent bacteria from adhering to urinary tract. Lemon provides vitamin C (immune support). High protein keeps energy stable.',
                    tips: 'Freeze extra pancakes | Make batter night before | Add lemon juice for extra zing',
                    batch: '✓ Yes (batter or cooked)'
                },
                lunch: {
                    name: 'Italian Wedding Soup (Chicken Meatball Soup)',
                    prep: 20, cook: 25,
                    helps: ['🛡️ Immune Support', '🍽️ Digestion', '💪 Energy'],
                    ingredients: ['300g chicken mince', '1 egg', '2 tbsp breadcrumbs', '30g Parmesan, grated', '1 litre chicken stock', '100g orzo pasta', '150g spinach', '1 carrot, diced', '1 celery stick, diced', '1 onion, diced', '2 cloves garlic, minced', '2 tbsp olive oil', 'Fresh parsley', 'Lemon wedge'],
                    method: ['Mix chicken, egg, breadcrumbs, half Parmesan', 'Roll into 16 small meatballs', 'Heat oil, fry onion, carrot, celery 5 mins', 'Add garlic, cook 1 min', 'Add stock, bring to boil', 'Drop in meatballs, simmer 10 mins', 'Add orzo, cook 8 mins', 'Add spinach, wilt 2 mins', 'Season, add parsley and lemon', 'Serve with remaining Parmesan'],
                    nutrition: {protein: 32, cals: 420},
                    why: 'Chicken provides protein and selenium (immune support). Spinach adds iron and vitamins. Warming soup is healing and nourishing. Garlic has antimicrobial properties.',
                    tips: 'Batch: makes 4 portions | Freeze well | Use turkey mince | Skip pasta for low-carb',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Pan-Seared Sea Bass with Mediterranean Vegetables',
                    prep: 15, cook: 25,
                    helps: ['🛡️ Immune Support', '💆 Skin Health', '🧠 Brain Fog'],
                    ingredients: ['150g sea bass fillet (skin on)', '1 courgette, sliced', '1 aubergine, cubed', '1 red pepper, chunked', '100g cherry tomatoes', '3 cloves garlic, sliced', '3 tbsp olive oil', 'Fresh oregano', 'Fresh basil', 'Lemon wedges', 'Capers (optional)'],
                    method: ['Preheat oven to 200°C', 'Toss veg with 2 tbsp oil, garlic, oregano', 'Roast 25 mins', 'Last 8 mins: heat remaining oil in pan', 'Season fish, place skin-side down', 'Cook 5 mins (crispy skin)', 'Flip, cook 2 mins', 'Serve fish on roasted veg', 'Add basil, capers, lemon'],
                    nutrition: {protein: 34, omega3: 1.5, cals: 420},
                    why: 'Sea bass provides protein and omega-3s (anti-inflammatory). Mediterranean vegetables are rich in antioxidants. Olive oil supports heart health. Light but satisfying.',
                    tips: 'Any white fish works | Use frozen sea bass | Add olives | Serve with quinoa',
                    batch: 'Partial (veg)'
                }
            },
            // DAY 4
            {
                breakfast: {
                    name: 'Probiotic Smoothie Bowl',
                    prep: 5, cook: 0,
                    helps: ['🌸 Urogenital Health', '🛡️ Immune Support', '🍽️ Digestion'],
                    ingredients: ['150g kefir or probiotic yoghurt', '1 scoop vanilla protein powder', '100g mixed berries (frozen)', 'Half frozen banana', '1 tbsp chia seeds', 'Toppings: granola, fresh berries, coconut, almonds'],
                    method: ['Blend kefir, protein powder, frozen berries, banana', 'Pour into bowl', 'Top with chia seeds, granola, berries, coconut, almonds', 'Eat immediately with spoon'],
                    nutrition: {protein: 32, probiotics: 'very high', cals: 420},
                    why: 'Kefir contains multiple probiotic strains (support gut health which affects urinary health). Berries prevent UTIs. Protein supports immune function.',
                    tips: 'Find kefir in dairy section | Use Greek yoghurt if no kefir | Add spinach (hidden greens)',
                    batch: 'No - best fresh'
                },
                lunch: {
                    name: 'Rainbow Buddha Bowl with Tahini Dressing',
                    prep: 20, cook: 30,
                    helps: ['🛡️ Immune Support', '💆 Skin Health', '🍽️ Digestion'],
                    ingredients: ['100g quinoa', '200g sweet potato, cubed', '100g red cabbage, shredded', '100g beetroot, grated', '100g carrot, grated', '100g edamame beans', '50g rocket', '3 tbsp tahini', '1 tbsp lemon juice', '2 tbsp olive oil', 'Pumpkin seeds', 'Paprika', 'Water to thin'],
                    method: ['Cook quinoa per packet (15 mins)', 'Toss sweet potato with 1 tbsp oil, paprika', 'Roast 30 mins', 'Cook edamame 5 mins', 'Arrange quinoa, rocket in bowl', 'Add sections: sweet potato, cabbage, beetroot, carrot, edamame', 'Mix tahini, lemon, water (2 tbsp)', 'Drizzle dressing over', 'Scatter pumpkin seeds'],
                    nutrition: {protein: 22, fibre: 18, antioxidants: 'very high', cals: 520},
                    why: 'Every colour represents different phytonutrients and antioxidants (boost immune system). Purple/red (beetroot, cabbage) = betalains. Orange (sweet potato, carrot) = beta-carotene. Green (edamame, rocket) = chlorophyll and vitamins.',
                    tips: 'Batch: prep all components separately | Make extra quinoa | Use any colourful veg',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Tuscan Pork Tenderloin with White Beans',
                    prep: 15, cook: 25,
                    helps: ['🛡️ Immune Support', '💪 Energy', '🍽️ Digestion'],
                    ingredients: ['300g pork tenderloin', '400g tinned cannellini beans', '200g cherry tomatoes, halved', '100g spinach', '3 cloves garlic, sliced', '3 tbsp olive oil', 'Fresh rosemary and sage', '100ml chicken stock', 'Lemon juice', 'Salt and pepper'],
                    method: ['Season pork with salt, pepper, chopped rosemary', 'Heat 2 tbsp oil in ovenproof pan', 'Sear pork all over 5 mins', 'Transfer to oven at 200°C, roast 15 mins', 'Remove pork, rest 5 mins', 'Same pan: heat remaining oil, fry garlic and sage', 'Add tomatoes, cook 3 mins', 'Add beans and stock, simmer 5 mins', 'Add spinach, wilt 2 mins', 'Add lemon juice', 'Slice pork, serve on bean mixture'],
                    nutrition: {protein: 42, fibre: 12, cals: 480},
                    why: 'Pork is lean protein rich in selenium and zinc (immune support). White beans provide fibre and resistant starch (gut health). Tuscan herbs are antioxidant-rich.',
                    tips: 'Use pork chops instead | Batch: make double | Add kale | Serve with crusty bread',
                    batch: '✓ Yes'
                }
            },
            // DAY 5
            {
                breakfast: {
                    name: 'Mediterranean Baked Eggs with Peppers',
                    prep: 10, cook: 20,
                    helps: ['🛡️ Immune Support', '💪 Energy', '💆 Skin Health'],
                    ingredients: ['2 eggs', '1 red pepper, diced', '1 yellow pepper, diced', '100g cherry tomatoes, halved', '2 cloves garlic, minced', '2 tbsp olive oil', '1 tsp paprika', '30g feta cheese', 'Fresh parsley', 'Salt and pepper'],
                    method: ['Preheat oven to 180°C', 'Heat oil in ovenproof pan', 'Fry peppers 5 mins', 'Add garlic and paprika, cook 1 min', 'Add tomatoes, cook 5 mins', 'Make 2 wells, crack eggs in', 'Crumble feta on top', 'Bake 8-10 mins until eggs set', 'Garnish with parsley'],
                    nutrition: {protein: 20, vitamin_c: 'very high', cals: 360},
                    why: 'Peppers are loaded with vitamin C (immune system support - more than oranges!). Eggs provide protein and vitamin D. Lycopene from tomatoes is antioxidant.',
                    tips: 'Add spinach | Use any colour peppers | Serve with sourdough | Make for 2-3 portions',
                    batch: '✓ Yes'
                },
                lunch: {
                    name: 'Greek-Style Grilled Chicken Salad',
                    prep: 15, cook: 15,
                    helps: ['🛡️ Immune Support', '💪 Energy', '🍽️ Digestion'],
                    ingredients: ['150g chicken breast', '100g mixed salad leaves', '100g cucumber, diced', '100g cherry tomatoes, halved', '50g Kalamata olives', '50g feta cheese, cubed', '50g red onion, sliced', '3 tbsp olive oil', '1 tbsp red wine vinegar', '1 tsp dried oregano', 'Fresh mint'],
                    method: ['Rub chicken with 1 tbsp oil, oregano, season', 'Grill or pan-fry 12-15 mins until cooked', 'Rest 5 mins, slice', 'Arrange salad leaves on plate', 'Add cucumber, tomatoes, olives, onion', 'Top with sliced chicken', 'Crumble feta over', 'Whisk oil and vinegar', 'Drizzle dressing', 'Add torn mint'],
                    nutrition: {protein: 38, cals: 420},
                    why: 'Classic Greek salad is nutrient-dense. Chicken provides lean protein. Feta adds calcium and probiotics. Olive oil is anti-inflammatory. Fresh and satisfying.',
                    tips: 'Use leftover roast chicken | Batch: grill extra chicken | Add chickpeas | Serve in pitta',
                    batch: '✓ Yes (chicken)'
                },
                dinner: {
                    name: 'Moroccan Spiced Turkey Tagine',
                    prep: 15, cook: 35,
                    helps: ['🛡️ Immune Support', '💪 Energy', '🍽️ Digestion'],
                    ingredients: ['400g turkey breast, cubed', '1 onion, diced', '2 carrots, chunked', '1 red pepper, chunked', '200g tinned chickpeas', '400g tinned tomatoes', '300ml chicken stock', '2 tbsp olive oil', '1 tsp cumin', '1 tsp coriander', '1 tsp cinnamon', '½ tsp turmeric', '50g dried apricots, chopped', 'Fresh coriander', 'Lemon wedges'],
                    method: ['Heat oil, fry onion 5 mins', 'Add turkey, brown 5 mins', 'Add spices, cook 1 min', 'Add carrots, pepper, tomatoes, stock', 'Add chickpeas and apricots', 'Simmer 25 mins until turkey tender', 'Season to taste', 'Add fresh coriander', 'Serve with lemon wedges and couscous'],
                    nutrition: {protein: 40, fibre: 12, cals: 460},
                    why: 'Turkey is lean protein rich in selenium (immune support). Turmeric and cumin are anti-inflammatory. Apricots add natural sweetness and vitamin A. Chickpeas provide fibre.',
                    tips: 'Batch: makes 4 portions | Freeze well | Use chicken thighs | Serve with quinoa or cauliflower rice',
                    batch: '✓✓✓ Excellent'
                }
            },
            // DAY 6
            {
                breakfast: {
                    name: 'Citrus & Berry Chia Pudding',
                    prep: 5, cook: 0,
                    helps: ['🌸 Urogenital Health', '🛡️ Immune Support', '🍽️ Digestion'],
                    ingredients: ['3 tbsp chia seeds', '200ml unsweetened almond milk', 'Zest and juice of half orange', '1 tbsp honey', '80g mixed berries', '1 tbsp pumpkin seeds', 'Fresh mint'],
                    method: ['Night before: mix chia, milk, orange zest and juice, honey', 'Stir well, refrigerate overnight', 'Morning: stir again', 'Top with berries and pumpkin seeds', 'Garnish with mint', 'Eat cold'],
                    nutrition: {protein: 12, fibre: 16, omega3: 5, cals: 360},
                    why: 'Chia seeds provide omega-3s and fibre (gut health). Berries prevent UTIs and boost immunity. Citrus provides vitamin C. Quick, nourishing breakfast.',
                    tips: 'Make 3 jars for week | Add protein powder | Use any citrus fruit',
                    batch: '✓✓✓ Make 3-5 days'
                },
                lunch: {
                    name: 'Roasted Red Pepper & Tomato Soup with Chickpeas',
                    prep: 10, cook: 35,
                    helps: ['🛡️ Immune Support', '💆 Skin Health', '🍽️ Digestion'],
                    ingredients: ['4 red peppers, halved and deseeded', '400g tomatoes, halved', '1 onion, quartered', '3 cloves garlic, whole', '200g tinned chickpeas', '500ml vegetable stock', '3 tbsp olive oil', '1 tsp smoked paprika', 'Fresh basil', 'Greek yoghurt to serve'],
                    method: ['Preheat oven to 200°C', 'Toss peppers, tomatoes, onion, garlic with 2 tbsp oil', 'Roast 30 mins', 'Transfer to pot, add stock and paprika', 'Simmer 5 mins', 'Blend until smooth', 'Add chickpeas (keep whole or blend)', 'Season to taste', 'Serve with yoghurt and basil'],
                    nutrition: {protein: 14, vitamin_c: 'very high', cals: 320},
                    why: 'Red peppers have more vitamin C than oranges (immune support). Roasting intensifies flavour. Chickpeas add protein and fibre. Comforting and healing.',
                    tips: 'Batch: makes 4 portions | Freeze well | Add chilli for kick | Serve with sourdough',
                    batch: '✓✓✓ Excellent'
                },
                dinner: {
                    name: 'Grilled Salmon with Mango Salsa & Quinoa',
                    prep: 15, cook: 15,
                    helps: ['🛡️ Immune Support', '💆 Skin Health', '🧠 Brain Fog'],
                    ingredients: ['150g salmon fillet', '100g quinoa', '1 ripe mango, diced', '50g red onion, finely diced', '1 red chilli, finely chopped', 'Handful fresh coriander', 'Juice of 1 lime', '100g rocket', '2 tbsp olive oil', 'Salt and pepper'],
                    method: ['Cook quinoa per packet (15 mins)', 'Mix mango, onion, chilli, coriander, half lime juice', 'Season salsa, set aside', 'Brush salmon with oil, season', 'Grill or pan-fry 10 mins', 'Toss quinoa with rocket and remaining lime', 'Serve salmon on quinoa', 'Top with mango salsa'],
                    nutrition: {protein: 38, omega3: 2.5, vitamin_c: 'high', cals: 520},
                    why: 'Salmon provides omega-3s (anti-inflammatory). Mango is rich in vitamins A and C (immune support and skin health). Quinoa is complete protein. Colourful and delicious.',
                    tips: 'Use frozen mango | Add avocado | Swap salmon for sea bass | Batch: cook extra quinoa',
                    batch: 'Partial (quinoa)'
                }
            },
            // DAY 7
            {
                breakfast: {
                    name: 'Turkish Menemen (Scrambled Eggs with Vegetables)',
                    prep: 10, cook: 15,
                    helps: ['🛡️ Immune Support', '💪 Energy', '💆 Skin Health'],
                    ingredients: ['3 eggs', '2 ripe tomatoes, diced', '1 green pepper, diced', '1 onion, diced', '2 tbsp olive oil', '1 tsp paprika', 'Fresh parsley', 'Feta cheese (optional)', 'Salt and pepper'],
                    method: ['Heat oil in pan', 'Fry onion and pepper 5 mins', 'Add tomatoes and paprika, cook 8 mins until soft', 'Beat eggs', 'Pour over vegetables', 'Scramble gently 2-3 mins', 'Season to taste', 'Top with parsley and feta if using'],
                    nutrition: {protein: 22, vitamin_c: 'high', cals: 360},
                    why: 'Traditional Turkish breakfast. Tomatoes and peppers provide vitamins A and C (immune support). Eggs add protein. Simple, nourishing, delicious.',
                    tips: 'Serve with sourdough | Add chilli flakes | Use any colour peppers | Make for 2 portions',
                    batch: '✓ Yes'
                },
                lunch: {
                    name: 'Italian Panzanella (Bread & Tomato Salad)',
                    prep: 15, cook: 10,
                    helps: ['🛡️ Immune Support', '💆 Skin Health', '🍽️ Digestion'],
                    ingredients: ['200g stale sourdough bread, cubed', '300g mixed tomatoes (red, yellow, orange), chunked', '1 cucumber, chunked', '1 red onion, sliced', '50g Kalamata olives', '50g capers', '100g rocket', '4 tbsp olive oil', '2 tbsp red wine vinegar', 'Fresh basil', 'Salt and pepper'],
                    method: ['Toast bread cubes in oven 10 mins until crispy', 'Mix tomatoes, cucumber, onion, olives, capers', 'Add rocket', 'Whisk oil, vinegar, season', 'Pour over salad, toss', 'Add toasted bread, toss again', 'Leave 5 mins for bread to absorb dressing', 'Top with torn basil'],
                    nutrition: {protein: 12, fibre: 10, cals: 420},
                    why: 'Classic Italian summer salad. Tomatoes provide lycopene (antioxidant). Uses up stale bread. Best when tomatoes are ripe and flavourful. Light but satisfying.',
                    tips: 'Use day-old bread | Best in summer with ripe tomatoes | Add mozzarella | Add tinned tuna',
                    batch: 'No - best fresh'
                },
                dinner: {
                    name: 'Spanish Chicken & Chorizo Paella',
                    prep: 15, cook: 35,
                    helps: ['🛡️ Immune Support', '💪 Energy', '🦴 Bone Health'],
                    ingredients: ['200g chicken thighs, cubed', '100g chorizo, sliced', '150g paella rice', '1 red pepper, sliced', '1 yellow pepper, sliced', '100g green beans, halved', '100g peas', '3 cloves garlic, minced', '1 tsp smoked paprika', '½ tsp saffron threads', '500ml chicken stock', '3 tbsp olive oil', 'Lemon wedges', 'Fresh parsley'],
                    method: ['Heat oil in large pan', 'Fry chorizo 2 mins, remove', 'Brown chicken 5 mins', 'Add peppers and garlic, cook 3 mins', 'Add rice, paprika, saffron, stir 1 min', 'Add stock, bring to boil', 'Reduce heat, simmer 15 mins (do not stir)', 'Add beans and peas, cook 5 mins', 'Add chorizo back, cook 5 mins', 'Remove from heat, rest 5 mins', 'Serve with lemon and parsley'],
                    nutrition: {protein: 36, iron: 'high', cals: 520},
                    why: 'Paella is Spanish classic packed with protein and vegetables. Saffron has antioxidant properties. Chorizo adds flavour and iron. Communal, festive dish.',
                    tips: 'Use paella pan if you have one | Add prawns | Swap chicken for rabbit | Make for 4 portions',
                    batch: '✓ Yes'
                }
            }
        ],
        bonusDay: {
            breakfast: {
                name: 'Immune-Boosting Green Smoothie',
                prep: 5, cook: 0,
                helps: ['🛡️ Immune Support', '🌸 Urogenital Health', '💪 Energy'],
                ingredients: ['1 scoop vanilla protein powder', '200ml coconut water', 'Handful spinach', '100g pineapple chunks (frozen)', '80g mango chunks (frozen)', 'Half banana', '1 tbsp chia seeds', '1 tsp fresh ginger, grated', 'Juice of half lime'],
                method: ['Blend all ingredients until smooth', 'Pour into glass', 'Drink immediately'],
                nutrition: {protein: 28, vitamin_c: 'very high', cals: 320},
                why: 'Pineapple contains bromelain (anti-inflammatory enzyme). Mango provides vitamins A and C. Ginger supports immune system. Coconut water hydrates. Spinach adds minerals.',
                tips: 'Freeze fruit chunks | Add collagen powder | Use fresh or frozen fruit',
                batch: 'No - best fresh'
            },
            lunch: {
                name: 'Sicilian Caponata with Grilled Fish',
                prep: 20, cook: 30,
                helps: ['🛡️ Immune Support', '💆 Skin Health', '🍽️ Digestion'],
                ingredients: ['150g white fish (cod or sea bass)', '1 aubergine, cubed', '1 red pepper, chopped', '2 celery sticks, sliced', '200g cherry tomatoes, halved', '50g green olives', '2 tbsp capers', '1 onion, diced', '3 cloves garlic, minced', '3 tbsp olive oil', '2 tbsp red wine vinegar', '1 tbsp honey', 'Fresh basil', 'Pine nuts'],
                method: ['Heat 2 tbsp oil, fry aubergine 10 mins until golden', 'Remove aubergine', 'Add remaining oil, fry onion, celery, pepper 8 mins', 'Add garlic, cook 1 min', 'Add tomatoes, olives, capers, cook 5 mins', 'Return aubergine, add vinegar and honey', 'Simmer 5 mins', 'Meanwhile: grill fish 8-10 mins', 'Serve fish on caponata', 'Top with basil and pine nuts'],
                nutrition: {protein: 34, fibre: 10, cals: 450},
                why: 'Caponata is Sicilian sweet and sour vegetable dish (packed with antioxidants). Aubergine, peppers, tomatoes provide diverse nutrients. Fish adds omega-3s. Flavourful and nourishing.',
                tips: 'Make caponata ahead (flavour improves) | Serve at room temperature | Use any fish',
                batch: '✓✓ Yes (caponata)'
            },
            dinner: {
                name: 'Greek Moussaka (Lightened Version)',
                prep: 25, cook: 50,
                helps: ['🛡️ Immune Support', '💪 Energy', '🍽️ Digestion'],
                ingredients: ['300g lamb mince', '2 aubergines, sliced lengthways', '1 onion, diced', '2 cloves garlic, minced', '400g tinned tomatoes', '1 tsp cinnamon', '1 tsp oregano', '200g Greek yoghurt', '2 eggs', '30g Parmesan, grated', '4 tbsp olive oil', 'Fresh parsley'],
                method: ['Preheat oven to 180°C', 'Brush aubergine with 2 tbsp oil, grill 5 mins each side', 'Heat remaining oil, fry onion 5 mins', 'Add lamb, brown 5 mins', 'Add garlic, cinnamon, oregano, cook 1 min', 'Add tomatoes, simmer 15 mins', 'Mix yoghurt, eggs, half Parmesan', 'Layer: half aubergine, all meat, remaining aubergine', 'Pour yoghurt mixture on top', 'Sprinkle remaining Parmesan', 'Bake 30 mins until golden', 'Rest 10 mins', 'Garnish with parsley'],
                nutrition: {protein: 38, calcium: 'high', cals: 480},
                why: 'Traditional Greek comfort food. Using yoghurt instead of bechamel reduces calories. Lamb provides iron and zinc. Aubergine adds fibre. Cinnamon is antioxidant.',
                tips: 'Batch: makes 4 portions | Freeze well | Use turkey mince | Serve with Greek salad',
                batch: '✓✓✓ Excellent'
            }
        },
        batchCooking: {
            sunday: [
                'Make cranberry bircher muesli (Day 2 breakfast - 3 jars)',
                'Make gazpacho soup (Day 2 lunch - 3 portions)',
                'Roast rainbow vegetables for multiple meals',
                'Make Italian wedding soup (Day 3 lunch - 4 portions)',
                'Make Moroccan turkey tagine (Day 5 dinner - 4 portions)',
                'Cook quinoa (500g for week)',
                'Make roasted red pepper soup (Day 6 lunch - 4 portions)',
                'Prepare moussaka (Bonus dinner - 4 portions)',
                'Boil 10 eggs for quick protein',
                'Make berry compote (Day 1 breakfast - lasts 5 days)'
            ],
            wednesday: [
                'Make citrus chia pudding (Day 6 breakfast - 3 jars)',
                'Prep rainbow Buddha bowl components',
                'Grill chicken breasts for salads (Days 5, 7)',
                'Roast more vegetables (sweet potato, peppers)',
                'Make caponata (Bonus lunch)',
                'Cook more quinoa if needed',
                'Prep mango salsa (Day 6 dinner)'
            ],
            storage: [
                'Berry compote: fridge 5 days',
                'Bircher muesli: fridge 5 days',
                'Chia pudding: fridge 5 days',
                'Gazpacho: fridge 3 days',
                'Italian wedding soup: fridge 3 days, freeze 3 months',
                'Moroccan tagine: fridge 3 days, freeze 3 months',
                'Red pepper soup: fridge 4 days, freeze 3 months',
                'Moussaka: fridge 3 days, freeze 3 months',
                'Roasted vegetables: fridge 4 days',
                'Cooked quinoa: fridge 5 days',
                'Caponata: fridge 5 days (improves with time)'
            ],
            tips: [
                'Mediterranean food often tastes better next day',
                'Make double portions of tagines and stews',
                'Roast vegetables on high heat for caramelisation',
                'Store soups without grains/pasta (add when reheating)',
                'Keep fresh herbs in water like flowers',
                'Freeze individual portions for easy meals',
                'Label everything with date and contents'
            ]
        }
    }
};

// Generate shopping list from week's recipes
function generateShoppingList(week) {
    if (!week.days || week.days.length === 0) return '';
    
    // Aggregate all ingredients from all meals
    const ingredientCategories = {
        'Fish & Seafood': [],
        'Meat & Poultry': [],
        'Dairy & Eggs': [],
        'Fresh Vegetables': [],
        'Fresh Fruit & Berries': [],
        'Grains & Pulses': [],
        'Nuts & Seeds': [],
        'Herbs & Fresh Aromatics': [],
        'Tinned & Jarred': [],
        'Oils & Condiments': [],
        'Spices & Dried Herbs': [],
        'Bakery': [],
        'Freezer Items': []
    };
    
    // Collect all ingredients from every meal
    week.days.forEach(day => {
        ['breakfast', 'lunch', 'dinner'].forEach(meal => {
            if (day[meal] && day[meal].ingredients) {
                day[meal].ingredients.forEach(ing => {
                    categorizeIngredient(ing, ingredientCategories);
                });
            }
        });
    });
    
    // Also check bonus day if it exists
    if (week.bonusDay) {
        ['breakfast', 'lunch', 'dinner'].forEach(meal => {
            if (week.bonusDay[meal] && week.bonusDay[meal].ingredients) {
                week.bonusDay[meal].ingredients.forEach(ing => {
                    categorizeIngredient(ing, ingredientCategories);
                });
            }
        });
    }
    
    let html = '';
    Object.keys(ingredientCategories).forEach(category => {
        if (ingredientCategories[category].length > 0) {
            // Remove duplicates but keep quantities
            const unique = [...new Set(ingredientCategories[category])];
            
            html += `
            <div style="margin-bottom: 2rem;">
                <h4 style="color: ${week.color}; font-size: 1.15rem; font-weight: 600; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.6rem; padding-bottom: 0.5rem; border-bottom: 2px solid ${week.color}20;">
                    <span style="font-size: 1.4rem;">${getCategoryIcon(category)}</span>
                    <span>${category}</span>
                </h4>
                <div style="display: grid; gap: 0.8rem;">
                    ${unique.map(ing => `
                        <label style="display: flex; align-items: center; gap: 0.8rem; padding: 0.6rem 1rem; background: rgba(255,255,255,0.6); border-radius: 12px; cursor: pointer; transition: all 0.2s; border: 1px solid ${week.color}10;" onmouseover="this.style.background='rgba(200,213,185,0.15)'" onmouseout="this.style.background='rgba(255,255,255,0.6)'">
                            <input type="checkbox" style="cursor: pointer; width: 18px; height: 18px;">
                            <span style="font-weight: 300; color: #4A5568; font-size: 0.95rem;">${ing}</span>
                        </label>
                    `).join('')}
                </div>
            </div>`;
        }
    });
    
    return html;
}

// Helper function to categorize ingredients
function categorizeIngredient(ingredient, categories) {
    const lower = ingredient.toLowerCase();
    
    // Fish & Seafood
    if (lower.includes('salmon') || lower.includes('mackerel') || lower.includes('sardine') || 
        lower.includes('anchov') || lower.includes('tuna') || lower.includes('cod') || 
        lower.includes('sea bass') || lower.includes('prawn') || lower.includes('fish') ||
        lower.includes('herring') || lower.includes('seafood')) {
        categories['Fish & Seafood'].push(ingredient);
    }
    // Meat & Poultry
    else if (lower.includes('chicken') || lower.includes('turkey') || lower.includes('lamb') || 
             lower.includes('beef') || lower.includes('pork') || lower.includes('mince') ||
             lower.includes('steak') || lower.includes('chorizo') || lower.includes('bacon') ||
             lower.includes('sausage') || lower.includes('meatball')) {
        categories['Meat & Poultry'].push(ingredient);
    }
    // Dairy & Eggs
    else if (lower.includes('yoghurt') || lower.includes('yoghurt') || lower.includes('egg') || 
             lower.includes('feta') || lower.includes('cheese') || lower.includes('milk') ||
             lower.includes('butter') || lower.includes('cream') || lower.includes('halloumi') ||
             lower.includes('parmesan') || lower.includes('mozzarella') || lower.includes('kefir')) {
        categories['Dairy & Eggs'].push(ingredient);
    }
    // Fresh Vegetables
    else if (lower.includes('spinach') || lower.includes('kale') || lower.includes('tomato') || 
             lower.includes('pepper') || lower.includes('courgette') || lower.includes('carrot') || 
             lower.includes('onion') || lower.includes('mushroom') || lower.includes('cucumber') || 
             lower.includes('lettuce') || lower.includes('rocket') || lower.includes('broccoli') || 
             lower.includes('cauliflower') || lower.includes('asparagus') || lower.includes('celery') ||
             lower.includes('aubergine') || lower.includes('beetroot') || lower.includes('radish') ||
             lower.includes('spring onion') || lower.includes('leek') || lower.includes('pak choi') ||
             lower.includes('cabbage') || lower.includes('bean sprout') || lower.includes('green bean') ||
             lower.includes('salad') || lower.includes('mixed veg') || lower.includes('mixed green') ||
             (lower.includes('veg') && !lower.includes('stock'))) {
        categories['Fresh Vegetables'].push(ingredient);
    }
    // Fresh Fruit & Berries
    else if (lower.includes('berr') || lower.includes('apple') || lower.includes('banana') || 
             lower.includes('orange') || lower.includes('grape') || lower.includes('mango') ||
             lower.includes('pineapple') || lower.includes('melon') || lower.includes('peach') ||
             lower.includes('plum') || lower.includes('cherry') || lower.includes('pear') ||
             lower.includes('kiwi') || lower.includes('pomegranate') || lower.includes('avocado')) {
        categories['Fresh Fruit & Berries'].push(ingredient);
    }
    // Grains & Pulses
    else if (lower.includes('chickpea') || lower.includes('lentil') || lower.includes('bean') ||
             lower.includes('quinoa') || lower.includes('oat') || lower.includes('rice') ||
             lower.includes('bulgur') || lower.includes('couscous') || lower.includes('pasta') ||
             lower.includes('noodle') || lower.includes('pearl barley') || lower.includes('edamame')) {
        categories['Grains & Pulses'].push(ingredient);
    }
    // Nuts & Seeds
    else if (lower.includes('walnut') || lower.includes('almond') || lower.includes('cashew') ||
             lower.includes('pecan') || lower.includes('pine nut') || lower.includes('pistachio') ||
             lower.includes('hazelnut') || lower.includes('nut') ||
             lower.includes('seed') || lower.includes('chia') || lower.includes('flax') ||
             lower.includes('sesame') || lower.includes('pumpkin seed') || lower.includes('sunflower seed') ||
             lower.includes('tahini')) {
        categories['Nuts & Seeds'].push(ingredient);
    }
    // Fresh Herbs & Aromatics
    else if (lower.includes('fresh') || lower.includes('parsley') || lower.includes('dill') || 
             lower.includes('basil') || lower.includes('mint') || lower.includes('coriander') || 
             lower.includes('rosemary') || lower.includes('thyme') || lower.includes('oregano') ||
             lower.includes('chive') || lower.includes('tarragon') || lower.includes('sage') ||
             lower.includes('garlic') || lower.includes('ginger') || lower.includes('lemon grass') ||
             lower.includes('chilli') && !lower.includes('flake') && !lower.includes('powder')) {
        categories['Herbs & Fresh Aromatics'].push(ingredient);
    }
    // Tinned & Jarred
    else if (lower.includes('tinned') || lower.includes('canned') || lower.includes('jar') ||
             lower.includes('passata') || lower.includes('olive') || lower.includes('caper') ||
             lower.includes('sun-dried') || lower.includes('coconut milk') ||
             lower.includes('stock') || lower.includes('broth')) {
        categories['Tinned & Jarred'].push(ingredient);
    }
    // Oils & Condiments
    else if (lower.includes('oil') || lower.includes('vinegar') || lower.includes('mustard') ||
             lower.includes('soy sauce') || lower.includes('fish sauce') || lower.includes('worcester') ||
             lower.includes('honey') || lower.includes('maple') || lower.includes('mayo') ||
             lower.includes('hummus') || lower.includes('pesto') || lower.includes('lemon') && !lower.includes('grass') ||
             lower.includes('lime')) {
        categories['Oils & Condiments'].push(ingredient);
    }
    // Spices & Dried Herbs
    else if (lower.includes('cumin') || lower.includes('paprika') || lower.includes('turmeric') ||
             lower.includes('curry') || lower.includes('cinnamon') || lower.includes('nutmeg') ||
             lower.includes('cardamom') || lower.includes('coriander') && lower.includes('ground') ||
             lower.includes('spice') || lower.includes('herbs') || lower.includes('zaatar') ||
             lower.includes('sumac') || lower.includes('bay') || lower.includes('chilli') && (lower.includes('flake') || lower.includes('powder')) ||
             lower.includes('pepper') && (lower.includes('black') || lower.includes('white') || lower.includes('cayenne')) ||
             lower.includes('salt') || lower.includes('vanilla')) {
        categories['Spices & Dried Herbs'].push(ingredient);
    }
    // Bakery
    else if (lower.includes('bread') || lower.includes('wrap') || lower.includes('pitta') ||
             lower.includes('bagel') || lower.includes('roll') || lower.includes('toast') ||
             lower.includes('breadcrumb') || lower.includes('flour') || lower.includes('baguette')) {
        categories['Bakery'].push(ingredient);
    }
    // Freezer Items
    else if (lower.includes('frozen')) {
        categories['Freezer Items'].push(ingredient);
    }
    // Everything else goes to Pantry
    else {
        // Check if it's likely a pantry item
        if (categories['Tinned & Jarred'].length === 0 || 
            !lower.includes('stock') && !lower.includes('tinned')) {
            // Add to oils/condiments as catch-all for remaining items
            categories['Oils & Condiments'].push(ingredient);
        }
    }
}

// Display full shopping list page
function displayShoppingList(weekNum) {
    const week = recipeData[`week${weekNum}`];
    const contentArea = document.getElementById('weekContent');
    
    let html = `
        <div style="animation: fadeInUp 0.5s ease-out;">
            <!-- Back Button -->
            <div style="margin-bottom: 2rem;">
                <button onclick="displayWeek(${weekNum})" style="
                    padding: 1rem 2rem;
                    background: linear-gradient(135deg, #FFFFFF, #FEFEFE);
                    color: ${week.color}DD;
                    border: 1.5px solid ${week.color}30;
                    border-radius: 16px;
                    cursor: pointer;
                    font-weight: 500;
                    font-size: 0.95rem;
                    transition: all 0.3s ease;
                    box-shadow: 0 2px 10px ${week.color}15;
                    display: flex;
                    align-items: center;
                    gap: 0.6rem;
                    letter-spacing: 0.3px;
                " onmouseover="this.style.background='linear-gradient(135deg, ${week.color}15, ${week.color}08)'; this.style.transform='translateX(-3px)';" onmouseout="this.style.background='linear-gradient(135deg, #FFFFFF, #FEFEFE)'; this.style.transform='translateX(0)';">
                    <span style="font-size: 1.1rem;">←</span>
                    <span>Back to Week Overview</span>
                </button>
            </div>
            
            <!-- Shopping List Header -->
            <div style="background: linear-gradient(135deg, ${week.color}E5, ${week.color}CC); color: #2C3E50; border-radius: 28px; padding: 3rem 2.5rem; margin-bottom: 2.5rem; box-shadow: 0 8px 30px ${week.color}20; position: relative; overflow: hidden;">
                <div style="position: absolute; top: -80px; right: -80px; width: 250px; height: 250px; background: rgba(255,255,255,0.06); border-radius: 50%;"></div>
                <div style="position: relative; z-index: 1;">
                    <h2 style="color: #2C3E50; margin-bottom: 0.8rem; font-size: 2.5rem; font-weight: 300; letter-spacing: 1px; display: flex; align-items: center; gap: 1rem;">
                        <span style="font-size: 3rem;">🛒</span>
                        <span>Shopping List - Week ${weekNum}</span>
                    </h2>
                    <p style="margin: 0; opacity: 0.95; font-size: 1.1rem; font-weight: 300;">${week.theme}</p>
                </div>
            </div>
            
            <!-- Nutrition Goals Box -->
            <div style="background: linear-gradient(135deg, rgba(200,213,185,0.25), rgba(200,213,185,0.12)); border-radius: 24px; padding: 2rem 2.5rem; margin-bottom: 2.5rem; border: 1.5px solid rgba(200,213,185,0.3);">
                <h3 style="color: ${week.color}DD; font-size: 1.3rem; font-weight: 500; margin-bottom: 1.2rem; letter-spacing: 0.3px;">📊 Weekly Nutrition Goals</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
                    <div style="background: rgba(255,255,255,0.7); padding: 1.2rem; border-radius: 16px; border: 1px solid rgba(200,213,185,0.2);">
                        <div style="font-size: 0.85rem; color: #5A6C7D; font-weight: 400; margin-bottom: 0.3rem; text-transform: uppercase; letter-spacing: 1px;">Protein</div>
                        <div style="font-size: 1.8rem; font-weight: 300; color: ${week.color};">100-120g</div>
                        <div style="font-size: 0.8rem; color: #7D8A99; margin-top: 0.3rem;">per day</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.7); padding: 1.2rem; border-radius: 16px; border: 1px solid rgba(200,213,185,0.2);">
                        <div style="font-size: 0.85rem; color: #5A6C7D; font-weight: 400; margin-bottom: 0.3rem; text-transform: uppercase; letter-spacing: 1px;">Fibre</div>
                        <div style="font-size: 1.8rem; font-weight: 300; color: ${week.color};">30g+</div>
                        <div style="font-size: 0.8rem; color: #7D8A99; margin-top: 0.3rem;">per day</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.7); padding: 1.2rem; border-radius: 16px; border: 1px solid rgba(200,213,185,0.2);">
                        <div style="font-size: 0.85rem; color: #5A6C7D; font-weight: 400; margin-bottom: 0.3rem; text-transform: uppercase; letter-spacing: 1px;">Healthy Fats</div>
                        <div style="font-size: 1.8rem; font-weight: 300; color: ${week.color};">Every Meal</div>
                        <div style="font-size: 0.8rem; color: #7D8A99; margin-top: 0.3rem;">omega-3s priority</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.7); padding: 1.2rem; border-radius: 16px; border: 1px solid rgba(200,213,185,0.2);">
                        <div style="font-size: 0.85rem; color: #5A6C7D; font-weight: 400; margin-bottom: 0.3rem; text-transform: uppercase; letter-spacing: 1px;">Rainbow Veg</div>
                        <div style="font-size: 1.8rem; font-weight: 300; color: ${week.color};">🌈 Daily</div>
                        <div style="font-size: 0.8rem; color: #7D8A99; margin-top: 0.3rem;">5+ colours</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.7); padding: 1.2rem; border-radius: 16px; border: 1px solid rgba(200,213,185,0.2);">
                        <div style="font-size: 0.85rem; color: #5A6C7D; font-weight: 400; margin-bottom: 0.3rem; text-transform: uppercase; letter-spacing: 1px;">Water Intake</div>
                        <div style="font-size: 1.8rem; font-weight: 300; color: ${week.color};">💧 30ml</div>
                        <div style="font-size: 0.8rem; color: #7D8A99; margin-top: 0.3rem;">per 1kg body weight</div>
                    </div>
                </div>
            </div>
            
            <!-- Shopping List Content -->
            <div style="background: linear-gradient(135deg, rgba(255,255,255,0.7), rgba(248,250,252,0.8)); border-radius: 28px; padding: 3rem 2.5rem; box-shadow: 0 4px 20px rgba(150, 170, 160, 0.12); border: 1px solid rgba(200,213,185,0.2);">
                ${generateShoppingList(week)}
                
                <!-- Shopping Tips -->
                <div style="margin-top: 2.5rem; padding: 2rem; background: linear-gradient(135deg, rgba(253,180,75,0.12), rgba(253,180,75,0.05)); border-radius: 20px; border: 1.5px dashed ${week.color}30;">
                    <h4 style="color: ${week.color}DD; font-size: 1.15rem; font-weight: 500; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.6rem;">
                        <span style="font-size: 1.5rem;">💡</span>
                        <span>Shopping Tips</span>
                    </h4>
                    <ul style="margin: 0; padding-left: 1.5rem; color: #5A6C7D; font-weight: 300; line-height: 1.8;">
                        <li style="margin-bottom: 0.6rem;">Buy <strong>SMASH fish</strong> (Salmon, Mackerel, Anchovies, Sardines, Herring) - highest in omega-3s</li>
                        <li style="margin-bottom: 0.6rem;">Choose <strong>rainbow vegetables</strong> for maximum antioxidants: red, orange, yellow, green, purple</li>
                        <li style="margin-bottom: 0.6rem;">Buy <strong>organic</strong> for the "Dirty Dozen" (berries, leafy greens, peppers)</li>
                        <li style="margin-bottom: 0.6rem;">Stock <strong>frozen vegetables</strong> - just as nutritious and convenient for busy days</li>
                        <li style="margin-bottom: 0.6rem;">Batch prep on <strong>Sunday</strong>: wash greens, chop vegetables, cook grains</li>
                        <li style="margin-bottom: 0.6rem;">Check your cupboards first - many spices and pantry items you may already have</li>
                        <li>Tick off items as you shop for easy tracking</li>
                    </ul>
                    <div style="margin-top: 1.5rem; text-align: center;">
                        <button onclick="window.print()" style="
                            padding: 0.9rem 2rem;
                            background: linear-gradient(135deg, ${week.color}E5, ${week.color}CC);
                            color: #2C3E50;
                            border: none;
                            border-radius: 14px;
                            cursor: pointer;
                            font-weight: 500;
                            font-size: 0.95rem;
                            transition: all 0.3s ease;
                            box-shadow: 0 3px 12px ${week.color}25;
                            display: inline-flex;
                            align-items: center;
                            gap: 0.6rem;
                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px ${week.color}35';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 12px ${week.color}25';">
                            <span style="font-size: 1.2rem;">🖨️</span>
                            <span>Print Shopping List</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Bottom Back Button -->
            <div style="margin-top: 2.5rem; text-align: center;">
                <button onclick="displayWeek(${weekNum})" style="
                    padding: 1.2rem 3rem;
                    background: linear-gradient(135deg, ${week.color}F0, ${week.color}E5);
                    color: #2C3E50;
                    border: none;
                    border-radius: 18px;
                    cursor: pointer;
                    font-weight: 500;
                    font-size: 1.05rem;
                    transition: all 0.3s ease;
                    box-shadow: 0 4px 15px ${week.color}25;
                    letter-spacing: 0.5px;
                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px ${week.color}35';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px ${week.color}25';">
                    ← Back to Week Overview
                </button>
            </div>
        </div>`;
    
    contentArea.innerHTML = html;
    window.scrollTo(0, 0);
}

function getCategoryIcon(category) {
    const icons = {
        'Fish & Seafood': '🐟',
        'Meat & Poultry': '🍗',
        'Dairy & Eggs': '🥛',
        'Fresh Vegetables': '🥬',
        'Fresh Fruit & Berries': '🍓',
        'Grains & Pulses': '🌾',
        'Nuts & Seeds': '🥜',
        'Herbs & Fresh Aromatics': '🌿',
        'Tinned & Jarred': '🥫',
        'Oils & Condiments': '🫒',
        'Spices & Dried Herbs': '🧂',
        'Bakery': '🥖',
        'Freezer Items': '❄️'
    };
    return icons[category] || '📦';
}

// Display batch cooking ideas
function displayBatchCookingIdeas(weekNum) {
    const week = recipeData[`week${weekNum}`];
    const contentArea = document.getElementById('weekContent');
    
    let html = `
        <div style="animation: fadeInUp 0.5s ease-out;">
            <!-- Back Button -->
            <div style="margin-bottom: 2rem;">
                <button onclick="displayWeek(${weekNum})" style="
                    padding: 1rem 2rem;
                    background: linear-gradient(135deg, #FFFFFF, #FEFEFE);
                    color: #8BC34ADD;
                    border: 1.5px solid #8BC34A30;
                    border-radius: 16px;
                    cursor: pointer;
                    font-weight: 500;
                    font-size: 0.95rem;
                    transition: all 0.3s ease;
                    box-shadow: 0 2px 10px #8BC34A15;
                    display: flex;
                    align-items: center;
                    gap: 0.6rem;
                    letter-spacing: 0.3px;
                " onmouseover="this.style.background='linear-gradient(135deg, #8BC34A15, #8BC34A08)'; this.style.transform='translateX(-3px)';" onmouseout="this.style.background='linear-gradient(135deg, #FFFFFF, #FEFEFE)'; this.style.transform='translateX(0)';">
                    <span style="font-size: 1.1rem;">←</span>
                    <span>Back to Week Overview</span>
                </button>
            </div>
            
            <!-- Header -->
            <div style="background: linear-gradient(135deg, #8BC34AE5, #8BC34ACC); color: #2C3E50; border-radius: 28px; padding: 3rem 2.5rem; margin-bottom: 2.5rem; box-shadow: 0 8px 30px #8BC34A20; position: relative; overflow: hidden;">
                <div style="position: absolute; top: -80px; right: -80px; width: 250px; height: 250px; background: rgba(255,255,255,0.06); border-radius: 50%;"></div>
                <div style="position: relative; z-index: 1;">
                    <h2 style="color: #2C3E50; margin-bottom: 0.8rem; font-size: 2.5rem; font-weight: 300; letter-spacing: 1px; display: flex; align-items: center; gap: 1rem;">
                        <span style="font-size: 3rem;">🥘</span>
                        <span>Batch Cooking Guide</span>
                    </h2>
                    <p style="margin: 0; opacity: 0.95; font-size: 1.1rem; font-weight: 300;">Save time and stay on track with smart meal prep strategies</p>
                </div>
            </div>
            
            <!-- Content -->
            <div style="background: linear-gradient(135deg, rgba(255,255,255,0.7), rgba(248,250,252,0.8)); border-radius: 28px; padding: 3rem 2.5rem; box-shadow: 0 4px 20px rgba(150, 170, 160, 0.12); border: 1px solid rgba(200,213,185,0.2);">
                
                <!-- Sunday Prep Session -->
                <div style="margin-bottom: 3rem;">
                    <h3 style="color: #8BC34A; font-size: 1.5rem; font-weight: 500; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                        <span style="font-size: 1.8rem;">🗓️</span>
                        <span>Sunday Prep Session (2 hours)</span>
                    </h3>
                    <div style="display: grid; gap: 1.5rem;">
                        <div style="background: white; padding: 1.5rem; border-radius: 16px; border-left: 4px solid #8BC34A;">
                            <h4 style="color: #558B2F; font-weight: 500; margin-bottom: 0.8rem;">🍗 Proteins</h4>
                            <ul style="margin: 0; padding-left: 1.5rem; color: #4A5568; font-weight: 300; line-height: 1.8;">
                                <li>Roast 2 whole chickens (use through week)</li>
                                <li>Cook turkey meatballs (Days 2, 6) - freeze half</li>
                                <li>Boil 8-10 eggs (quick breakfasts & snacks)</li>
                                <li>Marinate salmon portions in olive oil & herbs</li>
                            </ul>
                        </div>
                        
                        <div style="background: white; padding: 1.5rem; border-radius: 16px; border-left: 4px solid #FF9800;">
                            <h4 style="color: #F57C00; font-weight: 500; margin-bottom: 0.8rem;">🌾 Grains & Legumes</h4>
                            <ul style="margin: 0; padding-left: 1.5rem; color: #4A5568; font-weight: 300; line-height: 1.8;">
                                <li>Cook 3 cups quinoa (stores 5 days)</li>
                                <li>Prepare lentil soup base (Day 4 lunch)</li>
                                <li>Make overnight oats for 3 days (Day 3 breakfast)</li>
                            </ul>
                        </div>
                        
                        <div style="background: white; padding: 1.5rem; border-radius: 16px; border-left: 4px solid #4CAF50;">
                            <h4 style="color: #2E7D32; font-weight: 500; margin-bottom: 0.8rem;">🥬 Vegetables</h4>
                            <ul style="margin: 0; padding-left: 1.5rem; color: #4A5568; font-weight: 300; line-height: 1.8;">
                                <li>Wash & chop salad ingredients (store in containers)</li>
                                <li>Roast 2 trays mixed veg (reheats beautifully)</li>
                                <li>Prep raw veg sticks for snacks</li>
                                <li>Make Mediterranean chickpea salad (Days 1, 3)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Midweek Refresh -->
                <div style="margin-bottom: 3rem;">
                    <h3 style="color: #FF9800; font-size: 1.5rem; font-weight: 500; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                        <span style="font-size: 1.8rem;">🔄</span>
                        <span>Wednesday Refresh (30 mins)</span>
                    </h3>
                    <div style="background: white; padding: 1.5rem; border-radius: 16px;">
                        <ul style="margin: 0; padding-left: 1.5rem; color: #4A5568; font-weight: 300; line-height: 1.8;">
                            <li>Cook fresh fish for Days 5-7</li>
                            <li>Prep more salad ingredients</li>
                            <li>Boil more eggs if needed</li>
                            <li>Reheat & portion remaining meals</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Storage Tips -->
                <div style="margin-bottom: 3rem;">
                    <h3 style="color: #E91E63; font-size: 1.5rem; font-weight: 500; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                        <span style="font-size: 1.8rem;">📦</span>
                        <span>Storage Tips</span>
                    </h3>
                    <div style="display: grid; gap: 1rem;">
                        <div style="background: white; padding: 1.2rem; border-radius: 12px; display: flex; align-items: center; gap: 1rem;">
                            <div style="font-size: 2rem;">❄️</div>
                            <div>
                                <strong style="color: var(--text-dark);">Freezer Friends:</strong><br>
                                <span style="color: #5A6C7D; font-weight: 300; font-size: 0.95rem;">Turkey meatballs, roast chicken portions, lentil soup, cooked quinoa (up to 3 months)</span>
                            </div>
                        </div>
                        <div style="background: white; padding: 1.2rem; border-radius: 12px; display: flex; align-items: center; gap: 1rem;">
                            <div style="font-size: 2rem;">🧊</div>
                            <div>
                                <strong style="color: var(--text-dark);">Fridge Life:</strong><br>
                                <span style="color: #5A6C7D; font-weight: 300; font-size: 0.95rem;">Cooked grains 5 days, roasted veg 4 days, boiled eggs 7 days, raw prepped veg 3 days</span>
                            </div>
                        </div>
                        <div style="background: white; padding: 1.2rem; border-radius: 12px; display: flex; align-items: center; gap: 1rem;">
                            <div style="font-size: 2rem;">🐟</div>
                            <div>
                                <strong style="color: var(--text-dark);">Fresh Only:</strong><br>
                                <span style="color: #5A6C7D; font-weight: 300; font-size: 0.95rem;">Fish, seafood, and leafy salads - prepare these on the day for best quality</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Time-Saving Hacks -->
                <div>
                    <h3 style="color: #9C27B0; font-size: 1.5rem; font-weight: 500; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                        <span style="font-size: 1.8rem;">⚡</span>
                        <span>Time-Saving Hacks</span>
                    </h3>
                    <div style="background: linear-gradient(135deg, rgba(156,39,176,0.1), rgba(156,39,176,0.05)); padding: 1.5rem; border-radius: 16px;">
                        <ul style="margin: 0; padding-left: 1.5rem; color: #4A5568; font-weight: 300; line-height: 1.8;">
                            <li><strong>Buy pre-chopped frozen veg</strong> - just as nutritious, massive time saver</li>
                            <li><strong>Use rotisserie chicken</strong> - if short on time, buy ready-cooked</li>
                            <li><strong>Invest in glass containers</strong> - see what you have, reheat easily</li>
                            <li><strong>Label everything</strong> - date & contents prevent waste</li>
                            <li><strong>Double recipes</strong> - if cooking once, cook twice and freeze half</li>
                        </ul>
                    </div>
                </div>
                
            </div>
        </div>`;
    
    contentArea.innerHTML = html;
    window.scrollTo(0, 0);
}

// Display week function - shows day boxes first
function displayWeek(weekNum) {
    try {
        const week = recipeData[`week${weekNum}`];
        
        if (!week) {
            alert('Error: No data for Week ' + weekNum);
            return;
        }
        
        const weekViewContainer = document.getElementById('weekViewContainer');
        const recipesMainPage = document.getElementById('recipesMainPage');
        const contentArea = document.getElementById('weekContent');
        
        // Hide main recipes page, show week view
        recipesMainPage.style.display = 'none';
        weekViewContainer.style.display = 'block';
        
        let html = `
        <div style="animation: fadeInUp 0.5s ease-out;">
            <!-- Week Title - JOYFUL DESIGN -->
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <h1 style="
                    background: linear-gradient(135deg, ${week.color}, ${week.color}DD);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                    font-size: 3rem;
                    font-weight: 700;
                    margin: 0;
                    letter-spacing: 2px;
                    text-shadow: 2px 2px 4px rgba(0,0,0,0.05);
                ">✨ Week ${weekNum} ✨</h1>
            </div>
            
            <!-- Back Button to Main Recipes Page - JOYFUL DESIGN -->
            <div style="margin-bottom: 2.5rem; text-align: center;">
                <button onclick="backToRecipesMain()" style="
                    padding: 1rem 2rem;
                    background: linear-gradient(135deg, #FFD8CC, #FFE5D9);
                    color: #2C3E50;
                    border: none;
                    border-radius: 20px;
                    cursor: pointer;
                    font-weight: 600;
                    font-size: 1rem;
                    transition: all 0.3s;
                    box-shadow: 0 4px 15px rgba(255, 216, 204, 0.3);
                    display: inline-flex;
                    align-items: center;
                    gap: 0.8rem;
                " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 6px 20px rgba(255, 216, 204, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(255, 216, 204, 0.3)';">
                    <span style="font-size: 1.3rem;">←</span>
                    <span>Back to Choose Your Week</span>
                </button>
            </div>
            
            <!-- Week Header -->
            <div style="background: linear-gradient(135deg, ${week.color}E5, ${week.color}CC); color: #2C3E50; border-radius: 24px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 8px 25px ${week.color}25; max-width: 900px; margin-left: auto; margin-right: auto;">
                <h2 style="color: #2C3E50; margin-bottom: 0.5rem; font-weight: 600;">${week.theme}</h2>
                <p style="margin: 0; opacity: 0.95; font-weight: 300;">${week.subtitle}</p>
                <div style="margin-top: 1rem; display: flex; flex-wrap: wrap; gap: 0.5rem;">
                    ${week.symptoms.map(s => `<span style="background: rgba(255,255,255,0.2); padding: 0.4rem 0.9rem; border-radius: 20px; font-size: 0.9rem; font-weight: 300;">${s}</span>`).join('')}
                </div>
            </div>`;
    
    // Add day boxes (soft, feminine grid view) - COLORFUL VERSION
    if (week.days && week.days.length > 0) {
        // Beautiful pastel colours for each day
        const dayColors = [
            { bg: '#E8D5F2', border: '#C89DE8', text: '#7B3F9F' },      // Day 1 - Soft Purple
            { bg: '#FFE5D9', border: '#FFB69D', text: '#D35400' },      // Day 2 - Peach
            { bg: '#D4F1F4', border: '#75E6DA', text: '#189AB4' },      // Day 3 - Aqua
            { bg: '#FFF4E6', border: '#FFD700', text: '#E67E22' },      // Day 4 - Golden
            { bg: '#E8F8F5', border: '#76D7C4', text: '#117A65' },      // Day 5 - Mint
            { bg: '#FADBD8', border: '#F1948A', text: '#A93226' },      // Day 6 - Rose
            { bg: '#E8DAEF', border: '#BB8FCE', text: '#6C3483' }       // Day 7 - Lavender
        ];
        
        html += `
        <div style="max-width: 900px; margin: 0 auto 2.5rem;">
        <div style="background: linear-gradient(135deg, rgba(255,255,255,0.6), rgba(248,250,252,0.8)); border-radius: 28px; padding: 2.5rem 2rem; box-shadow: 0 4px 20px rgba(150, 170, 160, 0.12); border: 1px solid rgba(200,213,185,0.2);">
            <h3 style="color: ${week.color}DD; margin-bottom: 2rem; text-align: center; font-size: 1.5rem; font-weight: 500; letter-spacing: 0.5px;">Choose Your Day</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1.5rem;">`;
        
        week.days.forEach((day, idx) => {
            const color = dayColors[idx];
            html += `
                <button onclick="displayDay(${weekNum}, ${idx})" style="
                    padding: 1.5rem 1rem;
                    border: none;
                    background: linear-gradient(135deg, ${color.bg}, #FFFFFF);
                    border-radius: 20px;
                    cursor: pointer;
                    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                    box-shadow: 0 3px 12px ${color.border}30, 0 1px 3px rgba(0,0,0,0.08);
                    overflow: hidden;
                    position: relative;
                    border: 2px solid ${color.border}40;
                    text-align: center;
                " onmouseover="this.style.transform='scale(1.08) translateY(-5px)'; this.style.boxShadow='0 8px 25px ${color.border}50, 0 3px 8px rgba(0,0,0,0.12)'; this.style.borderColor='${color.border}70';" onmouseout="this.style.transform='scale(1) translateY(0)'; this.style.boxShadow='0 3px 12px ${color.border}30, 0 1px 3px rgba(0,0,0,0.08)'; this.style.borderColor='${color.border}40';">
                    
                    <!-- Day Number -->
                    <div style="background: ${color.bg}; padding: 1rem; border-radius: 14px; margin-bottom: 1rem;">
                        <div style="color: ${color.text}; font-size: 2rem; font-weight: 600; letter-spacing: 0.5px;">Day ${idx + 1}</div>
                    </div>
                    
                    <!-- Meal Icons -->
                    <div style="display: flex; justify-content: center; gap: 1rem; font-size: 1.6rem;">
                        <span style="filter: grayscale(5%);" title="Breakfast">🍳</span>
                        <span style="filter: grayscale(5%);" title="Lunch">🥗</span>
                        <span style="filter: grayscale(5%);" title="Dinner">🍽️</span>
                    </div>
                    
                    <!-- View Recipes Text -->
                    <div style="margin-top: 1rem; color: ${color.text}; font-size: 0.85rem; font-weight: 500; letter-spacing: 0.3px;">
                        View Recipes →
                    </div>
                </button>`;
        });
        
        // Add Bonus and Batch Cooking (in same grid as days) - COLORFUL & COMPACT
        if (week.bonusDay) {
            html += `
                <button onclick="displayDay(${weekNum}, 7)" style="
                    padding: 1.5rem 1rem;
                    border: none;
                    background: linear-gradient(135deg, #FFE5B4, #FFFFFF);
                    border-radius: 20px;
                    cursor: pointer;
                    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                    box-shadow: 0 3px 12px rgba(255, 179, 71, 0.3), 0 1px 3px rgba(0,0,0,0.08);
                    overflow: hidden;
                    position: relative;
                    border: 2px solid rgba(255, 179, 71, 0.4);
                    text-align: center;
                " onmouseover="this.style.transform='scale(1.08) translateY(-5px)'; this.style.boxShadow='0 8px 25px rgba(255, 179, 71, 0.5), 0 3px 8px rgba(0,0,0,0.12)'; this.style.borderColor='rgba(255, 179, 71, 0.7)';" onmouseout="this.style.transform='scale(1) translateY(0)'; this.style.boxShadow='0 3px 12px rgba(255, 179, 71, 0.3), 0 1px 3px rgba(0,0,0,0.08)'; this.style.borderColor='rgba(255, 179, 71, 0.4)';">
                    
                    <!-- Bonus Badge - NO "Day 8" -->
                    <div style="background: #FFE5B4; padding: 1rem; border-radius: 14px; margin-bottom: 1rem;">
                        <div style="color: #E67E22; font-size: 2rem; font-weight: 600; letter-spacing: 0.5px;">✨</div>
                        <div style="color: #E67E22; font-size: 1.1rem; font-weight: 600; margin-top: 0.3rem;">BONUS</div>
                    </div>
                    
                    <!-- Meal Icons -->
                    <div style="display: flex; justify-content: center; gap: 1rem; font-size: 1.6rem;">
                        <span style="filter: grayscale(5%);" title="Breakfast">🍳</span>
                        <span style="filter: grayscale(5%);" title="Lunch">🥗</span>
                        <span style="filter: grayscale(5%);" title="Dinner">🍽️</span>
                    </div>
                    
                    <!-- View Recipes Text -->
                    <div style="margin-top: 1rem; color: #E67E22; font-size: 0.85rem; font-weight: 500; letter-spacing: 0.3px;">
                        View Recipes →
                    </div>
                </button>`;
        }
        
        // Batch Cooking Box (same grid) - MATCHING STYLE
        html += `
                <button onclick="displayBatchCookingIdeas(${weekNum})" style="
                    padding: 1.5rem 1rem;
                    border: none;
                    background: linear-gradient(135deg, #E8F8F5, #FFFFFF);
                    border-radius: 20px;
                    cursor: pointer;
                    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                    box-shadow: 0 3px 12px rgba(118, 215, 196, 0.3), 0 1px 3px rgba(0,0,0,0.08);
                    overflow: hidden;
                    position: relative;
                    border: 2px solid rgba(118, 215, 196, 0.4);
                    text-align: center;
                " onmouseover="this.style.transform='scale(1.08) translateY(-5px)'; this.style.boxShadow='0 8px 25px rgba(118, 215, 196, 0.5), 0 3px 8px rgba(0,0,0,0.12)'; this.style.borderColor='rgba(118, 215, 196, 0.7)';" onmouseout="this.style.transform='scale(1) translateY(0)'; this.style.boxShadow='0 3px 12px rgba(118, 215, 196, 0.3), 0 1px 3px rgba(0,0,0,0.08)'; this.style.borderColor='rgba(118, 215, 196, 0.4)';">
                    
                    <!-- Batch Badge -->
                    <div style="background: #E8F8F5; padding: 1rem; border-radius: 14px; margin-bottom: 1rem;">
                        <div style="color: #117A65; font-size: 2rem; font-weight: 600; letter-spacing: 0.5px;">🥘</div>
                        <div style="color: #117A65; font-size: 1.1rem; font-weight: 600; margin-top: 0.3rem;">BATCH</div>
                    </div>
                    
                    <!-- Icon -->
                    <div style="display: flex; justify-content: center; font-size: 2rem; margin-bottom: 0.5rem;">
                        ♻️
                    </div>
                    
                    <!-- View Text -->
                    <div style="margin-top: 0.5rem; color: #117A65; font-size: 0.85rem; font-weight: 500; letter-spacing: 0.3px;">
                        View Tips →
                    </div>
                </button>`;
        
        html += `</div></div></div>`;
        
        // Shopping List Box (Clickable)
        html += `
        <div style="background: linear-gradient(135deg, rgba(200,213,185,0.25), rgba(200,213,185,0.15)); border-radius: 28px; padding: 2.5rem; margin-bottom: 2.5rem; box-shadow: 0 4px 20px rgba(150, 170, 160, 0.12); border: 1.5px solid rgba(200,213,185,0.3); cursor: pointer; transition: all 0.3s ease;" onclick="displayShoppingList(${weekNum})" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 30px rgba(150, 170, 160, 0.2)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(150, 170, 160, 0.12)';">
            <div style="display: flex; align-items: center; justify-content: space-between;">
                <div style="flex: 1;">
                    <h3 style="color: ${week.color}DD; margin-bottom: 1rem; font-size: 1.6rem; font-weight: 500; letter-spacing: 0.5px; display: flex; align-items: center; gap: 0.8rem;">
                        <span style="font-size: 2rem;">🛒</span>
                        <span>Weekly Shopping List</span>
                    </h3>
                    <p style="margin: 0; color: #5A6C7D; font-weight: 300; font-size: 1rem; line-height: 1.6;">
                        Complete ingredients list for all 7 days • Organized by category • Printable format
                    </p>
                    <div style="margin-top: 1.2rem; display: flex; flex-wrap: wrap; gap: 0.8rem;">
                        <span style="background: rgba(255,255,255,0.6); padding: 0.4rem 0.9rem; border-radius: 12px; font-size: 0.85rem; color: #5A6C7D; font-weight: 400;">🥩 Proteins</span>
                        <span style="background: rgba(255,255,255,0.6); padding: 0.4rem 0.9rem; border-radius: 12px; font-size: 0.85rem; color: #5A6C7D; font-weight: 400;">🥬 Vegetables</span>
                        <span style="background: rgba(255,255,255,0.6); padding: 0.4rem 0.9rem; border-radius: 12px; font-size: 0.85rem; color: #5A6C7D; font-weight: 400;">🥛 Dairy</span>
                        <span style="background: rgba(255,255,255,0.6); padding: 0.4rem 0.9rem; border-radius: 12px; font-size: 0.85rem; color: #5A6C7D; font-weight: 400;">🏺 Pantry</span>
                    </div>
                </div>
                <div style="font-size: 3rem; color: ${week.color}80; margin-left: 2rem;">→</div>
            </div>
        </div>`;
    } else {
        html += `<div style="background: rgba(255,243,205,0.3); padding: 2rem; border-radius: 20px; border-left: 3px solid #FDB44B80; margin-bottom: 2rem;">
            <p style="margin: 0; font-weight: 500; color: #5A6C7D;">This week's recipes are coming soon! Week 1 is complete and ready to use.</p>
        </div>`;
    }
    
    // Eating Out Guide - softer design
    if (week.eatingOut) {
        html += `
        <div style="background: linear-gradient(135deg, rgba(253,248,243,0.6), rgba(255,252,249,0.4)); border-radius: 28px; padding: 3rem 2.5rem; margin-bottom: 2.5rem; border: 1.5px solid rgba(253,180,75,0.15); box-shadow: 0 4px 20px rgba(253,180,75,0.1);">
            <div style="text-align: center; margin-bottom: 2.5rem;">
                <h3 style="color: ${week.color}DD; margin-bottom: 0.8rem; font-size: 1.8rem; font-weight: 500; letter-spacing: 0.5px;">🍽️ Eating Out This Week</h3>
                <p style="color: #6B7D8F; margin: 0; font-size: 1rem; font-weight: 300;">Smart choices when you're too busy to cook</p>
            </div>
            
            <div style="display: grid; gap: 1.8rem; margin-bottom: 1.5rem;">
                <div style="background: linear-gradient(135deg, #FFFFFF, #FEFEFE); padding: 2rem; border-radius: 20px; border-left: 3px solid rgba(76,175,80,0.4); box-shadow: 0 2px 12px rgba(76,175,80,0.08);">
                    <h4 style="color: #66BB6A; margin-bottom: 1.2rem; font-size: 1.1rem; font-weight: 500; display: flex; align-items: center; gap: 0.7rem;">
                        <span style="font-size: 1.4rem; filter: grayscale(10%);">✓</span> 
                        <span style="letter-spacing: 0.3px;">Best Restaurant Choices</span>
                    </h4>
                    <ul style="padding-left: 1.5rem; margin: 0;">
                        ${week.eatingOut.best.map(b => `<li style="margin-bottom: 0.8rem; line-height: 1.7; color: #4A5568; font-weight: 300;">${b}</li>`).join('')}
                    </ul>
                </div>
                
                <div style="background: linear-gradient(135deg, #FFFFFF, #FEFEFE); padding: 2rem; border-radius: 20px; border-left: 3px solid ${week.color}40; box-shadow: 0 2px 12px ${week.color}08;">
                    <h4 style="color: ${week.color}DD; margin-bottom: 1.2rem; font-size: 1.1rem; font-weight: 500; display: flex; align-items: center; gap: 0.7rem;">
                        <span style="font-size: 1.4rem; filter: grayscale(10%);">🎯</span> 
                        <span style="letter-spacing: 0.3px;">What to Prioritise</span>
                    </h4>
                    <ul style="padding-left: 1.5rem; margin: 0;">
                        ${week.eatingOut.priority.map(p => `<li style="margin-bottom: 0.8rem; line-height: 1.7; color: #4A5568; font-weight: 300;">${p}</li>`).join('')}
                    </ul>
                </div>
                
                <div style="background: linear-gradient(135deg, #FFFFFF, #FEFEFE); padding: 2rem; border-radius: 20px; border-left: 3px solid rgba(255,152,0,0.4); box-shadow: 0 2px 12px rgba(255,152,0,0.08);">
                    <h4 style="color: #FFA726; margin-bottom: 1.2rem; font-size: 1.1rem; font-weight: 500; display: flex; align-items: center; gap: 0.7rem;">
                        <span style="font-size: 1.4rem; filter: grayscale(10%);">🏃</span> 
                        <span style="letter-spacing: 0.3px;">Fast Food Survival</span>
                    </h4>
                    <ul style="padding-left: 1.5rem; margin: 0;">
                        ${week.eatingOut.fastFood.map(f => `<li style="margin-bottom: 0.8rem; line-height: 1.7; color: #4A5568; font-weight: 300;">${f}</li>`).join('')}
                    </ul>
                </div>
            </div>
            
            <div style="background: linear-gradient(135deg, ${week.color}10, ${week.color}05); padding: 1.8rem; border-radius: 18px; border: 1.5px dashed ${week.color}25;">
                <p style="margin: 0; font-weight: 400; font-size: 1rem; color: #4A5568; display: flex; align-items: flex-start; gap: 1rem; line-height: 1.6;">
                    <span style="font-size: 1.6rem; filter: grayscale(10%);">💡</span>
                    <span style="flex: 1; font-weight: 300;">${week.eatingOut.tips}</span>
                </p>
            </div>
        </div>`;
    }
    
    html += '</div>';
    contentArea.innerHTML = html;
    window.scrollTo(0, 0);
    
    } catch (error) {
        alert('Error displaying week: ' + error.message);
    }
}

// Back to main recipes page (clear week content)
function backToRecipesMain() {
    const recipesMainPage = document.getElementById('recipesMainPage');
    const weekViewContainer = document.getElementById('weekViewContainer');
    const contentArea = document.getElementById('weekContent');
    
    // Hide week view, show main recipes page
    weekViewContainer.style.display = 'none';
    recipesMainPage.style.display = 'block';
    contentArea.innerHTML = ''; // Clear the week content
    
    // Restore the active state of the last viewed week
    initializeWeekButtons();
    
    window.scrollTo(0, 0);
}

// Back to welcome from week view
function backToWelcomeFromWeek() {
    document.getElementById('recipesMainPage').style.display = 'none';
    document.getElementById('weekViewContainer').style.display = 'none';
    document.getElementById('toolkitContainer').classList.remove('active');
    document.getElementById('toolkitContainer').style.display = 'none';
    document.getElementById('welcomeScreen').style.display = 'flex';
    document.getElementById('welcomeScreen').style.animation = 'fadeInUp 0.5s ease-out forwards';
    window.scrollTo(0, 0);
}

// Display individual day with meals
function displayDay(weekNum, dayIdx) {
    const week = recipeData[`week${weekNum}`];
    const day = dayIdx === 7 ? week.bonusDay : week.days[dayIdx];
    const contentArea = document.getElementById('weekContent');
    const dayLabel = dayIdx === 7 ? '✨ Bonus Day' : `Day ${dayIdx + 1}`;
    const dayColor = dayIdx === 7 ? '#FDB44B' : week.color;
    
    let html = `
        <div style="animation: fadeInUp 0.5s ease-out;">
            <!-- Navigation Buttons - Softer Design -->
            <div style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap; justify-content: space-between; align-items: center;">
                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button onclick="displayWeek(${weekNum})" style="
                        padding: 1rem 2rem;
                        background: linear-gradient(135deg, #FFFFFF, #FEFEFE);
                        color: ${dayColor}DD;
                        border: 1.5px solid ${dayColor}30;
                        border-radius: 16px;
                        cursor: pointer;
                        font-weight: 500;
                        font-size: 0.95rem;
                        transition: all 0.3s ease;
                        box-shadow: 0 2px 10px ${week.color}15;
                        display: flex;
                        align-items: center;
                        gap: 0.6rem;
                        letter-spacing: 0.3px;
                    " onmouseover="this.style.background='linear-gradient(135deg, ${week.color}15, ${week.color}08)'; this.style.transform='translateX(-3px)'; this.style.boxShadow='0 4px 15px ${week.color}25';" onmouseout="this.style.background='linear-gradient(135deg, #FFFFFF, #FEFEFE)'; this.style.transform='translateX(0)'; this.style.boxShadow='0 2px 10px ${week.color}15';">
                        <span style="font-size: 1.1rem;">←</span>
                        <span>Back to Week Overview</span>
                    </button>
                    
                    ${dayIdx > 0 || dayIdx === 7 ? `
                    <button onclick="displayDay(${weekNum}, ${dayIdx === 7 ? 6 : dayIdx - 1})" style="
                        padding: 1rem 1.5rem;
                        background: linear-gradient(135deg, rgba(248,250,252,0.9), rgba(243,245,247,0.8));
                        color: #5A6C7D;
                        border: 1.5px solid rgba(200,213,185,0.3);
                        border-radius: 16px;
                        cursor: pointer;
                        font-weight: 400;
                        transition: all 0.3s ease;
                        font-size: 0.9rem;
                        letter-spacing: 0.3px;
                    " onmouseover="this.style.background='linear-gradient(135deg, rgba(200,213,185,0.25), rgba(200,213,185,0.15))'; this.style.borderColor='rgba(200,213,185,0.5)';" onmouseout="this.style.background='linear-gradient(135deg, rgba(248,250,252,0.9), rgba(243,245,247,0.8))'; this.style.borderColor='rgba(200,213,185,0.3)';">
                        ← Previous Day
                    </button>` : ''}
                    
                    ${(dayIdx < week.days.length - 1) || (dayIdx === 6 && week.bonusDay) ? `
                    <button onclick="displayDay(${weekNum}, ${dayIdx + 1})" style="
                        padding: 1rem 1.5rem;
                        background: linear-gradient(135deg, rgba(248,250,252,0.9), rgba(243,245,247,0.8));
                        color: #5A6C7D;
                        border: 1.5px solid rgba(200,213,185,0.3);
                        border-radius: 16px;
                        cursor: pointer;
                        font-weight: 400;
                        transition: all 0.3s ease;
                        font-size: 0.9rem;
                        letter-spacing: 0.3px;
                    " onmouseover="this.style.background='linear-gradient(135deg, rgba(200,213,185,0.25), rgba(200,213,185,0.15))'; this.style.borderColor='rgba(200,213,185,0.5)';" onmouseout="this.style.background='linear-gradient(135deg, rgba(248,250,252,0.9), rgba(243,245,247,0.8))'; this.style.borderColor='rgba(200,213,185,0.3)';">
                        Next Day →
                    </button>` : ''}
                </div>
                
                <!-- Print Button -->
                <button onclick="window.print()" style="
                    padding: 1rem 1.5rem;
                    background: linear-gradient(135deg, ${dayColor}E5, ${dayColor}CC);
                    color: #2C3E50;
                    border: none;
                    border-radius: 16px;
                    cursor: pointer;
                    font-weight: 500;
                    font-size: 0.95rem;
                    transition: all 0.3s ease;
                    box-shadow: 0 3px 12px ${dayColor}25;
                    display: flex;
                    align-items: center;
                    gap: 0.6rem;
                    letter-spacing: 0.3px;
                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px ${dayColor}35';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 12px ${dayColor}25';" title="Print day's meals">
                    <span style="font-size: 1.2rem;">🖨️</span>
                    <span>Print Meals</span>
                </button>
            </div>
            
            <!-- Day Header - JOYFUL & ENERGETIC DESIGN -->
            <div style="
                background: ${dayIdx === 7 ? 
                    'linear-gradient(135deg, #FFE5B4 0%, #FFD98E 50%, #FFC470 100%)' : 
                    `linear-gradient(135deg, ${['#E8D5F2', '#FFE5D9', '#D4F1F4', '#FFF4E6', '#E8F8F5', '#FADBD8', '#E8DAEF'][dayIdx]} 0%, #FFFFFF 100%)`};
                color: ${dayIdx === 7 ? '#8B4513' : ['#7B3F9F', '#D35400', '#189AB4', '#E67E22', '#117A65', '#A93226', '#6C3483'][dayIdx || 0]};
                border-radius: 30px;
                padding: 2.5rem 2rem;
                margin-bottom: 2.5rem;
                box-shadow: 0 10px 40px ${dayIdx === 7 ? 'rgba(255, 179, 71, 0.4)' : ['rgba(200, 157, 232, 0.4)', 'rgba(255, 182, 157, 0.4)', 'rgba(117, 230, 218, 0.4)', 'rgba(255, 215, 0, 0.4)', 'rgba(118, 215, 196, 0.4)', 'rgba(241, 148, 138, 0.4)', 'rgba(187, 143, 206, 0.4)'][dayIdx || 0]}, 0 4px 15px rgba(0,0,0,0.1);
                position: relative;
                overflow: hidden;
                border: 3px solid ${dayIdx === 7 ? '#FFB347' : ['#C89DE8', '#FFB69D', '#75E6DA', '#FFD700', '#76D7C4', '#F1948A', '#BB8FCE'][dayIdx || 0]};
                animation: pulse 2s ease-in-out infinite;
            ">
                <!-- Decorative Circles - More energetic -->
                <div style="position: absolute; top: -60px; right: -60px; width: 180px; height: 180px; background: rgba(255,255,255,0.15); border-radius: 50%; animation: float 6s ease-in-out infinite;"></div>
                <div style="position: absolute; bottom: -40px; left: -40px; width: 150px; height: 150px; background: rgba(255,255,255,0.1); border-radius: 50%; animation: float 8s ease-in-out infinite reverse;"></div>
                <div style="position: absolute; top: 50%; right: 10%; width: 80px; height: 80px; background: rgba(255,255,255,0.08); border-radius: 50%; animation: float 7s ease-in-out infinite;"></div>
                
                <!-- Sparkles -->
                <div style="position: absolute; top: 20px; left: 20px; font-size: 2rem; animation: sparkle 3s ease-in-out infinite;">✨</div>
                <div style="position: absolute; top: 40px; right: 40px; font-size: 1.5rem; animation: sparkle 4s ease-in-out infinite 0.5s;">⭐</div>
                <div style="position: absolute; bottom: 30px; right: 60px; font-size: 1.8rem; animation: sparkle 3.5s ease-in-out infinite 1s;">💫</div>
                
                <div style="position: relative; z-index: 1; text-align: center;">
                    ${dayIdx === 7 ? `<div style="display: inline-block; background: rgba(255,255,255,0.6); padding: 0.6rem 1.5rem; border-radius: 25px; margin-bottom: 1rem; font-size: 0.9rem; font-weight: 600; letter-spacing: 1.5px; border: 2px solid rgba(230, 126, 34, 0.3); box-shadow: 0 2px 10px rgba(230, 126, 34, 0.2);">
                        ✨ FLEXIBLE OPTIONS - USE INSTEAD OF ANY DAY ✨
                    </div>` : `<div style="display: inline-block; background: rgba(255,255,255,0.5); padding: 0.6rem 1.5rem; border-radius: 25px; margin-bottom: 1rem; font-size: 0.9rem; font-weight: 600; letter-spacing: 1.5px; border: 2px solid rgba(255,255,255,0.4); box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                        ${week.theme.toUpperCase()}
                    </div>`}
                    
                    <h2 style="
                        margin: 0 0 1.2rem 0;
                        font-size: 3.5rem;
                        font-weight: 700;
                        letter-spacing: 2px;
                        text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
                        animation: bounceIn 0.8s ease-out;
                    ">${dayLabel}</h2>
                    
                    <div style="display: flex; justify-content: center; align-items: center; gap: 2rem; flex-wrap: wrap; font-size: 1.1rem; font-weight: 500;">
                        <div style="display: flex; align-items: center; gap: 0.6rem; background: rgba(255,255,255,0.4); padding: 0.5rem 1.2rem; border-radius: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            <span style="font-size: 1.8rem; filter: grayscale(0%); animation: bounce 2s ease-in-out infinite;">🍳</span>
                            <span>Breakfast</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.6rem; background: rgba(255,255,255,0.4); padding: 0.5rem 1.2rem; border-radius: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            <span style="font-size: 1.8rem; filter: grayscale(0%); animation: bounce 2s ease-in-out infinite 0.3s;">🥗</span>
                            <span>Lunch</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.6rem; background: rgba(255,255,255,0.4); padding: 0.5rem 1.2rem; border-radius: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                            <span style="font-size: 1.8rem; filter: grayscale(0%); animation: bounce 2s ease-in-out infinite 0.6s;">🍽️</span>
                            <span>Dinner</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Meals -->
            <div style="display: grid; gap: 2rem;">`;
    
    // Breakfast
    html += createMealCard('Breakfast', day.breakfast, week.color, '🍳', weekNum, dayIdx);
    // Lunch
    html += createMealCard('Lunch', day.lunch, week.color, '🥗', weekNum, dayIdx);
    // Dinner
    html += createMealCard('Dinner', day.dinner, week.color, '🍽️', weekNum, dayIdx);
    
    html += `</div>
    
            <!-- Bottom Navigation - Gentle Design -->
            <div style="margin-top: 3rem; padding: 2.5rem; background: linear-gradient(135deg, rgba(248,250,252,0.6), rgba(243,245,247,0.4)); border-radius: 24px; text-align: center; border: 1px solid rgba(200,213,185,0.2);">
                <button onclick="displayWeek(${weekNum})" style="
                    padding: 1.2rem 3rem;
                    background: linear-gradient(135deg, ${week.color}F0, ${week.color}E5);
                    color: #2C3E50;
                    border: none;
                    border-radius: 18px;
                    cursor: pointer;
                    font-weight: 500;
                    font-size: 1.05rem;
                    transition: all 0.3s ease;
                    box-shadow: 0 4px 15px ${week.color}25;
                    letter-spacing: 0.5px;
                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px ${week.color}35';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px ${week.color}25';">
                    ← Return to Week Overview
                </button>
            </div>
        </div>`;
    
    contentArea.innerHTML = html;
    window.scrollTo(0, 0);
}


function createMealCard(mealType, meal, color, icon, weekNum, dayIdx) {
    const recipeId = `w${weekNum}d${dayIdx}${mealType}`;
    const isFavorite = recipeFavorites.some(r => r.id === recipeId);
    const starColor = isFavorite ? '#FFD700' : '#D1D5DB';
    const starFill = isFavorite ? '★' : '☆';
    
    return `
    <div class="meal-card" style="border: 2px solid ${color}30; border-radius: 12px; padding: 1.5rem; cursor: pointer; transition: all 0.3s; background: linear-gradient(to right, ${color}05, white);" onclick="toggleMeal(this)">
        <div class="meal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <div style="flex: 1;">
                <div style="font-size: 0.85rem; color: ${color}; font-weight: 600; margin-bottom: 0.3rem;">${icon} ${mealType.toUpperCase()}</div>
                <div style="display: flex; align-items: center; gap: 0.8rem;">
                    <div style="font-size: 1.2rem; font-weight: 700; color: var(--text-dark);">${meal.name}</div>
                    <button onclick="toggleRecipeFavorite(event, ${weekNum}, ${dayIdx}, '${mealType}', '${meal.name.replace(/'/g, "\\'")}', ${meal.nutrition.protein})" style="background: ${isFavorite ? 'rgba(255, 215, 0, 0.1)' : 'rgba(209, 213, 219, 0.1)'}; border: 2px solid ${starColor}; color: ${starColor}; font-size: 1.5rem; cursor: pointer; padding: 0.2rem 0.4rem; transition: all 0.2s; line-height: 1; border-radius: 8px; font-weight: bold;" onmouseover="this.style.transform='scale(1.15)'" onmouseout="this.style.transform='scale(1)'" title="${isFavorite ? 'Remove from favorites' : 'Add to favorites'}">${starFill}</button>
                </div>
            </div>
            <div style="text-align: right;">
                <div style="font-size: 0.85rem; color: var(--text-medium);">⏱️ ${meal.prep + meal.cook} mins</div>
                <div style="font-size: 0.85rem; color: ${color}; font-weight: 600; margin-top: 0.3rem;">${meal.batch !== 'No - best fresh' ? '✓ Batch-Friendly' : 'Best Fresh'}</div>
            </div>
        </div>
        
        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem;">
            ${meal.helps.map(h => `<span style="background: ${color}20; color: ${color}; padding: 0.3rem 0.7rem; border-radius: 6px; font-size: 0.85rem; font-weight: 600;">${h}</span>`).join('')}
        </div>
        
        <div class="meal-details" style="display: none; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 2px solid ${color}20;">
            <div style="background: linear-gradient(135deg, ${color}15, ${color}08); padding: 1.2rem; border-radius: 10px; margin-bottom: 1.5rem; border-left: 4px solid ${color};">
                <h4 style="color: ${color}; margin-bottom: 0.8rem;">💡 How This Helps Your Body</h4>
                <p style="margin: 0; line-height: 1.6;">${meal.why}</p>
            </div>
            
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--text-dark); margin-bottom: 0.8rem;">📝 Ingredients:</h4>
                <ul style="padding-left: 1.5rem; margin: 0; columns: 2; column-gap: 1.5rem;">
                    ${meal.ingredients.map(i => `<li style="margin-bottom: 0.4rem; break-inside: avoid;">${i}</li>`).join('')}
                </ul>
            </div>
            
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--text-dark); margin-bottom: 0.8rem;">👩‍🍳 Method:</h4>
                <ol style="padding-left: 1.5rem; margin: 0;">
                    ${meal.method.map(m => `<li style="margin-bottom: 0.5rem; line-height: 1.6;">${m}</li>`).join('')}
                </ol>
            </div>
            
            <div style="background: rgba(200,213,185,0.2); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                <h4 style="color: var(--text-dark); margin-bottom: 0.5rem; font-size: 0.95rem;">📊 Nutrition (per serving):</h4>
                <div style="display: flex; gap: 1.5rem; flex-wrap: wrap; font-size: 0.9rem;">
                    <span><strong>Protein:</strong> ${meal.nutrition.protein}g</span>
                    <span><strong>Fibre:</strong> ${meal.nutrition.fibre}g</span>
                    ${meal.nutrition.omega3 ? `<span><strong>Omega-3:</strong> ${meal.nutrition.omega3}g</span>` : ''}
                    <span><strong>Calories:</strong> ${meal.nutrition.cals}</span>
                </div>
            </div>
            
            <div style="background: rgba(255,243,205,0.4); padding: 1rem; border-radius: 8px;">
                <h4 style="color: var(--text-dark); margin-bottom: 0.5rem; font-size: 0.95rem;">💡 Tips & Swaps:</h4>
                <p style="margin: 0; font-size: 0.9rem; line-height: 1.5;">${meal.tips}</p>
                <p style="margin: 0.5rem 0 0 0; font-weight: 600; font-size: 0.9rem; color: ${color};">Batch Cooking: ${meal.batch}</p>
            </div>
        </div>
        
        <div class="expand-btn" style="text-align: center; margin-top: 1rem; color: ${color}; font-weight: 600; font-size: 0.9rem;">
            ▼ Click to view full recipe
        </div>
    </div>`;
}

function toggleMeal(card) {
    const details = card.querySelector('.meal-details');
    const btn = card.querySelector('.expand-btn');
    
    if (details.style.display === 'none') {
        details.style.display = 'block';
        btn.textContent = '▲ Click to collapse';
        card.style.background = 'white';
    } else {
        details.style.display = 'none';
        btn.textContent = '▼ Click to view full recipe';
        const color = btn.style.color;
        card.style.background = `linear-gradient(to right, ${color}05, white)`;
    }
}

// Initialize week button colors based on last viewed week
function initializeWeekButtons() {
    const lastWeek = localStorage.getItem('lastViewedWeek') || '1';
    
    document.querySelectorAll('.week-nav-btn').forEach(btn => {
        const weekNum = btn.getAttribute('data-week');
        const color = btn.style.borderColor;
        
        if (weekNum === lastWeek) {
            // Active button
            btn.classList.add('week-active');
            btn.style.background = `linear-gradient(135deg, ${color}, ${color}DD)`;
        } else {
            // Inactive buttons
            btn.classList.remove('week-active');
            btn.style.background = 'white';
        }
    });
}

// Week navigation buttons - wait for DOM to be ready
setTimeout(function() {
    document.querySelectorAll('.week-nav-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const weekNum = this.getAttribute('data-week');
            localStorage.setItem('lastViewedWeek', weekNum);
            
            // Update button styles
            document.querySelectorAll('.week-nav-btn').forEach(b => {
                const color = b.style.borderColor;
                
                if (b === this) {
                    b.classList.add('week-active');
                    b.style.background = `linear-gradient(135deg, ${color}, ${color}DD)`;
                } else {
                    b.classList.remove('week-active');
                    b.style.background = 'white';
                }
            });
            
            displayWeek(weekNum);
        });
    });
}, 100);

// Initialize with Week 1
// Note: displayWeek(1) will be called from navigation handler

// ===== RECIPE FAVORITES SYSTEM =====
let recipeFavorites = JSON.parse(localStorage.getItem('recipeFavorites') || '[]');

window.toggleRecipeFavorite = function(event, weekNum, dayIdx, mealType, recipeName, protein) {
    event.stopPropagation();
    const recipeId = `w${weekNum}d${dayIdx}${mealType}`;
    const existingIndex = recipeFavorites.findIndex(r => r.id === recipeId);
    
    if (existingIndex !== -1) {
        recipeFavorites.splice(existingIndex, 1);
    } else {
        recipeFavorites.push({
            id: recipeId,
            name: recipeName,
            week: weekNum,
            day: dayIdx,
            meal: mealType,
            protein: protein
        });
    }
    
    localStorage.setItem('recipeFavorites', JSON.stringify(recipeFavorites));
    updateRecipeFavoriteCount();
    displayDay(weekNum, dayIdx);
};

function updateRecipeFavoriteCount() {
    const countEl = document.getElementById('recipeFavCount');
    if (countEl) countEl.textContent = `Saved Recipes (${recipeFavorites.length})`;
}

function refreshRecipeFavoritesModal() {
    const grid = document.getElementById('recipeFavoritesGrid');
    if (!grid) return;
    
    if (recipeFavorites.length === 0) {
        grid.innerHTML = `<div style="text-align: center; padding: 3rem 2rem; color: var(--text-medium);"><div style="font-size: 3rem; margin-bottom: 1rem;">💝</div><div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">No recipes saved yet</div><div style="font-size: 0.9rem;">Click the star (★) on any recipe to save it here</div></div>`;
        return;
    }
    
    const weekColors = ['#9B7EBD', '#FF9F7F', '#8EBFB5', '#FFB5C5'];
    grid.innerHTML = recipeFavorites.map(recipe => {
        const weekColor = weekColors[recipe.week - 1] || '#9B7EBD';
        return `<div style="position: relative; background: linear-gradient(135deg, #FAF8F3, white); border: 2px solid var(--light-green); border-radius: 12px; padding: 1rem; cursor: pointer; transition: all 0.3s;" onclick="goToRecipeFavorite(${recipe.week}, ${recipe.day})"><button onclick="event.stopPropagation(); removeRecipeFavorite('${recipe.id}');" style="position: absolute; top: 0.5rem; right: 0.5rem; background: white; border: 2px solid #D1D5DB; color: #6B7280; width: 28px; height: 28px; border-radius: 50%; cursor: pointer; font-size: 1.2rem; font-weight: bold; line-height: 1; display: flex; align-items: center; justify-content: center; transition: all 0.2s; padding: 0;" onmouseover="this.style.background='#FF6B6B'; this.style.borderColor='#FF6B6B'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.borderColor='#D1D5DB'; this.style.color='#6B7280';">×</button><div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem; padding-right: 2rem;"><div style="font-size: 0.8rem; color: var(--text-medium); font-weight: 600;">Week ${recipe.week}, Day ${recipe.day + 1} • ${recipe.meal}</div><div style="background: rgba(255, 215, 0, 0.1); border: 2px solid #FFD700; color: #FFD700; font-size: 1.3rem; padding: 0.2rem 0.4rem; border-radius: 6px; font-weight: bold; line-height: 1;">★</div></div><div style="font-weight: 700; color: #E91E63; margin-bottom: 0.5rem;">${recipe.name}</div><div style="font-size: 0.85rem; color: ${weekColor}; font-weight: 600;">Protein: ${recipe.protein}g</div></div>`;
    }).join('');
}

window.removeRecipeFavorite = function(recipeId) {
    recipeFavorites = recipeFavorites.filter(r => r.id !== recipeId);
    localStorage.setItem('recipeFavorites', JSON.stringify(recipeFavorites));
    updateRecipeFavoriteCount();
    refreshRecipeFavoritesModal();
};

window.goToRecipeFavorite = function(weekNum, dayIdx) {
    const modal = document.getElementById('recipeFavoritesModal');
    if (modal) modal.style.display = 'none';
    displayDay(weekNum, dayIdx);
    window.scrollTo(0, 0);
};

if (document.getElementById('viewRecipeFavoritesBtn')) {
    document.getElementById('viewRecipeFavoritesBtn').addEventListener('click', () => {
        if (recipeFavorites.length === 0) {
            alert('You haven\'t saved any recipe favorites yet! 💝\n\nClick the star (★) on any recipe to save it.');
            return;
        }
        refreshRecipeFavoritesModal();
        document.getElementById('recipeFavoritesModal').style.display = 'flex';
    });
}

if (document.getElementById('closeRecipeFavoritesModal')) {
    document.getElementById('closeRecipeFavoritesModal').addEventListener('click', () => {
        document.getElementById('recipeFavoritesModal').style.display = 'none';
    });
}

if (document.getElementById('clearAllRecipeFavoritesBtn')) {
    document.getElementById('clearAllRecipeFavoritesBtn').addEventListener('click', () => {
        if (confirm(`Are you sure you want to remove all ${recipeFavorites.length} saved recipes?\n\nThis cannot be undone.`)) {
            recipeFavorites = [];
            localStorage.setItem('recipeFavorites', JSON.stringify(recipeFavorites));
            updateRecipeFavoriteCount();
            document.getElementById('recipeFavoritesModal').style.display = 'none';
        }
    });
}

if (document.getElementById('recipeFavoritesModal')) {
    document.getElementById('recipeFavoritesModal').addEventListener('click', (e) => {
        if (e.target.id === 'recipeFavoritesModal') document.getElementById('recipeFavoritesModal').style.display = 'none';
    });
}

updateRecipeFavoriteCount();


            // ===== MOVEMENT & ACTIVITY PROTOCOLS =====
// Movement & Activity Protocol Data
const movementProtocols = {
    'hot-flushes': {
        title: '🔥 Hot Flushes & Night Sweats Protocol',
        subtitle: 'Temperature regulation through strategic movement',
        evidence: 'Regular moderate-intensity aerobic exercise reduces hot flush frequency by 40-60% and severity by 30-50% in clinical trials. Yoga and breathwork improve autonomic nervous system regulation.',
        protocols: [
            {
                name: 'Moderate Aerobic Exercise',
                frequency: '30-45 minutes, 4-5 days per week',
                exercises: [
                    'Brisk walking (pace where you can talk but not sing)',
                    'Cycling on flat terrain or stationary bike',
                    'Swimming or water aerobics',
                    'Low-impact dance classes'
                ],
                tips: [
                    'Exercise during cooler times of day (early morning or evening)',
                    'Avoid overheating: use fans, stay hydrated, wear breathable fabrics',
                    'Build intensity gradually - start with 15 minutes if needed',
                    'Cool down properly with 5-10 minutes of gentle movement'
                ]
            },
            {
                name: 'Yoga & Breathwork',
                frequency: '20-30 minutes, 2-3 days per week',
                exercises: [
                    'Restorative or Yin yoga (cooling practices)',
                    'Alternate nostril breathing (Nadi Shodhana)',
                    'Cooling breath (Sheetali Pranayama)',
                    'Body scan meditation'
                ],
                tips: [
                    'Avoid hot yoga or Bikram - these can trigger flushes',
                    'Practice in a cool, well-ventilated space',
                    'Focus on relaxation and parasympathetic activation',
                    'Try evening practice to improve sleep quality'
                ]
            }
        ],
        avoid: [
            'High-intensity interval training (HIIT) in hot environments',
            'Excessive exercise (overtraining can worsen symptoms)',
            'Hot yoga, hot Pilates, or heated exercise studios',
            'Exercising in direct sunlight during peak heat'
        ],
        keyPoints: [
            'Consistency matters more than intensity',
            'Benefits typically appear after 8-12 weeks of regular practice',
            'Combine with stress management for best results',
            'Track patterns: some women find certain exercises trigger flushes'
        ]
    },
    
    'weight-gain': {
        title: '⚖️ Weight Gain & Belly Fat Protocol',
        subtitle: 'Building muscle and boosting metabolism',
        evidence: 'Resistance training 2-3x/week increases resting metabolic rate by 7-8% and preserves lean muscle mass during menopause. Combined resistance + cardio shows 3-5% greater weight loss than cardio alone.',
        protocols: [
            {
                name: 'Resistance Training (Priority #1)',
                frequency: '30-45 minutes, 2-3 days per week (non-consecutive days)',
                exercises: [
                    'Squats or goblet squats (3 sets of 10-12 reps)',
                    'Push-ups (modified on knees if needed) (3 sets of 8-12 reps)',
                    'Bent-over rows or resistance band rows (3 sets of 10-12 reps)',
                    'Lunges (3 sets of 10 reps per leg)',
                    'Planks or modified planks (3 sets of 20-45 seconds)',
                    'Deadlifts or Romanian deadlifts (3 sets of 10 reps)'
                ],
                tips: [
                    'Focus on compound movements (work multiple muscle groups)',
                    'Start with bodyweight or light weights, progress gradually',
                    'Rest 48 hours between resistance sessions for same muscle groups',
                    'Proper form is more important than heavy weights - consider working with a personal trainer for initial guidance'
                ]
            },
            {
                name: 'HIIT (High-Intensity Interval Training)',
                frequency: '20-25 minutes, 1-2 days per week',
                exercises: [
                    '30 seconds high effort / 60-90 seconds recovery × 8-10 rounds',
                    'Options: cycling, rowing, fast walking, stairs, burpees',
                    'Can use Tabata protocol: 20 sec work / 10 sec rest × 8 rounds'
                ],
                tips: [
                    'Only attempt HIIT if you have a baseline fitness level',
                    'Not suitable if you have joint problems or cardiovascular concerns',
                    'Quality over quantity - give genuine high effort during work intervals',
                    'Allow 48 hours recovery between HIIT sessions'
                ]
            },
            {
                name: 'Daily Movement (NEAT)',
                frequency: 'Throughout the day, every day',
                exercises: [
                    'Aim for 8,000-10,000 steps daily',
                    'Stand or walk every 30-60 minutes if desk-bound',
                    'Take stairs instead of lifts',
                    'Park further away, walk for errands',
                    'Housework, gardening, active play'
                ],
                tips: [
                    'NEAT (Non-Exercise Activity Thermogenesis) can burn 300-500 calories/day',
                    'Small movements throughout the day add up significantly',
                    'Use a step counter or fitness tracker for accountability'
                ]
            }
        ],
        avoid: [
            'Endless steady-state cardio without strength training (muscle loss)',
            'Over-restriction of calories while exercising intensely (slows metabolism)',
            'Comparing progress to pre-menopause - metabolism has genuinely changed',
            'Skipping rest days - recovery is when muscles grow'
        ],
        keyPoints: [
            'Muscle tissue burns 3x more calories than fat tissue at rest',
            'Menopause reduces resting metabolic rate by 100-200 calories/day',
            'Resistance training is THE most important factor for body composition',
            'Expect slow progress: 0.5-1kg per month is healthy and sustainable',
            'Combine with adequate protein intake (1.2-1.6g per kg body weight)'
        ]
    },
    
    'anxiety-mood': {
        title: '😰 Anxiety & Mood Swings Protocol',
        subtitle: 'Calming the nervous system through mindful movement',
        evidence: 'Regular exercise reduces anxiety by 20-30% and depression symptoms by 30-47% in menopausal women. Yoga specifically reduces cortisol by 15-20% and increases GABA (calming neurotransmitter) levels.',
        protocols: [
            {
                name: 'Yoga (Most Effective)',
                frequency: '30-45 minutes, 2-4 days per week',
                exercises: [
                    'Hatha or Vinyasa yoga (moderate-paced flow)',
                    'Child\'s pose (Balasana) - hold 1-3 minutes',
                    'Cat-Cow stretches - 10 rounds synchronized with breath',
                    'Legs-up-the-wall (Viparita Karani) - 5-10 minutes',
                    'Corpse pose (Savasana) with body scan - 10 minutes'
                ],
                tips: [
                    'Prioritize breath over perfection of poses',
                    'Try classes specifically for anxiety or restorative yoga',
                    'Evening practice particularly effective for anxiety',
                    'Combine with meditation for enhanced benefit'
                ]
            },
            {
                name: 'Outdoor Walking in Nature',
                frequency: '20-40 minutes, 4-5 days per week',
                exercises: [
                    'Walk in parks, forests, or green spaces',
                    'Moderate pace - no need to rush',
                    'Practice mindful walking: notice surroundings, sounds, sensations',
                    'Leave phone on silent or at home if possible'
                ],
                tips: [
                    'Nature exposure reduces anxiety by 30% more than urban walking',
                    'Morning sunlight exposure helps regulate mood and sleep',
                    'Walk with a supportive friend for social connection benefit',
                    'Even 10-15 minutes helps - something is better than nothing'
                ]
            },
            {
                name: 'Pilates',
                frequency: '30-45 minutes, 2-3 days per week',
                exercises: [
                    'Mat Pilates focusing on controlled breathing',
                    'The Hundred - controlled breathing with core engagement',
                    'Roll-ups and roll-downs - spinal articulation',
                    'Leg circles and stretches',
                    'Emphasis on slow, controlled movements'
                ],
                tips: [
                    'Breath-focused movement calms the nervous system',
                    'Slower is better for anxiety reduction',
                    'Can do at home with online videos',
                    'Equipment not necessary - bodyweight is effective'
                ]
            }
        ],
        avoid: [
            'Overtraining or excessive exercise (increases cortisol)',
            'Competitive or high-pressure exercise environments',
            'Scrolling social media during exercise (defeats anxiety-reduction purpose)',
            'Skipping warm-up or cool-down (increases physical tension)'
        ],
        keyPoints: [
            'Exercise must feel supportive, not punishing, to reduce anxiety',
            'Benefits accumulate: expect improvement after 4-6 weeks of consistency',
            'Combine with other strategies: sleep, nutrition, stress management',
            'If anxiety is severe, speak to your GP or a mental health professional - exercise is an adjunct, not replacement for treatment'
        ]
    },
    
    'joint-pain': {
        title: '🦴 Joint Pain & Stiffness Protocol',
        subtitle: 'Strengthening support structures and maintaining mobility',
        evidence: 'Regular exercise reduces joint pain by 40% and improves function by 43% in women with osteoarthritis. Strengthening exercises are more effective than cardio alone for joint health.',
        protocols: [
            {
                name: 'Low-Impact Strength Training',
                frequency: '20-30 minutes, 2-3 days per week',
                exercises: [
                    'Wall push-ups or counter push-ups (2 sets of 10-15 reps)',
                    'Sit-to-stand from chair (3 sets of 10-12 reps)',
                    'Side leg raises lying down (2 sets of 12 per side)',
                    'Calf raises holding counter (2 sets of 15 reps)',
                    'Resistance band exercises (rows, chest press, shoulder raise)'
                ],
                tips: [
                    'Start with very light resistance - joints need gradual adaptation',
                    'Some mild discomfort is normal; sharp pain is a signal to stop',
                    'Muscles support joints - strength training is essential, not optional',
                    'Work through available range of motion, don\'t force'
                ]
            },
            {
                name: 'Swimming or Water Aerobics',
                frequency: '30-45 minutes, 2-3 days per week',
                exercises: [
                    'Freestyle or backstroke swimming',
                    'Water walking (waist or chest-deep water)',
                    'Aqua aerobics classes',
                    'Gentle water-based range-of-motion exercises'
                ],
                tips: [
                    'Water supports body weight, reducing joint load by 75-90%',
                    'Warm water (28-32°C) particularly helpful for stiff joints',
                    'Resistance of water provides gentle strengthening',
                    'No swimming skills needed for water walking or aqua classes'
                ]
            },
            {
                name: 'Daily Stretching & Mobility',
                frequency: '10-15 minutes, daily',
                exercises: [
                    'Gentle neck rolls and shoulder rolls',
                    'Wrist and ankle circles',
                    'Hip circles and figure-8 patterns',
                    'Gentle spinal twists seated or lying',
                    'Hamstring and calf stretches (hold 30 seconds each)'
                ],
                tips: [
                    'Best done after light activity when muscles are warm',
                    'Never bounce - hold stretches gently and steadily',
                    'Movement lubricates joints - immobility worsens stiffness',
                    'Morning stiffness improves with consistent daily practice'
                ]
            }
        ],
        avoid: [
            'High-impact activities: running, jumping, plyometrics (protect joints)',
            'Prolonged sitting or immobility (stiffness worsens)',
            'Pushing through sharp pain (inflammation signal)',
            'Extreme ranges of motion or overstretching'
        ],
        keyPoints: [
            'Movement is medicine for joints - immobility makes pain worse',
            'Strength training builds protective muscle around joints',
            'If pain is severe or worsening, see your GP or physiotherapist',
            'Combine with anti-inflammatory nutrition: oily fish, berries, leafy greens',
            'Weight management significantly reduces joint load and pain'
        ]
    },
    
    'fatigue': {
        title: '😴 Low Energy & Fatigue Protocol',
        subtitle: 'Building stamina through progressive movement',
        evidence: 'Regular exercise increases energy levels by 20% and reduces fatigue by 65% in sedentary women. Paradoxically, expending energy through exercise creates MORE energy over time.',
        protocols: [
            {
                name: 'Progressive Strength Training',
                frequency: '20-30 minutes, 2-3 days per week',
                exercises: [
                    'Week 1-2: Bodyweight squats, wall push-ups, assisted lunges (2 sets of 8-10)',
                    'Week 3-4: Add light dumbbells or resistance bands (2-3 sets of 10-12)',
                    'Week 5+: Progress weight/resistance gradually (3 sets of 8-12)',
                    'Include: squats, push-ups, rows, shoulder press, lunges, planks'
                ],
                tips: [
                    'Muscle mass directly correlates with energy levels',
                    'Start embarrassingly light - you\'re building a habit, not competing',
                    'Progress slowly: add 1-2 reps or slightly more weight every 2 weeks',
                    'Rest days are essential - overtraining worsens fatigue'
                ]
            },
            {
                name: 'Gentle Daily Movement',
                frequency: '10-20 minutes, daily',
                exercises: [
                    'Short walks (even 10 minutes helps)',
                    'Gentle stretching or yoga',
                    'Light housework or gardening',
                    'Dancing to favourite music',
                    'Tai chi or qigong'
                ],
                tips: [
                    'Aim for consistency over intensity when fatigued',
                    'Morning movement helps set energy tone for the day',
                    'Break sitting time every hour with 2-3 minutes of movement',
                    'Track energy levels - note what helps and what depletes'
                ]
            }
        ],
        avoid: [
            'Starting with high-intensity exercise when deeply fatigued (worsens exhaustion)',
            'All-or-nothing thinking ("if I can\'t do 60 minutes, I won\'t do anything")',
            'Comparing current capacity to pre-menopause fitness',
            'Late evening intense exercise (disrupts sleep, worsens fatigue)'
        ],
        keyPoints: [
            'The fatigue-exercise paradox: movement creates energy, but you must start gently',
            'Expect 4-8 weeks before significant energy improvements',
            'Quality sleep and adequate protein are essential alongside exercise',
            'If fatigue is extreme or worsening, see your GP to rule out thyroid issues, anaemia',
            'Progressive overload: gradually do slightly more over time'
        ]
    },
    
    'sleep': {
        title: '🌙 Sleep Problems Protocol',
        subtitle: 'Movement strategies for better sleep quality',
        evidence: 'Regular exercise improves sleep quality by 65% and reduces time to fall asleep by 43%. Morning exercise is 2x more effective than evening exercise for sleep regulation.',
        protocols: [
            {
                name: 'Morning Aerobic Exercise (Most Effective)',
                frequency: '20-30 minutes, 5-6 days per week, before 10am ideally',
                exercises: [
                    'Brisk walking outdoors (sunlight exposure crucial)',
                    'Morning jog or run',
                    'Cycling',
                    'Swimming',
                    'Any moderate-intensity cardio'
                ],
                tips: [
                    'Morning exercise + sunlight exposure regulates circadian rhythm',
                    'Aims to do this within 2 hours of waking',
                    'Even 10-15 minutes helps if short on time',
                    'Outdoor exercise is more effective than indoor for sleep regulation'
                ]
            },
            {
                name: 'Evening Gentle Yoga or Stretching',
                frequency: '15-20 minutes, 1-2 hours before bed, 5-6 days per week',
                exercises: [
                    'Gentle forward folds',
                    'Seated spinal twists',
                    'Legs-up-the-wall pose (5-10 minutes)',
                    'Reclining butterfly pose',
                    'Body scan or yoga nidra meditation'
                ],
                tips: [
                    'Signals body that it\'s time to wind down',
                    'Keep lights dim during evening practice',
                    'Focus on deep, slow breathing',
                    'No vigorous movement - gentle and restorative only'
                ]
            }
        ],
        avoid: [
            'Intense exercise within 3-4 hours of bedtime (raises core temperature and alertness)',
            'Exercising in bright artificial light late evening (disrupts melatonin)',
            'Skipping exercise entirely due to poor sleep (breaks the positive cycle)',
            'Caffeine close to or after exercise if exercising after 2pm'
        ],
        keyPoints: [
            'Exercise timing matters: morning exercise = better sleep',
            'Consistency is key: sleep improvements need 4-6 weeks of regular practice',
            'Combine with sleep hygiene: cool room, dark, regular schedule',
            'If sleep problems are severe or persistent, speak to your GP or a sleep specialist'
        ]
    },
    
    'brain-fog': {
        title: '🧠 Brain Fog & Memory Protocol',
        subtitle: 'Increasing blood flow and neuroplasticity',
        evidence: 'Aerobic exercise increases hippocampal blood flow by 25-30% and improves memory by 15-20%. Regular exercise increases BDNF (brain-derived neurotrophic factor) which supports brain cell growth.',
        protocols: [
            {
                name: 'Aerobic Exercise',
                frequency: '30-45 minutes, 4-5 days per week',
                exercises: [
                    'Brisk walking (moderate intensity)',
                    'Jogging or running',
                    'Cycling',
                    'Swimming',
                    'Dancing (particularly good for brain due to coordination required)'
                ],
                tips: [
                    'Moderate intensity is optimal: breathless but can still talk',
                    'Consistency matters more than intensity for brain benefits',
                    'Benefits accumulate: expect improvements after 8-12 weeks',
                    'Learning new movement patterns (dance, tai chi) particularly beneficial'
                ]
            },
            {
                name: 'Coordination & Balance Exercises',
                frequency: '15-20 minutes, 2-3 days per week',
                exercises: [
                    'Tai chi or qigong',
                    'Balance exercises: single-leg stands, heel-to-toe walking',
                    'Dance classes that require learning new steps',
                    'Juggling or coordination drills',
                    'Yoga flows that require concentration'
                ],
                tips: [
                    'Learning new movement patterns creates new neural pathways',
                    'Challenges that require focus particularly beneficial for cognition',
                    'Do not worry about perfection - the learning process IS the benefit'
                ]
            }
        ],
        avoid: [
            'Multitasking during exercise (scrolling phone, watching intense TV)',
            'Exercising when significantly sleep-deprived (prioritize sleep)',
            'Monotonous, unchanging exercise routines (less cognitive benefit)'
        ],
        keyPoints: [
            'Blood flow to brain increases during and after exercise',
            'Regular exercise is more effective than brain training games for cognition',
            'Combine with social interaction for enhanced benefit (group classes)',
            'If brain fog is severe or worsening, speak to your GP to check thyroid, B12'
        ]
    },
    
    'bone-health': {
        title: '🦴 Bone Health & Osteoporosis Prevention Protocol',
        subtitle: 'Weight-bearing, resistance exercise, and muscle building to maintain bone density',
        evidence: 'Weight-bearing exercise increases bone mineral density by 1-2% per year in postmenopausal women. Resistance training can prevent or reverse osteoporosis when combined with adequate calcium and vitamin D. Muscle mass directly supports bone density - muscles pull on bones during contraction, stimulating bone formation and strength.',
        protocols: [
            {
                name: 'Weight-Bearing Impact Exercise',
                frequency: '20-30 minutes, 3-4 days per week',
                exercises: [
                    'Brisk walking (especially with hills or stairs)',
                    'Hiking with light backpack',
                    'Jogging or running (if joints allow)',
                    'Dancing',
                    'Jumping jacks or skipping (if cleared by GP)',
                    'Tennis, badminton, or other impact sports'
                ],
                tips: [
                    'Impact stimulates bone formation - bones respond to load',
                    'If osteoporosis already diagnosed, get GP/physio clearance first',
                    'Build up gradually if currently sedentary',
                    'Mix of activities better than single repetitive activity'
                ]
            },
            {
                name: 'Resistance Training & Muscle Building (Essential)',
                frequency: '30-45 minutes, 2-3 days per week',
                exercises: [
                    'Squats and lunges (load-bearing for hips and spine)',
                    'Deadlifts or bent-over rows (spine loading)',
                    'Overhead press (loads spine and arms)',
                    'Push-ups (loads arms and spine)',
                    'Weighted step-ups (hip loading)',
                    'Use dumbbells, barbells, resistance bands, or body weight'
                ],
                tips: [
                    'Progressive load is key: gradually increase weight over time',
                    'Bone responds to the LOAD, not just movement',
                    'Building muscle mass is crucial - muscles pull on bones during contraction, directly stimulating bone formation',
                    'Proper form essential - consider working with a trainer initially',
                    'Focus on exercises that load the spine, hips, and wrists (fracture-prone areas)'
                ]
            },
            {
                name: 'Balance Training',
                frequency: '10 minutes, daily',
                exercises: [
                    'Single-leg stands (hold 30-60 seconds each side)',
                    'Heel-to-toe walking',
                    'Standing on unstable surface (cushion or balance pad)',
                    'Tai chi or yoga balance poses',
                    'Practice getting up and down from floor'
                ],
                tips: [
                    'Fall prevention is crucial - most fractures result from falls',
                    'Balance deteriorates with age but is highly trainable',
                    'Do near a wall or sturdy surface for safety',
                    'Improves proprioception and confidence'
                ]
            }
        ],
        avoid: [
            'Swimming or cycling ALONE (not weight-bearing - good for fitness but not bone density)',
            'Forward flexion exercises if osteoporosis diagnosed (spinal fracture risk)',
            'High-impact if severe osteoporosis (get professional guidance)',
            'Neglecting calcium, vitamin D, and protein intake (exercise alone insufficient)'
        ],
        keyPoints: [
            'Bone density peak is around age 30, then gradually declines',
            'Menopause accelerates bone loss: 2-3% per year for 5-10 years',
            'Muscle mass protects bones - when muscles contract, they pull on bones and stimulate bone-building cells, making muscle building essential for bone health',
            'Exercise MUST include load/impact to stimulate bone formation',
            'Get a DEXA scan if over 50 or risk factors present',
            'Combine with: adequate calcium (1000-1200mg/day), vitamin D (blood test), protein (1.2g per kg body weight)',
            'Never too late to start - bone responds to loading at any age'
        ]
    },
    
    'pelvic-floor': {
        title: '🌸 Pelvic Floor Strength Protocol',
        subtitle: 'Targeted exercises for bladder control and pelvic support',
        evidence: 'Pelvic floor muscle training reduces incontinence episodes by 50-75% in women with stress incontinence. Consistent practice for 3-6 months shows best results.',
        protocols: [
            {
                name: 'Pelvic Floor Muscle Training (Kegels)',
                frequency: '10 minutes, 2-3 times daily',
                exercises: [
                    'Find the muscles: imagine stopping urine mid-flow (but don\'t actually do this)',
                    'Squeeze and lift the pelvic floor muscles',
                    'Hold for 5 seconds, then relax for 5 seconds',
                    'Repeat 10 times = 1 set',
                    'Aim for 3 sets throughout the day (morning, afternoon, evening)',
                    'Progress to holding 10 seconds as strength improves'
                ],
                tips: [
                    'Breathe normally - don\'t hold your breath',
                    'Do not tighten buttocks, thighs, or abdomen',
                    'If unsure you\'re doing it correctly, see a pelvic floor physiotherapist',
                    'Consistency is everything - daily practice essential',
                    'Results typically seen after 6-12 weeks of consistent practice'
                ]
            },
            {
                name: 'Functional Pelvic Floor Integration',
                frequency: 'Throughout the day',
                exercises: [
                    'Engage pelvic floor BEFORE coughing, sneezing, lifting',
                    'Practice "the knack": contract pelvic floor anticipating pressure',
                    'Squat with pelvic floor engagement (neutral spine)',
                    'Bridge exercise with pelvic floor contraction at top',
                    'Practise pelvic floor lifts in different positions: sitting, standing, lying'
                ],
                tips: [
                    'Pelvic floor should work automatically in daily life',
                    'Anticipatory contraction prevents leakage',
                    'Functional training more effective than Kegels alone',
                    'Work on coordination, not just strength'
                ]
            },
            {
                name: 'Supporting Exercises',
                frequency: '20-30 minutes, 2-3 days per week',
                exercises: [
                    'Deep core work: gentle abdominal engagement',
                    'Squats and lunges (proper form, don\'t bear down)',
                    'Hip strengthening: clamshells, side leg raises',
                    'Glute bridges',
                    'Bird dog exercise (opposite arm and leg raises)',
                    'Pilates or yoga focused on core and pelvic floor'
                ],
                tips: [
                    'Core and pelvic floor work together',
                    'Never bear down or strain during exercises',
                    'Focus on gentle engagement, not maximum force',
                    'If exercises cause leakage, modify or seek professional guidance'
                ]
            }
        ],
        avoid: [
            'Bearing down or straining (worsens prolapse risk)',
            'High-impact exercise until pelvic floor is strong (jumping, running)',
            'Heavy lifting without proper pelvic floor engagement',
            'Doing pelvic floor exercises while urinating (can cause retention issues)',
            'Chronic constipation (straining weakens pelvic floor)',
            'Ignoring symptoms hoping they\'ll resolve (early intervention most effective)'
        ],
        keyPoints: [
            'See a pelvic floor physiotherapist for assessment - many women do Kegels incorrectly',
            'Pelvic floor exercises are FIRST-LINE treatment, not optional',
            'Consistency is essential: 3 months minimum to see benefits',
            'Combine with lifestyle: healthy weight, constipation management, adequate protein',
            'If no improvement after 3 months of consistent practice, see your GP',
            'Some women have overactive (too tight) pelvic floors - need relaxation, not strengthening'
        ]
    }
};

// Display protocol function
function displayProtocol(protocolId) {
    const protocol = movementProtocols[protocolId];
    if (!protocol) return;
    
    const contentArea = document.getElementById('protocolContent');
    
    let html = `
        <div style="background: white; border-radius: 20px; padding: 2.5rem; box-shadow: 0 8px 30px rgba(116, 139, 117, 0.15); margin-bottom: 2rem; animation: fadeInUp 0.5s ease-out;">
            <h2 style="color: #E91E63; margin-bottom: 0.5rem;">${protocol.title}</h2>
            <p style="font-size: 1.1rem; color: var(--text-medium); margin-bottom: 1.5rem; font-style: italic;">${protocol.subtitle}</p>
            
            <div style="background: linear-gradient(135deg, rgba(116, 139, 117, 0.1), rgba(156, 175, 136, 0.08)); padding: 1.5rem; border-radius: 12px; border-left: 4px solid #E91E63; margin-bottom: 2rem;">
                <h4 style="color: #E91E63; margin-bottom: 0.8rem;">📚 What the Evidence Says</h4>
                <p style="margin: 0; line-height: 1.7;">${protocol.evidence}</p>
            </div>
    `;
    
    // Add each protocol
    protocol.protocols.forEach((p, idx) => {
        html += `
            <div style="margin-bottom: 2.5rem; padding-bottom: 2rem; ${idx < protocol.protocols.length - 1 ? 'border-bottom: 2px solid var(--light-green);' : ''}">
                <h3 style="color: #E91E63; margin-bottom: 0.5rem;">💪 ${p.name}</h3>
                <p style="font-weight: 600; color: var(--text-dark); margin-bottom: 1rem;">⏱️ ${p.frequency}</p>
                
                <h4 style="color: var(--text-dark); margin-bottom: 0.8rem; font-size: 1rem;">Exercises:</h4>
                <ul style="margin-bottom: 1.5rem; padding-left: 1.5rem;">
                    ${p.exercises.map(ex => `<li style="margin-bottom: 0.5rem; line-height: 1.6;">${ex}</li>`).join('')}
                </ul>
                
                <h4 style="color: var(--text-dark); margin-bottom: 0.8rem; font-size: 1rem;">💡 Tips for Success:</h4>
                <ul style="padding-left: 1.5rem;">
                    ${p.tips.map(tip => `<li style="margin-bottom: 0.5rem; line-height: 1.6;">${tip}</li>`).join('')}
                </ul>
            </div>
        `;
    });
    
    // Add avoid section if present
    if (protocol.avoid && protocol.avoid.length > 0) {
        html += `
            <div style="background: rgba(255, 200, 200, 0.1); padding: 1.5rem; border-radius: 12px; border-left: 4px solid #FF6B6B; margin-bottom: 2rem;">
                <h4 style="color: #D9534F; margin-bottom: 0.8rem;">⚠️ What to Avoid</h4>
                <ul style="padding-left: 1.5rem; margin: 0;">
                    ${protocol.avoid.map(item => `<li style="margin-bottom: 0.5rem; line-height: 1.6;">${item}</li>`).join('')}
                </ul>
            </div>
        `;
    }
    
    // Add key points
    if (protocol.keyPoints && protocol.keyPoints.length > 0) {
        html += `
            <div style="background: linear-gradient(135deg, rgba(156, 175, 136, 0.2), rgba(200, 213, 185, 0.15)); padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem;">
                <h4 style="color: #E91E63; margin-bottom: 0.8rem;">🔑 Key Points to Remember</h4>
                <ul style="padding-left: 1.5rem; margin: 0;">
                    ${protocol.keyPoints.map(point => `<li style="margin-bottom: 0.5rem; line-height: 1.6; font-weight: 500;">${point}</li>`).join('')}
                </ul>
            </div>
        `;
    }
    
    html += `
            <div style="background: rgba(255, 243, 205, 0.5); padding: 1.2rem; border-radius: 12px; border-left: 4px solid #FDB44B; margin-top: 2rem;">
                <p style="margin: 0; font-size: 0.95rem; line-height: 1.6;"><strong>⚠️ Important:</strong> Always consult your GP before starting a new exercise programme, especially if you have existing health conditions. Consider working with a qualified physiotherapist, personal trainer, or exercise professional who can provide personalised guidance and ensure proper technique. This information is educational and does not replace a personalised fitness or exercise programme.</p>
            </div>
        </div>
    `;
    
    contentArea.innerHTML = html;
    contentArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// Add click handlers for protocol navigation buttons
document.querySelectorAll('.protocol-nav-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const protocol = this.getAttribute('data-protocol');
        
        // Remove active class from all buttons
        document.querySelectorAll('.protocol-nav-btn').forEach(b => {
            b.style.background = 'white';
            b.style.borderColor = 'var(--light-green)';
            b.style.color = 'var(--text-dark)';
        });
        
        // Add active styling to clicked button
        this.style.background = 'var(--primary-green)';
        this.style.borderColor = '#E91E63';
        this.style.color = 'white';
        
        // Display the protocol
        displayProtocol(protocol);
    });
    
    // Add hover effects
    btn.addEventListener('mouseenter', function() {
        if (this.style.background !== 'var(--primary-green)') {
            this.style.background = 'var(--light-green)';
            this.style.borderColor = 'var(--secondary-green)';
        }
    });
    
    btn.addEventListener('mouseleave', function() {
        if (this.style.background !== 'var(--primary-green)') {
            this.style.background = 'white';
            this.style.borderColor = 'var(--light-green)';
        }
    });
});


            document.getElementById('nextFromProgressBtn').addEventListener('click', function() {
                document.getElementById('progressContainer').style.display = 'none';
                document.getElementById('toolkitContainer').classList.remove('active');
                document.getElementById('toolkitContainer').style.display = 'none';
                document.getElementById('welcomeScreen').style.display = 'flex';
                document.getElementById('welcomeScreen').style.animation = 'fadeInUp 0.5s ease-out forwards';
                window.scrollTo(0, 0);
            });
        }

// ========================================
// ORIENTATION OVERLAY SYSTEM
// ========================================

function showOrientationOverlay() {
    const overlay = document.createElement('div');
    overlay.id = 'orientationOverlay';
    overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        animation: fadeIn 0.3s ease-out;
    `;
    
    overlay.innerHTML = `
        <div style="background: white; border-radius: 20px; max-width: 900px; width: 100%; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0,0,0,0.3); animation: slideUp 0.4s ease-out;">
            <div style="background: linear-gradient(135deg, #E91E63, #C2185B); color: #2C3E50; padding: 2rem; border-radius: 20px 20px 0 0; text-align: center; position: relative;">
                <button onclick="closeOrientation()" style="position: absolute; top: 1rem; right: 1rem; background: rgba(255, 255, 255, 0.95); border: 2px solid white; color: #E91E63; font-size: 1.8rem; cursor: pointer; width: 44px; height: 44px; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s; font-weight: bold; box-shadow: 0 2px 8px rgba(0,0,0,0.2);" onmouseover="this.style.transform='rotate(90deg) scale(1.1)'; this.style.background='white'" onmouseout="this.style.transform='rotate(0) scale(1)'; this.style.background='rgba(255, 255, 255, 0.95)'">×</button>
                <h2 style="margin: 0 0 0.5rem 0; font-size: 2rem;">🎯 Welcome to Your Menopause Toolkit</h2>
                <p style="margin: 0; font-size: 1.1rem; opacity: 0.95;">Let's find the perfect starting point for you</p>
            </div>
            
            <div style="padding: 2rem;">
                <p style="text-align: center; color: var(--text-medium); font-size: 1.05rem; margin-bottom: 2rem; line-height: 1.6;">
                    This toolkit contains <strong>180 flashcards</strong>, <strong>96 recipes</strong>, and comprehensive tracking tools. Choose your path:
                </p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                    <!-- Pathway 1: Understanding Symptoms -->
                    <div onclick="startWithSymptoms()" style="background: linear-gradient(135deg, rgba(155, 126, 189, 0.1), rgba(155, 126, 189, 0.05)); border: 2px solid #9B7EBD; border-radius: 16px; padding: 1.5rem; cursor: pointer; transition: all 0.3s; text-align: center;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 25px rgba(155, 126, 189, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="font-size: 3rem; margin-bottom: 0.5rem;">🔍</div>
                        <h3 style="color: #9B7EBD; margin-bottom: 0.5rem; font-size: 1.2rem;">I want to understand my symptoms</h3>
                        <p style="color: var(--text-medium); font-size: 0.9rem; margin: 0;">Browse 133 symptom cards with "what's happening" and "what helps"</p>
                    </div>
                    
                    <!-- Pathway 2: Nutrition Focus -->
                    <div onclick="startWithNutrition()" style="background: linear-gradient(135deg, rgba(255, 159, 127, 0.1), rgba(255, 159, 127, 0.05)); border: 2px solid #FF9F7F; border-radius: 16px; padding: 1.5rem; cursor: pointer; transition: all 0.3s; text-align: center;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 25px rgba(255, 159, 127, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="font-size: 3rem; margin-bottom: 0.5rem;">🥗</div>
                        <h3 style="color: #FF9F7F; margin-bottom: 0.5rem; font-size: 1.2rem;">I want to improve my nutrition</h3>
                        <p style="color: var(--text-medium); font-size: 0.9rem; margin: 0;">Explore 96 Mediterranean recipes and calculate your protein target</p>
                    </div>
                    
                    <!-- Pathway 3: Daily Tracking -->
                    <div onclick="startWithTracking()" style="background: linear-gradient(135deg, rgba(142, 191, 181, 0.1), rgba(142, 191, 181, 0.05)); border: 2px solid #8EBFB5; border-radius: 16px; padding: 1.5rem; cursor: pointer; transition: all 0.3s; text-align: center;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 25px rgba(142, 191, 181, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="font-size: 3rem; margin-bottom: 0.5rem;">📊</div>
                        <h3 style="color: #8EBFB5; margin-bottom: 0.5rem; font-size: 1.2rem;">I want to track my progress</h3>
                        <p style="color: var(--text-medium); font-size: 0.9rem; margin: 0;">Start your daily diary, log symptoms, and monitor patterns</p>
                    </div>
                    
                    <!-- Pathway 4: Quick Relief -->
                    <div onclick="startWithSOS()" style="background: linear-gradient(135deg, rgba(255, 181, 197, 0.1), rgba(255, 181, 197, 0.05)); border: 2px solid #FFB5C5; border-radius: 16px; padding: 1.5rem; cursor: pointer; transition: all 0.3s; text-align: center;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 25px rgba(255, 181, 197, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="font-size: 3rem; margin-bottom: 0.5rem;">🆘</div>
                        <h3 style="color: #E74C3C; margin-bottom: 0.5rem; font-size: 1.2rem;">I need help right now</h3>
                        <p style="color: var(--text-medium); font-size: 0.9rem; margin: 0;">Quick relief protocols for hot flushes, anxiety, and sleep</p>
                    </div>
                </div>
                
                <div style="text-align: center; padding-top: 1.5rem; border-top: 2px dashed #E5E7EB;">
                    <button onclick="closeOrientation()" style="padding: 1rem 2rem; background: var(--primary-green); color: #2C3E50; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s; margin-bottom: 1rem;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 15px rgba(255, 209, 209, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        I want to explore on my own
                    </button>
                    <div style="margin-top: 1rem;">
                        <label style="display: inline-flex; align-items: center; gap: 0.5rem; cursor: pointer; font-size: 0.9rem; color: var(--text-medium);">
                            <input type="checkbox" id="dontShowAgain" style="width: 18px; height: 18px; cursor: pointer;">
                            Don't show this again
                        </label>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(overlay);
    
    // Add CSS animations
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
    `;
    document.head.appendChild(style);
}

function closeOrientation() {
    const checkbox = document.getElementById('dontShowAgain');
    if (checkbox && checkbox.checked) {
        localStorage.setItem('dontShowOrientation', 'true');
    }
    
    const overlay = document.getElementById('orientationOverlay');
    if (overlay) {
        overlay.style.animation = 'fadeOut 0.3s ease-out';
        setTimeout(() => overlay.remove(), 300);
    }
    
    // Add fadeOut animation if not already present
    if (!document.querySelector('style[data-orientation-animations]')) {
        const style = document.createElement('style');
        style.setAttribute('data-orientation-animations', 'true');
        style.textContent = `
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    }
}

// Pathway functions
function startWithSymptoms() {
    closeOrientation();
    document.getElementById('welcomeScreen').style.display = 'none';
    document.getElementById('toolkitContainer').style.display = 'block';
    document.getElementById('toolkitContainer').classList.add('active');
    showSection('symptoms');
}

function startWithNutrition() {
    closeOrientation();
    document.getElementById('welcomeScreen').style.display = 'none';
    document.getElementById('toolkitContainer').style.display = 'block';
    document.getElementById('toolkitContainer').classList.add('active');
    showSection('recipes');
}

function startWithTracking() {
    closeOrientation();
    document.getElementById('welcomeScreen').style.display = 'none';
    document.getElementById('toolkitContainer').style.display = 'block';
    document.getElementById('toolkitContainer').classList.add('active');
    showSection('diary');
}

function startWithSOS() {
    closeOrientation();
    document.getElementById('welcomeScreen').style.display = 'none';
    document.getElementById('toolkitContainer').style.display = 'block';
    document.getElementById('toolkitContainer').classList.add('active');
    showSection('sos');
}

function checkFirstVisit() {
    // Check if user has opted out or visited before
    if (localStorage.getItem('dontShowOrientation') === 'true' || 
        localStorage.getItem('hasVisitedBefore') === 'true') {
        return;
    }
    
    // Show orientation overlay
    showOrientationOverlay();
    
    // Mark as visited
    localStorage.setItem('hasVisitedBefore', 'true');
}

function showOrientationManually() {
    showOrientationOverlay();
}

// ========================================
// INITIALIZATION - Orientation disabled by default
// ========================================

// checkFirstVisit(); // Disabled auto-popup - orientation now manual-access only

    </script>
    </div> <!-- Close toolkit-container -->
    </div> <!-- Close container -->
</body>
</html>
